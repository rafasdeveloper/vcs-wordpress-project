<<<<<<< HEAD
"use strict";(globalThis.webpackChunk_wcAdmin_webpackJsonp=globalThis.webpackChunk_wcAdmin_webpackJsonp||[]).push([[592],{90700:(e,o,t)=>{t.d(o,{A:()=>s});var r=t(5573),c=t(39793);const s=(0,c.jsx)(r.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,c.jsx)(r.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"})})},56537:(e,o,t)=>{t.d(o,{A:()=>s});var r=t(5573),c=t(39793);const s=(0,c.jsx)(r.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,c.jsx)(r.Path,{d:"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z"})})},48214:(e,o,t)=>{t.d(o,{A:()=>s});var r=t(5573),c=t(39793);const s=(0,c.jsx)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,c.jsx)(r.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})})},73290:(e,o,t)=>{t.d(o,{A:()=>s});var r=t(5573),c=t(39793);const s=(0,c.jsx)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,c.jsx)(r.Path,{d:"M12 3.2c-4.8 0-8.8 3.9-8.8 8.8 0 4.8 3.9 8.8 8.8 8.8 4.8 0 8.8-3.9 8.8-8.8 0-4.8-4-8.8-8.8-8.8zm0 16c-4 0-7.2-3.3-7.2-7.2C4.8 8 8 4.8 12 4.8s7.2 3.3 7.2 7.2c0 4-3.2 7.2-7.2 7.2zM11 17h2v-6h-2v6zm0-8h2V7h-2v2z"})})},38150:(e,o,t)=>{t.d(o,{A:()=>s});var r=t(5573),c=t(39793);const s=(0,c.jsx)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,c.jsx)(r.Path,{d:"M13 19h-2v-2h2v2zm0-6h-2v-2h2v2zm0-6h-2V5h2v2z"})})},20273:(e,o,t)=>{t.d(o,{A:()=>s});var r=t(5573),c=t(39793);const s=(0,c.jsx)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,c.jsx)(r.Path,{fillRule:"evenodd",d:"M6.5 8a1.5 1.5 0 103 0 1.5 1.5 0 00-3 0zM8 5a3 3 0 100 6 3 3 0 000-6zm6.5 11a1.5 1.5 0 103 0 1.5 1.5 0 00-3 0zm1.5-3a3 3 0 100 6 3 3 0 000-6zM5.47 17.41a.75.75 0 001.06 1.06L18.47 6.53a.75.75 0 10-1.06-1.06L5.47 17.41z",clipRule:"evenodd"})})},79745:(e,o,t)=>{t.d(o,{$k:()=>c,Q_:()=>n,eN:()=>r,x6:()=>s});const r=["image"],c=60,s=20,n=200},38966:(e,o,t)=>{t.d(o,{ex:()=>s,ot:()=>c});var r=t(52619);const c="entrepreneur-signup";(0,r.addFilter)("woocommerce_admin_persisted_queries","woocommerce_admin_customize_your_store",(e=>(e.push("ref"),e)));const s=()=>new URLSearchParams(window.location.search).get("ref")===c},30737:(e,o,t)=>{t.d(o,{G5:()=>y,QL:()=>x,ow:()=>w,wY:()=>h,k8:()=>g,bp:()=>b});var r=t(27723),c=t(4921),s=t(56427),n=t(96476),a=t(36849),i=t(98846),l=t(39793);const m=({siteUrl:e})=>(0,l.jsx)("iframe",{className:"preview-iframe",src:e,title:"Preview",tabIndex:-1});var u=t(56109),d=t(42859),p=t(47884);const _=({bannerTitle:e,bannerText:o,bannerClass:t,showAIDisclaimer:n,buttonIsLink:m,bannerButtonOnClick:u,bannerButtonText:d,secondaryButton:p,previewBanner:_,children:h})=>(0,l.jsxs)("div",{className:(0,c.A)("woocommerce-customize-store-banner",t),children:[(0,l.jsxs)("div",{className:"woocommerce-customize-store-banner-content",children:[(0,l.jsxs)("div",{className:"banner-actions",children:[(0,l.jsx)("h1",{children:e}),(0,l.jsx)("p",{children:o}),d&&(0,l.jsx)(s.Button,{onClick:()=>u&&u(),variant:m?"link":"primary",children:d}),p,n&&(0,l.jsx)("p",{className:"ai-disclaimer",children:(0,a.A)({mixedString:(0,r.__)("Powered by experimental AI. {{link}}Learn more{{/link}}","woocommerce"),components:{link:(0,l.jsx)(i.Link,{href:"https://automattic.com/ai-guidelines",target:"_blank",type:"external"})}})})]}),h]}),_]}),h=()=>(0,l.jsx)(_,{bannerTitle:(0,r.__)("Looking to design your store using AI?","woocommerce"),bannerText:(0,r.__)("Unfortunately, the [AI Store designer] isn't available right now as we can't detect your network. Please check your internet connection.","woocommerce"),bannerClass:"offline-banner",bannerButtonOnClick:()=>{},showAIDisclaimer:!0}),w=({sendEvent:e})=>(0,l.jsx)(_,{bannerTitle:(0,r.__)("Looking to design your store using AI?","woocommerce"),bannerText:(0,r.__)("It looks like you're using Jetpack's offline mode — switch to online mode to start designing with AI.","woocommerce"),bannerClass:"offline-banner",buttonIsLink:!1,bannerButtonOnClick:()=>{e({type:"JETPACK_OFFLINE_HOWTO"})},bannerButtonText:(0,r.__)("Find out how","woocommerce"),showAIDisclaimer:!0}),g=({redirectToCYSFlow:e})=>(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(_,{bannerTitle:(0,r.__)("Design your own","woocommerce"),bannerText:(0,r.__)("Quickly create a beautiful store using our built-in store designer. Choose your layout, select a style, and much more.","woocommerce"),bannerClass:"no-ai-banner",bannerButtonText:(0,r.__)("Start designing","woocommerce"),bannerButtonOnClick:()=>{e()},showAIDisclaimer:!1})}),x=()=>{const e=(0,u.Qk)("siteUrl")+"?cys-hide-admin-bar=1";return(0,l.jsx)(_,{bannerTitle:(0,r.__)("Customize your theme","woocommerce"),bannerText:(0,r.__)("Customize everything from the color palette and the fonts to the page layouts, making sure every detail aligns with your brand.","woocommerce"),bannerClass:"existing-no-ai-theme-banner",buttonIsLink:!1,bannerButtonOnClick:()=>{(0,p.s)("customize_your_store_intro_customize_click",{theme_type:"block"}),(0,d.$g)(window,(0,n.getNewPath)({customizing:!0},"/customize-store/assembler-hub",{}))},bannerButtonText:(0,r.__)("Customize your store","woocommerce"),showAIDisclaimer:!1,previewBanner:(0,l.jsx)(m,{siteUrl:e})})},y=()=>{const e=(0,u.Qk)("siteUrl")+"?cys-hide-admin-bar=1";return(0,l.jsx)(_,{bannerTitle:(0,r.__)("Customize your theme","woocommerce"),bannerText:(0,r.__)("Customize everything from the color palette and the fonts to the page layouts, making sure every detail aligns with your brand.","woocommerce"),bannerClass:"existing-no-ai-theme-banner",buttonIsLink:!1,bannerButtonOnClick:()=>{(0,p.s)("customize_your_store_intro_customize_click",{theme_type:"classic"}),(0,d.$g)(window,"customize.php?return=/wp-admin/themes.php")},bannerButtonText:(0,r.__)("Go to the Customizer","woocommerce"),showAIDisclaimer:!1,previewBanner:(0,l.jsx)(m,{siteUrl:e})})},b=()=>{const e=(0,u.Qk)("siteUrl")+"?cys-hide-admin-bar=1";return(0,l.jsx)(_,{bannerTitle:(0,r.__)("Customize your theme","woocommerce"),bannerText:(0,r.__)("Customize everything from the color palette and the fonts to the page layouts, making sure every detail aligns with your brand.","woocommerce"),bannerClass:"existing-no-ai-theme-banner",buttonIsLink:!1,bannerButtonOnClick:()=>{(0,p.s)("customize_your_store_intro_customize_click",{theme_type:"block"}),(0,d.$g)(window,`${u.kY}site-editor.php`)},bannerButtonText:(0,r.__)("Go to the Editor","woocommerce"),showAIDisclaimer:!1,previewBanner:(0,l.jsx)(m,{siteUrl:e})})}},81392:(e,o,t)=>{t.d(o,{z:()=>m});var r=t(56427),c=t(27723),s=t(98846),n=t(86087),a=t(56109),i=t(47884),l=t(39793);const m=({isNoAiFlow:e=!0,setIsModalOpen:o,redirectToCYSFlow:t})=>(0,l.jsxs)(r.Modal,{className:"woocommerce-customize-store__theme-switch-warning-modal",title:(0,c.__)("Are you sure you want to design a new theme?","woocommerce"),onRequestClose:()=>o(!1),shouldCloseOnClickOutside:!1,children:[(0,l.jsx)("p",{children:e?(0,c.__)("Your active theme will be changed and you could lose any changes you’ve made to it.","woocommerce"):(0,n.createInterpolateElement)((0,c.__)("The Store Designer will create a new store design for you, and you'll lose any changes you've made to your active theme. If you'd prefer to continue editing your theme, you can do so via the <EditorLink>Editor</EditorLink>.","woocommerce"),{EditorLink:(0,l.jsx)(s.Link,{onClick:()=>(window.open(`${a.kY}site-editor.php`,"_blank"),!1),href:""})})}),(0,l.jsxs)("div",{className:"woocommerce-customize-store__theme-switch-warning-modal-footer",children:[(0,l.jsx)(r.Button,{onClick:()=>{o(!1)},variant:"link",children:(0,c.__)("Cancel","woocommerce")}),(0,l.jsx)(r.Button,{onClick:()=>{o(!1),(0,i.s)("customize_your_store_agree_to_theme_switch_click"),t()},variant:"primary",children:(0,c.__)("Design a new theme","woocommerce")})]})]})},47884:(e,o,t)=>{t.d(o,{s:()=>n});var r=t(83306),c=t(38966),s=t(97687);const n=(e,o)=>{(0,s.E)()&&(0,c.ex)()?(0,r.recordEvent)(e,{...o,ref:c.ot}):(0,r.recordEvent)(e,o)}},42859:(e,o,t)=>{t.d(o,{$g:()=>d,AV:()=>l,Gy:()=>_,Hr:()=>p,Vu:()=>u,am:()=>h,d4:()=>a,j1:()=>i,q2:()=>m});var r=t(96476),c=t(86817),s=t(56109),n=t(79745);function a(e){return e.document!==e.parent.document&&null!==e.parent.document.body.querySelector(".woocommerce-customize-store__container")}function i(){window.parent.postMessage({type:"iframe-loaded"},(0,s.Qk)("homeUrl"))}function l(e){window.addEventListener("message",(o=>{"iframe-loaded"===o.data.type&&e()}))}function m(e){window.addEventListener("message",(o=>{"assemberBackButtonClicked"===o.data.type&&e()}))}function u(){const e=[(0,s.Qk)("homeUrl")];function o(o){if(e.includes(o.origin)&&o.data&&"string"==typeof o.data.type&&"string"==typeof o.data.url&&"navigate"===o.data.type)try{const t=(0,r.parseAdminUrl)(o.data.url);if(!e.some((e=>t.origin===e)))throw new Error(`Blocked navigation to untrusted URL: ${t.href}`);window.location.href=t.href}catch(e){(0,c.captureException)(e)}}return window.addEventListener("message",o,!1),function(){window.removeEventListener("message",o,!1)}}function d(e,o){try{if(a(e))e.parent.postMessage({type:"navigate",url:o},(0,s.Qk)("homeUrl"));else{const t=(0,r.parseAdminUrl)(o);e.location.href=t.href}}catch(e){(0,c.captureException)(e)}}function p(e){const o=e.contentDocument||e.contentWindow?.document;o?.addEventListener("click",(function(e){if(e.target){const o=e.target?.closest("a");o&&"_blank"===o.target?(e.preventDefault(),window.open(o.href,"_blank")):o&&(e.preventDefault(),window.location.href=o.href)}}))}const _=(e,o=n.$k)=>e.replaceAll(/<!-- wp:site-logo\s*(\{.*?\})?\s*\/-->/g,((e,t)=>{if(t){const e=JSON.parse(t);return e.width=o,`\x3c!-- wp:site-logo ${JSON.stringify(e)} /--\x3e`}return`\x3c!-- wp:site-logo {"width":${o}} /--\x3e`})),h=(e,o)=>e.map(((e,t,r)=>{const c=r[t+1];if(!c)return[e];const s=[e],n=(c.progress-e.progress)/o;for(let t=0;t<o;t++)s.push({...e,progress:e.progress+(t+1)*n});return s})).flat()},12974:(e,o,t)=>{t.d(o,{Ay:()=>n});var r=t(13240);const c=["a","b","em","i","strong","p","br"],s=["target","href","rel","name","download"],n=e=>({__html:(0,r.sanitize)(e,{ALLOWED_TAGS:c,ALLOWED_ATTR:s})})},25595:(e,o,t)=>{t.d(o,{A:()=>p});var r=t(4921),c=t(86087),s=t(73290),n=t(72744),a=t(20273),i=t(24148),l=t(48214),m=t(12974),u=t(39793);const d={info:s.A,check:n.A,percent:a.A};function p(e){const{id:o,description:t,children:s,icon:n,isDismissible:a=!0,variant:p="info",className:_,onClose:h,onLoad:w}=e,[g,x]=(0,c.useState)("true"!==localStorage.getItem(`wc-marketplaceNoticeClosed-${o}`));if((0,c.useEffect)((()=>{g&&"function"==typeof w&&w()}),[g]),!g)return null;const y=(0,r.A)("woocommerce-marketplace__notice",`woocommerce-marketplace__notice--${p}`,{"is-dismissible":a},_),b=d[n||"info"],v=(0,r.A)("woocommerce-marketplace__notice-icon",`woocommerce-marketplace__notice-icon--${p}`);return(0,u.jsxs)("div",{className:y,children:[n&&(0,u.jsx)("span",{className:v,children:(0,u.jsx)(i.A,{icon:b})}),(0,u.jsxs)("div",{className:"woocommerce-marketplace__notice-content",children:[(0,u.jsx)("p",{className:"woocommerce-marketplace__notice-description",dangerouslySetInnerHTML:(0,m.Ay)(t)}),s&&(0,u.jsx)("div",{className:"woocommerce-marketplace__notice-children",children:s})]}),a&&(0,u.jsx)("button",{className:"woocommerce-marketplace__notice-close","aria-label":"Close",onClick:()=>{x(!1),localStorage.setItem(`wc-marketplaceNoticeClosed-${o}`,"true"),"function"==typeof h&&h()},children:(0,u.jsx)(i.A,{icon:l.A})})]})}},55516:(e,o,t)=>{t.d(o,{A:()=>c});var r=t(39793);function c(){return(0,r.jsxs)("svg",{width:"72",height:"60",viewBox:"0 0 72 60",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsxs)("g",{clipPath:"url(#clip0_4074_10418)",children:[(0,r.jsx)("path",{d:"M68.5301 33.3144C68.0263 32.1006 66.3348 32.344 65.8443 31.1636C65.3538 29.9832 66.7251 28.9562 66.2213 27.7458C65.7175 26.5354 64.0259 26.7755 63.5355 25.5951C63.045 24.4147 64.4163 23.3877 63.9125 22.1773C63.4087 20.9669 61.7171 21.207 61.2267 20.0266C60.7362 18.8462 62.1075 17.8192 61.6037 16.6088C61.0999 15.395 59.4083 15.6385 58.9179 14.4581C58.4274 13.2777 59.7987 12.2507 59.2949 11.0403C58.7911 9.82652 57.0995 10.0699 56.6091 8.88955C56.1186 7.70915 57.4899 6.68214 56.9861 5.47174C56.4823 4.26134 54.7907 4.50142 54.3003 3.32102C53.8465 2.22733 55.0476 1.11696 54.8274 -0.00341797L0 22.5941C0.5038 23.8079 2.19537 23.5644 2.68582 24.7448C3.17627 25.9252 1.805 26.9522 2.3088 28.1626C2.8126 29.373 4.50417 29.133 4.99462 30.3134C5.48508 31.4937 4.11381 32.5208 4.61761 33.7312C5.12141 34.9416 6.81297 34.7015 7.30343 35.8819C7.79388 37.0623 6.42261 38.0893 6.92641 39.2997C7.43021 40.5134 9.12178 40.27 9.61223 41.4504C10.1027 42.6308 8.73142 43.6578 9.23522 44.8682C9.73902 46.0786 11.4306 45.8385 11.921 47.0189C12.4115 48.1993 11.0402 49.2263 11.544 50.4367C12.0478 51.6471 13.7394 51.4071 14.2298 52.5874C14.6836 53.6811 13.4825 54.7915 13.7027 55.9119L28.1928 49.9232L68.5368 33.3177L68.5301 33.3144Z",fill:"#720EEC"}),(0,r.jsx)("path",{d:"M13.696 55.912L28.1861 49.9234L52.3851 39.9634H7.46021C8.17086 40.4802 9.23852 40.5569 9.60886 41.4539C10.0993 42.6343 8.72805 43.6613 9.23185 44.8717C9.73565 46.0821 11.4272 45.842 11.9177 47.0224C12.4081 48.2028 11.0368 49.2298 11.5406 50.4402C12.0444 51.6506 13.736 51.4105 14.2265 52.5909C14.6802 53.6846 13.4791 54.795 13.6993 55.9154L13.696 55.912Z",fill:"#3C087E"}),(0,r.jsx)("path",{d:"M63.8523 41.9907C63.8523 37.4925 67.499 33.848 71.9998 33.848V23.988H17.873V33.848C22.3739 33.848 26.0206 37.4925 26.0206 41.9907C26.0206 46.4889 22.3739 50.1334 17.873 50.1334V59.9934H71.9998V50.1334C67.499 50.1334 63.8523 46.4889 63.8523 41.9907Z",fill:"#D1C1FF"}),(0,r.jsx)("path",{d:"M35.2527 37.676C35.2527 35.2051 37.0143 33.2878 39.6968 33.2878C42.3793 33.2878 44.1643 35.2051 44.1643 37.676C44.1643 40.1468 42.4026 42.0107 39.6968 42.0107C36.991 42.0107 35.2527 40.1201 35.2527 37.676ZM41.7954 37.676C41.7954 36.2288 40.9046 35.3385 39.6935 35.3385C38.4823 35.3385 37.6182 36.2288 37.6182 37.676C37.6182 39.1231 38.509 39.9601 39.6935 39.9601C40.8779 39.9601 41.7954 39.0664 41.7954 37.676ZM37.9852 51.0704L49.1789 33.5513H51.1774L39.9537 51.0704H37.9819H37.9852ZM44.8983 47.0524C44.8983 44.5849 46.6566 42.641 49.3391 42.641C52.0215 42.641 53.8065 44.5849 53.8065 47.0524C53.8065 49.5199 52.0182 51.3872 49.3391 51.3872C46.6599 51.3872 44.8983 49.4966 44.8983 47.0524ZM51.441 47.0524C51.441 45.6053 50.5468 44.715 49.3357 44.715C48.1246 44.715 47.2605 45.6053 47.2605 47.0524C47.2605 48.4996 48.1279 49.3365 49.3357 49.3365C50.5435 49.3365 51.441 48.4696 51.441 47.0524Z",fill:"#720EEC"})]}),(0,r.jsx)("defs",{children:(0,r.jsx)("clipPath",{id:"clip0_4074_10418",children:(0,r.jsx)("rect",{width:"72",height:"60",fill:"white"})})})]})}},62640:(e,o,t)=>{t.d(o,{A:()=>u});var r=t(56427),c=t(27723),s=t(86087),n=t(83306),a=t(12974),i=t(55516),l=t(39793);const m={percent:i.A},u=({promotion:e})=>{var o,t;const i=window.location.pathname+window.location.search,u=()=>JSON.parse(localStorage.getItem("wc-marketplaceDismissedPromos")||"[]"),[d,p]=(0,s.useState)(!u().includes(i));if((0,s.useEffect)((()=>{d&&(0,n.recordEvent)("marketplace_promotion_viewed",{path:i,format:"promo-card"})}),[d]),!d)return null;const _="promo-card"+(e.style?` ${e.style}`:""),h=(0,l.jsxs)("div",{className:"promo-content",children:[(0,l.jsx)("h2",{className:"promo-title",children:e.title?.en_US}),(0,l.jsx)("div",{className:"promo-text",dangerouslySetInnerHTML:(0,a.Ay)(e.content?.en_US)})]}),w=(0,l.jsxs)("div",{className:"promo-links",children:[(0,l.jsx)(r.Button,{className:"promo-cta",href:null!==(o=e.cta_link)&&void 0!==o?o:"",onClick:()=>((0,n.recordEvent)("marketplace_promotion_actioned",{path:i,target_uri:e.cta_link,format:"promo-card"}),!0),children:null!==(t=e.cta_label?.en_US)&&void 0!==t?t:""}),(0,l.jsx)(r.Button,{className:"promo-cta-link",onClick:()=>{p(!1),localStorage.setItem("wc-marketplaceDismissedPromos",JSON.stringify(u().concat(i))),(0,n.recordEvent)("marketplace_promotion_dismissed",{path:i,format:"promo-card"})},children:(0,c.__)("Dismiss","woocommerce")})]});function g(){if(e.icon&&Object.hasOwn(m,e.icon)){const o=m[e.icon];return o?(0,l.jsx)("div",{className:"promo-image",children:(0,s.createElement)(o)}):null}return null}return(0,l.jsx)("div",{className:_,children:"has-background"===e?.style?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"promo-content-links",children:[h,w]}),g()]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"promo-content-image",children:[h,g()]}),w]})})}},79492:(e,o,t)=>{t.d(o,{A:()=>i});var r=t(83306),c=t(56109),s=t(25595),n=t(62640),a=t(39793);const i=({format:e})=>{var o;if(!window?.wcMarketplace?.promotions||!Array.isArray(window?.wcMarketplace?.promotions))return null;const t=(null!==(o=window?.wcMarketplace?.promotions)&&void 0!==o?o:[]).filter((o=>o.format===e)),i=new URLSearchParams(window.location.search),l=i.get("page"),m=Date.now(),u=decodeURIComponent(i.get("path")||""),d=i.get("tab"),p=window.location.pathname+window.location.search,_=()=>{(0,r.recordEvent)("marketplace_promotion_viewed",{path:p,format:e})},h=()=>{(0,r.recordEvent)("marketplace_promotion_dismissed",{path:p,format:e})};return(0,a.jsx)(a.Fragment,{children:t.map(((e,o)=>{if(!e.pages)return null;if(!e.pages.some((e=>{if(e.pathname)return e.pathname===p;if(!e.path)return!1;const o=e=>e.startsWith("/")?e:`/${e}`,t=o(e.path),r=o(u);return e.page===l&&t===r&&(e.tab?d:!d)})))return null;const t=new Date(e.date_from_gmt).getTime(),r=new Date(e.date_to_gmt).getTime();return m<t||m>r?null:"promo-card"===e.format?(0,a.jsx)(n.A,{promotion:e},o):"notice"===e.format&&e?.content?(0,a.jsx)(s.A,{id:null!==(i=e.menu_item_id)&&void 0!==i?i:`promotion-${o}`,description:e.content[c.ne.userLocale]||e.content.en_US,variant:e.style?e.style:"info",icon:e?.icon||"",isDismissible:e.is_dismissible||!1,onLoad:_,onClose:h},o):null;var i}))})}},49428:(e,o,t)=>{t.r(o),t.d(o,{default:()=>po});var r=t(86087),c=t(56109),s=t(11488),n=t(39793);const a=(i="wc_iam_settings",{setWithExpiry:e=>{const o=new Date,t={data:e,expiry:new Date(o.getTime()+864e5).toISOString()};localStorage.setItem(i,JSON.stringify(t))},getWithExpiry:()=>{const e=localStorage.getItem(i);if(!e)return null;const o=JSON.parse(e);return new Date>new Date(o.expiry)?(localStorage.removeItem(i),null):o.data}});var i;const l=(0,r.createContext)({isLoading:!1,setIsLoading:()=>{},selectedTab:"",setSelectedTab:()=>{},isProductInstalled:()=>!1,addInstalledProduct:()=>{},searchResultsCount:{extensions:0,themes:0,"business-services":0},setSearchResultsCount:()=>{},iamSettings:{}});function m(e){const[o,t]=(0,r.useState)(!0),[i,m]=(0,r.useState)(""),[u,d]=(0,r.useState)({}),[p,_]=(0,r.useState)([]),[h,w]=(0,r.useState)({extensions:0,themes:0,"business-services":0}),g=(0,r.useCallback)((e=>{w((o=>({...o,...e})))}),[]);(0,r.useEffect)((()=>{const e=a.getWithExpiry();if(e)return void d(e);const o=`${s.H2}${s.rx}`;fetch(o).then((e=>{if(!e.ok)throw new Error(`Network response was not ok: ${e.statusText}`);return e.json()})).then((e=>{d(e),a.setWithExpiry(e)})).catch((e=>{console.error("Failed to fetch IAM settings:",e),d({})}))}),[]),(0,r.useEffect)((()=>{const e=(0,c.Qk)("wccomHelper",{}),o=e?.installedProducts;_(o)}),[]);const x={isLoading:o,setIsLoading:t,selectedTab:i,setSelectedTab:m,isProductInstalled:function(e){return p.includes(e)},addInstalledProduct:function(e){_([...p,e])},searchResultsCount:h,setSearchResultsCount:g,iamSettings:u};return(0,n.jsx)(l.Provider,{value:x,children:e.children})}var u=t(27723);function d(){return(0,n.jsx)("h1",{className:"woocommerce-marketplace__header-title",children:(0,u.__)("The WooCommerce Marketplace","woocommerce")})}var p,_=t(10790),h=t(56427),w=t(4921),g=t(96476);const x=(0,c.Qk)("wccomHelper",{}),y=null!==(p=x?.wooUpdateCount)&&void 0!==p?p:0,b=(e,o,t)=>{const{selectedTab:r,setSelectedTab:c}=e,a=e=>{e!==r&&(c(e),((e,o)=>{const t=o.term?{term:o.term.trim()}:{};(0,g.navigateTo)({url:(0,g.getNewPath)({tab:e===s.mz?void 0:e},s.q$,t)})})(e,t))},i=[];for(const e in o)i.push(o[e]?.href?(0,n.jsx)("a",{className:(0,w.A)("woocommerce-marketplace__tab-button","components-button",`woocommerce-marketplace__tab-${e}`),href:o[e]?.href,children:o[e]?.title},e):(0,n.jsxs)(h.Button,{className:(0,w.A)("woocommerce-marketplace__tab-button",`woocommerce-marketplace__tab-${e}`,{"is-active":e===r}),onClick:()=>a(e),children:[o[e]?.title,o[e]?.showUpdateCount&&(0,n.jsx)("span",{className:(0,w.A)("woocommerce-marketplace__update-count",`woocommerce-marketplace__update-count-${e}`,{"is-active":e===r}),children:(0,n.jsxs)("span",{children:[" ",o[e]?.updateCount," "]})})]},e));return i},v=e=>{const{additionalClassNames:o}=e,t=(0,r.useContext)(l),{isLoading:c,setSelectedTab:a}=t,{searchResultsCount:i}=t,m=(0,g.useQuery)(),d=(0,r.useMemo)((()=>({discover:{name:"discover",title:(0,u.__)("Discover","woocommerce"),showUpdateCount:!1,updateCount:0},extensions:{name:"extensions",title:(0,u.__)("Extensions","woocommerce"),showUpdateCount:!!m.term&&!c,updateCount:i.extensions},themes:{name:"themes",title:(0,u.__)("Themes","woocommerce"),showUpdateCount:!!m.term&&!c,updateCount:i.themes},"business-services":{name:"business-services",title:(0,u.__)("Business services","woocommerce"),showUpdateCount:!!m.term&&!c,updateCount:i["business-services"]},"my-subscriptions":{name:"my-subscriptions",title:(0,u.__)("My subscriptions","woocommerce"),showUpdateCount:y>0,updateCount:y}})),[m,c,i]);return(0,r.useEffect)((()=>{m?.tab&&d[m.tab]?a(m.tab):Object.keys(m).length>0&&a(s.mz)}),[m,a,d]),(0,n.jsx)("nav",{className:(0,w.A)("woocommerce-marketplace__tabs",o||[]),children:b(t,d,m)})};var f=t(83306);const k=function(){const[e,o]=(0,r.useState)(""),t=(0,u.__)("Search Marketplace","woocommerce"),c=(0,g.useQuery)();(0,r.useEffect)((()=>{c.term?o(c.term):o("")}),[c.term]);const a=o=>{const t=c;return t.tab&&"my-subscriptions"!==t.tab||(t.tab="extensions"),t.term=void 0!==o?o:e.trim(),t.search="1",t.term||delete t.term,(0,g.navigateTo)({url:(0,g.getNewPath)(t,s.q$,{})}),[]};return(0,n.jsx)(h.SearchControl,{label:t,placeholder:t,value:e,onChange:o,onKeyUp:e=>{"Enter"===e.key&&a(),"Escape"===e.key&&o("")},onClose:()=>{o(""),a("")},onFocus:()=>{(0,f.recordEvent)("marketplace_search_start",{current_search_term:e,current_tab:c.tab||"discover"})},className:"woocommerce-marketplace__search"})};function j(){return(0,n.jsx)("div",{className:"woocommerce-marketplace__header-container",children:(0,n.jsxs)("header",{className:"woocommerce-marketplace__header",children:[(0,n.jsx)(d,{}),(0,n.jsx)(v,{additionalClassNames:["woocommerce-marketplace__header-tabs"]}),(0,n.jsx)(k,{}),(0,n.jsx)("div",{className:"woocommerce-marketplace__header-meta",children:(0,n.jsx)(_.A,{page:"wc-addons"})})]})})}var N=t(20195),C=t(15001),M=t(93832),T=t(18537),A=t(40314);const I=function(e){const{product:o}=e,{user:t,currentUserCan:c}=(0,A.useUser)(),{selectedTab:s,isProductInstalled:a}=(0,r.useContext)(l),i={USD:"$%s",AUD:"A$%s",CAD:"C$%s",EUR:"€%s",GBP:"£%s"},m=e=>i[e]||"%s";function d(){return 0===o.price?(0,u.__)("Free download","woocommerce"):"primary"===o.freemium_type?(0,u.__)("Free plan available","woocommerce"):(0,u.sprintf)(m(o.currency),o.price)}function p(){return"primary"===o.freemium_type?"":0!==o.price?function(){if(1===o.billingPeriodInterval||""===o.billingPeriod)switch(o.billingPeriod){case"day":return(0,u.__)("daily","woocommerce");case"week":return(0,u.__)("weekly","woocommerce");case"month":return(0,u.__)("monthly","woocommerce");case"year":case"":return(0,u.__)("annually","woocommerce");default:return""}let e;switch(o.billingPeriod){case"day":e=(0,u.__)("days","woocommerce");break;case"week":e=(0,u.__)("weeks","woocommerce");break;case"month":e=(0,u.__)("months","woocommerce");break;default:e=(0,u.__)("years","woocommerce")}return(0,u.sprintf)((0,u.__)("every %1$d %2$s","woocommerce"),o.billingPeriodInterval,e)}():""}return o.slug&&a(o.slug)?(0,n.jsx)("span",{className:"woocommerce-marketplace__product-card__installed-label",children:(0,u.__)("Installed","woocommerce")}):(_=o,!(t&&_&&c("install_plugins")&&_.isInstallable&&"theme"!==_.type&&"discover"!==s)||_.slug&&a(_.slug)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"woocommerce-marketplace__product-card__price",children:[(0,n.jsxs)("span",{className:"woocommerce-marketplace__product-card__price-label",children:[(0,n.jsx)("span",{className:"screen-reader-text",children:o.isOnSale?(0,u.sprintf)((0,u.__)("Sale Price %1$s %3$s, regular price %2$s %3$s","woocommerce"),d(),(0,u.sprintf)(m(o.currency),o.regularPrice),p()):0!==o.price&&"primary"!==o.freemium_type?(0,u.sprintf)((0,u.__)(" %1$s, %2$s ","woocommerce"),d(),p()):d()}),(0,n.jsx)("span",{"aria-hidden":!0,children:d()})]}),o.isOnSale&&(0,n.jsx)("span",{className:"woocommerce-marketplace__product-card__on-sale","aria-hidden":!0,children:(0,u.sprintf)(m(o.currency),o.regularPrice)}),(0,n.jsx)("span",{className:"woocommerce-marketplace__product-card__price-billing","aria-hidden":!0,children:p()})]}),(0,n.jsx)("div",{className:"woocommerce-marketplace__product-card__rating",children:null!==o.averageRating&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"woocommerce-marketplace__product-card__rating-icon",children:(0,n.jsx)(h.Icon,{icon:"star-filled",size:16})}),(0,n.jsxs)("span",{className:"woocommerce-marketplace__product-card__rating-average",children:[(0,n.jsx)("span",{"aria-hidden":!0,children:o.averageRating}),(0,n.jsx)("span",{className:"screen-reader-text",children:(0,u.sprintf)((0,u.__)("%.1f stars","woocommerce"),o.averageRating)})]}),(0,n.jsxs)("span",{className:"woocommerce-marketplace__product-card__rating-count",children:[(0,n.jsxs)("span",{"aria-hidden":!0,children:["(",o.reviewsCount,")"]}),(0,n.jsx)("span",{className:"screen-reader-text",children:(0,u.sprintf)((0,u.__)("from %d reviews","woocommerce"),o.reviewsCount)})]})]})})]}):(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("span",{className:"woocommerce-marketplace__product-card__add-to-store",children:(0,n.jsx)(h.Button,{variant:"secondary",onClick:function(){(0,f.recordEvent)("marketplace_add_to_store_clicked",{product_id:o.id}),(0,g.navigateTo)({url:(0,g.getNewPath)({installProduct:o.id})})},children:(0,u.__)("Add to Store","woocommerce")})})}));var _};var S=t(95893),E=t(98846),L=t(13240);const D=["a","b","blockquote","br","button","cite","code","dd","div","dl","dt","em","h1","h2","h3","h4","h5","h6","hr","i","img","li","mark","ol","p","pre","small","span","strong","sub","sup","table","tbody","td","th","thead","tr","ul"],z=["alt","border","class","download","href","id","height","name","rel","role","sizes","src","srcset","style","target","title","width"],O={allowedTags:[...D,"path","svg","footer","header"],allowedAttributes:[...z,"d","fill","viewBox","xmlns"]};function U({productTitle:e,productVendor:o,productIcon:t,productId:c,triggerRef:s,onOpen:a,onClose:i}){const[l,m]=(0,r.useState)(!0),[d,p]=(0,r.useState)(null),[_,w]=(0,r.useState)(null),g=(0,r.useCallback)(((e="")=>{i&&i(e),setTimeout((()=>{s.current&&s.current.focus()}),100)}),[i,s]);(0,r.useEffect)((()=>{const e=e=>{const o=e.target.closest("a");if(o){const e=o.getAttribute("data-iam-tracks");e&&g(`marketplace_product_preview_modal_${e}_clicked`)}},o=document.querySelector(".woocommerce-marketplace__product-preview-modal__content");if(o)return o.addEventListener("click",e),()=>{o.removeEventListener("click",e)}}),[g]),(0,r.useEffect)((()=>{(async()=>{try{var e;const o=await(0,S.QC)(c),t=o?.data||o;if(!t?.html||!t?.css)throw new Error("Invalid preview data structure");const r=function(e,o={}){if(!e)return"";const t={ALLOWED_TAGS:o.allowedTags||D,ALLOWED_ATTR:o.allowedAttributes||z};return{__html:(0,L.sanitize)(e,t)}}(t.html,O),s=null!==(e=r?.__html)&&void 0!==e?e:"";p({html:s,css:t.css}),w(null)}catch(e){w((0,u.__)("Failed to load product preview.","woocommerce"))}finally{m(!1)}})(),a&&a()}),[a,c]);const x=(0,n.jsxs)("div",{className:"woocommerce-marketplace__product-preview-modal__header",children:[t&&(0,n.jsx)("img",{className:"woocommerce-marketplace__product-preview-modal__icon",src:t,alt:e}),(0,n.jsxs)("div",{className:"woocommerce-marketplace__product-preview-modal__header-content",children:[(0,n.jsx)("h2",{children:e}),o&&(0,n.jsxs)("div",{className:"woocommerce-marketplace__product-preview-modal__vendor",children:[(0,n.jsx)("span",{children:(0,u.__)("By","woocommerce")})," ",o]})]})]});return(0,n.jsxs)(h.Modal,{onRequestClose:()=>g("marketplace_product_preview_modal_dismissed"),className:"woocommerce-marketplace__product-preview-modal",closeButtonLabel:(0,u.__)("Close product preview","woocommerce"),size:"large",focusOnMount:"firstElement",title:(0,u.__)("The WooCommerce Marketplace","woocommerce"),children:[x,(0,n.jsxs)("div",{className:"woocommerce-marketplace__product-preview-modal__content",children:[l&&(0,n.jsx)("div",{className:"woocommerce-marketplace__product-preview-modal__loading",children:(0,n.jsx)(E.Spinner,{})}),_&&(0,n.jsx)("div",{className:"woocommerce-marketplace__product-preview-modal__error",children:_}),!l&&!_&&d&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("style",{children:d.css}),(0,n.jsx)("div",{dangerouslySetInnerHTML:{__html:d.html}})]})]})]})}const P=function(e){var o;const{isLoading:t,cardType:c}=e,s="compact"===c,a=(0,g.useQuery)(),[i,m]=(0,r.useState)(!1),d=(0,r.useRef)(null),p=null!==(o=e.product)&&void 0!==o?o:{id:null,title:"",description:"",vendorName:"",vendorUrl:"",icon:"",label:null,primary_color:null,url:"",price:0,image:"",averageRating:null,reviewsCount:null,featuredImage:"",color:"",productCategory:"",billingPeriod:"",billingPeriodInterval:0,currency:"",isOnSale:!1,regularPrice:0,type:""},_=p.type===C.ch.businessService?p.type:e.type,x=_===C.ch.theme,y=_===C.ch.businessService,{iamSettings:b}=(0,r.useContext)(l),v="modal"===b?.product_previews&&!x&&!y,k=!s&&!t,j=!s&&t,N=!x&&!s,M=!x||s,A=x&&!s,E=(0,T.decodeEntities)(p.description);function L(){return"promoted"===p.label}function D(o,t){const{tracksData:r}=e;r.position&&(t.position=r.position),r.label&&(t.label=r.label),r.group&&(t.group=r.group),r.group_id&&(t.group_id=r.group_id),r.searchTerm&&(t.search_term=r.searchTerm),r.category&&(t.category=r.category),t.tab=a.tab||"discover",(0,f.queueRecordEvent)(o,t)}const z=(0,n.jsx)("span",{className:"screen-reader-text",children:(0,u.__)("Opens in a new tab","woocommerce")}),O=e=>p?.vendorName&&p?.vendorUrl?(0,n.jsxs)("a",{href:p.vendorUrl,rel:"noopener noreferrer",target:"_blank",onClick:()=>{D(e,{product:p.title,vendor:p.vendorName,product_type:_})},children:[p.vendorName,z]}):p?.vendorName||null,P=O("marketplace_product_card_vendor_clicked"),B=(0,w.A)("woocommerce-marketplace__product-card",`woocommerce-marketplace__product-card--${_}`,{"is-loading":t,"is-small":e.small,"is-sponsored":L(),"is-compact":s}),Q=()=>(0,n.jsxs)("a",{ref:d,className:"woocommerce-marketplace__product-card__link",href:a.ref?(0,S.A5)(p.url,[["utm_content",a.ref]]):p.url,rel:"noopener noreferrer",target:"_blank",onClick:e=>{v?(e.preventDefault(),D("marketplace_product_card_clicked",{product_id:p.id,product_name:p.title,vendor:p.vendorName,product_type:_}),v&&m(!0)):D("marketplace_product_card_clicked",{product_id:p.id,product_name:p.title,vendor:p.vendorName,product_type:_})},children:[t?" ":p.title,z]}),R=()=>{const e=s?p.icon:p.featuredImage,o=s?96:288;return(0,n.jsxs)("div",{className:"woocommerce-marketplace__business-card",children:[(0,n.jsx)("div",{className:"woocommerce-marketplace__business-card__header",style:{backgroundColor:p.color},children:(0,n.jsx)("img",{src:`${e||p.featuredImage}?h=${o}`,alt:""})}),(0,n.jsxs)("div",{className:"woocommerce-marketplace__business-card__content",children:[(0,n.jsxs)("div",{className:"woocommerce-marketplace__business-card__main-content",children:[(0,n.jsx)("h2",{children:(0,n.jsx)(Q,{})}),(0,n.jsx)("p",{className:"woocommerce-marketplace__product-card__description",children:E})]}),(0,n.jsx)("div",{className:"woocommerce-marketplace__business-card__badge",children:(0,n.jsx)("span",{children:p.productCategory})})]})]})},Y=y?null:(0,n.jsxs)("footer",{className:"woocommerce-marketplace__product-card__footer",children:[t&&(0,n.jsx)("div",{className:"woocommerce-marketplace__product-card__price"}),!t&&e.product&&(0,n.jsx)(I,{product:e.product})]}),W=(0,n.jsxs)("div",{className:"woocommerce-marketplace__product-card__content",children:[A&&(0,n.jsx)("div",{className:"woocommerce-marketplace__product-card__image",children:!t&&(0,n.jsx)("img",{className:"woocommerce-marketplace__product-card__image-inner",src:p.image,alt:p.title})}),(0,n.jsx)("div",{className:"woocommerce-marketplace__product-card__header",children:(0,n.jsxs)("div",{className:"woocommerce-marketplace__product-card__details",children:[M&&(0,n.jsxs)(n.Fragment,{children:[t&&(0,n.jsx)("div",{className:"woocommerce-marketplace__product-card__icon"}),!t&&p.icon&&(0,n.jsx)("img",{className:"woocommerce-marketplace__product-card__icon",src:p.icon||p.image,alt:p.title})]}),(0,n.jsxs)("div",{className:"woocommerce-marketplace__product-card__meta",children:[(0,n.jsx)("h2",{className:"woocommerce-marketplace__product-card__title",children:(0,n.jsx)(Q,{})}),j&&(0,n.jsx)("p",{className:"woocommerce-marketplace__product-card__vendor-details",children:(0,n.jsx)("span",{className:"woocommerce-marketplace__product-card__vendor"})}),k&&(0,n.jsxs)("p",{className:"woocommerce-marketplace__product-card__vendor-details",children:[P&&(0,n.jsxs)("span",{className:"woocommerce-marketplace__product-card__vendor",children:[(0,n.jsx)("span",{children:(0,u.__)("By ","woocommerce")}),P]}),P&&L()&&(0,n.jsx)("span",{"aria-hidden":"true",className:"woocommerce-marketplace__product-card__vendor-details__separator",children:"·"}),L()&&(0,n.jsx)("span",{className:"woocommerce-marketplace__product-card__sponsored-label",children:(0,u.__)("Sponsored","woocommerce")})]}),s&&Y]})]})}),N&&(0,n.jsx)("p",{className:"woocommerce-marketplace__product-card__description",children:!t&&E}),!s&&Y]}),F=()=>t?y?(0,n.jsx)(R,{}):W:(0,n.jsx)("div",{className:"woocommerce-marketplace__product-card-wrapper",children:y?(0,n.jsx)(R,{}):W});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.Card,{className:B,id:`product-${p.id}`,tabIndex:-1,"aria-hidden":t,style:L()&&p.primary_color?{background:`linear-gradient(${p.primary_color} 0, ${p.primary_color} 5px, white 5px, white)`}:{},children:(0,n.jsx)(F,{})}),v&&i&&p&&(0,n.jsx)(U,{productTitle:p.title,productVendor:O("marketplace_product_preview_vendor_clicked"),productIcon:p.icon||"",onOpen:()=>{D("marketplace_product_preview_modal_opened",{product_id:p.id,product_name:p.title,vendor:p.vendorName,product_type:_})},onClose:e=>{D(e||"marketplace_product_preview_modal_dismissed",{product_id:p.id,product_name:p.title,vendor:p.vendorName,product_type:_}),m(!1)},productId:p.id,triggerRef:d})]})};var B=t(30737);function Q(e){const o=(0,c.Qk)("wccomHelper",{}),[t,s]=(0,r.useState)(e.products),[a,i]=(0,r.useState)(1),l=()=>{const e=window.innerWidth;i(e>=1920?4:e>=1024?3:e>=769?2:1)};(0,r.useEffect)((()=>(l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l))),[]),(0,r.useEffect)((()=>{if(!e.productGroup)return void s(e.products);if(e.cardType===C.WX.compact)return void s(e.products);if(e.products.length<a)return void s(e.products);let o=Math.floor(e.products.length/a);1===a&&(o=Math.min(o,4)),2===a&&(o=Math.min(o,2)),s(e.products.slice(0,o*a))}),[a,e.products,e.productGroup,e.cardType]);const m=2*a-1,u=(0,w.A)("woocommerce-marketplace__product-list-content",e.className);return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:u,children:t.map(((t,s)=>(0,n.jsxs)(r.Fragment,{children:[(0,n.jsx)(P,{type:e.type,cardType:e.cardType,product:{id:t.id,slug:t.slug,title:t.title,image:t.image,type:t.type,freemium_type:t.freemium_type,icon:t.icon,label:t.label,primary_color:t.primary_color,vendorName:t.vendorName,vendorUrl:t.vendorUrl?(0,S.A5)(t.vendorUrl,[["utm_source","extensionsscreen"],["utm_medium","product"],["utm_campaign","wcaddons"],["utm_content","devpartner"]]):"",price:t.price,url:(0,S.A5)(t.url,Object.entries({...o.inAppPurchaseURLParams,...void 0!==e.productGroup?{utm_group:e.productGroup}:{}})),averageRating:t.averageRating,reviewsCount:t.reviewsCount,description:t.description,isInstallable:t.isInstallable,color:t.color,featuredImage:t.featuredImage,productCategory:t.productCategory,billingPeriod:t.billingPeriod,billingPeriodInterval:t.billingPeriodInterval,currency:t.currency,isOnSale:t.isOnSale,regularPrice:t.regularPrice},tracksData:{position:s+1,...t.label&&{label:t.label},...e.productGroup&&{group_id:e.productGroup},...e.group&&{group:e.group},...e.searchTerm&&{searchTerm:e.searchTerm},...e.category&&{category:e.category}}}),s===m&&"theme"===e.type&&(0,n.jsx)(B.k8,{redirectToCYSFlow:()=>{const e=(0,M.addQueryArgs)(`${c.kY}admin.php`,{page:"wc-admin",path:"/customize-store/design"});window.location.href=e}})]},t.id)))})})}function R(e){const{title:o,description:t,groupURL:r,groupURLText:c,groupURLType:s}=e,a=""===o,i=(0,w.A)("woocommerce-marketplace__product-list-header",{"is-loading":a});return(0,n.jsxs)("div",{className:i,"aria-hidden":a,children:[(0,n.jsx)("h2",{className:"woocommerce-marketplace__product-list-title",children:o}),t&&(0,n.jsx)("p",{className:"woocommerce-marketplace__product-list-description",children:t}),null!==r&&(0,n.jsx)("span",{className:"woocommerce-marketplace__product-list-link",children:(0,n.jsx)(E.Link,{href:r,type:s,target:"external"===s?"_blank":void 0,onClick:()=>{(0,f.recordEvent)("marketplace_see_more_clicked",{group_title:o,group_url:r})},children:null!=c?c:(0,u.__)("See more","woocommerce")})})]})}function Y(e){const{title:o,description:t,products:r,groupURL:c,type:s,productGroup:a,groupURLText:i,groupURLType:l,cardType:m}=e;return(0,n.jsxs)("div",{className:"woocommerce-marketplace__product-list",children:[(0,n.jsx)(R,{title:o,groupURL:c,groupURLText:i,description:t,groupURLType:l}),(0,n.jsx)(Q,{group:o,products:r,type:s,cardType:m,productGroup:a})]})}function W(e){const{hasTitle:o,type:t}=e,r=e.placeholderCount||12;return(0,n.jsxs)("div",{className:"woocommerce-marketplace__product-list",children:[!1!==o&&(0,n.jsx)(R,{title:"",groupURL:null,description:"",groupURLText:null,groupURLType:void 0}),(0,n.jsx)("div",{className:"woocommerce-marketplace__product-list-content",children:[...Array(r)].map(((e,o)=>(0,n.jsx)(P,{isLoading:!0,type:t,tracksData:{}},o)))})]})}function F(){var e;const o=(0,c.Qk)("wccomHelper",{});return null!==(e=o?.isConnected)&&void 0!==e&&e}function $(e){if(""===e.category)return;const o=e.view||"discover",t=e.search_term||null,r=e.product_type||null,c=e.category||null,s={...o&&{view:o},...t&&{search_term:t},...r&&{product_type:r},...c&&{category:c},wccom_connected:F()};o&&["extensions","themes","business-services"].includes(o)&&!c&&(s.category="_all"),(0,f.recordEvent)("marketplace_view",s)}function G(){const[e,o]=(0,r.useState)([]),t=(0,r.useContext)(l),{isLoading:c,setIsLoading:s}=t;if((0,r.useEffect)((()=>{s(!0),(0,S.b8)().then((e=>Array.isArray(e)?e:[])).then((e=>{o(e),function(e){const o=e.flatMap((e=>e.items)).map((e=>e.id));(0,f.recordEvent)("marketplace_discover_viewed",{view:"discover",product_ids:o}),$({view:"discover"})}(e)})).finally((()=>{s(!1)}))}),[]),c)return(0,n.jsx)("div",{className:"woocommerce-marketplace__discover",children:(0,n.jsx)(W,{placeholderCount:9,type:C.ch.extension})});const a=e.flatMap((e=>e));return(0,n.jsx)("div",{className:"woocommerce-marketplace__discover",children:a.map((e=>{var o;return(0,n.jsx)(Y,{productGroup:e.id,title:e.title,description:e.description,products:e.items,groupURL:e.url,groupURLText:e.url_text,groupURLType:e.url_type,type:e.itemType,cardType:null!==(o=e.cardType)&&void 0!==o?o:C.WX.regular},e.id)}))})}var H=t(47143),V=t(29491);function Z(e){const o=""===e.label,t=(0,w.A)("woocommerce-marketplace__category-item-button",{"woocommerce-marketplace__category-item-button--selected":e.selected,"is-loading":o});return(0,n.jsx)("button",{className:t,onClick:function(e){const o=e.currentTarget.value;o&&(0,g.navigateTo)({url:(0,g.getNewPath)({category:o})})},value:e.slug,"aria-hidden":o,children:e.label})}var q=t(24148),K=t(56537),J=t(90700);function X(e){function o(o){const t=o.currentTarget.value;t&&(e.onClick(),(0,g.navigateTo)({url:(0,g.getNewPath)({category:t})}))}return(0,n.jsx)("ul",{className:"woocommerce-marketplace__category-dropdown-list",children:e.categories.map((t=>(0,n.jsx)("li",{className:"woocommerce-marketplace__category-dropdown-item",children:(0,n.jsx)("button",{className:(0,w.A)("woocommerce-marketplace__category-dropdown-item-button",{"woocommerce-marketplace__category-dropdown-item-button--selected":t.slug===e.selected?.slug}),value:t.slug,onClick:o,children:t.label})},t.slug)))})}function ee(e){return(0,n.jsx)(h.Dropdown,{renderToggle:({isOpen:o,onToggle:t})=>(0,n.jsxs)("button",{onClick:()=>{o||(0,f.recordEvent)("marketplace_category_dropdown_opened",{type:e.type}),t()},className:e.buttonClassName,"aria-label":(0,u.__)("Toggle category dropdown","woocommerce"),children:[e.label,(0,n.jsx)(q.A,{icon:o?K.A:J.A,size:e.arrowIconSize})]}),className:e.className,renderContent:({onToggle:o})=>(0,n.jsx)(X,{categories:e.categories,selected:e.selected,onClick:o}),contentClassName:e.contentClassName})}const oe={[C.ch.extension]:"_all",[C.ch.theme]:"themes",[C.ch.businessService]:"business-services"};function te(e){const[o,t]=(0,r.useState)(),[c,s]=(0,r.useState)(!1),[a,i]=(0,r.useState)([]),[l,m]=(0,r.useState)(!1),[d,p]=(0,r.useState)("start"),_=(0,r.useRef)(null),w=(0,r.useRef)(null),x=(0,g.useQuery)();function y(){if(_.current&&_.current.parentElement?.scrollWidth){const e=_.current.scrollWidth>_.current.parentElement.scrollWidth;m(e)}}(0,r.useEffect)((()=>{s(!0),(0,S.jE)(e.type).then((e=>{const o=e.map((e=>({...e,selected:!1}))).filter((e=>"_featured"!==e.slug));i(o)})).catch((()=>{i([])})).finally((()=>{s(!1)}))}),[e.type,i]),(0,r.useEffect)((()=>{let o=oe[e.type];x.category&&(o=x.category);const r=a.find((e=>e.slug===o));r&&t(r)}),[x.category,e.type,a]),(0,r.useEffect)((()=>{w.current&&w.current.scrollIntoView({block:"nearest",inline:"center"})}),[o]);const b=(0,V.useDebounce)(y,300),v=(0,V.useDebounce)((function(){const e=_.current;if(!e)return;const{scrollLeft:o,scrollWidth:t,clientWidth:r}=e;o<10?p("start"):o+r<t?p("middle"):o+r===t&&p("end")}),100);function f(e){_.current&&_.current.scrollTo({left:_.current.scrollLeft+e,behavior:"smooth"})}return(0,r.useEffect)((()=>{window.addEventListener("resize",b);const e=_.current;return e&&e.addEventListener("scroll",v),()=>{window.removeEventListener("resize",b),e&&e.removeEventListener("scroll",v)}}),[b,v]),(0,r.useEffect)((()=>{y()}),[a]),c?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("ul",{className:"woocommerce-marketplace__category-selector",children:[...Array(5)].map(((e,o)=>(0,n.jsx)("li",{className:"woocommerce-marketplace__category-item",children:(0,n.jsx)(Z,{slug:"",label:"",selected:!1})},o)))})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("ul",{className:"woocommerce-marketplace__category-selector","aria-label":"Categories",ref:_,children:a.map((e=>(0,n.jsx)("li",{className:"woocommerce-marketplace__category-item",ref:e.slug===o?.slug?w:null,children:(0,n.jsx)(Z,{...e,selected:e.slug===o?.slug,"aria-current":e.slug===o?.slug})},e.slug)))}),(0,n.jsx)("div",{className:"woocommerce-marketplace__category-selector--full-width",children:(0,n.jsx)(ee,{type:e.type,label:function(){const e=(0,u.__)("All Categories","woocommerce");return o?"All"===o.label?e:o.label:e}(),categories:a,buttonClassName:"woocommerce-marketplace__category-dropdown-button",className:"woocommerce-marketplace__category-dropdown",contentClassName:"woocommerce-marketplace__category-dropdown-content",selected:o})}),l&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:function(){f(-200)},className:"woocommerce-marketplace__category-navigation-button woocommerce-marketplace__category-navigation-button--prev",hidden:"start"===d,"aria-label":"Scroll to previous categories",tabIndex:-1,children:(0,n.jsx)(h.Icon,{icon:"arrow-left-alt2"})}),(0,n.jsx)("button",{onClick:function(){f(200)},className:"woocommerce-marketplace__category-navigation-button woocommerce-marketplace__category-navigation-button--next",hidden:"end"===d,"aria-label":"Scroll to next categories",tabIndex:-1,children:(0,n.jsx)(h.Icon,{icon:"arrow-right-alt2"})})]})]})}function re(e){const[o,t]=(0,r.useState)(),[c,s]=(0,r.useState)(!1),a={[C.If.all]:["most-popular","popular-themes","business-services"],[C.If.theme]:["popular-themes"],[C.If.extension]:["most-popular"],[C.If.businessService]:["business-services"]};return(0,r.useEffect)((()=>{s(!0),(0,S.b8)().then((o=>{const r=a[e.type];if(!r)return;const c=o.filter((e=>r.includes(e.id)));c&&(c.forEach((e=>{e.items=e.items.slice(0,4)})),t(c))})).catch((()=>{t(void 0)})).finally((()=>{s(!1)}))}),[]),(0,n.jsxs)("div",{className:"woocommerce-marketplace__no-results",children:[function(){if(e.type===C.If.all)return(0,n.jsx)(n.Fragment,{});let o=C.ch.extension;return e.type===C.If.theme&&(o=C.ch.theme),e.type===C.If.businessService&&(o=C.ch.businessService),(0,n.jsx)(te,{type:o})}(),(0,n.jsxs)("div",{className:"woocommerce-marketplace__no-results__content",children:[(0,n.jsx)("h2",{className:"woocommerce-marketplace__no-results__heading",children:e.showHeading?e.heading:""}),(0,n.jsx)("p",{className:"woocommerce-marketplace__no-results__description",children:(0,u.__)("Try searching again using a different term, or take a look at our recommendations below.","woocommerce")})]}),(0,n.jsx)("div",{className:"woocommerce-marketplace__no-results__product-groups",children:c?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(W,{type:C.ch.extension,placeholderCount:4}),(0,n.jsx)(W,{type:C.ch.theme,placeholderCount:4}),(0,n.jsx)(W,{type:C.ch.businessService,placeholderCount:4})]}):o&&0!==o.length?(0,n.jsx)(n.Fragment,{children:o.map((e=>{return(0,n.jsx)(Y,{title:(o=e.id,"popular-themes"===o?(0,u.__)("Our favorite themes","woocommerce"):"business-services"===o?(0,u.__)("Services to help your business grow","woocommerce"):(0,u.__)("Most popular extensions","woocommerce")),description:e.description,products:e.items,groupURL:e.url,productGroup:e.id,type:e.itemType,groupURLText:e.url_text,groupURLType:e.url_type},e.id);var o}))}):(0,n.jsx)(n.Fragment,{})})]})}var ce=t(81392);const se={[C.ch.extension]:{label:(0,u.__)("extensions","woocommerce"),singularLabel:(0,u.__)("extension","woocommerce")},[C.ch.theme]:{label:(0,u.__)("themes","woocommerce"),singularLabel:(0,u.__)("theme","woocommerce")},[C.ch.businessService]:{label:(0,u.__)("business services","woocommerce"),singularLabel:(0,u.__)("business service","woocommerce")}};function ne(e){var o,t;const s=(0,r.useContext)(l),{isLoading:a}=s,i=se[e.type].label,m=(0,g.useQuery)(),d=m?.category,p=(0,H.useSelect)((e=>e("core").getCurrentTheme()),[]),_="twentytwentyfour"===p?.stylesheet,[x,y]=(0,r.useState)(!1),b=(0,M.addQueryArgs)(`${c.kY}admin.php`,{page:"wc-admin",path:"/customize-store/design"}),v=(0,M.addQueryArgs)(`${c.kY}admin.php`,{page:"wc-admin",path:"/customize-store/assembler-hub"}),f=(0,H.useSelect)((e=>e(A.onboardingStore).getTask("customize-store")),[]),k=null!==(o=e.showAllButton)&&void 0!==o&&o,j=null!==(t=e.products)&&void 0!==t?t:[],N="business services"===i?"business-services":i,T="woocommerce-marketplace__search-",I=(0,w.A)(T+N),S=(0,w.A)("woocommerce-marketplace__view-all-button",T+"button-"+N);if(a)return(0,n.jsxs)(n.Fragment,{children:[e.categorySelector&&(0,n.jsx)(te,{type:e.type}),(0,n.jsx)(W,{hasTitle:!1,type:e.type})]});if(0===j.length){let o=C.If.all;switch(e.type){case C.ch.extension:o=C.If.extension;break;case C.ch.theme:o=C.If.theme;break;case C.ch.businessService:o=C.If.businessService}return(0,n.jsx)(re,{type:o,showHeading:!1})}const E=(0,w.A)(k?"woocommerce-marketplace__product-list-content--collapsed":"");return(0,n.jsxs)("div",{className:I,children:[(0,n.jsxs)("nav",{className:"woocommerce-marketplace__sub-header",children:[(0,n.jsx)("div",{className:"woocommerce-marketplace__sub-header__categories",children:e.categorySelector&&(0,n.jsx)(te,{type:e.type})}),"theme"===e.type&&(0,n.jsx)(h.Button,{className:"woocommerce-marketplace__customize-your-store-button",variant:"secondary",text:(0,u.__)("Design your own","woocommerce"),onClick:()=>{_?window.location.href=f?.isComplete?v:b:y(!0)}})]}),x&&(0,n.jsx)(ce.z,{setIsModalOpen:y,redirectToCYSFlow:()=>{window.location.href=b}}),(0,n.jsx)(Q,{products:j,type:e.type,className:E,searchTerm:e.searchTerm,category:d}),"theme"===e.type&&(0,n.jsxs)("div",{className:"woocommerce-marketplace__browse-wp-theme-directory",children:[(0,n.jsx)("b",{children:(0,u.__)("Didn’t find a theme you like?","woocommerce")}),(0,r.createInterpolateElement)((0,u.__)(" Browse the <a>WordPress.org theme directory</a> to discover more.","woocommerce"),{a:(0,n.jsx)("a",{href:c.kY+"theme-install.php?search=e-commerce"})})]}),k&&(0,n.jsx)(h.Button,{className:S,variant:"secondary",text:(0,u.__)("View all","woocommerce"),onClick:()=>{return o=e.type,void(0,g.navigateTo)({url:(0,g.getNewPath)({section:o})});var o}})]})}var ae=t(6513),ie=t(1455),le=t.n(ie),me=t(29248);const ue={subscriptions:[],setSubscriptions:()=>{},loadSubscriptions:()=>Promise.resolve(),refreshSubscriptions:()=>Promise.resolve(),isLoading:!0,setIsLoading:()=>{}},de=(0,r.createContext)(ue);function pe(e){const[o,t]=(0,r.useState)([]),[c,s]=(0,r.useState)(!0),a=e=>(!0===e&&s(!0),(0,S.hP)().then((e=>{t(e)})).finally((()=>{e&&s(!1)}))),i=e=>(e&&s(!0),(0,S.wu)().then((e=>{t(e)})).catch((e=>{throw e})).finally((()=>{e&&s(!1)})));(0,r.useEffect)((()=>{new URLSearchParams(window.location.search).get("install")?i(!0).catch((e=>{(0,S.Mp)("woocommerce-marketplace-refresh-subscriptions",(0,u.sprintf)((0,u.__)("Error refreshing subscriptions: %s","woocommerce"),e.message),me.T.Error)})):a(!0).catch((e=>{(0,S.Mp)("woocommerce-marketplace-load-subscriptions",(0,u.sprintf)((0,u.__)("Error loading subscriptions: %s","woocommerce"),e.message),me.T.Error)}))}),[]);const l={subscriptions:o,setSubscriptions:t,loadSubscriptions:a,refreshSubscriptions:i,isLoading:c,setIsLoading:s};return(0,n.jsx)(de.Provider,{value:l,children:e.children})}const _e=[{key:"name",label:(0,u.__)("Name","woocommerce")},{key:"expiry",label:(0,u.__)("Expires/Renews on","woocommerce")},{key:"subscription",label:(0,u.__)("Subscription","woocommerce")},{key:"version",label:(0,u.__)("Version","woocommerce")}];function he(e){if(e.isLoading)return(0,n.jsx)(E.TablePlaceholder,{caption:(0,u.__)("Loading your subscriptions","woocommerce"),headers:e.headers});const o=e.headers.map((e=>({...e,cellClassName:"woocommerce-marketplace__my-subscriptions__table__header--"+e.key})));return(0,n.jsx)(E.Table,{className:"woocommerce-marketplace__my-subscriptions__table",headers:o,rows:e.rows})}function we(e){const o=[..._e,{key:"actions",label:(0,u.__)("Actions","woocommerce")}];if(!(e.isLoading||e.rows&&0!==e.rows.length)){const e=(0,g.getNewPath)({},s.q$,{}),o=(0,r.createInterpolateElement)((0,u.__)("No extensions or themes installed. <a>Browse the Marketplace</a>","woocommerce"),{a:(0,n.jsx)("a",{href:e})});return(0,n.jsx)(E.EmptyTable,{numberOfRows:4,children:o})}return(0,n.jsx)(he,{rows:e.rows,isLoading:e.isLoading,headers:o})}function ge(e){const o=[..._e,{key:"actions",label:(0,u.__)("Actions","woocommerce")}];return(0,n.jsx)(he,{rows:e.rows,isLoading:e.isLoading,headers:o})}var xe=t(38443),ye=t(28180);let be=function(e){return e.Warning="warning",e.Error="error",e.Info="info",e}({});var ve=t(12974);function fe(e){var o;const[t,c]=(0,r.useState)(!1),[s,a]=(0,r.useState)(!1),{loadSubscriptions:i}=(0,r.useContext)(de),l=()=>{c(!0),a(!1),i(!1).then((()=>{(0,S.Mp)(e.subscription.product_key,(0,u.sprintf)((0,u.__)("%s successfully connected.","woocommerce"),e.subscription.product_name),me.T.Success),c(!1),e.onClose&&e.onClose()})).catch((()=>{c(!1)}))},m=()=>{(0,f.recordEvent)("marketplace_product_connect_button_clicked",{product_zip_slug:e.subscription.zip_slug,product_id:e.subscription.product_id}),c(!0),a(!1),(0,S.fj)(e.subscription.product_key),(0,S.e2)(e.subscription).then((()=>{if(e.subscription.local.installed&&!e.subscription.local.active&&"plugin"===e.subscription.local.type)return c(!1),void a(!0);l()})).catch((()=>{(0,S.Mp)(e.subscription.product_key,(0,u.sprintf)((0,u.__)("%s couldn’t be connected.","woocommerce"),e.subscription.product_name),me.T.Error,{actions:[{label:(0,u.__)("Try again","woocommerce"),onClick:m,url:""}]}),c(!1),e.onClose&&e.onClose()}))};return(0,n.jsxs)(n.Fragment,{children:[s?(0,n.jsxs)(h.Modal,{title:(0,u.__)("Activate the Plugin","woocommerce"),onRequestClose:()=>l(),focusOnMount:!0,className:"woocommerce-marketplace__header-account-modal",style:{borderRadius:4},overlayClassName:"woocommerce-marketplace__header-account-modal-overlay",children:[(0,n.jsx)("p",{className:"woocommerce-marketplace__header-account-modal-text",children:(0,n.jsx)("span",{dangerouslySetInnerHTML:(0,ve.Ay)((0,u.sprintf)((0,u.__)("<b>%s</b> is installed but not activated on this store. Would you like to activate it now?","woocommerce"),e.subscription.product_name))})}),(0,n.jsxs)(h.ButtonGroup,{className:"woocommerce-marketplace__header-account-modal-button-group",children:[(0,n.jsx)(h.Button,{onClick:()=>l(),variant:"tertiary",className:"woocommerce-marketplace__header-account-modal-button",children:(0,u.__)("No","woocommerce")}),(0,n.jsx)(h.Button,{onClick:()=>{c(!0),(0,S.CW)(e.subscription).then((()=>{l()})).catch((()=>{(0,S.Mp)(e.subscription.product_key,(0,u.sprintf)((0,u.__)("%s is connected to WooCommerce.com but failed to activate the local plugin.","woocommerce"),e.subscription.product_name),me.T.Error)})),a(!1)},variant:"primary",children:(0,u.__)("Yes","woocommerce")})]})]}):null,(0,n.jsx)(h.Button,{onClick:m,variant:null!==(o=e.variant)&&void 0!==o?o:"secondary",isBusy:t,disabled:t,children:(0,u.__)("Connect","woocommerce")})]})}const ke={installingProducts:[]},je=(0,H.createReduxStore)("woocommerce-admin/installing",{reducer(e=ke,o){switch(o.type){case"START_INSTALLING":return{...e,installingProducts:[...e.installingProducts,o.productKey]};case"STOP_INSTALLING":return{...e,installingProducts:[...e.installingProducts.filter((e=>e!==o.productKey))]}}return e},actions:{startInstalling:e=>({type:"START_INSTALLING",productKey:e}),stopInstalling:e=>({type:"STOP_INSTALLING",productKey:e})},selectors:{isInstalling:(e,o)=>!!e&&e.installingProducts.includes(o)}});function Ne(e){var o;const{loadSubscriptions:t}=(0,r.useContext)(de),c=(0,H.useSelect)((o=>o(je).isInstalling(e.subscription.product_key)),[e.subscription.product_key]),s=()=>{(0,H.dispatch)(je).stopInstalling(e.subscription.product_key)},a=o=>{t(!1).then((()=>{let t=(0,u.sprintf)((0,u.__)("%s couldn’t be installed.","woocommerce"),e.subscription.product_name);!1===o?.success&&o?.data.message&&(t+=" "+o.data.message),(0,S.Mp)(e.subscription.product_key,t,me.T.Error,{actions:[{label:(0,u.__)("Download and install manually","woocommerce"),url:"https://woocommerce.com/my-account/downloads/",onClick:()=>{}}]}),s(),e.onError&&e.onError()})),(0,f.recordEvent)("marketplace_product_install_failed",{product_zip_slug:e.subscription.zip_slug,product_id:e.subscription.product_id,product_current_version:e.subscription.version,error_message:o?.data?.message})};return(0,n.jsx)(h.Button,{variant:null!==(o=e.variant)&&void 0!==o?o:"link",isBusy:c,disabled:c,onClick:()=>{(0,f.recordEvent)("marketplace_product_install_button_clicked",{product_zip_slug:e.subscription.zip_slug,product_id:e.subscription.product_id,product_current_version:e.subscription.version}),(0,H.dispatch)(je).startInstalling(e.subscription.product_key),(0,S.fj)(e.subscription.product_key),e.subscription.is_installable?(0,S.dV)(e.subscription).then((()=>{t(!1).then((()=>{(0,S.Mp)(e.subscription.product_key,(0,u.sprintf)((0,u.__)("%s successfully installed.","woocommerce"),e.subscription.product_name),me.T.Success),s()})),(0,f.recordEvent)("marketplace_product_installed",{product_zip_slug:e.subscription.zip_slug,product_id:e.subscription.product_id,product_current_version:e.subscription.version}),e.onSuccess&&e.onSuccess()})).catch(a):(0,S.Xs)(e.subscription).then((o=>{if((0,f.recordEvent)("marketplace_product_install_url",{product_zip_slug:e.subscription.zip_slug,product_id:e.subscription.product_id,product_current_version:e.subscription.version,product_install_url:o}),s(),!o)throw new Error;window.open(o,"_self")})).catch(a)},children:(0,u.__)("Install","woocommerce")})}function Ce(e){var o;return(0,n.jsx)(h.Button,{href:(0,S.LK)(e.subscription),variant:null!==(o=e.variant)&&void 0!==o?o:"secondary",onClick:function(){(0,f.queueRecordEvent)("marketplace_renew_button_clicked",{product_zip_slug:e.subscription.zip_slug,product_id:e.subscription.product_id})},children:(0,u.__)("Renew","woocommerce")})}function Me(e){var o;return(0,n.jsx)(h.Button,{href:(0,S.SI)(e.subscription),variant:null!==(o=e.variant)&&void 0!==o?o:"secondary",onClick:function(){(0,f.queueRecordEvent)("marketplace_auto_renew_button_clicked",{order_id:e.subscription.order_id,product_id:e.subscription.product_id})},children:(0,u.__)("Renew","woocommerce")})}function Te(e){var o;return(0,n.jsx)(h.Button,{href:(0,S.wX)(e.subscription),variant:null!==(o=e.variant)&&void 0!==o?o:"secondary",onClick:function(){(0,f.queueRecordEvent)("marketplace_subscribe_button_clicked",{product_zip_slug:e.subscription.zip_slug,product_id:e.subscription.product_id})},children:(0,u.__)("Subscribe","woocommerce")})}function Ae(e){return(0,n.jsxs)(h.Modal,{title:(0,u.__)("Connect to update","woocommerce"),onRequestClose:e.onClose,focusOnMount:!0,className:"woocommerce-marketplace__header-account-modal",style:{borderRadius:4},overlayClassName:"woocommerce-marketplace__header-account-modal-overlay",children:[(0,n.jsx)("p",{className:"woocommerce-marketplace__header-account-modal-text",children:(0,u.sprintf)((0,u.__)("Version %s is available. To enable this update you need to connect your subscription to this store.","woocommerce"),e.subscription.version)}),(0,n.jsxs)(h.ButtonGroup,{className:"woocommerce-marketplace__header-account-modal-button-group",children:[(0,n.jsx)(h.Button,{variant:"tertiary",onClick:e.onClose,className:"woocommerce-marketplace__header-account-modal-button",children:(0,u.__)("Cancel","woocommerce")}),(0,n.jsx)(fe,{subscription:e.subscription,onClose:e.onClose,variant:"primary"})]})]})}function Ie(e){return(0,n.jsxs)(h.Modal,{title:(0,u.__)("Renew to update","woocommerce"),onRequestClose:e.onClose,focusOnMount:!0,className:"woocommerce-marketplace__header-account-modal",style:{borderRadius:4},overlayClassName:"woocommerce-marketplace__header-account-modal-overlay",children:[(0,n.jsx)("p",{className:"woocommerce-marketplace__header-account-modal-text",children:(0,u.sprintf)((0,u.__)("Version %s is available. To enable this update you need to renew your subscription.","woocommerce"),e.subscription.version)}),(0,n.jsxs)(h.ButtonGroup,{className:"woocommerce-marketplace__header-account-modal-button-group",children:[(0,n.jsx)(h.Button,{variant:"tertiary",onClick:e.onClose,className:"woocommerce-marketplace__header-account-modal-button",children:(0,u.__)("Cancel","woocommerce")}),(0,n.jsx)(Ce,{subscription:e.subscription,variant:"primary"})]})]})}function Se(e){return(0,n.jsxs)(h.Modal,{title:(0,u.__)("Subscribe to update","woocommerce"),onRequestClose:e.onClose,focusOnMount:!0,className:"woocommerce-marketplace__header-account-modal",style:{borderRadius:4},overlayClassName:"woocommerce-marketplace__header-account-modal-overlay",children:[(0,n.jsx)("p",{className:"woocommerce-marketplace__header-account-modal-text",children:(0,u.sprintf)((0,u.__)("Version %s is available. To enable this update you need to purchase a subscription.","woocommerce"),e.subscription.version)}),(0,n.jsxs)(h.ButtonGroup,{className:"woocommerce-marketplace__header-account-modal-button-group",children:[(0,n.jsx)(h.Button,{variant:"tertiary",onClick:e.onClose,className:"woocommerce-marketplace__header-account-modal-button",children:(0,u.__)("Cancel","woocommerce")}),(0,n.jsx)(Te,{subscription:e.subscription,variant:"primary"})]})]})}function Ee(e){const o=(0,c.Qk)("wccomHelper",{});return o?.wooUpdateManagerInstalled?o?.wooUpdateManagerActive?null:(0,n.jsxs)(h.Modal,{title:(0,u.__)("Access your updates","woocommerce"),onRequestClose:e.onClose,focusOnMount:!0,className:"woocommerce-marketplace__header-account-modal",style:{borderRadius:4},overlayClassName:"woocommerce-marketplace__header-account-modal-overlay",children:[(0,n.jsx)("p",{className:"woocommerce-marketplace__header-account-modal-text",children:(0,n.jsx)("span",{dangerouslySetInnerHTML:(0,ve.Ay)((0,u.sprintf)((0,u.__)("Version %s is available. To access this update, please <b>activate the WooCommerce.com Update Manager</b> extension.","woocommerce"),e.subscription.version))})}),(0,n.jsxs)(h.ButtonGroup,{className:"woocommerce-marketplace__header-account-modal-button-group",children:[(0,n.jsx)(h.Button,{onClick:e.onClose,variant:"link",children:(0,u.__)("Cancel","woocommerce")}),(0,n.jsx)(h.Button,{href:s.dL,variant:"primary",children:(0,u.__)("Activate","woocommerce")})]})]}):(0,n.jsxs)(h.Modal,{title:(0,u.__)("Access your updates","woocommerce"),onRequestClose:e.onClose,focusOnMount:!0,className:"woocommerce-marketplace__header-account-modal",style:{borderRadius:4},overlayClassName:"woocommerce-marketplace__header-account-modal-overlay",children:[(0,n.jsx)("p",{className:"woocommerce-marketplace__header-account-modal-text",children:(0,n.jsx)("span",{dangerouslySetInnerHTML:(0,ve.Ay)((0,u.sprintf)((0,u.__)("Version %s is available. To access this update, please first <b>install the WooCommerce.com Update Manager</b> extension. Alternatively, you can download and install it manually.","woocommerce"),e.subscription.version))})}),(0,n.jsxs)(h.ButtonGroup,{className:"woocommerce-marketplace__header-account-modal-button-group",children:[(0,n.jsx)(h.Button,{href:s.K_,variant:"secondary",children:(0,u.__)("Download","woocommerce")}),(0,n.jsx)(h.Button,{href:o?.wooUpdateManagerInstallUrl,variant:"primary",children:(0,u.__)("Install","woocommerce")})]})]})}function Le(e){const[o,t]=(0,r.useState)(!1),[c,s]=(0,r.useState)(!1),{loadSubscriptions:a}=(0,r.useContext)(de),i=e.subscription.active&&e.subscription.local&&e.subscription.local.slug&&e.subscription.local.path&&e.wooUpdateManagerActive;return(0,n.jsxs)(n.Fragment,{children:[o?""===e.subscription.product_key?(0,n.jsx)(Se,{onClose:()=>t(!1),subscription:e.subscription}):e.subscription.expired?(0,n.jsx)(Ie,{subscription:e.subscription,onClose:()=>t(!1)}):e.subscription.active?e.wooUpdateManagerActive?null:(0,n.jsx)(Ee,{subscription:e.subscription,onClose:()=>t(!1)}):(0,n.jsx)(Ae,{subscription:e.subscription,onClose:()=>t(!1)}):null,(0,n.jsx)(h.Button,{variant:"link",className:"woocommerce-marketplace__my-subscriptions-update",onClick:function o(){(0,f.recordEvent)("marketplace_product_update_button_clicked",{product_zip_slug:e.subscription.zip_slug,product_id:e.subscription.product_id,product_installed_version:e.subscription.local.installed,product_current_version:e.subscription.version}),i?((0,S.fj)(e.subscription.product_key),window.wp.updates?(s(!0),(0,S.vc)(e.subscription).then((()=>{a(!1).then((()=>{(0,S.Mp)(e.subscription.product_key,(0,u.sprintf)((0,u.__)("%s updated successfully.","woocommerce"),e.subscription.product_name),me.T.Success),s(!1)})),(0,f.recordEvent)("marketplace_product_updated",{product_zip_slug:e.subscription.zip_slug,product_id:e.subscription.product_id,product_installed_version:e.subscription.local.installed,product_current_version:e.subscription.version})})).catch((()=>{(0,S.Mp)(e.subscription.product_key,(0,u.sprintf)((0,u.__)("%s couldn’t be updated.","woocommerce"),e.subscription.product_name),me.T.Error,{actions:[{label:(0,u.__)("Try again","woocommerce"),onClick:o,url:""}]}),s(!1),(0,f.recordEvent)("marketplace_product_update_failed",{product_zip_slug:e.subscription.zip_slug,product_id:e.subscription.product_id,product_installed_version:e.subscription.local.installed,product_current_version:e.subscription.version})}))):(0,S.Mp)(e.subscription.product_key,(0,u.sprintf)((0,u.__)("%s couldn’t be updated.","woocommerce"),e.subscription.product_name),me.T.Error,{actions:[{label:(0,u.__)("Reload page and try again","woocommerce"),onClick:()=>{window.location.reload()},url:""}]})):t(!0)},isBusy:c,disabled:c,label:(0,u.sprintf)((0,u.__)("Update to %s","woocommerce"),e.subscription.version),showTooltip:!0,tooltipPosition:"top center",children:c?(0,u.__)("Updating","woocommerce"):(0,u.__)("Update","woocommerce")})]})}function De(e){const[o,t]=(0,r.useState)(!1),[c,s]=(0,r.useState)(!1),a=(0,r.useRef)(null);(0,r.useEffect)((()=>()=>{a.current&&clearTimeout(a.current)}),[]);const i=()=>{e.explanationOnHover&&(a.current&&clearTimeout(a.current),t(!0))},l=()=>{e.explanationOnHover&&(a.current&&clearTimeout(a.current),a.current=setTimeout((()=>{t(!1)}),350))};return(0,n.jsxs)("button",{onClick:()=>s(!c),onMouseOver:i,onFocus:i,onMouseOut:l,onBlur:l,className:(0,w.A)("woocommerce-marketplace__my-subscriptions__product-status",`woocommerce-marketplace__my-subscriptions__product-status--${e.level}`),children:[e.text,""!==e.explanation&&(c||e.explanationOnHover&&o)&&(0,n.jsx)(h.Popover,{className:"woocommerce-marketplace__my-subscriptions__popover",position:"top center",focusOnMount:!1,onMouseOver:i,onMouseOut:l,onFocus:i,onBlur:l,children:e.explanation})]})}(0,H.register)(je);var ze=t(38150);function Oe(e){const o=[{title:(0,u.__)("Manage in Plugins","woocommerce"),onClick:()=>{window.location.href=c.kY+"plugins.php"}}];return e.subscription.is_shared||o.unshift({title:(0,u.__)("Manage on WooCommerce.com","woocommerce"),onClick:()=>{window.open("https://woocommerce.com/my-account/my-subscriptions","_blank")}}),e.subscription.documentation_url&&o.unshift({title:(0,u.__)("View documentation","woocommerce"),onClick:()=>{window.open(e.subscription.documentation_url,"_blank")}}),(0,n.jsx)(h.DropdownMenu,{icon:ze.A,label:(0,u.__)("Actions","woocommerce"),controls:o})}function Ue(e){return(0,n.jsx)("span",{className:"woocommerce-marketplace__my-subscriptions-version",children:e.span})}function Pe(e,o){const t=(0,c.Qk)("wccomHelper",{});return e.local.version===e.version?(0,n.jsx)(Ue,{span:e.local.version}):e.local.version&&e.version&&"installed"===o?(0,n.jsx)(Le,{subscription:e,wooUpdateManagerActive:t?.wooUpdateManagerActive}):e.version?(0,n.jsx)(Ue,{span:e.version}):e.local.version?(0,n.jsx)(Ue,{span:e.local.version}):""}function Be(e){return(0,S.A5)(e,[["utm_source","subscriptionsscreen"],["utm_medium","product"],["utm_campaign","wcaddons"],["utm_content","product-name"]])}function Qe(e){let o=(0,n.jsx)(q.A,{icon:ye.A,size:40});return e.product_icon&&(o=(0,n.jsx)("img",{src:e.product_icon,alt:(0,u.sprintf)((0,u.__)("%s icon","woocommerce"),e.product_name)})),{display:(0,n.jsxs)("div",{className:"woocommerce-marketplace__my-subscriptions__product",children:[(0,n.jsx)("a",{href:Be(e.product_url),target:"_blank",rel:"noreferrer",children:(0,n.jsx)("span",{className:"woocommerce-marketplace__my-subscriptions__product-icon",children:o})}),(0,n.jsx)("a",{href:Be(e.product_url),className:"woocommerce-marketplace__my-subscriptions__product-name",target:"_blank",rel:"noreferrer",children:e.product_name}),(0,n.jsx)("span",{className:"woocommerce-marketplace__my-subscriptions__product-statuses",children:e.is_shared&&(0,n.jsx)(De,{text:(0,u.__)("Shared with you","woocommerce"),level:be.Info,explanation:(0,r.createInterpolateElement)((0,u.sprintf)((0,u.__)("This subscription was shared by <email>%s</email>. <link>Learn more</link>.","woocommerce"),e.owner_email),{email:(0,n.jsx)("strong",{style:{overflowWrap:"anywhere"},children:"email"}),link:(0,n.jsx)("a",{href:s.$Y,rel:"nofollow noopener noreferrer",children:"Learn more"})})})})]}),value:e.product_name}}function Re(e){const o=e.expires;if(!0===e.local.installed&&""===e.product_key)return{display:"",value:""};let t=(0,u.__)("Never expires","woocommerce");return o&&(t=(0,xe.gmdateI18n)("j M, Y",new Date(1e3*o))),{display:(0,n.jsx)("span",{className:"woocommerce-marketplace__my-subscriptions__expiry-date",children:t}),value:o}}function Ye(e,o){return{display:function(){const t=function(e,o){return""===e.product_key?{text:(0,u.__)("No subscription","woocommerce"),level:be.Error,explanation:(0,r.createInterpolateElement)((0,u.__)("To receive updates and support, please <purchase>purchase</purchase> a subscription or use a subscription from another account by <sharing>sharing</sharing> or <transferring>transferring</transferring>.","woocommerce"),{purchase:(0,n.jsx)("a",{href:(0,S.wX)(e),rel:"nofollow noopener noreferrer",children:"renew"}),sharing:(0,n.jsx)("a",{href:s.$Y,rel:"nofollow noopener noreferrer",children:"sharing"}),transferring:(0,n.jsx)("a",{href:s.UD,rel:"nofollow noopener noreferrer",children:"sharing"})})}:e.expired?{text:(0,u.__)("Expired","woocommerce"),level:be.Error,explanation:(0,r.createInterpolateElement)((0,u.__)("To receive updates and support, please <renew>renew</renew> this subscription or use a subscription from another account by <sharing>sharing</sharing> or <transferring>transferring</transferring>.","woocommerce"),{renew:(0,n.jsx)("a",{href:(0,S.LK)(e),rel:"nofollow noopener noreferrer",children:"renew"}),sharing:(0,n.jsx)("a",{href:s.$Y,rel:"nofollow noopener noreferrer",children:"sharing"}),transferring:(0,n.jsx)("a",{href:s.UD,rel:"nofollow noopener noreferrer",children:"sharing"})})}:e.expiring&&!e.autorenew?{text:(0,u.__)("Expires soon","woocommerce"),level:be.Error,explanation:(0,r.createInterpolateElement)((0,u.__)("To receive updates and support, please <renew>renew</renew> this subscription before it expires or use a subscription from another account by <sharing>sharing</sharing> or <transferring>transferring</transferring>.","woocommerce"),{renew:(0,n.jsx)("a",{href:(0,S.SI)(e),rel:"nofollow noopener noreferrer",children:"renew"}),sharing:(0,n.jsx)("a",{href:s.$Y,rel:"nofollow noopener noreferrer",children:"sharing"}),transferring:(0,n.jsx)("a",{href:s.UD,rel:"nofollow noopener noreferrer",children:"sharing"})})}:!("installed"!==o||!e.local.installed||e.active)&&{text:(0,u.__)("Not connected","woocommerce"),level:be.Warning,explanation:(0,u.__)("To receive updates and support, please connect your subscription to this store.","woocommerce")}}(e,o);var c;if(t)return(0,n.jsx)(De,{text:t.text,level:t.level,explanation:null!==(c=t.explanation)&&void 0!==c?c:"",explanationOnHover:!0});let a;return a=e.lifetime?(0,u.__)("Lifetime","woocommerce"):e.autorenew?(0,u.__)("Active","woocommerce"):(0,u.__)("Cancelled","woocommerce"),a}()}}function We(e,o){return{display:Pe(e,o)}}function Fe(e){let o=null;return""===e.product_key?o=(0,n.jsx)(Te,{subscription:e}):e.expired&&!e.lifetime?o=(0,n.jsx)(Ce,{subscription:e}):!1===e.local.installed&&!1===e.subscription_installed?o=(0,n.jsx)(Ne,{subscription:e}):!1===e.active&&!0===e.subscription_available?o=(0,n.jsx)(fe,{subscription:e,variant:"link"}):e.autorenew||e.lifetime||(o=(0,n.jsx)(Me,{subscription:e})),{display:(0,n.jsxs)("div",{className:"woocommerce-marketplace__my-subscriptions__actions",children:[o,(0,n.jsx)(Oe,{subscription:e})]})}}function $e(e,o){return[Qe(e),Re(e),Ye(e,o),We(e,o),Fe(e)]}const Ge="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEyLjAwMDIgMi4yNVY0QzE2LjQxODUgNCAyMC4wMDAzIDcuNTgxNzIgMjAuMDAwMyAxMkMyMC4wMDAzIDE1LjcyNzcgMTcuNDUwNyAxOC44NTk5IDE0LjAwMDMgMTkuNzQ4VjE5Ljc0NzlDMTMuODMwMSAxOS43OTE3IDEzLjY1NzcgMTkuODMwMSAxMy40ODMzIDE5Ljg2MjhDMTMuMzM3MSAxOS44OTA1IDEzLjE5MDYgMTkuOTE0IDEzLjA0NDIgMTkuOTMzNEwxMy4wNDQxIDE5LjkzMjVDMTIuNzAyNCAxOS45NzcgMTIuMzUzOSAyMCAxMiAyMEMxMS42NDYgMjAgMTEuMjk3NSAxOS45NzcgMTAuOTU1NiAxOS45MzI0TDEwLjk1NTYgMTkuOTMyN0MxMC45MTQ4IDE5LjkyNzMgMTAuODc0IDE5LjkyMTYgMTAuODMzMyAxOS45MTU1QzkuNjEwMzYgMTkuNzM2OSA4LjQ3NzIyIDE5LjI4MTUgNy40OTk0OSAxOC42MTVDNy4zNzM2NSAxOC41Mjk1IDcuMjUwMTEgMTguNDQwNCA3LjEyOTA0IDE4LjM0NzdMNy4xMjk1NCAxOC4zNDdDNi41NzU0NiAxNy45MjEyIDYuMDc4NzIgMTcuNDI0NSA1LjY1MjkxIDE2Ljg3MDRMNS42NTE3MSAxNi44NzEzQzUuNDg1NTEgMTYuNjU0NSA1LjMyOTQxIDE2LjQyNzYgNS4xODQzOCAxNi4xOTExQzQuNjk0NTMgMTUuMzk2MiA0LjMzOTg1IDE0LjUwOTEgNC4xNTIzOSAxMy41NjE5QzQuMTE3ODggMTMuMzg5NSA0LjA4OTI1IDEzLjIxNjggNC4wNjY0MSAxMy4wNDQxTDQuMDY3NDkgMTMuMDQzOUM0LjAyMjk3IDEyLjcwMjIgNCAxMi4zNTM4IDQgMTJDNCAxMS42NDYgNC4wMjI5OSAxMS4yOTc0IDQuMDY3NTYgMTAuOTU1NUw0LjA2NzA4IDEwLjk1NTVDNC4wNzY5NCAxMC44ODExIDQuMDg3ODQgMTAuODA3IDQuMDk5NzYgMTAuNzMzQzQuMjgxIDkuNTk0IDQuNzAyNjYgOC41MzUwNyA1LjMxMTA5IDcuNjA5OTJDNS40MTg2NCA3LjQ0NTcyIDUuNTMyMzYgNy4yODUyNSA1LjY1MjEgNy4xMjg5MUw1LjY1Mjk0IDcuMTI5NTVDNS42NTUzNSA3LjEyNjQxIDUuNjU3NzcgNy4xMjMyNyA1LjY2MDE4IDcuMTIwMTRMNi44NjAzNyA4LjAyMDI4QzYuNzQwMTUgOC4xNzUzMSA2LjYyNjc5IDguMzM1OTMgNi41MjA3NCA4LjUwMTY4QzYuMDYwNDMgOS4yMjQzOSA1Ljc0NTQgMTAuMDMzMyA1LjU5NjM5IDEwLjg3ODVDNS41MzMwMyAxMS4yNDI4IDUuNSAxMS42MTc2IDUuNSAxMkM1LjUgMTIuNDc1MSA1LjU1MDk2IDEyLjkzODIgNS42NDc3MiAxMy4zODQzQzUuNzI4OTQgMTMuNzU0NCA1Ljg0Mzk3IDE0LjEyMzMgNS45OTQ3NSAxNC40ODczQzYuMTE3NTQgMTQuNzgzNyA2LjI1OTM4IDE1LjA2NTcgNi40MTgxMyAxNS4zMzI1QzYuOTE2NzIgMTYuMTY1OCA3LjU5NjYzIDE2Ljg3ODIgOC40MDMzNSAxNy40MTUxQzkuMTc2ODIgMTcuOTI3NSAxMC4wNTQgMTguMjcxIDEwLjk3MTQgMTguNDE5MUMxMS4zMDY0IDE4LjQ3MjMgMTEuNjUgMTguNSAxMiAxOC41QzEyLjQ1MDYgMTguNSAxMi44OTA0IDE4LjQ1NDIgMTMuMzE1MSAxOC4zNjY5QzEzLjUyNjMgMTguMzIzIDEzLjczNzIgMTguMjY4MSAxMy45NDcgMTguMjAxOUwxMy45NDc0IDE4LjIwMzJDMTYuNTg1OSAxNy4zNzU4IDE4LjUgMTQuOTExNCAxOC41IDEyQzE4LjUgOC40MTAyMyAxNS41OSA1LjUwMDEzIDEyLjAwMDIgNS41VjcuMjVMOS4wMDAyNCA0Ljc1TDEyLjAwMDIgMi4yNVoiIGZpbGw9IiMwMDdDQkEiLz4KPC9zdmc+",He="woocommerce-marketplace-refresh-subscriptions";function Ve(){const{refreshSubscriptions:e}=(0,r.useContext)(de),[o,t]=(0,r.useState)(!1);return(0,n.jsxs)(h.Button,{className:"woocommerce-marketplace__refresh-subscriptions",onClick:()=>{o||((0,S.fj)(He),t(!0),e().then((()=>{(0,S.Mp)(He,(0,u.__)("Subscriptions refreshed.","woocommerce"),me.T.Success)})).catch((e=>{(0,S.Mp)(He,(0,u.sprintf)((0,u.__)("Error refreshing subscriptions: %s","woocommerce"),e.data.message),me.T.Error)})).finally((()=>{t(!1)})))},isBusy:o,children:[(0,n.jsx)("img",{src:Ge,alt:(0,u.__)("Refresh subscriptions","woocommerce"),className:"woocommerce-marketplace__refresh-subscriptions-icon"}),(0,u.__)("Refresh","woocommerce")]})}const Ze="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgaWQ9ImFsZXJ0Ij4KPHBhdGggaWQ9IlZlY3RvciIgZD0iTTEyIDIwQzE2LjQxODMgMjAgMjAgMTYuNDE4MyAyMCAxMkMyMCA3LjU4MTcyIDE2LjQxODMgNCAxMiA0QzcuNTgxNzIgNCA0IDcuNTgxNzIgNCAxMkM0IDE2LjQxODMgNy41ODE3MiAyMCAxMiAyMFoiIHN0cm9rZT0iI0NDMTgxOCIgc3Ryb2tlLXdpZHRoPSIxLjUiLz4KPHBhdGggaWQ9IlZlY3Rvcl8yIiBkPSJNMTMgN0gxMVYxM0gxM1Y3WiIgZmlsbD0iI0NDMTgxOCIvPgo8cGF0aCBpZD0iVmVjdG9yXzMiIGQ9Ik0xMyAxNUgxMVYxN0gxM1YxNVoiIGZpbGw9IiNDQzE4MTgiLz4KPC9nPgo8L3N2Zz4K";var qe=t(65287);function Ke(){const e=(0,H.useSelect)((e=>e(qe.E).notices()),[]),o=e=>e.options?.actions?e.options?.actions.map((e=>({...e,variant:"link",className:"is-link"}))):[],t=[];for(const r of e)t.push((0,n.jsxs)(h.Notice,{className:"woocommerce-marketplace__notice--error",status:r.status,onRemove:()=>(0,S.fj)(r.productKey),actions:o(r),children:[(0,n.jsx)("img",{src:Ze,alt:"",width:24,height:24}),r.message]},r.productKey));return(0,n.jsx)(n.Fragment,{children:t})}function Je(e){var o;const t=new URL((0,S.E4)());return e.install&&t.searchParams.set("install",e.install),(0,n.jsx)(h.Button,{href:t.href,variant:null!==(o=e.variant)&&void 0!==o?o:"secondary",children:(0,u.__)("Connect Account","woocommerce")})}function Xe(){const e=(0,g.useQuery)(),o=e?.install,t=(0,c.Qk)("wccomHelper",{}),a=!!t?.isConnected,[i,l]=(0,r.useState)(!1),[m,d]=(0,r.useState)(!1),{subscriptions:p,isLoading:_}=(0,r.useContext)(de),w=p.find((e=>e.product_key===o)),x=(0,r.useCallback)((()=>{(0,g.navigateTo)({url:(0,g.getNewPath)({...e,install:void 0},s.q$,{})})}),[e]);(0,r.useEffect)((()=>{_||(o&&a&&!_&&!w?((0,S.Mp)(o,(0,u.sprintf)((0,u.__)("Could not find subscription with product key %s.","woocommerce"),o),me.T.Error),x()):l(!!o))}),[a,_,o,x,w]),(0,r.useEffect)((()=>{w&&w.local.installed&&d(!0)}),[w]);const y=()=>{x(),l(!1)};return i?(0,n.jsxs)(h.Modal,{title:m?(0,u.__)("You are ready to go!","woocommerce"):(0,u.__)("Add to store","woocommerce"),onRequestClose:y,focusOnMount:!0,className:"woocommerce-marketplace__header-account-modal has-size-medium",style:{borderRadius:4},overlayClassName:"woocommerce-marketplace__header-account-modal-overlay",children:[(()=>{if(!a)return(0,n.jsx)(h.Notice,{status:"warning",isDismissible:!1,children:(0,u.__)("In order to install a product, you need to first connect your account.","woocommerce")});if(w){const e=m?(0,u.__)("Keep the momentum going and start setting up your extension.","woocommerce"):(0,u.__)("Would you like to install this extension?","woocommerce");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"woocommerce-marketplace__header-account-modal-text",children:e}),(0,n.jsx)(P,{product:(0,S.w5)(w),small:!0,tracksData:{position:1,group:"subscriptions",label:"install"}})]})}})(),(()=>{const e=[];return m?(e.push((0,n.jsx)(h.Button,{variant:"secondary",href:w?.documentation_url,target:"_blank",className:"woocommerce-marketplace__header-account-modal-button",children:(0,u.__)("View docs","woocommerce")},"docs")),e.push((0,n.jsx)(h.Button,{variant:"primary",href:s.dL,className:"woocommerce-marketplace__header-account-modal-button",children:(0,u.__)("View in Plugins","woocommerce")},"plugin-list"))):(e.push((0,n.jsx)(h.Button,{variant:"tertiary",onClick:y,className:"woocommerce-marketplace__header-account-modal-button",children:(0,u.__)("Cancel","woocommerce")},"cancel")),a?w&&e.push((0,n.jsx)(Ne,{subscription:w,variant:"primary",onError:y},"install")):e.push((0,n.jsx)(Je,{variant:"primary",install:o},"connect"))),(0,n.jsx)(h.ButtonGroup,{className:"woocommerce-marketplace__header-account-modal-button-group",children:e})})()]}):null}var eo=t(25595);function oo(){const{subscriptions:e,isLoading:o}=(0,r.useContext)(de),t=(0,c.Qk)("wccomHelper",{}),s=(0,r.createInterpolateElement)((0,u.__)("WooCommerce.com extensions and themes installed on this store. To see all your subscriptions go to <a>your account<custom_icon /></a> on WooCommerce.com.","woocommerce"),{a:(0,n.jsx)("a",{href:"https://woocommerce.com/my-account/my-subscriptions",target:"_blank",rel:"nofollow noopener noreferrer",children:"your account"}),custom_icon:(0,n.jsx)(q.A,{icon:ae.A,size:12})}),a=e.filter((e=>e.subscription_installed)),i=e.filter((e=>!e.subscription_installed&&t?.wooUpdateManagerPluginSlug!==e.product_slug&&!e.maxed));if(!t?.isConnected){const e=(0,u.__)("Connect your WooCommerce.com account to get product updates, manage your subscriptions from your store admin, and get streamlined support.","woocommerce"),o=()=>{const e={notice_id:"woo-disconnect-notice",dismiss_notice_nonce:t?.dismissNoticeNonce||""};le()({path:"/wc-admin/notice/dismiss",method:"POST",data:e}),localStorage.setItem("wc-marketplaceNoticeClosed-woo-disconnect-notice","false")};return(0,n.jsxs)(n.Fragment,{children:[t?.disconnected_notice&&(0,n.jsx)(eo.A,{id:"woo-disconnect-notice",description:t?.disconnected_notice,isDismissible:!0,variant:"info",onClose:o}),(0,n.jsxs)("div",{className:"woocommerce-marketplace__my-subscriptions--connect",children:[(0,n.jsx)(Xe,{}),(0,n.jsx)("div",{className:"woocommerce-marketplace__my-subscriptions__icon"}),(0,n.jsx)("h2",{className:"woocommerce-marketplace__my-subscriptions__header",children:(0,u.__)("Connect your WooCommerce.com account","woocommerce")}),(0,n.jsx)("p",{className:"woocommerce-marketplace__my-subscriptions__description",children:e}),(0,n.jsx)(h.Button,{href:(0,S.E4)(),variant:"primary",children:(0,u.__)("Connect","woocommerce")})]})]})}return(0,n.jsxs)(n.Fragment,{children:[t?.connected_notice&&(0,n.jsx)(eo.A,{id:"woo-connect-notice",description:t?.connected_notice,isDismissible:!0,variant:"success",onClose:()=>{const e={notice_id:"woo-connect-notice",dismiss_notice_nonce:t?.dismissNoticeNonce||""};le()({path:"/wc-admin/notice/dismiss",method:"POST",data:e}),localStorage.setItem("wc-marketplaceNoticeClosed-woo-connect-notice","false")}}),!t?.has_host_plan_orders&&t?.connection_url_notice&&(0,n.jsx)(eo.A,{id:"woo-connection-url-notice",description:t?.connection_url_notice,isDismissible:!1,variant:"error",children:(0,n.jsx)(h.Button,{href:(0,S.E4)("wc-admin",!0),variant:"secondary",children:(0,u.__)("Reconnect","woocommerce")})}),(0,n.jsxs)("div",{className:"woocommerce-marketplace__my-subscriptions",children:[(0,n.jsx)(Xe,{}),(0,n.jsx)("section",{className:"woocommerce-marketplace__my-subscriptions__notices",children:(0,n.jsx)(Ke,{})}),(0,n.jsxs)("section",{className:"woocommerce-marketplace__my-subscriptions-section woocommerce-marketplace__my-subscriptions__installed",children:[(0,n.jsxs)("header",{className:"woocommerce-marketplace__my-subscriptions__header",children:[(0,n.jsxs)("div",{className:"woocommerce-marketplace__my-subscriptions__header-content",children:[(0,n.jsx)("h2",{className:"woocommerce-marketplace__my-subscriptions__heading",children:(0,u.__)("Installed on this store","woocommerce")}),(0,n.jsx)("p",{className:"woocommerce-marketplace__my-subscriptions__table-description",children:s})]}),(0,n.jsx)("div",{className:"woocommerce-marketplace__my-subscriptions__header-refresh",children:(0,n.jsx)(Ve,{})})]}),(0,n.jsx)("div",{className:"woocommerce-marketplace__my-subscriptions__table-wrapper",children:(0,n.jsx)(we,{isLoading:o,rows:a.map((e=>$e(e,"installed")))})})]}),i.length>0&&(0,n.jsxs)("section",{className:"woocommerce-marketplace__my-subscriptions-section woocommerce-marketplace__my-subscriptions__available",children:[(0,n.jsx)("h2",{className:"woocommerce-marketplace__my-subscriptions__heading",children:(0,u.__)("Available to use","woocommerce")}),(0,n.jsx)("p",{className:"woocommerce-marketplace__my-subscriptions__table-description",children:(0,u.__)("WooCommerce.com subscriptions you haven't used yet.","woocommerce")}),(0,n.jsx)("div",{className:"woocommerce-marketplace__my-subscriptions__table-wrapper",children:(0,n.jsx)(ge,{isLoading:o,rows:i.map((e=>$e(e,"available")))})})]})]})]})}var to=function(e){return e[e.notConnected=0]="notConnected",e[e.notInstalled=1]="notInstalled",e[e.installing=2]="installing",e[e.installedCanActivate=3]="installedCanActivate",e[e.installedCannotActivate=4]="installedCannotActivate",e[e.installFailed=5]="installFailed",e[e.activating=6]="activating",e[e.activated=7]="activated",e[e.activationFailed=8]="activationFailed",e}(to||{});const ro=function(e){const[o,t]=(0,r.useState)(to.notInstalled),[a,i]=(0,r.useState)(),[m,d]=(0,r.useState)(),[p,_]=(0,r.useState)(),[w,x]=(0,r.useState)(),[y,b]=(0,r.useState)(),[v,k]=(0,r.useState)(!1),[j,N]=(0,r.useState)(),{addInstalledProduct:C}=(0,r.useContext)(l),M=(0,g.useQuery)();function T(){t(to.notInstalled),N(void 0),(0,g.navigateTo)({url:(0,g.getNewPath)({...M,install:void 0,installProduct:void 0},s.q$,{})})}return(0,r.useEffect)((()=>{const e=(0,c.Qk)("wccomHelper",{});d(e?.installedProducts),_(e?.isConnected)}),[]),(0,r.useEffect)((()=>{if(k(!1),!M.installProduct)return;const o=parseInt(M.installProduct,10),r=e.products.find((e=>e.id===o));if(r){if(m&&m.find((e=>e===r.slug)))return;p?t(to.notInstalled):(t(to.notConnected),N({status:"warning",message:(0,u.__)("In order to install a product, you need to first connect your account.","woocommerce")})),k(!0),i(r)}}),[M,e.products,m,p]),a&&v?(0,n.jsxs)(h.Modal,{title:o===to.activated?(0,u.__)("You are ready to go!","woocommerce"):(0,u.__)("Add to Store","woocommerce"),onRequestClose:T,focusOnMount:!0,className:"woocommerce-marketplace__header-account-modal has-size-medium",style:{borderRadius:4},overlayClassName:"woocommerce-marketplace__header-account-modal-overlay",children:[j&&(0,n.jsx)(h.Notice,{status:j.status,isDismissible:!1,children:j.message}),(0,n.jsx)("p",{className:"woocommerce-marketplace__header-account-modal-text",children:o===to.notConnected?"":o===to.installedCanActivate||o===to.activating?(0,u.__)("Extension successfully installed. Would you like to activate it?","woocommerce"):o===to.installedCannotActivate?(0,u.__)("Extension successfully installed but we can't activate it at the moment. Please visit the plugins page to see more.","woocommerce"):o===to.activated?(0,u.__)("Keep the momentum going and start setting up your extension.","woocommerce"):(0,u.__)("Would you like to install this extension?","woocommerce")}),a&&(0,n.jsx)(P,{product:a,small:!0,tracksData:{position:1,group:"install-flow",label:"install"}}),(0,n.jsxs)(h.ButtonGroup,{className:"woocommerce-marketplace__header-account-modal-button-group",children:[o===to.activated?y?(0,n.jsx)(h.Button,{variant:"tertiary",href:y,className:"woocommerce-marketplace__header-account-modal-button",children:(0,u.__)("View Docs","woocommerce")},"docs"):(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(h.Button,{variant:"tertiary",onClick:T,className:"woocommerce-marketplace__header-account-modal-button",children:(0,u.__)("Cancel","woocommerce")},"cancel"),o===to.notConnected?(0,n.jsx)(Je,{variant:"primary"},"connect"):o===to.installedCanActivate||o===to.activating?(0,n.jsx)(h.Button,{variant:"primary",onClick:function(){w&&(t(to.activating),(0,f.recordEvent)("marketplace_activate_new_product_clicked",{product_id:a?a.id:0}),fetch(w).then((()=>{t(to.activated)})).catch((()=>{t(to.activationFailed),N({status:"error",message:(0,u.__)("Activation failed. Please try again from the plugins page.","woocommerce")})})))},isBusy:o===to.activating,disabled:o===to.activating,children:(0,u.__)("Activate","woocommerce")},"activate"):o===to.activated||o===to.installedCannotActivate||o===to.activationFailed?(0,n.jsx)(h.Button,{variant:"primary",href:s.dL,className:"woocommerce-marketplace__header-account-modal-button",children:(0,u.__)("View in Plugins","woocommerce")},"plugin-list"):(0,n.jsx)(h.Button,{variant:"primary",onClick:function(){var e;a&&a.id&&((0,f.recordEvent)("marketplace_install_new_product_clicked",{product_id:a.id}),t(to.installing),(e=a.id,le()({path:"/wc/v3/marketplace/create-order",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({product_id:e})})).then((e=>{var o,r;if(!e.success)throw e;return(0,H.dispatch)(je).startInstalling(String(null!==(o=a.id)&&void 0!==o?o:"")),b(e.data.documentation_url),a.slug&&C(null!==(r=a.slug)&&void 0!==r?r:""),(0,S.UN)(e.data.product_type,e.data.zip_slug).then((e=>{var o;(0,H.dispatch)(je).stopInstalling(String(null!==(o=a.id)&&void 0!==o?o:"")),e.data.activateUrl?(x(e.data.activateUrl),t(to.installedCanActivate)):t(to.installedCannotActivate)}))})).catch((e=>{var o;e.data.redirect_location?(N({status:"warning",message:(0,u.__)("We need your address to complete installing this product. We will redirect you to WooCommerce.com checkout. Afterwards, you will be able to install the product.","woocommerce")}),setTimeout((()=>{window.location.href=e.data.redirect_location}),5e3)):(t(to.installFailed),N({status:"error",message:null!==(o=e.data.message)&&void 0!==o?o:(0,u.__)("An error occurred. Please try again later.","woocommerce")}))})))},isBusy:o===to.installing,disabled:o===to.installing||o===to.installFailed,children:(0,u.__)("Install","woocommerce")},"install")]})]}):(0,n.jsx)(n.Fragment,{})};var co=t(79492);function so(){const e="woo-connect-notice-marketplace-dismissed",o=(0,c.Qk)("wccomHelper",{}),t=o?.woocomConnectNoticeType||"none",r=(0,u.__)("Your store","woocommerce"),s=o?.storeName||r,a=s!==r?`<strong>${s}</strong>`:s;if("none"===t)return null;const i=localStorage.getItem(e),l=new Date(i||""),m=new Date;m.setMonth(m.getMonth()-1),(null===i||isNaN(l.valueOf())||m.valueOf()>l.valueOf())&&(localStorage.removeItem("wc-marketplaceNoticeClosed-woo-connect-notice"),localStorage.removeItem(e));const d={long:(0,u.sprintf)((0,u.__)("%s might be at risk because it’s running outdated WooCommerce plugins and is not yet connected to a WooCommerce.com account. Please complete the connection to get updates and streamlined support.","woocommerce"),a),short:(0,u.sprintf)((0,u.__)("%s is not yet connected to a WooCommerce.com account. Please complete the connection to get updates and streamlined support.","woocommerce"),a)}[t],p=(0,S.A5)((0,S.E4)(),[["utm_source","pu"],["utm_campaign","pu_in_apps_screen_connect"]]);return(0,n.jsxs)(eo.A,{id:"woo-connect-notice",description:d,isDismissible:!0,variant:"warning",className:"woocommerce-marketplace__connect-notice",onClose:()=>{localStorage.setItem(e,(new Date).toString()),(0,f.recordEvent)("woo_connect_notice_in_marketplace_dismissed")},onLoad:()=>{(0,f.recordEvent)("woo_connect_notice_in_marketplace_shown")},children:[(0,n.jsx)(h.Button,{href:p,variant:"primary",onClick:()=>((0,f.recordEvent)("woo_connect_notice_in_marketplace_clicked"),!0),children:(0,u.__)("Connect your store","woocommerce")}),(0,n.jsx)(h.Button,{href:"https://woocommerce.com/document/managing-woocommerce-com-subscriptions/#connect-your-site-woocommercecom-account",target:"_blank",variant:"tertiary",onClick:()=>((0,f.recordEvent)("woo_connect_notice_learn_more_clicked"),!0),children:(0,u.__)("Learn more","woocommerce")})]})}function no(e){const o=(0,c.Qk)("wccomHelper",{});if(!o?.isConnected)return null;const{selectedTab:t}=e;return"my-subscriptions"!==t&&o?.mySubscriptionsTabLoaded?null:o?.wooUpdateManagerActive||o?.wooUpdateManagerInstalled?o?.wooUpdateManagerInstalled&&!o?.wooUpdateManagerActive?(0,n.jsx)("section",{className:"woocommerce-marketplace__woo-update-manager-plugin__notices",children:(0,n.jsxs)(h.Notice,{status:"error",isDismissible:!1,children:[(0,n.jsx)("span",{dangerouslySetInnerHTML:(0,ve.Ay)((0,u.__)("Activate the <b>WooCommerce.com Update Manager</b> to continue receiving the updates and streamlined support included in your WooCommerce.com subscriptions.","woocommerce"))}),(0,n.jsx)("div",{className:"components-notice__buttons",children:(0,n.jsx)(h.Button,{href:s.dL,variant:"secondary",children:(0,u.__)("Activate","woocommerce")})})]})}):null:(0,n.jsx)("section",{className:"woocommerce-marketplace__woo-update-manager-plugin__notices",children:(0,n.jsxs)(h.Notice,{status:"error",isDismissible:!1,children:[(0,n.jsx)("span",{dangerouslySetInnerHTML:(0,ve.Ay)((0,u.__)("Please install the <b>WooCommerce.com Update Manager</b> to continue receiving the updates and streamlined support included in your WooCommerce.com subscriptions.<br/>Alternatively, you can download and install it manually.","woocommerce"))}),(0,n.jsxs)("div",{className:"components-notice__buttons",children:[(0,n.jsx)(h.Button,{href:o?.wooUpdateManagerInstallUrl,variant:"secondary",children:(0,u.__)("Install","woocommerce")}),(0,n.jsx)(h.Button,{href:s.K_,variant:"link",children:(0,u.__)("Download","woocommerce")})]})]})})}function ao(e){const{type:o}=e,t=(0,c.Qk)("wccomHelper",{}),r={"woo-subscription-expired-notice":{shown:"woo_subscription_expired_notice_in_marketplace_shown",clicked:"woo_subscription_expired_notice_in_marketplace_clicked",dismissed:"woo_subscription_expired_notice_in_marketplace_dismissed"},"woo-subscription-expiring-notice":{shown:"woo_subscription_expiring_notice_in_marketplace_shown",clicked:"woo_subscription_expiring_notice_in_marketplace_clicked",dismissed:"woo_subscription_expiring_notice_in_marketplace_dismissed"},"woo-subscription-missing-notice":{shown:"woo_subscription_missing_notice_in_marketplace_shown",clicked:"woo_subscription_missing_notice_in_marketplace_clicked",dismissed:"woo_subscription_missing_notice_in_marketplace_dismissed"}};let s=null,a="";const i=t?.dismissNoticeNonce||"";if("expired"===o)s=t?.subscription_expired_notice||{},a="woo-subscription-expired-notice";else if("expiring"===o)s=t?.subscription_expiring_notice||{},a="woo-subscription-expiring-notice";else{if("missing"!==o)return null;s=t?.subscription_missing_notice||{},a="woo-subscription-missing-notice"}return t.isConnected&&s?.description?(0,n.jsx)(eo.A,{id:a,description:s.description,isDismissible:!0,variant:"error",onClose:()=>{(0,f.recordEvent)(r[a].dismissed);const e={notice_id:a,dismiss_notice_nonce:i};le()({path:"/wc-admin/notice/dismiss",method:"POST",data:e})},onLoad:function(){(0,f.recordEvent)(r[a].shown)},children:(0,n.jsx)(h.Button,{href:s.button_link,variant:"secondary",onClick:function(){(0,f.recordEvent)(r[a].clicked)},children:s.button_text})}):null}function io(e){const{onLoadMore:o,isBusy:t,disabled:r}=e;return t&&(0,N.speak)((0,u.__)("Loading more products","woocommerce")),(0,n.jsx)(h.Button,{className:"woocommerce-marketplace__load-more",variant:"secondary",onClick:function(){(0,f.queueRecordEvent)("marketplace_load_more_button_clicked",{}),o()},isBusy:t,disabled:r,children:(0,u.__)("Load more","woocommerce")})}function lo(){const e=(0,r.useContext)(l),[o,t]=(0,r.useState)([]),[s,a]=(0,r.useState)([]),[i,m]=(0,r.useState)(1),[d,p]=(0,r.useState)(1),[_,h]=(0,r.useState)(1),[w,x]=(0,r.useState)(1),[y,b]=(0,r.useState)(1),[v,k]=(0,r.useState)(0),[j,M]=(0,r.useState)(!1),{isLoading:T,setIsLoading:A,selectedTab:I,setSearchResultsCount:E}=e,L=(0,g.useQuery)(),D=e=>{(0,N.speak)((0,u.sprintf)((0,u.__)("%d products found","woocommerce"),e))},z=(0,r.useCallback)((()=>{M(!0);const e=new URLSearchParams,o=new AbortController;L.category&&"_all"!==L.category&&e.append("category",L.category),"themes"!==L.tab&&"business-services"!==L.tab||e.append("category",L.tab),L.term&&e.append("term",L.term);const r=(0,c.Qk)("wccomHelper",!1);return r.storeCountry&&e.append("country",r.storeCountry),e.append("page",(i+1).toString()),(0,S.Hu)(e,o.signal).then((e=>{t((o=>{const t=Array.isArray(o[0])?o.flat():o,r=e.products.filter((e=>!t.some((o=>o.id===e.id))));var c;return r.length>0&&k(null!==(c=r[0].id)&&void 0!==c?c:0),[...t,...r]})),(0,N.speak)((0,u.__)("More products loaded","woocommerce")),m((e=>e+1))})).catch((()=>{(0,N.speak)((0,u.__)("Error loading more products","woocommerce"))})).finally((()=>{M(!1)})),()=>{o.abort()}}),[i,L.category,L.term,L.tab,M]);return(0,r.useEffect)((()=>{if(i>1)return;const e=[{category:"extensions",type:C.ch.extension},{category:"themes",type:C.ch.theme},{category:"business-services",type:C.ch.businessService}],o=e.map((()=>new AbortController));A(!0),t([]);const r=e=>{if(L.search){(0,f.recordEvent)("marketplace_search_finish",{tab:L.tab,total_products:e,category:L.category||"_all",search_term:L.term||""});const o=new URL(window.location.href);o.searchParams.delete("search"),window.history.replaceState(null,"",o.pathname+o.search)}};if(L.category&&"_all"!==L.category){const e=new URLSearchParams;e.append("category",L.category),L.term&&e.append("term",L.term);const s=(0,c.Qk)("wccomHelper",!1);s.storeCountry&&e.append("country",s.storeCountry),(0,S.Hu)(e,o[0].signal).then((e=>{t(e.products),p(e.totalPages),E({[L.tab]:e.totalProducts}),D(e.totalProducts),r(e.totalProducts)})).catch((()=>{t([])})).finally((()=>{A(!1)}))}else Promise.all(e.map((({category:e,type:t},r)=>{const s=new URLSearchParams;"extensions"!==e&&s.append("category",e),L.term&&s.append("term",L.term);const n=(0,c.Qk)("wccomHelper",!1);return n.storeCountry&&s.append("country",n.storeCountry),(0,S.Hu)(s,o[r].signal).then((e=>{const o=((e,o)=>e.map((e=>({...e,type:o}))))(e.products,t);return{products:o,totalPages:e.totalPages,totalProducts:e.totalProducts,type:t}}))}))).then((e=>{const o=e.flatMap((e=>e.products));t(o);const c={extensions:e.find((e=>"extension"===e.type))?.totalProducts,themes:e.find((e=>"theme"===e.type))?.totalProducts,"business-services":e.find((e=>"business-service"===e.type))?.totalProducts};E(c),e.forEach((e=>{switch(e.type){case C.ch.extension:h(e.totalPages);break;case C.ch.theme:x(e.totalPages);break;case C.ch.businessService:b(e.totalPages)}}));const s=L.tab;r(c[s]),D(e.reduce(((e,o)=>e+o.totalProducts),0))})).catch((()=>{t([])})).finally((()=>{A(!1)}));return()=>{o.forEach((e=>{e.abort()}))}}),[L.tab,L.term,L.category,A,E,i]),(0,r.useEffect)((()=>{let e;switch(I){case"extensions":e=o.filter((e=>e.type===C.ch.extension));break;case"themes":e=o.filter((e=>e.type===C.ch.theme));break;case"business-services":e=o.filter((e=>e.type===C.ch.businessService));break;default:e=[]}a(e)}),[I,o]),(0,r.useEffect)((()=>{const e={view:L?.tab,search_term:L?.term,product_type:L?.section,category:L?.category};$(e),function(e){if(e.product_type)return;let o="extensions_view";const t=e.view||"_featured",r=e.search_term||null,c=e.category||null,s={...t&&{section:t},...r&&{search_term:r},version:"2",wccom_connected:F()};switch(t){case"extensions":s.section=c||"_all";break;case"themes":s.section="themes";break;case"my-subscriptions":o="subscriptions_view",s.section="helper"}(0,f.recordEvent)(o,s)}(e)}),[L?.tab,L?.term,L?.section,L?.category]),(0,r.useEffect)((()=>{m(1),k(0)}),[I,L?.category,L?.term]),(0,r.useEffect)((()=>{v&&setTimeout((()=>{const e=document.getElementById(`product-${v}`);e&&e.focus()}),0)}),[v]),(0,n.jsxs)("div",{className:"woocommerce-marketplace__content",children:[(0,n.jsx)(co.A,{format:"promo-card"}),(0,n.jsx)(co.A,{format:"notice"}),(0,n.jsx)(ro,{products:s}),"business-services"!==I&&"my-subscriptions"!==I&&(0,n.jsx)(so,{}),"business-services"!==I&&(0,n.jsx)(no,{selectedTab:I}),"business-services"!==I&&(0,n.jsx)(ao,{type:"expired"}),"business-services"!==I&&(0,n.jsx)(ao,{type:"expiring"}),(()=>{switch(I){case"extensions":case"themes":case"business-services":return(0,n.jsx)(ne,{products:s,categorySelector:!0,type:(0,S.YW)(I),searchTerm:L.term});case"discover":return(0,n.jsx)(G,{});case"my-subscriptions":return(0,n.jsx)(pe,{children:(0,n.jsx)(oo,{})});default:return(0,n.jsx)(n.Fragment,{})}})(),!T&&(()=>{if(L.category&&"_all"!==L.category)return i<d;switch(I){case"extensions":return i<_;case"themes":return i<w;case"business-services":return i<y;default:return!1}})()&&(0,n.jsx)(io,{onLoadMore:z,isBusy:j,disabled:j})]})}var mo=t(22480);function uo(){const{selectedTab:e}=(0,r.useContext)(l),o="woocommerce-marketplace"+(e?" woocommerce-marketplace--"+e:"");return(0,n.jsxs)("div",{className:o,children:[(0,n.jsx)(j,{}),(0,n.jsx)(lo,{}),(0,n.jsx)(mo.Ay,{})]})}function po(){return(0,n.jsx)(m,{children:(0,n.jsx)(uo,{})})}},97687:(e,o,t)=>{t.d(o,{E:()=>r});const r=()=>void 0!==window.wcCalypsoBridge&&window.wcCalypsoBridge.isWooExpress}}]);
=======
"use strict";(globalThis.webpackChunk_wcAdmin_webpackJsonp=globalThis.webpackChunk_wcAdmin_webpackJsonp||[]).push([[9669],{56592:(e,o,t)=>{t.d(o,{Z:()=>s});var r=t(70444),c=t(81514);const s=(0,c.jsx)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,c.jsx)(r.Path,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"})})},58176:(e,o,t)=>{t.d(o,{Z:()=>s});var r=t(70444),c=t(81514);const s=(0,c.jsx)(r.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,c.jsx)(r.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"})})},91667:(e,o,t)=>{t.d(o,{Z:()=>s});var r=t(70444),c=t(81514);const s=(0,c.jsx)(r.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,c.jsx)(r.Path,{d:"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z"})})},7637:(e,o,t)=>{t.d(o,{Z:()=>s});var r=t(70444),c=t(81514);const s=(0,c.jsx)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,c.jsx)(r.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})})},33002:(e,o,t)=>{t.d(o,{Z:()=>s});var r=t(70444),c=t(81514);const s=(0,c.jsx)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,c.jsx)(r.Path,{d:"M12 3.2c-4.8 0-8.8 3.9-8.8 8.8 0 4.8 3.9 8.8 8.8 8.8 4.8 0 8.8-3.9 8.8-8.8 0-4.8-4-8.8-8.8-8.8zm0 16c-4 0-7.2-3.3-7.2-7.2C4.8 8 8 4.8 12 4.8s7.2 3.3 7.2 7.2c0 4-3.2 7.2-7.2 7.2zM11 17h2v-6h-2v6zm0-8h2V7h-2v2z"})})},25869:(e,o,t)=>{t.d(o,{Z:()=>s});var r=t(70444),c=t(81514);const s=(0,c.jsx)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,c.jsx)(r.Path,{d:"M13 19h-2v-2h2v2zm0-6h-2v-2h2v2zm0-6h-2V5h2v2z"})})},10865:(e,o,t)=>{t.d(o,{Z:()=>s});var r=t(70444),c=t(81514);const s=(0,c.jsx)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,c.jsx)(r.Path,{fillRule:"evenodd",d:"M6.5 8a1.5 1.5 0 103 0 1.5 1.5 0 00-3 0zM8 5a3 3 0 100 6 3 3 0 000-6zm6.5 11a1.5 1.5 0 103 0 1.5 1.5 0 00-3 0zm1.5-3a3 3 0 100 6 3 3 0 000-6zM5.47 17.41a.75.75 0 001.06 1.06L18.47 6.53a.75.75 0 10-1.06-1.06L5.47 17.41z",clipRule:"evenodd"})})},28682:(e,o,t)=>{t.d(o,{A:()=>i});var r=t(14812),c=t(28302),s=t(86020),n=t(14599),a=t(81514);const i=({textProps:e,message:o,eventName:t="",eventProperties:i={},targetUrl:l,linkType:m="wc-admin",onClickCallback:u})=>(0,a.jsx)(r.Text,{...e,children:(0,c.Z)({mixedString:o,components:{Link:(0,a.jsx)(s.Link,{onClick:()=>(u?u():(0,n.recordEvent)(t,i),window.location.href=l,!1),href:l,type:m})}})})},9845:(e,o,t)=>{t.d(o,{ZP:()=>n});var r=t(25209);const c=["a","b","em","i","strong","p","br"],s=["target","href","rel","name","download"],n=e=>({__html:(0,r.sanitize)(e,{ALLOWED_TAGS:c,ALLOWED_ATTR:s})})},84884:(e,o,t)=>{t.d(o,{Z:()=>p});var r=t(80225),c=t(69307),s=t(33002),n=t(56592),a=t(10865),i=t(59550),l=t(7637),m=t(9845),u=t(81514);const d={info:s.Z,check:n.Z,percent:a.Z};function p(e){const{id:o,description:t,children:s,icon:n,isDismissible:a=!0,variant:p="info",className:_,onClose:g,onLoad:w}=e,[h,x]=(0,c.useState)("true"!==localStorage.getItem(`wc-marketplaceNoticeClosed-${o}`));if((0,c.useEffect)((()=>{h&&"function"==typeof w&&w()}),[h]),!h)return null;const M=(0,r.Z)("woocommerce-marketplace__notice",`woocommerce-marketplace__notice--${p}`,{"is-dismissible":a},_),j=d[n||"info"],y=(0,r.Z)("woocommerce-marketplace__notice-icon",`woocommerce-marketplace__notice-icon--${p}`);return(0,u.jsxs)("div",{className:M,children:[n&&(0,u.jsx)("span",{className:y,children:(0,u.jsx)(i.Z,{icon:j})}),(0,u.jsxs)("div",{className:"woocommerce-marketplace__notice-content",children:[(0,u.jsx)("p",{className:"woocommerce-marketplace__notice-description",dangerouslySetInnerHTML:(0,m.ZP)(t)}),s&&(0,u.jsx)("div",{className:"woocommerce-marketplace__notice-children",children:s})]}),a&&(0,u.jsx)("button",{className:"woocommerce-marketplace__notice-close","aria-label":"Close",onClick:()=>{x(!1),localStorage.setItem(`wc-marketplaceNoticeClosed-${o}`,"true"),"function"==typeof g&&g()},children:(0,u.jsx)(i.Z,{icon:l.Z})})]})}},22252:(e,o,t)=>{t.d(o,{Z:()=>c});var r=t(81514);function c(){return(0,r.jsxs)("svg",{width:"72",height:"60",viewBox:"0 0 72 60",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsxs)("g",{clipPath:"url(#clip0_4074_10418)",children:[(0,r.jsx)("path",{d:"M68.5301 33.3144C68.0263 32.1006 66.3348 32.344 65.8443 31.1636C65.3538 29.9832 66.7251 28.9562 66.2213 27.7458C65.7175 26.5354 64.0259 26.7755 63.5355 25.5951C63.045 24.4147 64.4163 23.3877 63.9125 22.1773C63.4087 20.9669 61.7171 21.207 61.2267 20.0266C60.7362 18.8462 62.1075 17.8192 61.6037 16.6088C61.0999 15.395 59.4083 15.6385 58.9179 14.4581C58.4274 13.2777 59.7987 12.2507 59.2949 11.0403C58.7911 9.82652 57.0995 10.0699 56.6091 8.88955C56.1186 7.70915 57.4899 6.68214 56.9861 5.47174C56.4823 4.26134 54.7907 4.50142 54.3003 3.32102C53.8465 2.22733 55.0476 1.11696 54.8274 -0.00341797L0 22.5941C0.5038 23.8079 2.19537 23.5644 2.68582 24.7448C3.17627 25.9252 1.805 26.9522 2.3088 28.1626C2.8126 29.373 4.50417 29.133 4.99462 30.3134C5.48508 31.4937 4.11381 32.5208 4.61761 33.7312C5.12141 34.9416 6.81297 34.7015 7.30343 35.8819C7.79388 37.0623 6.42261 38.0893 6.92641 39.2997C7.43021 40.5134 9.12178 40.27 9.61223 41.4504C10.1027 42.6308 8.73142 43.6578 9.23522 44.8682C9.73902 46.0786 11.4306 45.8385 11.921 47.0189C12.4115 48.1993 11.0402 49.2263 11.544 50.4367C12.0478 51.6471 13.7394 51.4071 14.2298 52.5874C14.6836 53.6811 13.4825 54.7915 13.7027 55.9119L28.1928 49.9232L68.5368 33.3177L68.5301 33.3144Z",fill:"#720EEC"}),(0,r.jsx)("path",{d:"M13.696 55.912L28.1861 49.9234L52.3851 39.9634H7.46021C8.17086 40.4802 9.23852 40.5569 9.60886 41.4539C10.0993 42.6343 8.72805 43.6613 9.23185 44.8717C9.73565 46.0821 11.4272 45.842 11.9177 47.0224C12.4081 48.2028 11.0368 49.2298 11.5406 50.4402C12.0444 51.6506 13.736 51.4105 14.2265 52.5909C14.6802 53.6846 13.4791 54.795 13.6993 55.9154L13.696 55.912Z",fill:"#3C087E"}),(0,r.jsx)("path",{d:"M63.8523 41.9907C63.8523 37.4925 67.499 33.848 71.9998 33.848V23.988H17.873V33.848C22.3739 33.848 26.0206 37.4925 26.0206 41.9907C26.0206 46.4889 22.3739 50.1334 17.873 50.1334V59.9934H71.9998V50.1334C67.499 50.1334 63.8523 46.4889 63.8523 41.9907Z",fill:"#D1C1FF"}),(0,r.jsx)("path",{d:"M35.2527 37.676C35.2527 35.2051 37.0143 33.2878 39.6968 33.2878C42.3793 33.2878 44.1643 35.2051 44.1643 37.676C44.1643 40.1468 42.4026 42.0107 39.6968 42.0107C36.991 42.0107 35.2527 40.1201 35.2527 37.676ZM41.7954 37.676C41.7954 36.2288 40.9046 35.3385 39.6935 35.3385C38.4823 35.3385 37.6182 36.2288 37.6182 37.676C37.6182 39.1231 38.509 39.9601 39.6935 39.9601C40.8779 39.9601 41.7954 39.0664 41.7954 37.676ZM37.9852 51.0704L49.1789 33.5513H51.1774L39.9537 51.0704H37.9819H37.9852ZM44.8983 47.0524C44.8983 44.5849 46.6566 42.641 49.3391 42.641C52.0215 42.641 53.8065 44.5849 53.8065 47.0524C53.8065 49.5199 52.0182 51.3872 49.3391 51.3872C46.6599 51.3872 44.8983 49.4966 44.8983 47.0524ZM51.441 47.0524C51.441 45.6053 50.5468 44.715 49.3357 44.715C48.1246 44.715 47.2605 45.6053 47.2605 47.0524C47.2605 48.4996 48.1279 49.3365 49.3357 49.3365C50.5435 49.3365 51.441 48.4696 51.441 47.0524Z",fill:"#720EEC"})]}),(0,r.jsx)("defs",{children:(0,r.jsx)("clipPath",{id:"clip0_4074_10418",children:(0,r.jsx)("rect",{width:"72",height:"60",fill:"white"})})})]})}},55291:(e,o,t)=>{t.d(o,{Z:()=>u});var r=t(55609),c=t(65736),s=t(69307),n=t(14599),a=t(9845),i=t(22252),l=t(81514);const m={percent:i.Z},u=({promotion:e})=>{var o,t;const i=window.location.pathname+window.location.search,u=()=>JSON.parse(localStorage.getItem("wc-marketplaceDismissedPromos")||"[]"),[d,p]=(0,s.useState)(!u().includes(i));if((0,s.useEffect)((()=>{d&&(0,n.recordEvent)("marketplace_promotion_viewed",{path:i,format:"promo-card"})}),[d]),!d)return null;const _="promo-card"+(e.style?` ${e.style}`:""),g=(0,l.jsxs)("div",{className:"promo-content",children:[(0,l.jsx)("h2",{className:"promo-title",children:e.title?.en_US}),(0,l.jsx)("div",{className:"promo-text",dangerouslySetInnerHTML:(0,a.ZP)(e.content?.en_US)})]}),w=(0,l.jsxs)("div",{className:"promo-links",children:[(0,l.jsx)(r.Button,{className:"promo-cta",href:null!==(o=e.cta_link)&&void 0!==o?o:"",onClick:()=>((0,n.recordEvent)("marketplace_promotion_actioned",{path:i,target_uri:e.cta_link,format:"promo-card"}),!0),children:null!==(t=e.cta_label?.en_US)&&void 0!==t?t:""}),(0,l.jsx)(r.Button,{className:"promo-cta-link",onClick:()=>{p(!1),localStorage.setItem("wc-marketplaceDismissedPromos",JSON.stringify(u().concat(i))),(0,n.recordEvent)("marketplace_promotion_dismissed",{path:i,format:"promo-card"})},children:(0,c.__)("Dismiss","woocommerce")})]});function h(){if(e.icon&&Object.hasOwn(m,e.icon)){const o=m[e.icon];return o?(0,l.jsx)("div",{className:"promo-image",children:(0,s.createElement)(o)}):null}return null}return(0,l.jsx)("div",{className:_,children:"has-background"===e?.style?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"promo-content-links",children:[g,w]}),h()]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"promo-content-image",children:[g,h()]}),w]})})}},87287:(e,o,t)=>{t.d(o,{Z:()=>i});var r=t(14599),c=t(91978),s=t(84884),n=t(55291),a=t(81514);const i=({format:e})=>{var o;if(!window?.wcMarketplace?.promotions||!Array.isArray(window?.wcMarketplace?.promotions))return null;const t=(null!==(o=window?.wcMarketplace?.promotions)&&void 0!==o?o:[]).filter((o=>o.format===e)),i=new URLSearchParams(window.location.search),l=i.get("page"),m=Date.now(),u=decodeURIComponent(i.get("path")||""),d=i.get("tab"),p=window.location.pathname+window.location.search,_=()=>{(0,r.recordEvent)("marketplace_promotion_viewed",{path:p,format:e})},g=()=>{(0,r.recordEvent)("marketplace_promotion_dismissed",{path:p,format:e})};return(0,a.jsx)(a.Fragment,{children:t.map(((e,o)=>{if(!e.pages)return null;if(!e.pages.some((e=>{if(e.pathname)return e.pathname===p;if(!e.path)return!1;const o=e=>e.startsWith("/")?e:`/${e}`,t=o(e.path),r=o(u);return e.page===l&&t===r&&(e.tab?d:!d)})))return null;const t=new Date(e.date_from_gmt).getTime(),r=new Date(e.date_to_gmt).getTime();return m<t||m>r?null:"promo-card"===e.format?(0,a.jsx)(n.Z,{promotion:e},o):"notice"===e.format&&e?.content?(0,a.jsx)(s.Z,{id:null!==(i=e.menu_item_id)&&void 0!==i?i:`promotion-${o}`,description:e.content[c.MV.userLocale]||e.content.en_US,variant:e.style?e.style:"info",icon:e?.icon||"",isDismissible:e.is_dismissible||!1,onLoad:_,onClose:g},o):null;var i}))})}},78378:(e,o,t)=>{t.r(o),t.d(o,{default:()=>ho});var r=t(69307),c=t(91978),s=t(81514);const n=(0,r.createContext)({isLoading:!1,setIsLoading:()=>{},selectedTab:"",setSelectedTab:()=>{},isProductInstalled:()=>!1,addInstalledProduct:()=>{},searchResultsCount:{extensions:0,themes:0,"business-services":0},setSearchResultsCount:()=>{}});function a(e){const[o,t]=(0,r.useState)(!0),[a,i]=(0,r.useState)(""),[l,m]=(0,r.useState)([]),[u,d]=(0,r.useState)({extensions:0,themes:0,"business-services":0}),p=(0,r.useCallback)((e=>{d((o=>({...o,...e})))}),[]);(0,r.useEffect)((()=>{const e=(0,c.O3)("wccomHelper",{}),o=e?.installedProducts;m(o)}),[]);const _={isLoading:o,setIsLoading:t,selectedTab:a,setSelectedTab:i,isProductInstalled:function(e){return l.includes(e)},addInstalledProduct:function(e){m([...l,e])},searchResultsCount:u,setSearchResultsCount:p};return(0,s.jsx)(n.Provider,{value:_,children:e.children})}var i=t(65736),l=t(55609),m=t(14599),u=t(56592),d=t(70444);const p=(0,s.jsx)(d.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)(d.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M6.68822 16.625L5.5 17.8145L5.5 5.5L18.5 5.5L18.5 16.625L6.68822 16.625ZM7.31 18.125L19 18.125C19.5523 18.125 20 17.6773 20 17.125L20 5C20 4.44772 19.5523 4 19 4H5C4.44772 4 4 4.44772 4 5V19.5247C4 19.8173 4.16123 20.086 4.41935 20.2237C4.72711 20.3878 5.10601 20.3313 5.35252 20.0845L7.31 18.125ZM16 9.99997H8V8.49997H16V9.99997ZM8 14H13V12.5H8V14Z"})}),_=(0,s.jsx)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,s.jsx)(d.Path,{d:"M12 3.176l6.75 3.068v4.574c0 3.9-2.504 7.59-6.035 8.755a2.283 2.283 0 01-1.43 0c-3.53-1.164-6.035-4.856-6.035-8.755V6.244L12 3.176zM6.75 7.21v3.608c0 3.313 2.145 6.388 5.005 7.33.159.053.331.053.49 0 2.86-.942 5.005-4.017 5.005-7.33V7.21L12 4.824 6.75 7.21z",fillRule:"evenodd",clipRule:"evenodd"})}),g=(0,s.jsx)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,s.jsx)(d.Path,{d:"M15.5 9.5a1 1 0 100-2 1 1 0 000 2zm0 1.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5zm-2.25 6v-2a2.75 2.75 0 00-2.75-2.75h-4A2.75 2.75 0 003.75 15v2h1.5v-2c0-.69.56-1.25 1.25-1.25h4c.69 0 1.25.56 1.25 1.25v2h1.5zm7-2v2h-1.5v-2c0-.69-.56-1.25-1.25-1.25H15v-1.5h2.5A2.75 2.75 0 0120.25 15zM9.5 8.5a1 1 0 11-2 0 1 1 0 012 0zm1.5 0a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z",fillRule:"evenodd"})});var w=t(59550);function h(e){const{icon:o,title:t,description:r}=e;return(0,s.jsxs)("div",{className:"woocommerce-marketplace__icon-group",children:[(0,s.jsxs)("div",{className:"woocommerce-marketplace__icon-group-headline",children:[(0,s.jsx)(w.Z,{icon:o,size:20,className:"woocommerce-marketplace__icon-group-icon"}),(0,s.jsx)("h3",{className:"woocommerce-marketplace__icon-group-title",children:t})]}),(0,s.jsx)("p",{className:"woocommerce-marketplace__icon-group-description",children:r})]})}var x=t(58684),M=t(28682);const j=e=>(0,s.jsx)(M.A,{targetUrl:x.kh+"/refund-policy/",linkType:"external",eventName:`marketplace_${e}_link_click`,eventProperties:{feature_clicked:"money_back_guarantee"},message:(0,i.__)("30-day {{Link}}money-back guarantee{{/Link}}","woocommerce")}),y=e=>(0,s.jsx)(M.A,{targetUrl:x.kh+"/docs/",linkType:"external",eventName:`marketplace_${e}_link_click`,eventProperties:{feature_clicked:"get_help"},message:(0,i.__)("{{Link}}Get help{{/Link}} when you need it","woocommerce")}),N=e=>(0,s.jsx)(M.A,{targetUrl:x.kh+"/products/",linkType:"external",eventName:`marketplace_${e}_link_click`,eventProperties:{feature_clicked:"products_you_can_trust"},message:(0,i.__)("{{Link}}Products{{/Link}} you can trust","woocommerce")});function v(){return(0,s.jsxs)("div",{className:"woocommerce-marketplace__footer-content",children:[(0,s.jsx)("h2",{className:"woocommerce-marketplace__footer-title",children:(0,i.__)("Hundreds of vetted products and services. Unlimited potential.","woocommerce")}),(0,s.jsxs)("div",{className:"woocommerce-marketplace__footer-columns",children:[(0,s.jsx)(h,{icon:u.Z,title:j("footer"),description:(0,i.__)("If you change your mind within 30 days of your purchase, we'll give you a full refund — hassle-free.","woocommerce")}),(0,s.jsx)(h,{icon:p,title:y("footer"),description:(0,i.__)("With detailed documentation and a global support team, help is always available if you need it.","woocommerce")}),(0,s.jsx)(h,{icon:_,title:N("footer"),description:(0,i.__)("Everything in the Marketplace has been built by our own team or by our trusted partners, so you can be sure of its quality.","woocommerce")}),(0,s.jsx)(h,{icon:g,title:(0,i.__)("Support the ecosystem","woocommerce"),description:(0,i.__)("Our team and partners are continuously improving your extensions, themes, and WooCommerce experience.","woocommerce")})]})]})}function b(){return(0,s.jsx)("div",{className:"woocommerce-marketplace__footer",children:(0,s.jsx)(v,{})})}const k=[{imageUrl:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNyIgaGVpZ2h0PSIyNiIgdmlld0JveD0iMCAwIDI3IDI2IiBmaWxsPSJub25lIj4KICA8cGF0aCBkPSJNMjEuNTY0NSAxNi4zNTIzVjkuNjQ3NjNDMjEuNTY0NSA4LjMxMTUyIDIwLjgwNjEgNy41NjUyMiAxOS40NyA3LjU2NTIySDcuNTI5MjlDNi4xOTMxOCA3LjU2NTIyIDUuNDM0ODQgOC4zMTE1MiA1LjQzNDg0IDkuNjQ3NjNWMTYuMzUyM0M1LjQzNDg0IDE3LjY4ODQgNi4xOTMxOCAxOC40MzQ3IDcuNTI5MjkgMTguNDM0N0gxOS40N0MyMC44MDYxIDE4LjQzNDcgMjEuNTY0NSAxNy42ODg0IDIxLjU2NDUgMTYuMzUyM1oiIGZpbGw9IiNEMUMxRkYiLz4KICA8cGF0aCBkPSJNMjEuNTY0NSA5Ljc0MzkxSDUuNDM0ODhWMTEuODg2NUgyMS41NjQ1VjkuNzQzOTFaIiBmaWxsPSIjODczRUZGIi8+CiAgPHBhdGggZD0iTTE1LjAwNDYgMjEuOTU1N0w5LjQ5MTY3IDE3LjkxMTJWMjAuMzQyN0g4Ljg4OTgxQzYuMDQ5MDcgMjAuMzQyNyAzLjczNzk2IDE4LjAzMTYgMy43Mzc5NiAxNS4xOTA5VjE0LjA4MzVWMTQuNTg5QzMuNzM3OTYgMTMuMjY0OSAzLjY4OTgxIDExLjkxNjggMS45OTI1OSAxMS45MTY4SDAuNVYxNS4xMzY3QzAuNSAxOS44MTMxIDQuMjY3NTkgMjMuNTgwNyA4Ljg4OTgxIDIzLjU4MDdIOS40OTE2N1YyNi4wMDAxTDE1LjAwNDYgMjEuOTU1N1oiIGZpbGw9IiM4NzNFRkYiLz4KICA8cGF0aCBkPSJNOC44ODk1MiAyMy41ODA2SDkuNDkxMzhWMjAuMzQyN0w0LjU4MjY3IDIyLjM4NDJDNS44NDI5NSAyMy4xNDM3IDcuMzE2MjggMjMuNTgwNiA4Ljg4OTUyIDIzLjU4MDZaIiBmaWxsPSIjM0MwODdFIi8+CiAgPHBhdGggZD0iTTExLjk5NTEgNC4wNDQ0NUwxNy41MDgxIDguMDg4OVY1LjY1NzQxSDE4LjExQzIwLjk1MDcgNS42NTc0MSAyMy4yNjE4IDcuOTY4NTMgMjMuMjYxOCAxMC44MDkzVjExLjkxNjdWMTEuNDExMUMyMy4yNjE4IDEyLjczNTIgMjMuMzEgMTQuMDgzMyAyNS4wMDcyIDE0LjA4MzNIMjYuNDk5OFYxMC44NjM0QzI2LjQ5OTggNi4xODcwNCAyMi43MzIyIDIuNDE5NDUgMTguMTEgMi40MTk0NUgxNy41MDgxVjYuNjc1NzJlLTA2TDExLjk5NTEgNC4wNDQ0NVoiIGZpbGw9IiM4NzNFRkYiLz4KICA8cGF0aCBkPSJNMTguMTEgMi40MTk0MUgxNy41MDgxVjUuNjU3MzhMMjIuNDE2OCAzLjYxNTg5QzIxLjE1NjUgMi44NTYzNiAxOS42ODMyIDIuNDE5NDEgMTguMTEgMi40MTk0MVoiIGZpbGw9IiMzQzA4N0UiLz4KPC9zdmc+",title:j("banner"),textTitle:(0,i.__)("30-day money-back guarantee","woocommerce")},{imageUrl:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNiIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI2IDI0IiBmaWxsPSJub25lIj4KICA8cGF0aCBkPSJNMjUuOTk5OSAwLjM2MzY0SDguNjMxNjhWMTIuMjM3MkgxNS44Njk2TDIyLjc0NTEgMTcuNjYzNVYxMi4yMzcySDI1Ljk5OTlWMC4zNjM2NFoiIGZpbGw9IiM4NzNFRkYiLz4KICA8cGF0aCBkPSJNMTUuMTYxOSA2LjY0NjM4SDIuMTAwNDZDMC43NTk1MzcgNi42NDYzOCAwIDcuMzg5NzQgMCA4LjcxODAzVjE3LjYyNjVDMCAxOC45NTM2IDAuNzU5NTM3IDE5LjY5ODEgMi4xMDA0NiAxOS42OTgxSDMuMjIxMTFWMjMuOTk5OUw4LjY3MTQ4IDE5LjY5ODFIMTUuMTYwNkMxNi41MDI4IDE5LjY5ODEgMTcuMjYxMSAxOC45NTQ4IDE3LjI2MTEgMTcuNjI2NVY4LjcxODAzQzE3LjI2MTEgNy4zOTA5MyAxNi41MDE2IDYuNjQ2MzggMTUuMTYwNiA2LjY0NjM4SDE1LjE2MTlaIiBmaWxsPSIjRDFDMUZGIi8+CiAgPHBhdGggZD0iTTQuMDQ0NDggMTQuMjQxQzQuNjQyNzIgMTQuMjQxIDUuMTI3ODIgMTMuNzYwOSA1LjEyNzgyIDEzLjE2ODlDNS4xMjc4MiAxMi41NzY4IDQuNjQyNzIgMTIuMDk2NyA0LjA0NDQ4IDEyLjA5NjdDMy40NDYyNCAxMi4wOTY3IDIuOTYxMTUgMTIuNTc2OCAyLjk2MTE1IDEzLjE2ODlDMi45NjExNSAxMy43NjA5IDMuNDQ2MjQgMTQuMjQxIDQuMDQ0NDggMTQuMjQxWiIgZmlsbD0iIzg3M0VGRiIvPgogIDxwYXRoIGQ9Ik04LjYzMjk1IDE0LjI0MUM5LjIzMTIgMTQuMjQxIDkuNzE2MjkgMTMuNzYwOSA5LjcxNjI5IDEzLjE2ODlDOS43MTYyOSAxMi41NzY4IDkuMjMxMiAxMi4wOTY3IDguNjMyOTUgMTIuMDk2N0M4LjAzNDcxIDEyLjA5NjcgNy41NDk2MiAxMi41NzY4IDcuNTQ5NjIgMTMuMTY4OUM3LjU0OTYyIDEzLjc2MDkgOC4wMzQ3MSAxNC4yNDEgOC42MzI5NSAxNC4yNDFaIiBmaWxsPSIjODczRUZGIi8+CiAgPHBhdGggZD0iTTEzLjIyMDMgMTQuMjQxQzEzLjgxODUgMTQuMjQxIDE0LjMwMzYgMTMuNzYwOSAxNC4zMDM2IDEzLjE2ODlDMTQuMzAzNiAxMi41NzY4IDEzLjgxODUgMTIuMDk2NyAxMy4yMjAzIDEyLjA5NjdDMTIuNjIyMSAxMi4wOTY3IDEyLjEzNyAxMi41NzY4IDEyLjEzNyAxMy4xNjg5QzEyLjEzNyAxMy43NjA5IDEyLjYyMjEgMTQuMjQxIDEzLjIyMDMgMTQuMjQxWiIgZmlsbD0iIzg3M0VGRiIvPgo8L3N2Zz4=",title:y("banner"),textTitle:(0,i.__)("Get help when you need it","woocommerce")},{imageUrl:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMyIgaGVpZ2h0PSIyNiIgdmlld0JveD0iMCAwIDIzIDI2IiBmaWxsPSJub25lIj4KICA8cGF0aCBkPSJNMTEuMjcyOCAwQzguMzMwNjUgMy4yNTk3OSA0LjU5Njg2IDQuNDgwNTYgMC4zNDA5NDIgNC40ODA1NlYxMi44ODM3QzAuMzQwOTQyIDIwLjM2MDEgNS44NDYzMSAyNC42ODE2IDExLjI3MjggMjZDMTYuNjk5MiAyNC42ODI4IDIyLjIwNDYgMjAuMzYxMyAyMi4yMDQ2IDEyLjg4MzdWNC40ODA1NkMxNy45NDg3IDQuNDgwNTYgMTQuMjE0OSAzLjI1OTc5IDExLjI3MjggMFoiIGZpbGw9IiM4NzNFRkYiLz4KICA8cGF0aCBkPSJNMTAuODQ0IDE3Ljc0NzRMNy43MjQ2MSAxMy4wNjA4TDguNjM2NSAxMi40NjMxTDEwLjgxOTcgMTUuNzQzNEwxNS40MDcxIDguNDc5MDJMMTYuMzMzNiA5LjA1NTA2TDEwLjg0NCAxNy43NDc0WiIgZmlsbD0iI0QxQzFGRiIvPgo8L3N2Zz4=",title:N("banner"),textTitle:(0,i.__)("Products you can trust","woocommerce")},{imageUrl:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNyIgaGVpZ2h0PSIyNyIgdmlld0JveD0iMCAwIDI3IDI3IiBmaWxsPSJub25lIj4KICA8cGF0aCBkPSJNMTMuMjg3MiAyLjIzODFDNi42OTgwOSAyLjIzODEgMS4zNTYwNSA3LjU4MDE0IDEuMzU2MDUgMTQuMTY5MkMxLjM1NjA1IDIwLjc1ODMgNi42OTgwOSAyNi4xMDAzIDEzLjI4NzIgMjYuMTAwM0MxOS44NzYyIDI2LjEwMDMgMjUuMjE4MyAyMC43NTgzIDI1LjIxODMgMTQuMTY5MkMyNS4yMTgzIDcuNTgwMTQgMTkuODc3NCAyLjIzODEgMTMuMjg3MiAyLjIzODFaIiBmaWxsPSIjRDFDMUZGIi8+CiAgPHBhdGggZD0iTTE1Ljc4NzMgOC4zNDY5M0MxNC4xNzc5IDYuOTY2MjkgMTEuNzU0OSA3LjE1MDQ1IDEwLjM3NDIgOC43NTk4QzguOTkzNTcgMTAuMzY5MiA5LjE3NzczIDEyLjc5MjIgMTAuNzg3MSAxNC4xNzI5QzEyLjM5NjQgMTUuNTUzNSAxNC44MTk1IDE1LjM2OTMgMTYuMjAwMSAxMy43NkMxNy41ODA4IDEyLjE1MDYgMTcuMzk2NiA5LjcyNzU4IDE1Ljc4NzMgOC4zNDY5M1oiIGZpbGw9IiM4NzNFRkYiLz4KICA8cGF0aCBkPSJNMTMuMjg3MiAxNi4xOTg3QzE2LjAxODQgMTYuMTk4NyAxOS43NTM1IDE3LjAzNDEgMTkuNzUzNSAyMC41Mjg1QzE5Ljc1MzUgMjEuMDMxNiAxOS43NTM1IDIyLjY4MTkgMTkuNzUzNSAyNC4xOTczQzE3Ljg5MDIgMjUuNDAxIDE1LjY3MDUgMjYuMTAwNCAxMy4yODcyIDI2LjEwMDRDMTAuOTAzOSAyNi4xMDA0IDguNjg0MjMgMjUuNDAxIDYuODIwODkgMjQuMTk3M0M2LjgyMDg5IDIyLjcyNCA2LjgyMDg5IDIxLjEwNzQgNi44MjA4OSAyMC41Mjg1QzYuODIwODkgMTcuMDM1MyAxMC41NTYgMTYuMTk4NyAxMy4yODcyIDE2LjE5ODdaIiBmaWxsPSIjODczRUZGIi8+Cjwvc3ZnPg==",title:(0,i.__)("Support the ecosystem","woocommerce"),textTitle:(0,i.__)("Support the ecosystem","woocommerce")}];function f(){const[e,o]=(0,r.useState)(0),[t,c]=(0,r.useState)(!1),[n,a]=(0,r.useState)(!0),u=(0,r.useRef)(null);(0,r.useEffect)((()=>{let e;return n&&(e=setInterval((()=>{o((e=>(e+1)%k.length))}),5e3)),()=>clearInterval(e)}),[n]),(0,r.useEffect)((()=>{const e=localStorage.getItem("wc_featuredBannerDismissed");c("true"===e)}),[]);const d=()=>a(!1),p=()=>a(!0),_=e=>{"ArrowRight"===e.key?(o((e=>(e+1)%k.length)),setTimeout((()=>{u.current?.focus()}),100)):"ArrowLeft"===e.key&&(o((e=>(e-1+k.length)%k.length)),setTimeout((()=>{u.current?.focus()}),100))};return t?null:(0,s.jsxs)("div",{className:"woocommerce-marketplace__banner",role:"region","aria-roledescription":"carousel","aria-label":(0,i.__)("Marketplace features with four slides","woocommerce"),onMouseEnter:d,onMouseLeave:p,onFocus:d,onBlur:p,children:[(0,s.jsx)("div",{className:"carousel-container",children:(0,s.jsx)("ul",{className:"carousel-list",children:k.map(((o,t)=>(0,s.jsxs)("li",{ref:t===e?u:null,id:`carousel-slide-${t}`,className:"carousel-slide "+(t===e?"active":""),"aria-roledescription":"slide","aria-hidden":t!==e,"aria-live":"off","aria-posinset":t+1,"aria-setsize":k.length,"aria-label":`${o.textTitle} - ${(0,i.__)("Slide","woocommerce")} ${t+1} ${(0,i.__)("of","woocommerce")} ${k.length}`,tabIndex:t===e?0:-1,onKeyDown:_,children:[(0,s.jsx)("img",{src:o.imageUrl,alt:"",className:"woocommerce-marketplace__banner-image"}),(0,s.jsx)("h3",{className:"woocommerce-marketplace__banner-title",children:o.title})]},t)))})}),(0,s.jsx)(l.Button,{className:"dismiss-button",onClick:()=>{localStorage.setItem("wc_featuredBannerDismissed","true"),c(!0),(0,m.recordEvent)("marketplace_features_banner_dismissed",{active_slide:k[e].textTitle})},"aria-label":(0,i.__)("Dismiss Marketplace features carousel","woocommerce"),children:(0,s.jsx)(l.Icon,{icon:"no-alt"})})]})}function I(){return(0,s.jsx)("h1",{className:"woocommerce-marketplace__header-title",children:(0,i.__)("Official WooCommerce Marketplace","woocommerce")})}var D,T=t(94107),C=t(80225),z=t(10431);const A=(0,c.O3)("wccomHelper",{}),S=null!==(D=A?.wooUpdateCount)&&void 0!==D?D:0,L=(e,o,t)=>{const{selectedTab:r,setSelectedTab:c}=e,n=e=>{e!==r&&(c(e),((e,o)=>{const t=o.term?{term:o.term.trim()}:{};(0,z.navigateTo)({url:(0,z.getNewPath)({tab:e===x.KF?void 0:e},x.Bd,t)})})(e,t))},a=[];for(const e in o)a.push(o[e]?.href?(0,s.jsx)("a",{className:(0,C.Z)("woocommerce-marketplace__tab-button","components-button",`woocommerce-marketplace__tab-${e}`),href:o[e]?.href,children:o[e]?.title},e):(0,s.jsxs)(l.Button,{className:(0,C.Z)("woocommerce-marketplace__tab-button",`woocommerce-marketplace__tab-${e}`,{"is-active":e===r}),onClick:()=>n(e),children:[o[e]?.title,o[e]?.showUpdateCount&&(0,s.jsx)("span",{className:(0,C.Z)("woocommerce-marketplace__update-count",`woocommerce-marketplace__update-count-${e}`,{"is-active":e===r}),children:(0,s.jsxs)("span",{children:[" ",o[e]?.updateCount," "]})})]},e));return a},E=e=>{const{additionalClassNames:o}=e,t=(0,r.useContext)(n),{isLoading:c,setSelectedTab:a}=t,{searchResultsCount:l}=t,m=(0,z.useQuery)(),u=(0,r.useMemo)((()=>({discover:{name:"discover",title:(0,i.__)("Discover","woocommerce"),showUpdateCount:!1,updateCount:0},extensions:{name:"extensions",title:(0,i.__)("Extensions","woocommerce"),showUpdateCount:!!m.term&&!c,updateCount:l.extensions},themes:{name:"themes",title:(0,i.__)("Themes","woocommerce"),showUpdateCount:!!m.term&&!c,updateCount:l.themes},"business-services":{name:"business-services",title:(0,i.__)("Business services","woocommerce"),showUpdateCount:!!m.term&&!c,updateCount:l["business-services"]},"my-subscriptions":{name:"my-subscriptions",title:(0,i.__)("My subscriptions","woocommerce"),showUpdateCount:S>0,updateCount:S}})),[m,c,l]);return(0,r.useEffect)((()=>{m?.tab&&u[m.tab]?a(m.tab):Object.keys(m).length>0&&a(x.KF)}),[m,a,u]),(0,s.jsx)("nav",{className:(0,C.Z)("woocommerce-marketplace__tabs",o||[]),children:L(t,u,m)})},O=function(){const[e,o]=(0,r.useState)(""),t=(0,i.__)("Search Marketplace","woocommerce"),c=(0,z.useQuery)();(0,r.useEffect)((()=>{c.term?o(c.term):o("")}),[c.term]);const n=o=>{const t=c;return t.tab&&"my-subscriptions"!==t.tab||(t.tab="extensions"),t.term=void 0!==o?o:e.trim(),t.search="1",t.term||delete t.term,(0,z.navigateTo)({url:(0,z.getNewPath)(t,x.Bd,{})}),[]};return(0,s.jsx)(l.SearchControl,{label:t,placeholder:t,value:e,onChange:o,onKeyUp:e=>{"Enter"===e.key&&n(),"Escape"===e.key&&o("")},onClose:()=>{o(""),n("")},onFocus:()=>{(0,m.recordEvent)("marketplace_search_start",{current_search_term:e,current_tab:c.tab})},className:"woocommerce-marketplace__search"})};function U(){return(0,s.jsxs)("div",{className:"woocommerce-marketplace__header-container",children:[(0,s.jsx)(f,{}),(0,s.jsxs)("header",{className:"woocommerce-marketplace__header",children:[(0,s.jsx)(I,{}),(0,s.jsx)(E,{additionalClassNames:["woocommerce-marketplace__header-tabs"]}),(0,s.jsx)(O,{}),(0,s.jsx)("div",{className:"woocommerce-marketplace__header-meta",children:(0,s.jsx)(T.Z,{page:"wc-addons"})})]})]})}var Q=t(25158),P=t(32277),Y=t(96483),Z=t(22629),B=t(67221);const R=function(e){const{product:o}=e,{user:t,currentUserCan:c}=(0,B.useUser)(),{selectedTab:a,isProductInstalled:u}=(0,r.useContext)(n),d={USD:"$%s",AUD:"A$%s",CAD:"C$%s",EUR:"€%s",GBP:"£%s"},p=e=>d[e]||"%s";function _(){return 0===o.price?(0,i.__)("Free download","woocommerce"):"primary"===o.freemium_type?(0,i.__)("Free plan available","woocommerce"):(0,i.sprintf)(p(o.currency),o.price)}function g(){return"primary"===o.freemium_type?"":0!==o.price?function(){if(1===o.billingPeriodInterval||""===o.billingPeriod)switch(o.billingPeriod){case"day":return(0,i.__)("daily","woocommerce");case"week":return(0,i.__)("weekly","woocommerce");case"month":return(0,i.__)("monthly","woocommerce");case"year":case"":return(0,i.__)("annually","woocommerce");default:return""}let e;switch(o.billingPeriod){case"day":e=(0,i.__)("days","woocommerce");break;case"week":e=(0,i.__)("weeks","woocommerce");break;case"month":e=(0,i.__)("months","woocommerce");break;default:e=(0,i.__)("years","woocommerce")}return(0,i.sprintf)((0,i.__)("every %1$d %2$s","woocommerce"),o.billingPeriodInterval,e)}():""}return o.slug&&u(o.slug)?(0,s.jsx)("span",{className:"woocommerce-marketplace__product-card__installed-label",children:(0,i.__)("Installed","woocommerce")}):(w=o,!(t&&w&&c("install_plugins")&&w.isInstallable&&"theme"!==w.type&&"discover"!==a)||w.slug&&u(w.slug)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"woocommerce-marketplace__product-card__price",children:[(0,s.jsxs)("span",{className:"woocommerce-marketplace__product-card__price-label",children:[(0,s.jsx)("span",{className:"screen-reader-text",children:o.isOnSale?(0,i.sprintf)((0,i.__)("Sale Price %1$s %3$s, regular price %2$s %3$s","woocommerce"),_(),(0,i.sprintf)(p(o.currency),o.regularPrice),g()):0!==o.price&&"primary"!==o.freemium_type?(0,i.sprintf)((0,i.__)(" %1$s, %2$s ","woocommerce"),_(),g()):_()}),(0,s.jsx)("span",{"aria-hidden":!0,children:_()})]}),o.isOnSale&&(0,s.jsx)("span",{className:"woocommerce-marketplace__product-card__on-sale","aria-hidden":!0,children:(0,i.sprintf)(p(o.currency),o.regularPrice)}),(0,s.jsx)("span",{className:"woocommerce-marketplace__product-card__price-billing","aria-hidden":!0,children:g()})]}),(0,s.jsx)("div",{className:"woocommerce-marketplace__product-card__rating",children:null!==o.averageRating&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"woocommerce-marketplace__product-card__rating-icon",children:(0,s.jsx)(l.Icon,{icon:"star-filled",size:16})}),(0,s.jsxs)("span",{className:"woocommerce-marketplace__product-card__rating-average",children:[(0,s.jsx)("span",{"aria-hidden":!0,children:o.averageRating}),(0,s.jsx)("span",{className:"screen-reader-text",children:(0,i.sprintf)((0,i.__)("%.1f stars","woocommerce"),o.averageRating)})]}),(0,s.jsxs)("span",{className:"woocommerce-marketplace__product-card__rating-count",children:[(0,s.jsxs)("span",{"aria-hidden":!0,children:["(",o.reviewsCount,")"]}),(0,s.jsx)("span",{className:"screen-reader-text",children:(0,i.sprintf)((0,i.__)("from %d reviews","woocommerce"),o.reviewsCount)})]})]})})]}):(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("span",{className:"woocommerce-marketplace__product-card__add-to-store",children:(0,s.jsx)(l.Button,{variant:"secondary",onClick:function(){(0,m.recordEvent)("marketplace_add_to_store_clicked",{product_id:o.id}),(0,z.navigateTo)({url:(0,z.getNewPath)({installProduct:o.id})})},children:(0,i.__)("Add to Store","woocommerce")})})}));var w};var G=t(24668);const F=function(e){var o;const{isLoading:t,type:r}=e,c=(0,z.useQuery)(),n=null!==(o=e.product)&&void 0!==o?o:{id:null,title:"",description:"",vendorName:"",vendorUrl:"",icon:"",label:null,primary_color:null,url:"",price:0,image:"",averageRating:null,reviewsCount:null,featuredImage:"",color:"",productCategory:"",billingPeriod:"",billingPeriodInterval:0,currency:"",isOnSale:!1,regularPrice:0,type:""};function a(){return"promoted"===n.label}function u(o,t){const{tracksData:r}=e;r.position&&(t.position=r.position),r.label&&(t.label=r.label),r.group&&(t.group=r.group),r.group_id&&(t.group_id=r.group_id),r.searchTerm&&(t.search_term=r.searchTerm),r.category&&(t.category=r.category),t.tab=c.tab||"discover",(0,m.queueRecordEvent)(o,t)}const d=r===P.k.theme,p=r===P.k.businessService;let _=n?.vendorName;n?.vendorName&&n?.vendorUrl&&(_=(0,s.jsx)("a",{href:n.vendorUrl,rel:"noopener noreferrer",onClick:()=>{u("marketplace_product_card_vendor_clicked",{product:n.title,vendor:n.vendorName,product_type:r})},children:n.vendorName}));const g=(0,C.Z)("woocommerce-marketplace__product-card",`woocommerce-marketplace__product-card--${r}`,{"is-loading":t,"is-small":e.small,"is-sponsored":a()}),w=()=>(0,s.jsx)("a",{className:"woocommerce-marketplace__product-card__link",href:c.ref?(0,G.lk)(n.url,[["utm_content",c.ref]]):n.url,rel:"noopener noreferrer",target:"_blank",onClick:()=>{u("marketplace_product_card_clicked",{product_id:n.id,product_name:n.title,vendor:n.vendorName,product_type:r})},children:t?" ":n.title}),h=(0,Z.decodeEntities)(n.description),x=()=>(0,s.jsxs)("div",{className:"woocommerce-marketplace__business-card",children:[(0,s.jsx)("div",{className:"woocommerce-marketplace__business-card__header",style:{backgroundColor:n.color},children:(0,s.jsx)("img",{src:`${n.featuredImage}?h=288`,alt:""})}),(0,s.jsxs)("div",{className:"woocommerce-marketplace__business-card__content",children:[(0,s.jsxs)("div",{className:"woocommerce-marketplace__business-card__main-content",children:[(0,s.jsx)("h2",{children:(0,s.jsx)(w,{})}),(0,s.jsx)("p",{className:"woocommerce-marketplace__product-card__description",children:h})]}),(0,s.jsx)("div",{className:"woocommerce-marketplace__business-card__badge",children:(0,s.jsx)("span",{children:n.productCategory})})]})]});return(0,s.jsx)(l.Card,{className:g,id:`product-${n.id}`,tabIndex:-1,"aria-hidden":t,style:a()&&n.primary_color?{background:`linear-gradient(${n.primary_color} 0, ${n.primary_color} 5px, white 5px, white)`}:{},children:p?(0,s.jsx)(x,{}):(0,s.jsxs)("div",{className:"woocommerce-marketplace__product-card__content",children:[d&&(0,s.jsx)("div",{className:"woocommerce-marketplace__product-card__image",children:!t&&(0,s.jsx)("img",{className:"woocommerce-marketplace__product-card__image-inner",src:n.image,alt:n.title})}),(0,s.jsx)("div",{className:"woocommerce-marketplace__product-card__header",children:(0,s.jsxs)("div",{className:"woocommerce-marketplace__product-card__details",children:[!d&&(0,s.jsxs)(s.Fragment,{children:[t&&(0,s.jsx)("div",{className:"woocommerce-marketplace__product-card__icon"}),!t&&n.icon&&(0,s.jsx)("img",{className:"woocommerce-marketplace__product-card__icon",src:n.icon,alt:n.title})]}),(0,s.jsxs)("div",{className:"woocommerce-marketplace__product-card__meta",children:[(0,s.jsx)("h2",{className:"woocommerce-marketplace__product-card__title",children:(0,s.jsx)(w,{})}),t&&(0,s.jsx)("p",{className:"woocommerce-marketplace__product-card__vendor-details",children:(0,s.jsx)("span",{className:"woocommerce-marketplace__product-card__vendor"})}),!t&&(0,s.jsxs)("p",{className:"woocommerce-marketplace__product-card__vendor-details",children:[_&&(0,s.jsxs)("span",{className:"woocommerce-marketplace__product-card__vendor",children:[(0,s.jsx)("span",{children:(0,i.__)("By ","woocommerce")}),_]}),_&&a()&&(0,s.jsx)("span",{"aria-hidden":"true",className:"woocommerce-marketplace__product-card__vendor-details__separator",children:"·"}),a()&&(0,s.jsx)("span",{className:"woocommerce-marketplace__product-card__sponsored-label",children:(0,i.__)("Sponsored","woocommerce")})]})]})]})}),!d&&(0,s.jsx)("p",{className:"woocommerce-marketplace__product-card__description",children:!t&&h}),P.k.businessService!==e?.product?.type&&(0,s.jsxs)("footer",{className:"woocommerce-marketplace__product-card__footer",children:[t&&(0,s.jsx)("div",{className:"woocommerce-marketplace__product-card__price"}),!t&&e.product&&(0,s.jsx)(R,{product:e.product})]})]})})};var V=t(74639);function W(e){const o=(0,c.O3)("wccomHelper",{}),[t,n]=(0,r.useState)(e.products),[a,i]=(0,r.useState)(1),l=()=>{const e=window.innerWidth;i(e>=1920?4:e>=1024?3:e>=769?2:1)};(0,r.useEffect)((()=>(l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l))),[]),(0,r.useEffect)((()=>{if(!e.productGroup)return;if(e.products.length<a)return void n(e.products);let o=Math.floor(e.products.length/a);1===a&&(o=Math.min(o,4)),2===a&&(o=Math.min(o,2)),n(e.products.slice(0,o*a))}),[a,e.products,e.productGroup]);const m=2*a-1,u=(0,C.Z)("woocommerce-marketplace__product-list-content",e.className);return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:u,children:t.map(((t,n)=>(0,s.jsxs)(r.Fragment,{children:[(0,s.jsx)(F,{type:e.type,product:{id:t.id,slug:t.slug,title:t.title,image:t.image,type:t.type,freemium_type:t.freemium_type,icon:t.icon,label:t.label,primary_color:t.primary_color,vendorName:t.vendorName,vendorUrl:t.vendorUrl?(0,G.lk)(t.vendorUrl,[["utm_source","extensionsscreen"],["utm_medium","product"],["utm_campaign","wcaddons"],["utm_content","devpartner"]]):"",price:t.price,url:(0,G.lk)(t.url,Object.entries({...o.inAppPurchaseURLParams,...void 0!==e.productGroup?{utm_group:e.productGroup}:{}})),averageRating:t.averageRating,reviewsCount:t.reviewsCount,description:t.description,isInstallable:t.isInstallable,color:t.color,featuredImage:t.featuredImage,productCategory:t.productCategory,billingPeriod:t.billingPeriod,billingPeriodInterval:t.billingPeriodInterval,currency:t.currency,isOnSale:t.isOnSale,regularPrice:t.regularPrice},tracksData:{position:n+1,...t.label&&{label:t.label},...e.productGroup&&{group_id:e.productGroup},...e.group&&{group:e.group},...e.searchTerm&&{searchTerm:e.searchTerm},...e.category&&{category:e.category}}},t.id),n===m&&"theme"===e.type&&(0,s.jsx)(V.$p,{redirectToCYSFlow:()=>{const e=(0,Y.addQueryArgs)(`${c.SX}admin.php`,{page:"wc-admin",path:"/customize-store/design"});window.location.href=e}})]},t.id)))})})}var H=t(86020);function $(e){const{title:o,description:t,groupURL:r,groupURLText:c,groupURLType:n}=e,a=""===o,l=(0,C.Z)("woocommerce-marketplace__product-list-header",{"is-loading":a});return(0,s.jsxs)("div",{className:l,"aria-hidden":a,children:[(0,s.jsx)("h2",{className:"woocommerce-marketplace__product-list-title",children:o}),t&&(0,s.jsx)("p",{className:"woocommerce-marketplace__product-list-description",children:t}),null!==r&&(0,s.jsx)("span",{className:"woocommerce-marketplace__product-list-link",children:(0,s.jsx)(H.Link,{href:r,type:n,target:"external"===n?"_blank":void 0,onClick:()=>{(0,m.recordEvent)("marketplace_see_more_clicked",{group_title:o,group_url:r})},children:null!=c?c:(0,i.__)("See more","woocommerce")})})]})}function J(e){const{title:o,description:t,products:r,groupURL:c,type:n,productGroup:a,groupURLText:i,groupURLType:l}=e;return(0,s.jsxs)("div",{className:"woocommerce-marketplace__product-list",children:[(0,s.jsx)($,{title:o,groupURL:c,groupURLText:i,description:t,groupURLType:l}),(0,s.jsx)(W,{group:o,products:r,type:n,productGroup:a})]})}function K(e){const{hasTitle:o,type:t}=e,r=e.placeholderCount||12;return(0,s.jsxs)("div",{className:"woocommerce-marketplace__product-list",children:[!1!==o&&(0,s.jsx)($,{title:"",groupURL:null,description:"",groupURLText:null,groupURLType:void 0}),(0,s.jsx)("div",{className:"woocommerce-marketplace__product-list-content",children:[...Array(r)].map(((e,o)=>(0,s.jsx)(F,{isLoading:!0,type:t,tracksData:{}},o)))})]})}function q(e){if(""===e.category)return;const o=e.view||"discover",t=e.search_term||null,r=e.product_type||null,c=e.category||null,s={...o&&{view:o},...t&&{search_term:t},...r&&{product_type:r},...c&&{category:c}};o&&["extensions","themes","business-services"].includes(o)&&!c&&(s.category="_all"),(0,m.recordEvent)("marketplace_view",s)}function X(){const[e,o]=(0,r.useState)([]),t=(0,r.useContext)(n),{isLoading:c,setIsLoading:a}=t;if((0,r.useEffect)((()=>{a(!0),(0,G.DS)().then((e=>Array.isArray(e)?e:[])).then((e=>{o(e),function(e){const o=e.flatMap((e=>e.items)).map((e=>e.id));(0,m.recordEvent)("marketplace_discover_viewed",{view:"discover",product_ids:o}),q({view:"discover"})}(e)})).finally((()=>{a(!1)}))}),[]),c)return(0,s.jsx)("div",{className:"woocommerce-marketplace__discover",children:(0,s.jsx)(K,{placeholderCount:9,type:P.k.extension})});const i=e.flatMap((e=>e));return(0,s.jsx)("div",{className:"woocommerce-marketplace__discover",children:i.map((e=>(0,s.jsx)(J,{productGroup:e.id,title:e.title,description:e.description,products:e.items,groupURL:e.url,groupURLText:e.url_text,groupURLType:e.url_type,type:e.itemType},e.id)))})}var ee=t(9818),oe=t(94333);function te(e){const o=""===e.label,t=(0,C.Z)("woocommerce-marketplace__category-item-button",{"woocommerce-marketplace__category-item-button--selected":e.selected,"is-loading":o});return(0,s.jsx)("button",{className:t,onClick:function(e){const o=e.currentTarget.value;o&&(0,z.navigateTo)({url:(0,z.getNewPath)({category:o})})},value:e.slug,"aria-hidden":o,children:e.label})}var re=t(91667),ce=t(58176);function se(e){function o(o){const t=o.currentTarget.value;t&&(e.onClick(),(0,z.navigateTo)({url:(0,z.getNewPath)({category:t})}))}return(0,s.jsx)("ul",{className:"woocommerce-marketplace__category-dropdown-list",children:e.categories.map((t=>(0,s.jsx)("li",{className:"woocommerce-marketplace__category-dropdown-item",children:(0,s.jsx)("button",{className:(0,C.Z)("woocommerce-marketplace__category-dropdown-item-button",{"woocommerce-marketplace__category-dropdown-item-button--selected":t.slug===e.selected?.slug}),value:t.slug,onClick:o,children:t.label})},t.slug)))})}function ne(e){return(0,s.jsx)(l.Dropdown,{renderToggle:({isOpen:o,onToggle:t})=>(0,s.jsxs)("button",{onClick:()=>{o||(0,m.recordEvent)("marketplace_category_dropdown_opened",{type:e.type}),t()},className:e.buttonClassName,"aria-label":(0,i.__)("Toggle category dropdown","woocommerce"),children:[e.label,(0,s.jsx)(w.Z,{icon:o?re.Z:ce.Z,size:e.arrowIconSize})]}),className:e.className,renderContent:({onToggle:o})=>(0,s.jsx)(se,{categories:e.categories,selected:e.selected,onClick:o}),contentClassName:e.contentClassName})}const ae={[P.k.extension]:"_all",[P.k.theme]:"themes",[P.k.businessService]:"business-services"};function ie(e){const[o,t]=(0,r.useState)(),[c,n]=(0,r.useState)(!1),[a,m]=(0,r.useState)([]),[u,d]=(0,r.useState)(!1),[p,_]=(0,r.useState)("start"),g=(0,r.useRef)(null),w=(0,r.useRef)(null),h=(0,z.useQuery)();function x(){if(g.current&&g.current.parentElement?.scrollWidth){const e=g.current.scrollWidth>g.current.parentElement.scrollWidth;d(e)}}(0,r.useEffect)((()=>{n(!0),(0,G.pE)(e.type).then((e=>{const o=e.map((e=>({...e,selected:!1}))).filter((e=>"_featured"!==e.slug));m(o)})).catch((()=>{m([])})).finally((()=>{n(!1)}))}),[e.type,m]),(0,r.useEffect)((()=>{let o=ae[e.type];h.category&&(o=h.category);const r=a.find((e=>e.slug===o));r&&t(r)}),[h.category,e.type,a]),(0,r.useEffect)((()=>{w.current&&w.current.scrollIntoView({block:"nearest",inline:"center"})}),[o]);const M=(0,oe.useDebounce)(x,300),j=(0,oe.useDebounce)((function(){const e=g.current;if(!e)return;const{scrollLeft:o,scrollWidth:t,clientWidth:r}=e;o<10?_("start"):o+r<t?_("middle"):o+r===t&&_("end")}),100);function y(e){g.current&&g.current.scrollTo({left:g.current.scrollLeft+e,behavior:"smooth"})}return(0,r.useEffect)((()=>{window.addEventListener("resize",M);const e=g.current;return e&&e.addEventListener("scroll",j),()=>{window.removeEventListener("resize",M),e&&e.removeEventListener("scroll",j)}}),[M,j]),(0,r.useEffect)((()=>{x()}),[a]),c?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("ul",{className:"woocommerce-marketplace__category-selector",children:[...Array(5)].map(((e,o)=>(0,s.jsx)("li",{className:"woocommerce-marketplace__category-item",children:(0,s.jsx)(te,{slug:"",label:"",selected:!1})},o)))})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("ul",{className:"woocommerce-marketplace__category-selector","aria-label":"Categories",ref:g,children:a.map((e=>(0,s.jsx)("li",{className:"woocommerce-marketplace__category-item",ref:e.slug===o?.slug?w:null,children:(0,s.jsx)(te,{...e,selected:e.slug===o?.slug,"aria-current":e.slug===o?.slug})},e.slug)))}),(0,s.jsx)("div",{className:"woocommerce-marketplace__category-selector--full-width",children:(0,s.jsx)(ne,{type:e.type,label:function(){const e=(0,i.__)("All Categories","woocommerce");return o?"All"===o.label?e:o.label:e}(),categories:a,buttonClassName:"woocommerce-marketplace__category-dropdown-button",className:"woocommerce-marketplace__category-dropdown",contentClassName:"woocommerce-marketplace__category-dropdown-content",selected:o})}),u&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:function(){y(-200)},className:"woocommerce-marketplace__category-navigation-button woocommerce-marketplace__category-navigation-button--prev",hidden:"start"===p,"aria-label":"Scroll to previous categories",tabIndex:-1,children:(0,s.jsx)(l.Icon,{icon:"arrow-left-alt2"})}),(0,s.jsx)("button",{onClick:function(){y(200)},className:"woocommerce-marketplace__category-navigation-button woocommerce-marketplace__category-navigation-button--next",hidden:"end"===p,"aria-label":"Scroll to next categories",tabIndex:-1,children:(0,s.jsx)(l.Icon,{icon:"arrow-right-alt2"})})]})]})}function le(e){const[o,t]=(0,r.useState)(),[c,n]=(0,r.useState)(!1),a={[P.B.all]:["most-popular","popular-themes","business-services"],[P.B.theme]:["popular-themes"],[P.B.extension]:["most-popular"],[P.B.businessService]:["business-services"]};return(0,r.useEffect)((()=>{n(!0),(0,G.DS)().then((o=>{const r=a[e.type];if(!r)return;const c=o.filter((e=>r.includes(e.id)));c&&(c.forEach((e=>{e.items=e.items.slice(0,4)})),t(c))})).catch((()=>{t(void 0)})).finally((()=>{n(!1)}))}),[]),(0,s.jsxs)("div",{className:"woocommerce-marketplace__no-results",children:[function(){if(e.type===P.B.all)return(0,s.jsx)(s.Fragment,{});let o=P.k.extension;return e.type===P.B.theme&&(o=P.k.theme),e.type===P.B.businessService&&(o=P.k.businessService),(0,s.jsx)(ie,{type:o})}(),(0,s.jsxs)("div",{className:"woocommerce-marketplace__no-results__content",children:[(0,s.jsx)("h2",{className:"woocommerce-marketplace__no-results__heading",children:e.showHeading?e.heading:""}),(0,s.jsx)("p",{className:"woocommerce-marketplace__no-results__description",children:(0,i.__)("Try searching again using a different term, or take a look at our recommendations below.","woocommerce")})]}),(0,s.jsx)("div",{className:"woocommerce-marketplace__no-results__product-groups",children:c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(K,{type:P.k.extension,placeholderCount:4}),(0,s.jsx)(K,{type:P.k.theme,placeholderCount:4}),(0,s.jsx)(K,{type:P.k.businessService,placeholderCount:4})]}):o&&0!==o.length?(0,s.jsx)(s.Fragment,{children:o.map((e=>{return(0,s.jsx)(J,{title:(o=e.id,"popular-themes"===o?(0,i.__)("Our favorite themes","woocommerce"):"business-services"===o?(0,i.__)("Services to help your business grow","woocommerce"):(0,i.__)("Most popular extensions","woocommerce")),description:e.description,products:e.items,groupURL:e.url,productGroup:e.id,type:e.itemType,groupURLText:e.url_text,groupURLType:e.url_type},e.id);var o}))}):(0,s.jsx)(s.Fragment,{})})]})}var me=t(35530);const ue={[P.k.extension]:{label:(0,i.__)("extensions","woocommerce"),singularLabel:(0,i.__)("extension","woocommerce")},[P.k.theme]:{label:(0,i.__)("themes","woocommerce"),singularLabel:(0,i.__)("theme","woocommerce")},[P.k.businessService]:{label:(0,i.__)("business services","woocommerce"),singularLabel:(0,i.__)("business service","woocommerce")}};function de(e){var o,t;const a=(0,r.useContext)(n),{isLoading:m}=a,u=ue[e.type].label,d=(0,z.useQuery)(),p=d?.category,_=(0,ee.useSelect)((e=>e("core").getCurrentTheme()),[]),g="twentytwentyfour"===_?.stylesheet,[w,h]=(0,r.useState)(!1),x=(0,Y.addQueryArgs)(`${c.SX}admin.php`,{page:"wc-admin",path:"/customize-store/design"}),M=(0,Y.addQueryArgs)(`${c.SX}admin.php`,{page:"wc-admin",path:"/customize-store/assembler-hub"}),j=(0,ee.useSelect)((e=>e(B.onboardingStore).getTask("customize-store")),[]),y=null!==(o=e.showAllButton)&&void 0!==o&&o,N=null!==(t=e.products)&&void 0!==t?t:[],v="business services"===u?"business-services":u,b="woocommerce-marketplace__search-",k=(0,C.Z)(b+v),f=(0,C.Z)("woocommerce-marketplace__view-all-button",b+"button-"+v);if(m)return(0,s.jsxs)(s.Fragment,{children:[e.categorySelector&&(0,s.jsx)(ie,{type:e.type}),(0,s.jsx)(K,{hasTitle:!1,type:e.type})]});if(0===N.length){let o=P.B.all;switch(e.type){case P.k.extension:o=P.B.extension;break;case P.k.theme:o=P.B.theme;break;case P.k.businessService:o=P.B.businessService}return(0,s.jsx)(le,{type:o,showHeading:!1})}const I=(0,C.Z)(y?"woocommerce-marketplace__product-list-content--collapsed":"");return(0,s.jsxs)("div",{className:k,children:[(0,s.jsxs)("nav",{className:"woocommerce-marketplace__sub-header",children:[(0,s.jsx)("div",{className:"woocommerce-marketplace__sub-header__categories",children:e.categorySelector&&(0,s.jsx)(ie,{type:e.type})}),"theme"===e.type&&(0,s.jsx)(l.Button,{className:"woocommerce-marketplace__customize-your-store-button",variant:"secondary",text:(0,i.__)("Design your own","woocommerce"),onClick:()=>{g?window.location.href=j?.isComplete?M:x:h(!0)}})]}),w&&(0,s.jsx)(me.Nh,{setIsModalOpen:h,redirectToCYSFlow:()=>{window.location.href=x}}),(0,s.jsx)(W,{products:N,type:e.type,className:I,searchTerm:e.searchTerm,category:p}),"theme"===e.type&&(0,s.jsxs)("div",{className:"woocommerce-marketplace__browse-wp-theme-directory",children:[(0,s.jsx)("b",{children:(0,i.__)("Didn’t find a theme you like?","woocommerce")}),(0,r.createInterpolateElement)((0,i.__)(" Browse the <a>WordPress.org theme directory</a> to discover more.","woocommerce"),{a:(0,s.jsx)("a",{href:c.SX+"theme-install.php?search=e-commerce"})})]}),y&&(0,s.jsx)(l.Button,{className:f,variant:"secondary",text:(0,i.__)("View all","woocommerce"),onClick:()=>{return o=e.type,void(0,z.navigateTo)({url:(0,z.getNewPath)({section:o})});var o}})]})}var pe=t(85800),_e=t(86989),ge=t.n(_e),we=t(42879);const he=(0,r.createContext)({subscriptions:[],setSubscriptions:()=>{},loadSubscriptions:()=>new Promise((()=>{})),refreshSubscriptions:()=>new Promise((()=>{})),isLoading:!0,setIsLoading:()=>{}});function xe(e){const[o,t]=(0,r.useState)([]),[c,n]=(0,r.useState)(!0),a=e=>(!0===e&&n(!0),(0,G.jg)().then((e=>{t(e)})).finally((()=>{e&&n(!1)}))),l=e=>(e&&n(!0),(0,G.bn)().then((e=>{t(e)})).finally((()=>{e&&n(!1)})));(0,r.useEffect)((()=>{new URLSearchParams(window.location.search).get("install")?l(!0).catch((e=>{(0,G.Fy)("woocommerce-marketplace-refresh-subscriptions",(0,i.sprintf)((0,i.__)("Error refreshing subscriptions: %s","woocommerce"),e.message),we.Q.Error)})):a(!0).catch((e=>{(0,G.Fy)("woocommerce-marketplace-load-subscriptions",(0,i.sprintf)((0,i.__)("Error loading subscriptions: %s","woocommerce"),e.message),we.Q.Error)}))}),[]);const m={subscriptions:o,setSubscriptions:t,loadSubscriptions:a,refreshSubscriptions:l,isLoading:c,setIsLoading:n};return(0,s.jsx)(he.Provider,{value:m,children:e.children})}const Me=[{key:"name",label:(0,i.__)("Name","woocommerce")},{key:"expiry",label:(0,i.__)("Expires/Renews on","woocommerce")},{key:"subscription",label:(0,i.__)("Subscription","woocommerce")},{key:"version",label:(0,i.__)("Version","woocommerce")}];function je(e){if(e.isLoading)return(0,s.jsx)(H.TablePlaceholder,{caption:(0,i.__)("Loading your subscriptions","woocommerce"),headers:e.headers});const o=e.headers.map((e=>({...e,cellClassName:"woocommerce-marketplace__my-subscriptions__table__header--"+e.key})));return(0,s.jsx)(H.Table,{className:"woocommerce-marketplace__my-subscriptions__table",headers:o,rows:e.rows})}function ye(e){const o=[...Me,{key:"actions",label:(0,i.__)("Actions","woocommerce")}];if(!(e.isLoading||e.rows&&0!==e.rows.length)){const e=(0,z.getNewPath)({},x.Bd,{}),o=(0,r.createInterpolateElement)((0,i.__)("No extensions or themes installed. <a>Browse the Marketplace</a>","woocommerce"),{a:(0,s.jsx)("a",{href:e})});return(0,s.jsx)(H.EmptyTable,{numberOfRows:4,children:o})}return(0,s.jsx)(je,{rows:e.rows,isLoading:e.isLoading,headers:o})}function Ne(e){const o=[...Me,{key:"actions",label:(0,i.__)("Actions","woocommerce")}];return(0,s.jsx)(je,{rows:e.rows,isLoading:e.isLoading,headers:o})}var ve=t(69771),be=t(10961);let ke=function(e){return e.Warning="warning",e.Error="error",e.Info="info",e}({});function fe(e){var o;const[t,c]=(0,r.useState)(!1),{loadSubscriptions:n}=(0,r.useContext)(he),a=()=>{(0,m.recordEvent)("marketplace_product_connect_button_clicked",{product_zip_slug:e.subscription.zip_slug,product_id:e.subscription.product_id}),c(!0),(0,G.qq)(e.subscription.product_key),(0,G.Ts)(e.subscription).then((()=>{n(!1).then((()=>{(0,G.Fy)(e.subscription.product_key,(0,i.sprintf)((0,i.__)("%s successfully connected.","woocommerce"),e.subscription.product_name),we.Q.Success),c(!1),e.onClose&&e.onClose()}))})).catch((()=>{(0,G.Fy)(e.subscription.product_key,(0,i.sprintf)((0,i.__)("%s couldn’t be connected.","woocommerce"),e.subscription.product_name),we.Q.Error,{actions:[{label:(0,i.__)("Try again","woocommerce"),onClick:a,url:""}]}),c(!1),e.onClose&&e.onClose()}))};return(0,s.jsx)(l.Button,{onClick:a,variant:null!==(o=e.variant)&&void 0!==o?o:"secondary",isBusy:t,disabled:t,children:(0,i.__)("Connect","woocommerce")})}const Ie={installingProducts:[]},De=(0,ee.createReduxStore)("woocommerce-admin/installing",{reducer(e=Ie,o){switch(o.type){case"START_INSTALLING":return{...e,installingProducts:[...e.installingProducts,o.productKey]};case"STOP_INSTALLING":return{...e,installingProducts:[...e.installingProducts.filter((e=>e!==o.productKey))]}}return e},actions:{startInstalling:e=>({type:"START_INSTALLING",productKey:e}),stopInstalling:e=>({type:"STOP_INSTALLING",productKey:e})},selectors:{isInstalling:(e,o)=>!!e&&e.installingProducts.includes(o)}});function Te(e){var o;const{loadSubscriptions:t}=(0,r.useContext)(he),c=(0,ee.useSelect)((o=>o(De).isInstalling(e.subscription.product_key)),[e.subscription.product_key]),n=()=>{(0,ee.dispatch)(De).stopInstalling(e.subscription.product_key)},a=o=>{t(!1).then((()=>{let t=(0,i.sprintf)((0,i.__)("%s couldn’t be installed.","woocommerce"),e.subscription.product_name);!1===o?.success&&o?.data.message&&(t+=" "+o.data.message),(0,G.Fy)(e.subscription.product_key,t,we.Q.Error,{actions:[{label:(0,i.__)("Download and install manually","woocommerce"),url:"https://woocommerce.com/my-account/downloads/",onClick:()=>{}}]}),n(),e.onError&&e.onError()})),(0,m.recordEvent)("marketplace_product_install_failed",{product_zip_slug:e.subscription.zip_slug,product_id:e.subscription.product_id,product_current_version:e.subscription.version,error_message:o?.data?.message})};return(0,s.jsx)(l.Button,{variant:null!==(o=e.variant)&&void 0!==o?o:"link",isBusy:c,disabled:c,onClick:()=>{(0,m.recordEvent)("marketplace_product_install_button_clicked",{product_zip_slug:e.subscription.zip_slug,product_id:e.subscription.product_id,product_current_version:e.subscription.version}),(0,ee.dispatch)(De).startInstalling(e.subscription.product_key),(0,G.qq)(e.subscription.product_key),e.subscription.is_installable?(0,G.ot)(e.subscription).then((()=>{t(!1).then((()=>{(0,G.Fy)(e.subscription.product_key,(0,i.sprintf)((0,i.__)("%s successfully installed.","woocommerce"),e.subscription.product_name),we.Q.Success),n()})),(0,m.recordEvent)("marketplace_product_installed",{product_zip_slug:e.subscription.zip_slug,product_id:e.subscription.product_id,product_current_version:e.subscription.version}),e.onSuccess&&e.onSuccess()})).catch(a):(0,G.P0)(e.subscription).then((o=>{if((0,m.recordEvent)("marketplace_product_install_url",{product_zip_slug:e.subscription.zip_slug,product_id:e.subscription.product_id,product_current_version:e.subscription.version,product_install_url:o}),n(),!o)throw new Error;window.open(o,"_self")})).catch(a)},children:(0,i.__)("Install","woocommerce")})}function Ce(e){var o;return(0,s.jsx)(l.Button,{href:(0,G.oS)(e.subscription),variant:null!==(o=e.variant)&&void 0!==o?o:"secondary",onClick:function(){(0,m.queueRecordEvent)("marketplace_renew_button_clicked",{product_zip_slug:e.subscription.zip_slug,product_id:e.subscription.product_id})},children:(0,i.__)("Renew","woocommerce")})}function ze(e){var o;return(0,s.jsx)(l.Button,{href:(0,G.dG)(e.subscription),variant:null!==(o=e.variant)&&void 0!==o?o:"secondary",onClick:function(){(0,m.queueRecordEvent)("marketplace_auto_renew_button_clicked",{order_id:e.subscription.order_id,product_id:e.subscription.product_id})},children:(0,i.__)("Renew","woocommerce")})}function Ae(e){var o;return(0,s.jsx)(l.Button,{href:(0,G.SU)(e.subscription),variant:null!==(o=e.variant)&&void 0!==o?o:"secondary",onClick:function(){(0,m.queueRecordEvent)("marketplace_subscribe_button_clicked",{product_zip_slug:e.subscription.zip_slug,product_id:e.subscription.product_id})},children:(0,i.__)("Subscribe","woocommerce")})}function Se(e){return(0,s.jsxs)(l.Modal,{title:(0,i.__)("Connect to update","woocommerce"),onRequestClose:e.onClose,focusOnMount:!0,className:"woocommerce-marketplace__header-account-modal",style:{borderRadius:4},overlayClassName:"woocommerce-marketplace__header-account-modal-overlay",children:[(0,s.jsx)("p",{className:"woocommerce-marketplace__header-account-modal-text",children:(0,i.sprintf)((0,i.__)("Version %s is available. To enable this update you need to connect your subscription to this store.","woocommerce"),e.subscription.version)}),(0,s.jsxs)(l.ButtonGroup,{className:"woocommerce-marketplace__header-account-modal-button-group",children:[(0,s.jsx)(l.Button,{variant:"tertiary",onClick:e.onClose,className:"woocommerce-marketplace__header-account-modal-button",children:(0,i.__)("Cancel","woocommerce")}),(0,s.jsx)(fe,{subscription:e.subscription,onClose:e.onClose,variant:"primary"})]})]})}function Le(e){return(0,s.jsxs)(l.Modal,{title:(0,i.__)("Renew to update","woocommerce"),onRequestClose:e.onClose,focusOnMount:!0,className:"woocommerce-marketplace__header-account-modal",style:{borderRadius:4},overlayClassName:"woocommerce-marketplace__header-account-modal-overlay",children:[(0,s.jsx)("p",{className:"woocommerce-marketplace__header-account-modal-text",children:(0,i.sprintf)((0,i.__)("Version %s is available. To enable this update you need to renew your subscription.","woocommerce"),e.subscription.version)}),(0,s.jsxs)(l.ButtonGroup,{className:"woocommerce-marketplace__header-account-modal-button-group",children:[(0,s.jsx)(l.Button,{variant:"tertiary",onClick:e.onClose,className:"woocommerce-marketplace__header-account-modal-button",children:(0,i.__)("Cancel","woocommerce")}),(0,s.jsx)(Ce,{subscription:e.subscription,variant:"primary"})]})]})}function Ee(e){return(0,s.jsxs)(l.Modal,{title:(0,i.__)("Subscribe to update","woocommerce"),onRequestClose:e.onClose,focusOnMount:!0,className:"woocommerce-marketplace__header-account-modal",style:{borderRadius:4},overlayClassName:"woocommerce-marketplace__header-account-modal-overlay",children:[(0,s.jsx)("p",{className:"woocommerce-marketplace__header-account-modal-text",children:(0,i.sprintf)((0,i.__)("Version %s is available. To enable this update you need to purchase a subscription.","woocommerce"),e.subscription.version)}),(0,s.jsxs)(l.ButtonGroup,{className:"woocommerce-marketplace__header-account-modal-button-group",children:[(0,s.jsx)(l.Button,{variant:"tertiary",onClick:e.onClose,className:"woocommerce-marketplace__header-account-modal-button",children:(0,i.__)("Cancel","woocommerce")}),(0,s.jsx)(Ae,{subscription:e.subscription,variant:"primary"})]})]})}(0,ee.register)(De);var Oe=t(9845);function Ue(e){const o=(0,c.O3)("wccomHelper",{});return o?.wooUpdateManagerInstalled?o?.wooUpdateManagerActive?null:(0,s.jsxs)(l.Modal,{title:(0,i.__)("Access your updates","woocommerce"),onRequestClose:e.onClose,focusOnMount:!0,className:"woocommerce-marketplace__header-account-modal",style:{borderRadius:4},overlayClassName:"woocommerce-marketplace__header-account-modal-overlay",children:[(0,s.jsx)("p",{className:"woocommerce-marketplace__header-account-modal-text",children:(0,s.jsx)("span",{dangerouslySetInnerHTML:(0,Oe.ZP)((0,i.sprintf)((0,i.__)("Version %s is available. To access this update, please <b>activate the WooCommerce.com Update Manager</b> extension.","woocommerce"),e.subscription.version))})}),(0,s.jsxs)(l.ButtonGroup,{className:"woocommerce-marketplace__header-account-modal-button-group",children:[(0,s.jsx)(l.Button,{onClick:e.onClose,variant:"link",children:(0,i.__)("Cancel","woocommerce")}),(0,s.jsx)(l.Button,{href:x.DS,variant:"primary",children:(0,i.__)("Activate","woocommerce")})]})]}):(0,s.jsxs)(l.Modal,{title:(0,i.__)("Access your updates","woocommerce"),onRequestClose:e.onClose,focusOnMount:!0,className:"woocommerce-marketplace__header-account-modal",style:{borderRadius:4},overlayClassName:"woocommerce-marketplace__header-account-modal-overlay",children:[(0,s.jsx)("p",{className:"woocommerce-marketplace__header-account-modal-text",children:(0,s.jsx)("span",{dangerouslySetInnerHTML:(0,Oe.ZP)((0,i.sprintf)((0,i.__)("Version %s is available. To access this update, please first <b>install the WooCommerce.com Update Manager</b> extension. Alternatively, you can download and install it manually.","woocommerce"),e.subscription.version))})}),(0,s.jsxs)(l.ButtonGroup,{className:"woocommerce-marketplace__header-account-modal-button-group",children:[(0,s.jsx)(l.Button,{href:x.eS,variant:"secondary",children:(0,i.__)("Download","woocommerce")}),(0,s.jsx)(l.Button,{href:o?.wooUpdateManagerInstallUrl,variant:"primary",children:(0,i.__)("Install","woocommerce")})]})]})}function Qe(e){const[o,t]=(0,r.useState)(!1),[c,n]=(0,r.useState)(!1),{loadSubscriptions:a}=(0,r.useContext)(he),u=e.subscription.active&&e.subscription.local&&e.subscription.local.slug&&e.subscription.local.path&&e.wooUpdateManagerActive;return(0,s.jsxs)(s.Fragment,{children:[o?""===e.subscription.product_key?(0,s.jsx)(Ee,{onClose:()=>t(!1),subscription:e.subscription}):e.subscription.expired?(0,s.jsx)(Le,{subscription:e.subscription,onClose:()=>t(!1)}):e.subscription.active?e.wooUpdateManagerActive?null:(0,s.jsx)(Ue,{subscription:e.subscription,onClose:()=>t(!1)}):(0,s.jsx)(Se,{subscription:e.subscription,onClose:()=>t(!1)}):null,(0,s.jsx)(l.Button,{variant:"link",className:"woocommerce-marketplace__my-subscriptions-update",onClick:function o(){(0,m.recordEvent)("marketplace_product_update_button_clicked",{product_zip_slug:e.subscription.zip_slug,product_id:e.subscription.product_id,product_installed_version:e.subscription.local.installed,product_current_version:e.subscription.version}),u?((0,G.qq)(e.subscription.product_key),window.wp.updates?(n(!0),(0,G.nM)(e.subscription).then((()=>{a(!1).then((()=>{(0,G.Fy)(e.subscription.product_key,(0,i.sprintf)((0,i.__)("%s updated successfully.","woocommerce"),e.subscription.product_name),we.Q.Success),n(!1)})),(0,m.recordEvent)("marketplace_product_updated",{product_zip_slug:e.subscription.zip_slug,product_id:e.subscription.product_id,product_installed_version:e.subscription.local.installed,product_current_version:e.subscription.version})})).catch((()=>{(0,G.Fy)(e.subscription.product_key,(0,i.sprintf)((0,i.__)("%s couldn’t be updated.","woocommerce"),e.subscription.product_name),we.Q.Error,{actions:[{label:(0,i.__)("Try again","woocommerce"),onClick:o,url:""}]}),n(!1),(0,m.recordEvent)("marketplace_product_update_failed",{product_zip_slug:e.subscription.zip_slug,product_id:e.subscription.product_id,product_installed_version:e.subscription.local.installed,product_current_version:e.subscription.version})}))):(0,G.Fy)(e.subscription.product_key,(0,i.sprintf)((0,i.__)("%s couldn’t be updated.","woocommerce"),e.subscription.product_name),we.Q.Error,{actions:[{label:(0,i.__)("Reload page and try again","woocommerce"),onClick:()=>{window.location.reload()},url:""}]})):t(!0)},isBusy:c,disabled:c,label:(0,i.sprintf)((0,i.__)("Update to %s","woocommerce"),e.subscription.version),showTooltip:!0,tooltipPosition:"top center",children:c?(0,i.__)("Updating","woocommerce"):(0,i.__)("Update","woocommerce")})]})}function Pe(e){const[o,t]=(0,r.useState)(!1),[c,n]=(0,r.useState)(!1),a=(0,r.useRef)(null);(0,r.useEffect)((()=>()=>{a.current&&clearTimeout(a.current)}),[]);const i=()=>{e.explanationOnHover&&(a.current&&clearTimeout(a.current),t(!0))},m=()=>{e.explanationOnHover&&(a.current&&clearTimeout(a.current),a.current=setTimeout((()=>{t(!1)}),350))};return(0,s.jsxs)("button",{onClick:()=>n(!c),onMouseOver:i,onFocus:i,onMouseOut:m,onBlur:m,className:(0,C.Z)("woocommerce-marketplace__my-subscriptions__product-status",`woocommerce-marketplace__my-subscriptions__product-status--${e.level}`),children:[e.text,""!==e.explanation&&(c||e.explanationOnHover&&o)&&(0,s.jsx)(l.Popover,{className:"woocommerce-marketplace__my-subscriptions__popover",position:"top center",focusOnMount:!1,onMouseOver:i,onMouseOut:m,onFocus:i,onBlur:m,children:e.explanation})]})}var Ye=t(25869);function Ze(e){const o=[{title:(0,i.__)("Manage in Plugins","woocommerce"),onClick:()=>{window.location.href=c.SX+"plugins.php"}}];return e.subscription.is_shared||o.unshift({title:(0,i.__)("Manage on WooCommerce.com","woocommerce"),onClick:()=>{window.open("https://woocommerce.com/my-account/my-subscriptions","_blank")}}),e.subscription.documentation_url&&o.unshift({title:(0,i.__)("View documentation","woocommerce"),onClick:()=>{window.open(e.subscription.documentation_url,"_blank")}}),(0,s.jsx)(l.DropdownMenu,{icon:Ye.Z,label:(0,i.__)("Actions","woocommerce"),controls:o})}function Be(e){return(0,s.jsx)("span",{className:"woocommerce-marketplace__my-subscriptions-version",children:e.span})}function Re(e,o){const t=(0,c.O3)("wccomHelper",{});return e.local.version===e.version?(0,s.jsx)(Be,{span:e.local.version}):e.local.version&&e.version&&"installed"===o?(0,s.jsx)(Qe,{subscription:e,wooUpdateManagerActive:t?.wooUpdateManagerActive}):e.version?(0,s.jsx)(Be,{span:e.version}):e.local.version?(0,s.jsx)(Be,{span:e.local.version}):""}function Ge(e){return(0,G.lk)(e,[["utm_source","subscriptionsscreen"],["utm_medium","product"],["utm_campaign","wcaddons"],["utm_content","product-name"]])}function Fe(e){let o=(0,s.jsx)(w.Z,{icon:be.Z,size:40});return e.product_icon&&(o=(0,s.jsx)("img",{src:e.product_icon,alt:(0,i.sprintf)((0,i.__)("%s icon","woocommerce"),e.product_name)})),{display:(0,s.jsxs)("div",{className:"woocommerce-marketplace__my-subscriptions__product",children:[(0,s.jsx)("a",{href:Ge(e.product_url),target:"_blank",rel:"noreferrer",children:(0,s.jsx)("span",{className:"woocommerce-marketplace__my-subscriptions__product-icon",children:o})}),(0,s.jsx)("a",{href:Ge(e.product_url),className:"woocommerce-marketplace__my-subscriptions__product-name",target:"_blank",rel:"noreferrer",children:e.product_name}),(0,s.jsx)("span",{className:"woocommerce-marketplace__my-subscriptions__product-statuses",children:e.is_shared&&(0,s.jsx)(Pe,{text:(0,i.__)("Shared with you","woocommerce"),level:ke.Info,explanation:(0,r.createInterpolateElement)((0,i.sprintf)((0,i.__)("This subscription was shared by <email>%s</email>. <link>Learn more</link>.","woocommerce"),e.owner_email),{email:(0,s.jsx)("strong",{style:{overflowWrap:"anywhere"},children:"email"}),link:(0,s.jsx)("a",{href:x.TC,rel:"nofollow noopener noreferrer",children:"Learn more"})})})})]}),value:e.product_name}}function Ve(e){const o=e.expires;if(!0===e.local.installed&&""===e.product_key)return{display:"",value:""};let t=(0,i.__)("Never expires","woocommerce");return o&&(t=(0,ve.gmdateI18n)("j M, Y",new Date(1e3*o))),{display:(0,s.jsx)("span",{className:"woocommerce-marketplace__my-subscriptions__expiry-date",children:t}),value:o}}function We(e,o){return{display:function(){const t=function(e,o){return""===e.product_key?{text:(0,i.__)("No subscription","woocommerce"),level:ke.Error,explanation:(0,r.createInterpolateElement)((0,i.__)("To receive updates and support, please <purchase>purchase</purchase> a subscription or use a subscription from another account by <sharing>sharing</sharing> or <transferring>transferring</transferring>.","woocommerce"),{purchase:(0,s.jsx)("a",{href:(0,G.SU)(e),rel:"nofollow noopener noreferrer",children:"renew"}),sharing:(0,s.jsx)("a",{href:x.TC,rel:"nofollow noopener noreferrer",children:"sharing"}),transferring:(0,s.jsx)("a",{href:x.Dc,rel:"nofollow noopener noreferrer",children:"sharing"})})}:e.expired?{text:(0,i.__)("Expired","woocommerce"),level:ke.Error,explanation:(0,r.createInterpolateElement)((0,i.__)("To receive updates and support, please <renew>renew</renew> this subscription or use a subscription from another account by <sharing>sharing</sharing> or <transferring>transferring</transferring>.","woocommerce"),{renew:(0,s.jsx)("a",{href:(0,G.oS)(e),rel:"nofollow noopener noreferrer",children:"renew"}),sharing:(0,s.jsx)("a",{href:x.TC,rel:"nofollow noopener noreferrer",children:"sharing"}),transferring:(0,s.jsx)("a",{href:x.Dc,rel:"nofollow noopener noreferrer",children:"sharing"})})}:e.expiring&&!e.autorenew?{text:(0,i.__)("Expires soon","woocommerce"),level:ke.Error,explanation:(0,r.createInterpolateElement)((0,i.__)("To receive updates and support, please <renew>renew</renew> this subscription before it expires or use a subscription from another account by <sharing>sharing</sharing> or <transferring>transferring</transferring>.","woocommerce"),{renew:(0,s.jsx)("a",{href:(0,G.dG)(e),rel:"nofollow noopener noreferrer",children:"renew"}),sharing:(0,s.jsx)("a",{href:x.TC,rel:"nofollow noopener noreferrer",children:"sharing"}),transferring:(0,s.jsx)("a",{href:x.Dc,rel:"nofollow noopener noreferrer",children:"sharing"})})}:!("installed"!==o||!e.local.installed||e.active)&&{text:(0,i.__)("Not connected","woocommerce"),level:ke.Warning,explanation:(0,i.__)("To receive updates and support, please connect your subscription to this store.","woocommerce")}}(e,o);var c;if(t)return(0,s.jsx)(Pe,{text:t.text,level:t.level,explanation:null!==(c=t.explanation)&&void 0!==c?c:"",explanationOnHover:!0});let n;return n=e.lifetime?(0,i.__)("Lifetime","woocommerce"):e.autorenew?(0,i.__)("Active","woocommerce"):(0,i.__)("Cancelled","woocommerce"),n}()}}function He(e,o){return{display:Re(e,o)}}function $e(e){let o=null;return""===e.product_key?o=(0,s.jsx)(Ae,{subscription:e}):e.expired&&!e.lifetime?o=(0,s.jsx)(Ce,{subscription:e}):!1===e.local.installed&&!1===e.subscription_installed?o=(0,s.jsx)(Te,{subscription:e}):!1===e.active&&!0===e.subscription_available?o=(0,s.jsx)(fe,{subscription:e,variant:"link"}):e.autorenew||e.lifetime||(o=(0,s.jsx)(ze,{subscription:e})),{display:(0,s.jsxs)("div",{className:"woocommerce-marketplace__my-subscriptions__actions",children:[o,(0,s.jsx)(Ze,{subscription:e})]})}}function Je(e,o){return[Fe(e),Ve(e),We(e,o),He(e,o),$e(e)]}const Ke="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEyLjAwMDIgMi4yNVY0QzE2LjQxODUgNCAyMC4wMDAzIDcuNTgxNzIgMjAuMDAwMyAxMkMyMC4wMDAzIDE1LjcyNzcgMTcuNDUwNyAxOC44NTk5IDE0LjAwMDMgMTkuNzQ4VjE5Ljc0NzlDMTMuODMwMSAxOS43OTE3IDEzLjY1NzcgMTkuODMwMSAxMy40ODMzIDE5Ljg2MjhDMTMuMzM3MSAxOS44OTA1IDEzLjE5MDYgMTkuOTE0IDEzLjA0NDIgMTkuOTMzNEwxMy4wNDQxIDE5LjkzMjVDMTIuNzAyNCAxOS45NzcgMTIuMzUzOSAyMCAxMiAyMEMxMS42NDYgMjAgMTEuMjk3NSAxOS45NzcgMTAuOTU1NiAxOS45MzI0TDEwLjk1NTYgMTkuOTMyN0MxMC45MTQ4IDE5LjkyNzMgMTAuODc0IDE5LjkyMTYgMTAuODMzMyAxOS45MTU1QzkuNjEwMzYgMTkuNzM2OSA4LjQ3NzIyIDE5LjI4MTUgNy40OTk0OSAxOC42MTVDNy4zNzM2NSAxOC41Mjk1IDcuMjUwMTEgMTguNDQwNCA3LjEyOTA0IDE4LjM0NzdMNy4xMjk1NCAxOC4zNDdDNi41NzU0NiAxNy45MjEyIDYuMDc4NzIgMTcuNDI0NSA1LjY1MjkxIDE2Ljg3MDRMNS42NTE3MSAxNi44NzEzQzUuNDg1NTEgMTYuNjU0NSA1LjMyOTQxIDE2LjQyNzYgNS4xODQzOCAxNi4xOTExQzQuNjk0NTMgMTUuMzk2MiA0LjMzOTg1IDE0LjUwOTEgNC4xNTIzOSAxMy41NjE5QzQuMTE3ODggMTMuMzg5NSA0LjA4OTI1IDEzLjIxNjggNC4wNjY0MSAxMy4wNDQxTDQuMDY3NDkgMTMuMDQzOUM0LjAyMjk3IDEyLjcwMjIgNCAxMi4zNTM4IDQgMTJDNCAxMS42NDYgNC4wMjI5OSAxMS4yOTc0IDQuMDY3NTYgMTAuOTU1NUw0LjA2NzA4IDEwLjk1NTVDNC4wNzY5NCAxMC44ODExIDQuMDg3ODQgMTAuODA3IDQuMDk5NzYgMTAuNzMzQzQuMjgxIDkuNTk0IDQuNzAyNjYgOC41MzUwNyA1LjMxMTA5IDcuNjA5OTJDNS40MTg2NCA3LjQ0NTcyIDUuNTMyMzYgNy4yODUyNSA1LjY1MjEgNy4xMjg5MUw1LjY1Mjk0IDcuMTI5NTVDNS42NTUzNSA3LjEyNjQxIDUuNjU3NzcgNy4xMjMyNyA1LjY2MDE4IDcuMTIwMTRMNi44NjAzNyA4LjAyMDI4QzYuNzQwMTUgOC4xNzUzMSA2LjYyNjc5IDguMzM1OTMgNi41MjA3NCA4LjUwMTY4QzYuMDYwNDMgOS4yMjQzOSA1Ljc0NTQgMTAuMDMzMyA1LjU5NjM5IDEwLjg3ODVDNS41MzMwMyAxMS4yNDI4IDUuNSAxMS42MTc2IDUuNSAxMkM1LjUgMTIuNDc1MSA1LjU1MDk2IDEyLjkzODIgNS42NDc3MiAxMy4zODQzQzUuNzI4OTQgMTMuNzU0NCA1Ljg0Mzk3IDE0LjEyMzMgNS45OTQ3NSAxNC40ODczQzYuMTE3NTQgMTQuNzgzNyA2LjI1OTM4IDE1LjA2NTcgNi40MTgxMyAxNS4zMzI1QzYuOTE2NzIgMTYuMTY1OCA3LjU5NjYzIDE2Ljg3ODIgOC40MDMzNSAxNy40MTUxQzkuMTc2ODIgMTcuOTI3NSAxMC4wNTQgMTguMjcxIDEwLjk3MTQgMTguNDE5MUMxMS4zMDY0IDE4LjQ3MjMgMTEuNjUgMTguNSAxMiAxOC41QzEyLjQ1MDYgMTguNSAxMi44OTA0IDE4LjQ1NDIgMTMuMzE1MSAxOC4zNjY5QzEzLjUyNjMgMTguMzIzIDEzLjczNzIgMTguMjY4MSAxMy45NDcgMTguMjAxOUwxMy45NDc0IDE4LjIwMzJDMTYuNTg1OSAxNy4zNzU4IDE4LjUgMTQuOTExNCAxOC41IDEyQzE4LjUgOC40MTAyMyAxNS41OSA1LjUwMDEzIDEyLjAwMDIgNS41VjcuMjVMOS4wMDAyNCA0Ljc1TDEyLjAwMDIgMi4yNVoiIGZpbGw9IiMwMDdDQkEiLz4KPC9zdmc+",qe="woocommerce-marketplace-refresh-subscriptions";function Xe(){const{refreshSubscriptions:e}=(0,r.useContext)(he),[o,t]=(0,r.useState)(!1),c=()=>{o||((0,G.qq)(qe),t(!0),e().then((()=>{(0,G.Fy)(qe,(0,i.__)("Subscriptions refreshed.","woocommerce"),we.Q.Success)})).catch((e=>{(0,G.Fy)(qe,(0,i.sprintf)((0,i.__)("Error refreshing subscriptions: %s","woocommerce"),e.message),we.Q.Error,{actions:[{label:(0,i.__)("Try again","woocommerce"),onClick:c,url:""}]})})).finally((()=>{t(!1)})))};return(0,s.jsxs)(l.Button,{className:"woocommerce-marketplace__refresh-subscriptions",onClick:c,isBusy:o,children:[(0,s.jsx)("img",{src:Ke,alt:(0,i.__)("Refresh subscriptions","woocommerce"),className:"woocommerce-marketplace__refresh-subscriptions-icon"}),(0,i.__)("Refresh","woocommerce")]})}const eo="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgaWQ9ImFsZXJ0Ij4KPHBhdGggaWQ9IlZlY3RvciIgZD0iTTEyIDIwQzE2LjQxODMgMjAgMjAgMTYuNDE4MyAyMCAxMkMyMCA3LjU4MTcyIDE2LjQxODMgNCAxMiA0QzcuNTgxNzIgNCA0IDcuNTgxNzIgNCAxMkM0IDE2LjQxODMgNy41ODE3MiAyMCAxMiAyMFoiIHN0cm9rZT0iI0NDMTgxOCIgc3Ryb2tlLXdpZHRoPSIxLjUiLz4KPHBhdGggaWQ9IlZlY3Rvcl8yIiBkPSJNMTMgN0gxMVYxM0gxM1Y3WiIgZmlsbD0iI0NDMTgxOCIvPgo8cGF0aCBpZD0iVmVjdG9yXzMiIGQ9Ik0xMyAxNUgxMVYxN0gxM1YxNVoiIGZpbGw9IiNDQzE4MTgiLz4KPC9nPgo8L3N2Zz4K";var oo=t(78152);function to(){const e=(0,ee.useSelect)((e=>e(oo.I).notices()),[]),o=e=>e.options?.actions?e.options?.actions.map((e=>({...e,variant:"link",className:"is-link"}))):[],t=[];for(const r of e)t.push((0,s.jsxs)(l.Notice,{className:"woocommerce-marketplace__notice--error",status:r.status,onRemove:()=>(0,G.qq)(r.productKey),actions:o(r),children:[(0,s.jsx)("img",{src:eo,alt:"",width:24,height:24}),r.message]},r.productKey));return(0,s.jsx)(s.Fragment,{children:t})}function ro(e){var o;const t=new URL((0,G.pS)());return e.install&&t.searchParams.set("install",e.install),(0,s.jsx)(l.Button,{href:t.href,variant:null!==(o=e.variant)&&void 0!==o?o:"secondary",children:(0,i.__)("Connect Account","woocommerce")})}function co(){const e=(0,z.useQuery)(),o=e?.install,t=(0,c.O3)("wccomHelper",{}),n=!!t?.isConnected,[a,m]=(0,r.useState)(!1),[u,d]=(0,r.useState)(!1),{subscriptions:p,isLoading:_}=(0,r.useContext)(he),g=p.find((e=>e.product_key===o)),w=(0,r.useCallback)((()=>{(0,z.navigateTo)({url:(0,z.getNewPath)({...e,install:void 0},x.Bd,{})})}),[e]);(0,r.useEffect)((()=>{_||(o&&n&&!_&&!g?((0,G.Fy)(o,(0,i.sprintf)((0,i.__)("Could not find subscription with product key %s.","woocommerce"),o),we.Q.Error),w()):m(!!o))}),[n,_,o,w,g]),(0,r.useEffect)((()=>{g&&g.local.installed&&d(!0)}),[g]);const h=()=>{w(),m(!1)};return a?(0,s.jsxs)(l.Modal,{title:u?(0,i.__)("You are ready to go!","woocommerce"):(0,i.__)("Add to store","woocommerce"),onRequestClose:h,focusOnMount:!0,className:"woocommerce-marketplace__header-account-modal has-size-medium",style:{borderRadius:4},overlayClassName:"woocommerce-marketplace__header-account-modal-overlay",children:[(()=>{if(!n)return(0,s.jsx)(l.Notice,{status:"warning",isDismissible:!1,children:(0,i.__)("In order to install a product, you need to first connect your account.","woocommerce")});if(g){const e=u?(0,i.__)("Keep the momentum going and start setting up your extension.","woocommerce"):(0,i.__)("Would you like to install this extension?","woocommerce");return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"woocommerce-marketplace__header-account-modal-text",children:e}),(0,s.jsx)(F,{product:(0,G.i1)(g),small:!0,tracksData:{position:1,group:"subscriptions",label:"install"}})]})}})(),(()=>{const e=[];return u?(e.push((0,s.jsx)(l.Button,{variant:"secondary",href:g?.documentation_url,target:"_blank",className:"woocommerce-marketplace__header-account-modal-button",children:(0,i.__)("View docs","woocommerce")},"docs")),e.push((0,s.jsx)(l.Button,{variant:"primary",href:x.DS,className:"woocommerce-marketplace__header-account-modal-button",children:(0,i.__)("View in Plugins","woocommerce")},"plugin-list"))):(e.push((0,s.jsx)(l.Button,{variant:"tertiary",onClick:h,className:"woocommerce-marketplace__header-account-modal-button",children:(0,i.__)("Cancel","woocommerce")},"cancel")),n?g&&e.push((0,s.jsx)(Te,{subscription:g,variant:"primary",onError:h},"install")):e.push((0,s.jsx)(ro,{variant:"primary",install:o},"connect"))),(0,s.jsx)(l.ButtonGroup,{className:"woocommerce-marketplace__header-account-modal-button-group",children:e})})()]}):null}var so=t(84884);function no(){const{subscriptions:e,isLoading:o}=(0,r.useContext)(he),t=(0,c.O3)("wccomHelper",{}),n=(0,r.createInterpolateElement)((0,i.__)("WooCommerce.com extensions and themes installed on this store. To see all your subscriptions go to <a>your account<custom_icon /></a> on WooCommerce.com.","woocommerce"),{a:(0,s.jsx)("a",{href:"https://woocommerce.com/my-account/my-subscriptions",target:"_blank",rel:"nofollow noopener noreferrer",children:"your account"}),custom_icon:(0,s.jsx)(w.Z,{icon:pe.Z,size:12})}),a=e.filter((e=>e.subscription_installed)),m=e.filter((e=>!e.subscription_installed&&t?.wooUpdateManagerPluginSlug!==e.product_slug&&!e.maxed));if(!t?.isConnected){const e=(0,i.__)("Connect your WooCommerce.com account to get product updates, manage your subscriptions from your store admin, and get streamlined support.","woocommerce"),o=()=>{const e={notice_id:"woo-disconnect-notice",dismiss_notice_nonce:t?.dismissNoticeNonce||""};ge()({path:"/wc-admin/notice/dismiss",method:"POST",data:e}),localStorage.setItem("wc-marketplaceNoticeClosed-woo-disconnect-notice","false")};return(0,s.jsxs)(s.Fragment,{children:[t?.disconnected_notice&&(0,s.jsx)(so.Z,{id:"woo-disconnect-notice",description:t?.disconnected_notice,isDismissible:!0,variant:"info",onClose:o}),(0,s.jsxs)("div",{className:"woocommerce-marketplace__my-subscriptions--connect",children:[(0,s.jsx)(co,{}),(0,s.jsx)("div",{className:"woocommerce-marketplace__my-subscriptions__icon"}),(0,s.jsx)("h2",{className:"woocommerce-marketplace__my-subscriptions__header",children:(0,i.__)("Connect your WooCommerce.com account","woocommerce")}),(0,s.jsx)("p",{className:"woocommerce-marketplace__my-subscriptions__description",children:e}),(0,s.jsx)(l.Button,{href:(0,G.pS)(),variant:"primary",children:(0,i.__)("Connect","woocommerce")})]})]})}return(0,s.jsxs)(s.Fragment,{children:[t?.connected_notice&&(0,s.jsx)(so.Z,{id:"woo-connect-notice",description:t?.connected_notice,isDismissible:!0,variant:"success",onClose:()=>{const e={notice_id:"woo-connect-notice",dismiss_notice_nonce:t?.dismissNoticeNonce||""};ge()({path:"/wc-admin/notice/dismiss",method:"POST",data:e}),localStorage.setItem("wc-marketplaceNoticeClosed-woo-connect-notice","false")}}),(0,s.jsxs)("div",{className:"woocommerce-marketplace__my-subscriptions",children:[(0,s.jsx)(co,{}),(0,s.jsx)("section",{className:"woocommerce-marketplace__my-subscriptions__notices",children:(0,s.jsx)(to,{})}),(0,s.jsxs)("section",{className:"woocommerce-marketplace__my-subscriptions-section woocommerce-marketplace__my-subscriptions__installed",children:[(0,s.jsxs)("header",{className:"woocommerce-marketplace__my-subscriptions__header",children:[(0,s.jsxs)("div",{className:"woocommerce-marketplace__my-subscriptions__header-content",children:[(0,s.jsx)("h2",{className:"woocommerce-marketplace__my-subscriptions__heading",children:(0,i.__)("Installed on this store","woocommerce")}),(0,s.jsx)("p",{className:"woocommerce-marketplace__my-subscriptions__table-description",children:n})]}),(0,s.jsx)("div",{className:"woocommerce-marketplace__my-subscriptions__header-refresh",children:(0,s.jsx)(Xe,{})})]}),(0,s.jsx)("div",{className:"woocommerce-marketplace__my-subscriptions__table-wrapper",children:(0,s.jsx)(ye,{isLoading:o,rows:a.map((e=>Je(e,"installed")))})})]}),m.length>0&&(0,s.jsxs)("section",{className:"woocommerce-marketplace__my-subscriptions-section woocommerce-marketplace__my-subscriptions__available",children:[(0,s.jsx)("h2",{className:"woocommerce-marketplace__my-subscriptions__heading",children:(0,i.__)("Available to use","woocommerce")}),(0,s.jsx)("p",{className:"woocommerce-marketplace__my-subscriptions__table-description",children:(0,i.__)("WooCommerce.com subscriptions you haven't used yet.","woocommerce")}),(0,s.jsx)("div",{className:"woocommerce-marketplace__my-subscriptions__table-wrapper",children:(0,s.jsx)(Ne,{isLoading:o,rows:m.map((e=>Je(e,"available")))})})]})]})]})}var ao=function(e){return e[e.notConnected=0]="notConnected",e[e.notInstalled=1]="notInstalled",e[e.installing=2]="installing",e[e.installedCanActivate=3]="installedCanActivate",e[e.installedCannotActivate=4]="installedCannotActivate",e[e.installFailed=5]="installFailed",e[e.activating=6]="activating",e[e.activated=7]="activated",e[e.activationFailed=8]="activationFailed",e}(ao||{});const io=function(e){const[o,t]=(0,r.useState)(ao.notInstalled),[a,u]=(0,r.useState)(),[d,p]=(0,r.useState)(),[_,g]=(0,r.useState)(),[w,h]=(0,r.useState)(),[M,j]=(0,r.useState)(),[y,N]=(0,r.useState)(!1),[v,b]=(0,r.useState)(),{addInstalledProduct:k}=(0,r.useContext)(n),f=(0,z.useQuery)();function I(){t(ao.notInstalled),b(void 0),(0,z.navigateTo)({url:(0,z.getNewPath)({...f,install:void 0,installProduct:void 0},x.Bd,{})})}return(0,r.useEffect)((()=>{const e=(0,c.O3)("wccomHelper",{});p(e?.installedProducts),g(e?.isConnected)}),[]),(0,r.useEffect)((()=>{if(N(!1),!f.installProduct)return;const o=parseInt(f.installProduct,10),r=e.products.find((e=>e.id===o));if(r){if(d&&d.find((e=>e===r.slug)))return;_?t(ao.notInstalled):(t(ao.notConnected),b({status:"warning",message:(0,i.__)("In order to install a product, you need to first connect your account.","woocommerce")})),N(!0),u(r)}}),[f,e.products,d,_]),a&&y?(0,s.jsxs)(l.Modal,{title:o===ao.activated?(0,i.__)("You are ready to go!","woocommerce"):(0,i.__)("Add to Store","woocommerce"),onRequestClose:I,focusOnMount:!0,className:"woocommerce-marketplace__header-account-modal has-size-medium",style:{borderRadius:4},overlayClassName:"woocommerce-marketplace__header-account-modal-overlay",children:[v&&(0,s.jsx)(l.Notice,{status:v.status,isDismissible:!1,children:v.message}),(0,s.jsx)("p",{className:"woocommerce-marketplace__header-account-modal-text",children:o===ao.notConnected?"":o===ao.installedCanActivate||o===ao.activating?(0,i.__)("Extension successfully installed. Would you like to activate it?","woocommerce"):o===ao.installedCannotActivate?(0,i.__)("Extension successfully installed but we can't activate it at the moment. Please visit the plugins page to see more.","woocommerce"):o===ao.activated?(0,i.__)("Keep the momentum going and start setting up your extension.","woocommerce"):(0,i.__)("Would you like to install this extension?","woocommerce")}),a&&(0,s.jsx)(F,{product:a,small:!0,tracksData:{position:1,group:"install-flow",label:"install"}}),(0,s.jsxs)(l.ButtonGroup,{className:"woocommerce-marketplace__header-account-modal-button-group",children:[o===ao.activated?M?(0,s.jsx)(l.Button,{variant:"tertiary",href:M,className:"woocommerce-marketplace__header-account-modal-button",children:(0,i.__)("View Docs","woocommerce")},"docs"):(0,s.jsx)(s.Fragment,{}):(0,s.jsx)(l.Button,{variant:"tertiary",onClick:I,className:"woocommerce-marketplace__header-account-modal-button",children:(0,i.__)("Cancel","woocommerce")},"cancel"),o===ao.notConnected?(0,s.jsx)(ro,{variant:"primary"},"connect"):o===ao.installedCanActivate||o===ao.activating?(0,s.jsx)(l.Button,{variant:"primary",onClick:function(){w&&(t(ao.activating),(0,m.recordEvent)("marketplace_activate_new_product_clicked",{product_id:a?a.id:0}),fetch(w).then((()=>{t(ao.activated)})).catch((()=>{t(ao.activationFailed),b({status:"error",message:(0,i.__)("Activation failed. Please try again from the plugins page.","woocommerce")})})))},isBusy:o===ao.activating,disabled:o===ao.activating,children:(0,i.__)("Activate","woocommerce")},"activate"):o===ao.activated||o===ao.installedCannotActivate||o===ao.activationFailed?(0,s.jsx)(l.Button,{variant:"primary",href:x.DS,className:"woocommerce-marketplace__header-account-modal-button",children:(0,i.__)("View in Plugins","woocommerce")},"plugin-list"):(0,s.jsx)(l.Button,{variant:"primary",onClick:function(){var e;a&&a.id&&((0,m.recordEvent)("marketplace_install_new_product_clicked",{product_id:a.id}),t(ao.installing),(e=a.id,ge()({path:"/wc/v3/marketplace/create-order",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({product_id:e})})).then((e=>{var o,r;if(!e.success)throw e;return(0,ee.dispatch)(De).startInstalling(String(null!==(o=a.id)&&void 0!==o?o:"")),j(e.data.documentation_url),a.slug&&k(null!==(r=a.slug)&&void 0!==r?r:""),(0,G.CH)(e.data.product_type,e.data.zip_slug).then((e=>{var o;(0,ee.dispatch)(De).stopInstalling(String(null!==(o=a.id)&&void 0!==o?o:"")),e.data.activateUrl?(h(e.data.activateUrl),t(ao.installedCanActivate)):t(ao.installedCannotActivate)}))})).catch((e=>{var o;e.data.redirect_location?(b({status:"warning",message:(0,i.__)("We need your address to complete installing this product. We will redirect you to WooCommerce.com checkout. Afterwards, you will be able to install the product.","woocommerce")}),setTimeout((()=>{window.location.href=e.data.redirect_location}),5e3)):(t(ao.installFailed),b({status:"error",message:null!==(o=e.data.message)&&void 0!==o?o:(0,i.__)("An error occurred. Please try again later.","woocommerce")}))})))},isBusy:o===ao.installing,disabled:o===ao.installing||o===ao.installFailed,children:(0,i.__)("Install","woocommerce")},"install")]})]}):(0,s.jsx)(s.Fragment,{})};var lo=t(87287);function mo(){const e="woo-connect-notice-marketplace-dismissed",o=(0,c.O3)("wccomHelper",{}),t=o?.woocomConnectNoticeType||"none",r=(0,i.__)("Your store","woocommerce"),n=o?.storeName||r,a=n!==r?`<strong>${n}</strong>`:n;if("none"===t)return null;const u=localStorage.getItem(e),d=new Date(u||""),p=new Date;p.setMonth(p.getMonth()-1),(null===u||isNaN(d.valueOf())||p.valueOf()>d.valueOf())&&(localStorage.removeItem("wc-marketplaceNoticeClosed-woo-connect-notice"),localStorage.removeItem(e));const _={long:(0,i.sprintf)((0,i.__)("%s might be at risk because it’s running outdated WooCommerce plugins and is not yet connected to a WooCommerce.com account. Please complete the connection to get updates and streamlined support.","woocommerce"),a),short:(0,i.sprintf)((0,i.__)("%s is not yet connected to a WooCommerce.com account. Please complete the connection to get updates and streamlined support.","woocommerce"),a)}[t],g=(0,G.lk)((0,G.pS)(),[["utm_source","pu"],["utm_campaign","pu_in_apps_screen_connect"]]);return(0,s.jsxs)(so.Z,{id:"woo-connect-notice",description:_,isDismissible:!0,variant:"warning",className:"woocommerce-marketplace__connect-notice",onClose:()=>{localStorage.setItem(e,(new Date).toString()),(0,m.recordEvent)("woo_connect_notice_in_marketplace_dismissed")},onLoad:()=>{(0,m.recordEvent)("woo_connect_notice_in_marketplace_shown")},children:[(0,s.jsx)(l.Button,{href:g,variant:"primary",onClick:()=>((0,m.recordEvent)("woo_connect_notice_in_marketplace_clicked"),!0),children:(0,i.__)("Connect your store","woocommerce")}),(0,s.jsx)(l.Button,{href:"https://woocommerce.com/document/managing-woocommerce-com-subscriptions/#connect-your-site-woocommercecom-account",target:"_blank",variant:"tertiary",onClick:()=>((0,m.recordEvent)("woo_connect_notice_learn_more_clicked"),!0),children:(0,i.__)("Learn more","woocommerce")})]})}function uo(e){const o=(0,c.O3)("wccomHelper",{});if(!o?.isConnected)return null;const{selectedTab:t}=e;return"my-subscriptions"!==t&&o?.mySubscriptionsTabLoaded?null:o?.wooUpdateManagerActive||o?.wooUpdateManagerInstalled?o?.wooUpdateManagerInstalled&&!o?.wooUpdateManagerActive?(0,s.jsx)("section",{className:"woocommerce-marketplace__woo-update-manager-plugin__notices",children:(0,s.jsxs)(l.Notice,{status:"error",isDismissible:!1,children:[(0,s.jsx)("span",{dangerouslySetInnerHTML:(0,Oe.ZP)((0,i.__)("Activate the <b>WooCommerce.com Update Manager</b> to continue receiving the updates and streamlined support included in your WooCommerce.com subscriptions.","woocommerce"))}),(0,s.jsx)("div",{className:"components-notice__buttons",children:(0,s.jsx)(l.Button,{href:x.DS,variant:"secondary",children:(0,i.__)("Activate","woocommerce")})})]})}):null:(0,s.jsx)("section",{className:"woocommerce-marketplace__woo-update-manager-plugin__notices",children:(0,s.jsxs)(l.Notice,{status:"error",isDismissible:!1,children:[(0,s.jsx)("span",{dangerouslySetInnerHTML:(0,Oe.ZP)((0,i.__)("Please install the <b>WooCommerce.com Update Manager</b> to continue receiving the updates and streamlined support included in your WooCommerce.com subscriptions.<br/>Alternatively, you can download and install it manually.","woocommerce"))}),(0,s.jsxs)("div",{className:"components-notice__buttons",children:[(0,s.jsx)(l.Button,{href:o?.wooUpdateManagerInstallUrl,variant:"secondary",children:(0,i.__)("Install","woocommerce")}),(0,s.jsx)(l.Button,{href:x.eS,variant:"link",children:(0,i.__)("Download","woocommerce")})]})]})})}function po(e){const{type:o}=e,t=(0,c.O3)("wccomHelper",{}),r={"woo-subscription-expired-notice":{shown:"woo_subscription_expired_notice_in_marketplace_shown",clicked:"woo_subscription_expired_notice_in_marketplace_clicked",dismissed:"woo_subscription_expired_notice_in_marketplace_dismissed"},"woo-subscription-expiring-notice":{shown:"woo_subscription_expiring_notice_in_marketplace_shown",clicked:"woo_subscription_expiring_notice_in_marketplace_clicked",dismissed:"woo_subscription_expiring_notice_in_marketplace_dismissed"},"woo-subscription-missing-notice":{shown:"woo_subscription_missing_notice_in_marketplace_shown",clicked:"woo_subscription_missing_notice_in_marketplace_clicked",dismissed:"woo_subscription_missing_notice_in_marketplace_dismissed"}};let n=null,a="";const i=t?.dismissNoticeNonce||"";if("expired"===o)n=t?.subscription_expired_notice||{},a="woo-subscription-expired-notice";else if("expiring"===o)n=t?.subscription_expiring_notice||{},a="woo-subscription-expiring-notice";else{if("missing"!==o)return null;n=t?.subscription_missing_notice||{},a="woo-subscription-missing-notice"}return t.isConnected&&n?.description?(0,s.jsx)(so.Z,{id:a,description:n.description,isDismissible:!0,variant:"error",onClose:()=>{(0,m.recordEvent)(r[a].dismissed);const e={notice_id:a,dismiss_notice_nonce:i};ge()({path:"/wc-admin/notice/dismiss",method:"POST",data:e})},onLoad:function(){(0,m.recordEvent)(r[a].shown)},children:(0,s.jsx)(l.Button,{href:n.button_link,variant:"secondary",onClick:function(){(0,m.recordEvent)(r[a].clicked)},children:n.button_text})}):null}function _o(e){const{onLoadMore:o,isBusy:t,disabled:r}=e;return t&&(0,Q.speak)((0,i.__)("Loading more products","woocommerce")),(0,s.jsx)(l.Button,{className:"woocommerce-marketplace__load-more",variant:"secondary",onClick:function(){(0,m.queueRecordEvent)("marketplace_load_more_button_clicked",{}),o()},isBusy:t,disabled:r,children:(0,i.__)("Load more","woocommerce")})}function go(){const e=(0,r.useContext)(n),[o,t]=(0,r.useState)([]),[a,l]=(0,r.useState)([]),[u,d]=(0,r.useState)(1),[p,_]=(0,r.useState)(1),[g,w]=(0,r.useState)(1),[h,x]=(0,r.useState)(1),[M,j]=(0,r.useState)(1),[y,N]=(0,r.useState)(0),[v,b]=(0,r.useState)(!1),{isLoading:k,setIsLoading:f,selectedTab:I,setSearchResultsCount:D}=e,T=(0,z.useQuery)(),C=e=>{(0,Q.speak)((0,i.sprintf)((0,i.__)("%d products found","woocommerce"),e))},A=(0,r.useCallback)((()=>{b(!0);const e=new URLSearchParams,o=new AbortController;T.category&&"_all"!==T.category&&e.append("category",T.category),"themes"!==T.tab&&"business-services"!==T.tab||e.append("category",T.tab),T.term&&e.append("term",T.term);const r=(0,c.O3)("wccomHelper",!1);return r.storeCountry&&e.append("country",r.storeCountry),e.append("page",(u+1).toString()),(0,G.w6)(e,o.signal).then((e=>{t((o=>{const t=Array.isArray(o[0])?o.flat():o,r=e.products.filter((e=>!t.some((o=>o.id===e.id))));var c;return r.length>0&&N(null!==(c=r[0].id)&&void 0!==c?c:0),[...t,...r]})),(0,Q.speak)((0,i.__)("More products loaded","woocommerce")),d((e=>e+1)),b(!1)})).catch((()=>{(0,Q.speak)((0,i.__)("Error loading more products","woocommerce"))})).finally((()=>{b(!1)})),()=>{o.abort()}}),[u,T.category,T.term,T.tab,b]);return(0,r.useEffect)((()=>{if(u>1)return;const e=[{category:"extensions",type:P.k.extension},{category:"themes",type:P.k.theme},{category:"business-services",type:P.k.businessService}],o=e.map((()=>new AbortController));f(!0),t([]);const r=e=>{if(T.search){(0,m.recordEvent)("marketplace_search_finish",{tab:T.tab,total_products:e,category:T.category||"_all",search_term:T.term||""});const o=new URL(window.location.href);o.searchParams.delete("search"),window.history.replaceState(null,"",o.pathname+o.search)}};if(T.category&&"_all"!==T.category){const e=new URLSearchParams;e.append("category",T.category),T.term&&e.append("term",T.term);const s=(0,c.O3)("wccomHelper",!1);s.storeCountry&&e.append("country",s.storeCountry),(0,G.w6)(e,o[0].signal).then((e=>{t(e.products),_(e.totalPages),D({[T.tab]:e.totalProducts}),C(e.totalProducts),r(e.totalProducts)})).catch((()=>{t([])})).finally((()=>{f(!1)}))}else Promise.all(e.map((({category:e,type:t},r)=>{const s=new URLSearchParams;"extensions"!==e&&s.append("category",e),T.term&&s.append("term",T.term);const n=(0,c.O3)("wccomHelper",!1);return n.storeCountry&&s.append("country",n.storeCountry),(0,G.w6)(s,o[r].signal).then((e=>{const o=((e,o)=>e.map((e=>({...e,type:o}))))(e.products,t);return{products:o,totalPages:e.totalPages,totalProducts:e.totalProducts,type:t}}))}))).then((e=>{const o=e.flatMap((e=>e.products));t(o);const c={extensions:e.find((e=>"extension"===e.type))?.totalProducts,themes:e.find((e=>"theme"===e.type))?.totalProducts,"business-services":e.find((e=>"business-service"===e.type))?.totalProducts};D(c),e.forEach((e=>{switch(e.type){case P.k.extension:w(e.totalPages);break;case P.k.theme:x(e.totalPages);break;case P.k.businessService:j(e.totalPages)}}));const s=T.tab;r(c[s]),C(e.reduce(((e,o)=>e+o.totalProducts),0))})).catch((()=>{t([])})).finally((()=>{f(!1)}));return()=>{o.forEach((e=>{e.abort()}))}}),[T.tab,T.term,T.category,f,D,u]),(0,r.useEffect)((()=>{let e;switch(I){case"extensions":e=o.filter((e=>e.type===P.k.extension));break;case"themes":e=o.filter((e=>e.type===P.k.theme));break;case"business-services":e=o.filter((e=>e.type===P.k.businessService));break;default:e=[]}l(e)}),[I,o]),(0,r.useEffect)((()=>{const e={view:T?.tab,search_term:T?.term,product_type:T?.section,category:T?.category};q(e),function(e){if(e.product_type)return;let o="extensions_view";const t=e.view||"_featured",r=e.search_term||null,c=e.category||null,s={...t&&{section:t},...r&&{search_term:r},version:"2"};switch(t){case"extensions":s.section=c||"_all";break;case"themes":s.section="themes";break;case"my-subscriptions":o="subscriptions_view",s.section="helper"}(0,m.recordEvent)(o,s)}(e)}),[T?.tab,T?.term,T?.section,T?.category]),(0,r.useEffect)((()=>{d(1),N(0)}),[I,T?.category,T?.term]),(0,r.useEffect)((()=>{y&&setTimeout((()=>{const e=document.getElementById(`product-${y}`);e&&e.focus()}),0)}),[y]),(0,s.jsxs)("div",{className:"woocommerce-marketplace__content",children:[(0,s.jsx)(lo.Z,{format:"promo-card"}),(0,s.jsx)(lo.Z,{format:"notice"}),(0,s.jsx)(io,{products:a}),"business-services"!==I&&"my-subscriptions"!==I&&(0,s.jsx)(mo,{}),"business-services"!==I&&(0,s.jsx)(uo,{selectedTab:I}),"business-services"!==I&&(0,s.jsx)(po,{type:"expired"}),"business-services"!==I&&(0,s.jsx)(po,{type:"expiring"}),(()=>{switch(I){case"extensions":case"themes":case"business-services":return(0,s.jsx)(de,{products:a,categorySelector:!0,type:(0,G.rC)(I),searchTerm:T.term});case"discover":return(0,s.jsx)(X,{});case"my-subscriptions":return(0,s.jsx)(xe,{children:(0,s.jsx)(no,{})});default:return(0,s.jsx)(s.Fragment,{})}})(),!k&&(()=>{if(T.category&&"_all"!==T.category)return u<p;switch(I){case"extensions":return u<g;case"themes":return u<h;case"business-services":return u<M;default:return!1}})()&&(0,s.jsx)(_o,{onLoadMore:A,isBusy:v,disabled:v})]})}function wo(){const{selectedTab:e}=(0,r.useContext)(n),o="woocommerce-marketplace"+(e?" woocommerce-marketplace--"+e:"");return(0,s.jsxs)("div",{className:o,children:[(0,s.jsx)(U,{}),(0,s.jsx)(go,{}),(0,s.jsx)(b,{})]})}function ho(){return(0,s.jsx)(a,{children:(0,s.jsx)(wo,{})})}}}]);
>>>>>>> b1eea7a (Merged existing code from https://dev-vices.rafaeldeveloper.co)
