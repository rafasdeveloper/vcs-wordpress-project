<<<<<<< HEAD
(()=>{var e,t,o,s={6737:(e,t,o)=>{"use strict";const s=window.wp.blocks;var r=o(4530),i=o(9771),c=o(7723);const l=window.wp.components,n=window.wp.serverSideRender;var a=o.n(n),d=o(790);const m=(0,d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 230 250",style:{width:"100%"},children:[(0,d.jsx)("title",{children:"Grid Block Preview"}),(0,d.jsx)("rect",{width:"65.374",height:"65.374",x:".162",y:".779",fill:"#E1E3E6",rx:"3"}),(0,d.jsx)("rect",{width:"47.266",height:"5.148",x:"9.216",y:"76.153",fill:"#E1E3E6",rx:"2.574"}),(0,d.jsx)("rect",{width:"62.8",height:"15",x:"1.565",y:"101.448",fill:"#E1E3E6",rx:"5"}),(0,d.jsx)("rect",{width:"65.374",height:"65.374",x:".162",y:"136.277",fill:"#E1E3E6",rx:"3"}),(0,d.jsx)("rect",{width:"47.266",height:"5.148",x:"9.216",y:"211.651",fill:"#E1E3E6",rx:"2.574"}),(0,d.jsx)("rect",{width:"62.8",height:"15",x:"1.565",y:"236.946",fill:"#E1E3E6",rx:"5"}),(0,d.jsx)("rect",{width:"65.374",height:"65.374",x:"82.478",y:".779",fill:"#E1E3E6",rx:"3"}),(0,d.jsx)("rect",{width:"47.266",height:"5.148",x:"91.532",y:"76.153",fill:"#E1E3E6",rx:"2.574"}),(0,d.jsx)("rect",{width:"62.8",height:"15",x:"83.882",y:"101.448",fill:"#E1E3E6",rx:"5"}),(0,d.jsx)("rect",{width:"65.374",height:"65.374",x:"82.478",y:"136.277",fill:"#E1E3E6",rx:"3"}),(0,d.jsx)("rect",{width:"47.266",height:"5.148",x:"91.532",y:"211.651",fill:"#E1E3E6",rx:"2.574"}),(0,d.jsx)("rect",{width:"62.8",height:"15",x:"83.882",y:"236.946",fill:"#E1E3E6",rx:"5"}),(0,d.jsx)("rect",{width:"65.374",height:"65.374",x:"164.788",y:".779",fill:"#E1E3E6",rx:"3"}),(0,d.jsx)("rect",{width:"47.266",height:"5.148",x:"173.843",y:"76.153",fill:"#E1E3E6",rx:"2.574"}),(0,d.jsx)("rect",{width:"62.8",height:"15",x:"166.192",y:"101.448",fill:"#E1E3E6",rx:"5"}),(0,d.jsx)("rect",{width:"65.374",height:"65.374",x:"164.788",y:"136.277",fill:"#E1E3E6",rx:"3"}),(0,d.jsx)("rect",{width:"47.266",height:"5.148",x:"173.843",y:"211.651",fill:"#E1E3E6",rx:"2.574"}),(0,d.jsx)("rect",{width:"62.8",height:"15",x:"166.192",y:"236.946",fill:"#E1E3E6",rx:"5"}),(0,d.jsx)("rect",{width:"6.177",height:"6.177",x:"13.283",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,d.jsx)("rect",{width:"6.177",height:"6.177",x:"21.498",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,d.jsx)("rect",{width:"6.177",height:"6.177",x:"29.713",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,d.jsx)("rect",{width:"6.177",height:"6.177",x:"37.927",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,d.jsx)("rect",{width:"6.177",height:"6.177",x:"46.238",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,d.jsx)("rect",{width:"6.177",height:"6.177",x:"95.599",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,d.jsx)("rect",{width:"6.177",height:"6.177",x:"103.814",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,d.jsx)("rect",{width:"6.177",height:"6.177",x:"112.029",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,d.jsx)("rect",{width:"6.177",height:"6.177",x:"120.243",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,d.jsx)("rect",{width:"6.177",height:"6.177",x:"128.554",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,d.jsx)("rect",{width:"6.177",height:"6.177",x:"177.909",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,d.jsx)("rect",{width:"6.177",height:"6.177",x:"186.124",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,d.jsx)("rect",{width:"6.177",height:"6.177",x:"194.339",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,d.jsx)("rect",{width:"6.177",height:"6.177",x:"202.553",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,d.jsx)("rect",{width:"6.177",height:"6.177",x:"210.864",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,d.jsx)("rect",{width:"6.177",height:"6.177",x:"13.283",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,d.jsx)("rect",{width:"6.177",height:"6.177",x:"21.498",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,d.jsx)("rect",{width:"6.177",height:"6.177",x:"29.713",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,d.jsx)("rect",{width:"6.177",height:"6.177",x:"37.927",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,d.jsx)("rect",{width:"6.177",height:"6.177",x:"46.238",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,d.jsx)("rect",{width:"6.177",height:"6.177",x:"95.599",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,d.jsx)("rect",{width:"6.177",height:"6.177",x:"103.814",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,d.jsx)("rect",{width:"6.177",height:"6.177",x:"112.029",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,d.jsx)("rect",{width:"6.177",height:"6.177",x:"120.243",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,d.jsx)("rect",{width:"6.177",height:"6.177",x:"128.554",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,d.jsx)("rect",{width:"6.177",height:"6.177",x:"177.909",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,d.jsx)("rect",{width:"6.177",height:"6.177",x:"186.124",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,d.jsx)("rect",{width:"6.177",height:"6.177",x:"194.339",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,d.jsx)("rect",{width:"6.177",height:"6.177",x:"202.553",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,d.jsx)("rect",{width:"6.177",height:"6.177",x:"210.864",y:"221.798",fill:"#E1E3E6",rx:"3"})]}),h=window.wp.blockEditor,u=({onChange:e,settings:t})=>{const{image:o,button:s,price:r,rating:i,title:n}=t,a=!1!==o;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.ToggleControl,{label:(0,c.__)("Product image","woocommerce"),checked:a,onChange:()=>e({...t,image:!a})}),(0,d.jsx)(l.ToggleControl,{label:(0,c.__)("Product title","woocommerce"),checked:n,onChange:()=>e({...t,title:!n})}),(0,d.jsx)(l.ToggleControl,{label:(0,c.__)("Product price","woocommerce"),checked:r,onChange:()=>e({...t,price:!r})}),(0,d.jsx)(l.ToggleControl,{label:(0,c.__)("Product rating","woocommerce"),checked:i,onChange:()=>e({...t,rating:!i})}),(0,d.jsx)(l.ToggleControl,{label:(0,c.__)("Add to Cart button","woocommerce"),checked:s,onChange:()=>e({...t,button:!s})})]})},x=(e,t,o)=>o?Math.min(e,t)===e?t:Math.max(e,o)===e?o:e:Math.max(e,t)===t?e:t,g=({columns:e,rows:t,setAttributes:o,alignButtons:s,minColumns:r=1,maxColumns:i=6,minRows:n=1,maxRows:a=6})=>(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.RangeControl,{label:(0,c.__)("Columns","woocommerce"),value:e,onChange:e=>{const t=x(e,r,i);o({columns:Number.isNaN(t)?"":t})},min:r,max:i}),(0,d.jsx)(l.RangeControl,{label:(0,c.__)("Rows","woocommerce"),value:t,onChange:e=>{const t=x(e,n,a);o({rows:Number.isNaN(t)?"":t})},min:n,max:a}),(0,d.jsx)(l.ToggleControl,{label:(0,c.__)("Align the last block to the bottom","woocommerce"),help:s?(0,c.__)("Align the last block to the bottom.","woocommerce"):(0,c.__)("The last inner block will follow other content.","woocommerce"),checked:s,onChange:()=>o({alignButtons:!s})})]});var p=o(4921),w=o(6087);function f(e,t,o){const s=new Set(t.map((e=>e[o])));return e.filter((e=>!s.has(e[o])))}const b=window.wp.htmlEntities,j={clear:(0,c.__)("Clear all selected items","woocommerce"),noItems:(0,c.__)("No items found.","woocommerce"),
/* Translators: %s search term */
noResults:(0,c.__)("No results for %s","woocommerce"),search:(0,c.__)("Search for items","woocommerce"),selected:e=>(0,c.sprintf)(/* translators: Number of items selected from list. */ /* translators: Number of items selected from list. */
(0,c._n)("%d item selected","%d items selected",e,"woocommerce"),e),updated:(0,c.__)("Search results updated.","woocommerce")},E=(e,t=e)=>{const o=e.reduce(((e,t)=>{const o=t.parent||0;return e[o]||(e[o]=[]),e[o].push(t),e}),{}),s=t.reduce(((e,t)=>(e[String(t.id)]=t,e)),{});const r=["0"],i=(e={})=>e.parent?[...i(s[e.parent]),e.name]:e.name?[e.name]:[],c=e=>e.map((e=>{const t=o[e.id];return r.push(""+e.id),{...e,breadcrumbs:i(s[e.parent]),children:t&&t.length?c(t):[]}})),l=c(o[0]||[]);return Object.entries(o).forEach((([e,t])=>{r.includes(e)||l.push(...c(t||[]))})),l},_=(e,t)=>{if(!t)return e;const o=new RegExp(`(${t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")})`,"ig");return e.split(o).map(((e,t)=>o.test(e)?(0,d.jsx)("strong",{children:e},t):(0,d.jsx)(w.Fragment,{children:e},t)))},y=({label:e})=>(0,d.jsx)("span",{className:"woocommerce-search-list__item-count",children:e}),v=e=>{const{item:t,search:o}=e,s=t.breadcrumbs&&t.breadcrumbs.length;return(0,d.jsxs)("span",{className:"woocommerce-search-list__item-label",children:[s?(0,d.jsx)("span",{className:"woocommerce-search-list__item-prefix",children:(r=t.breadcrumbs,1===r.length?r.slice(0,1).toString():2===r.length?r.slice(0,1).toString()+" › "+r.slice(-1).toString():r.slice(0,1).toString()+" … "+r.slice(-1).toString())}):null,(0,d.jsx)("span",{className:"woocommerce-search-list__item-name",children:_((0,b.decodeEntities)(t.name),o)})]});var r},C=({countLabel:e,className:t,depth:o=0,controlId:s="",item:r,isSelected:i,isSingle:c,onSelect:n,search:a="",selected:m,useExpandedPanelId:h,...u})=>{const[x,g]=h,j=null!=e&&void 0!==r.count&&null!==r.count,E=!!r.breadcrumbs?.length,C=!!r.children?.length,k=x===r.id,S=(0,p.A)(["woocommerce-search-list__item",`depth-${o}`,t],{"has-breadcrumbs":E,"has-children":C,"has-count":j,"is-expanded":k,"is-radio-button":c});(0,w.useEffect)((()=>{C&&i&&g(r.id)}),[r,C,i,g]);const N=u.name||`search-list-item-${s}`,O=`${N}-${r.id}`,P=(0,w.useCallback)((()=>{g(k?-1:Number(r.id))}),[k,r.id,g]);return C?(0,d.jsx)("div",{className:S,onClick:P,onKeyDown:e=>"Enter"===e.key||" "===e.key?P():null,role:"treeitem",tabIndex:0,children:c?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("input",{type:"radio",id:O,name:N,value:r.value,onChange:n(r),onClick:e=>e.stopPropagation(),checked:i,className:"woocommerce-search-list__item-input",...u}),(0,d.jsx)(v,{item:r,search:a}),j?(0,d.jsx)(y,{label:e||r.count}):null]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.CheckboxControl,{className:"woocommerce-search-list__item-input",checked:i,...!i&&r.children.some((e=>m.find((t=>t.id===e.id))))?{indeterminate:!0}:{},label:_((0,b.decodeEntities)(r.name),a),onChange:()=>{i?n(f(m,r.children,"id"))():n(function(e,t){const o=f(t,e,"id");return[...e,...o]}(m,r.children))()},onClick:e=>e.stopPropagation()}),j?(0,d.jsx)(y,{label:e||r.count}):null]})}):(0,d.jsxs)("label",{htmlFor:O,className:S,children:[c?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("input",{...u,type:"radio",id:O,name:N,value:r.value,onChange:n(r),checked:i,className:"woocommerce-search-list__item-input"}),(0,d.jsx)(v,{item:r,search:a})]}):(0,d.jsx)(l.CheckboxControl,{...u,id:O,name:N,className:"woocommerce-search-list__item-input",value:(0,b.decodeEntities)(r.value),label:_((0,b.decodeEntities)(r.name),a),onChange:n(r),checked:i}),j?(0,d.jsx)(y,{label:e||r.count}):null]})},k=C;var S=o(2624),N=o(9491),O=o(3028);o(5022);const P=({id:e,label:t,popoverContents:o,remove:s,screenReaderLabel:i,className:n=""})=>{const[a,m]=(0,w.useState)(!1),h=(0,N.useInstanceId)(P);if(i=i||t,!t)return null;t=(0,b.decodeEntities)(t);const u=(0,p.A)("woocommerce-tag",n,{"has-remove":!!s}),x=`woocommerce-tag__label-${h}`,g=(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{className:"screen-reader-text",children:i}),(0,d.jsx)("span",{"aria-hidden":"true",children:t})]});return(0,d.jsxs)("span",{className:u,children:[o?(0,d.jsx)(l.Button,{className:"woocommerce-tag__text",id:x,onClick:()=>m(!0),children:g}):(0,d.jsx)("span",{className:"woocommerce-tag__text",id:x,children:g}),o&&a&&(0,d.jsx)(l.Popover,{onClose:()=>m(!1),children:o}),s&&(0,d.jsx)(l.Button,{className:"woocommerce-tag__remove",onClick:s(e),label:(0,c.sprintf)(
// Translators: %s label.
// Translators: %s label.
(0,c.__)("Remove %s","woocommerce"),t),"aria-describedby":x,children:(0,d.jsx)(r.A,{icon:O.A,size:20,className:"clear-icon",role:"img"})})]})},A=P;o(1939);const I=e=>(0,d.jsx)(k,{...e}),R=e=>{const{list:t,selected:o,renderItem:s,depth:r=0,onSelect:i,instanceId:c,isSingle:l,search:n,useExpandedPanelId:a}=e,[m]=a;return t?(0,d.jsx)(d.Fragment,{children:t.map((t=>{const h=t.children?.length&&!l?t.children.every((({id:e})=>o.find((t=>t.id===e)))):!!o.find((({id:e})=>e===t.id)),u=t.children?.length&&m===t.id;return(0,d.jsxs)(w.Fragment,{children:[(0,d.jsx)("li",{children:s({item:t,isSelected:h,onSelect:i,isSingle:l,selected:o,search:n,depth:r,useExpandedPanelId:a,controlId:c})}),u?(0,d.jsx)(R,{...e,list:t.children,depth:r+1}):null]},t.id)}))}):null},B=({isLoading:e,isSingle:t,selected:o,messages:s,onChange:r,onRemove:i})=>{if(e||t||!o)return null;const n=o.length;return(0,d.jsxs)("div",{className:"woocommerce-search-list__selected",children:[(0,d.jsxs)("div",{className:"woocommerce-search-list__selected-header",children:[(0,d.jsx)("strong",{children:s.selected(n)}),n>0?(0,d.jsx)(l.Button,{variant:"link",isDestructive:!0,onClick:()=>r([]),"aria-label":s.clear,children:(0,c.__)("Clear all","woocommerce")}):null]}),n>0?(0,d.jsx)("ul",{children:o.map(((e,t)=>(0,d.jsx)("li",{children:(0,d.jsx)(A,{label:e.name,id:e.id,remove:i})},t)))}):null]})},T=({filteredList:e,search:t,onSelect:o,instanceId:s,useExpandedPanelId:i,...l})=>{const{messages:n,renderItem:a,selected:m,isSingle:h}=l,u=a||I;return 0===e.length?(0,d.jsxs)("div",{className:"woocommerce-search-list__list is-not-found",children:[(0,d.jsx)("span",{className:"woocommerce-search-list__not-found-icon",children:(0,d.jsx)(r.A,{icon:S.A,role:"img"})}),(0,d.jsx)("span",{className:"woocommerce-search-list__not-found-text",children:t?(0,c.sprintf)(n.noResults,t):n.noItems})]}):(0,d.jsx)("ul",{className:"woocommerce-search-list__list",children:(0,d.jsx)(R,{useExpandedPanelId:i,list:e,selected:m,renderItem:u,onSelect:o,instanceId:s,isSingle:h,search:t})})},$=e=>{const{className:t="",isCompact:o,isHierarchical:s,isLoading:r,isSingle:i,list:n,messages:a=j,onChange:m,onSearch:h,selected:u,type:x="text",debouncedSpeak:g}=e,[f,b]=(0,w.useState)(""),_=(0,w.useState)(-1),y=(0,N.useInstanceId)($),v=(0,w.useMemo)((()=>({...j,...a})),[a]),C=(0,w.useMemo)((()=>((e,t,o)=>{if(!t)return o?E(e):e;const s=new RegExp(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"i"),r=e.map((e=>!!s.test(e.name)&&e)).filter(Boolean);return o?E(r,e):r})(n,f,s)),[n,f,s]);(0,w.useEffect)((()=>{g&&g(v.updated)}),[g,v]),(0,w.useEffect)((()=>{"function"==typeof h&&h(f)}),[f,h]);const k=(0,w.useCallback)((e=>()=>{i&&m([]);const t=u.findIndex((({id:t})=>t===e));m([...u.slice(0,t),...u.slice(t+1)])}),[i,u,m]),S=(0,w.useCallback)((e=>()=>{Array.isArray(e)?m(e):-1===u.findIndex((({id:t})=>t===e.id))?m(i?[e]:[...u,e]):k(e.id)()}),[i,k,m,u]),O=(0,w.useCallback)((e=>{const[t]=u.filter((t=>!e.find((e=>t.id===e.id))));k(t.id)()}),[k,u]);return(0,d.jsxs)("div",{className:(0,p.A)("woocommerce-search-list",t,{"is-compact":o,"is-loading":r,"is-token":"token"===x}),children:["text"===x&&(0,d.jsx)(B,{...e,onRemove:k,messages:v}),(0,d.jsx)("div",{className:"woocommerce-search-list__search",children:"text"===x?(0,d.jsx)(l.TextControl,{label:v.search,type:"search",value:f,onChange:e=>b(e)}):(0,d.jsx)(l.FormTokenField,{disabled:r,label:v.search,onChange:O,onInputChange:e=>b(e),suggestions:[],__experimentalValidateInput:()=>!1,value:r?[(0,c.__)("Loading…","woocommerce")]:u.map((e=>({...e,value:e.name}))),__experimentalShowHowTo:!1})}),r?(0,d.jsx)("div",{className:"woocommerce-search-list__list",children:(0,d.jsx)(l.Spinner,{})}):(0,d.jsx)(T,{...e,search:f,filteredList:C,messages:v,onSelect:S,instanceId:y,useExpandedPanelId:_})]})},F=((0,l.withSpokenMessages)($),window.wp.url),M=window.wp.apiFetch;var L=o.n(M);const H=window.wc.wcSettings,V=window.wp.escapeHtml,D=({message:e,type:t})=>e?"general"===t?(0,d.jsxs)("span",{children:[(0,c.__)("The following error was returned","woocommerce"),(0,d.jsx)("br",{}),(0,d.jsx)("code",{children:(0,V.escapeHTML)(e)})]}):"api"===t?(0,d.jsxs)("span",{children:[(0,c.__)("The following error was returned from the API","woocommerce"),(0,d.jsx)("br",{}),(0,d.jsx)("code",{children:(0,V.escapeHTML)(e)})]}):e:(0,c.__)("An error has prevented the block from being updated.","woocommerce"),J=({error:e})=>(0,d.jsx)("div",{className:"wc-block-error-message",children:D(e)}),W=e=>{const{id:t,name:o,parent:s,count:r}=e;return{id:t,name:o,parent:s,count:r,breadcrumbs:[],children:[],details:e,value:e.slug}};o(6982);const z=(Z=({categories:e=[],error:t=null,isLoading:o=!1,onChange:s,onOperatorChange:r,operator:i="any",selected:n,isCompact:a=!1,isSingle:m=!1,showReviewCount:h})=>{const u={clear:(0,c.__)("Clear all product categories","woocommerce"),list:(0,c.__)("Product Categories","woocommerce"),noItems:(0,c.__)("Your store doesn't have any product categories.","woocommerce"),search:(0,c.__)("Search for product categories","woocommerce"),selected:e=>(0,c.sprintf)(/* translators: %d is the count of selected categories. */ /* translators: %d is the count of selected categories. */
(0,c._n)("%d category selected","%d categories selected",e,"woocommerce"),e),updated:(0,c.__)("Category search results updated.","woocommerce")};if(t)return(0,d.jsx)(J,{error:t});const x=e.map(W);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)($,{className:"woocommerce-product-categories",list:x,isLoading:o,selected:x.filter((({id:e})=>n.includes(Number(e)))),onChange:s,renderItem:e=>{const{item:t,search:o,depth:s=0}=e,r=t.breadcrumbs.length?`${t.breadcrumbs.join(", ")}, ${t.name}`:t.name,i=h?(0,c.sprintf)(/* translators: %1$s is the item name, %2$d is the count of reviews for the item. */ /* translators: %1$s is the item name, %2$d is the count of reviews for the item. */
(0,c._n)("%1$s, has %2$d review","%1$s, has %2$d reviews",t.details?.review_count||0,"woocommerce"),r,t.details?.review_count||0):(0,c.sprintf)(/* translators: %1$s is the item name, %2$d is the count of products for the item. */ /* translators: %1$s is the item name, %2$d is the count of products for the item. */
(0,c._n)("%1$s, has %2$d product","%1$s, has %2$d products",t.details?.count||0,"woocommerce"),r,t.details?.count||0),l=h?(0,c.sprintf)(/* translators: %d is the count of reviews. */ /* translators: %d is the count of reviews. */
(0,c._n)("%d review","%d reviews",t.details?.review_count||0,"woocommerce"),t.details?.review_count||0):(0,c.sprintf)(/* translators: %d is the count of products. */ /* translators: %d is the count of products. */
(0,c._n)("%d product","%d products",t.details?.count||0,"woocommerce"),t.details?.count||0);return(0,d.jsx)(C,{className:(0,p.A)("woocommerce-product-categories__item","has-count",{"is-searching":o.length>0,"is-skip-level":0===s&&0!==t.parent}),...e,countLabel:l,"aria-label":i})},messages:u,isCompact:a,isHierarchical:!0,isSingle:m}),!!r&&(0,d.jsx)("div",{hidden:n.length<2,children:(0,d.jsx)(l.SelectControl,{className:"woocommerce-product-categories__operator",label:(0,c.__)("Display products matching","woocommerce"),help:(0,c.__)("Pick at least two categories to use this setting.","woocommerce"),value:i,onChange:r,options:[{label:(0,c.__)("Any selected categories","woocommerce"),value:"any"},{label:(0,c.__)("All selected categories","woocommerce"),value:"all"}]})})]})},({selected:e,...t})=>{const[o,s]=(0,w.useState)(!0),[r,i]=(0,w.useState)(null),[c,l]=(0,w.useState)([]),n=async e=>{const t=await(async e=>{if(!("json"in e))return{code:e.code||"",message:e.message,type:e.type||"general"};try{const t=await e.json();return{code:t.code||"",message:t.message,type:t.type||"api"}}catch(e){return{message:e.message,type:"general"}}})(e);i(t),s(!1)},a=(0,w.useRef)(e);return(0,w.useEffect)((()=>{var e;(e={selected:a.current},L()({path:(0,F.addQueryArgs)("wc/store/v1/products/categories",{per_page:0,...e})})).then((e=>{l(e),s(!1)})).catch(n)}),[a]),(0,d.jsx)(Z,{...t,selected:e,error:r,categories:c,isLoading:o})}),G=({value:e,setAttributes:t})=>(0,d.jsx)(l.SelectControl,{label:(0,c.__)("Order products by","woocommerce"),value:e,options:[{label:(0,c.__)("Newness - newest first","woocommerce"),value:"date"},{label:(0,c.__)("Price - low to high","woocommerce"),value:"price_asc"},{label:(0,c.__)("Price - high to low","woocommerce"),value:"price_desc"},{label:(0,c.__)("Rating - highest first","woocommerce"),value:"rating"},{label:(0,c.__)("Sales - most first","woocommerce"),value:"popularity"},{label:(0,c.__)("Title - alphabetical","woocommerce"),value:"title"},{label:(0,c.__)("Menu Order","woocommerce"),value:"menu_order"}],onChange:e=>t({orderby:e})}),K=(0,H.getSetting)("hideOutOfStockItems",!1),Q=(0,H.getSetting)("stockStatusOptions",{}),X=({value:e,setAttributes:t})=>{const{outofstock:o,...s}=Q,r=K?s:Q,i=Object.entries(r).map((([e,t])=>({value:e,label:t}))).filter((e=>!!e.label)),n=Object.keys(r).filter((e=>!!e)),[a,m]=(0,w.useState)(e||n);(0,w.useEffect)((()=>{t({stockStatus:["",...a]})}),[a,t]);const h=(0,w.useCallback)((e=>{const t=a.includes(e),o=a.filter((t=>t!==e));t||(o.push(e),o.sort()),m(o)}),[a]);return(0,d.jsx)(d.Fragment,{children:i.map((e=>{const t=a.includes(e.value)?/* translators: %s stock status. */ /* translators: %s stock status. */(0,c.__)('Stock status "%s" visible.',"woocommerce"):/* translators: %s stock status. */ /* translators: %s stock status. */(0,c.__)('Stock status "%s" hidden.',"woocommerce");return(0,d.jsx)(l.ToggleControl,{label:e.label,help:(0,c.sprintf)(t,e.label),checked:a.includes(e.value),onChange:()=>h(e.value)},e.value)}))})},Y=e=>{const{attributes:t,setAttributes:o}=e,{categories:s,catOperator:r,columns:i,contentVisibility:n,rows:a,orderby:m,alignButtons:x,stockStatus:p}=t;return(0,d.jsxs)(h.InspectorControls,{children:[(0,d.jsx)(l.PanelBody,{title:(0,c.__)("Layout","woocommerce"),initialOpen:!0,children:(0,d.jsx)(g,{columns:i,rows:a,alignButtons:x,setAttributes:o,minColumns:(0,H.getSetting)("minColumns",1),maxColumns:(0,H.getSetting)("maxColumns",6),minRows:(0,H.getSetting)("minRows",1),maxRows:(0,H.getSetting)("maxRows",6)})}),(0,d.jsx)(l.PanelBody,{title:(0,c.__)("Content","woocommerce"),initialOpen:!0,children:(0,d.jsx)(u,{settings:n,onChange:e=>o({contentVisibility:e})})}),(0,d.jsx)(l.PanelBody,{title:(0,c.__)("Order By","woocommerce"),initialOpen:!1,children:(0,d.jsx)(G,{setAttributes:o,value:m})}),(0,d.jsx)(l.PanelBody,{title:(0,c.__)("Filter by Product Category","woocommerce"),initialOpen:!1,children:(0,d.jsx)(z,{selected:s,onChange:(e=[])=>{const t=e.map((({id:e})=>e));o({categories:t})},operator:r,onOperatorChange:(e="any")=>o({catOperator:e})})}),(0,d.jsx)(l.PanelBody,{title:(0,c.__)("Filter by stock status","woocommerce"),initialOpen:!1,children:(0,d.jsx)(X,{setAttributes:o,value:p})})]},"inspector")},q=()=>(0,d.jsx)(l.Placeholder,{icon:(0,d.jsx)(r.A,{icon:i.A}),label:(0,c.__)("On Sale Products","woocommerce"),className:"wc-block-product-on-sale",children:(0,c.__)("This block shows on-sale products. There are currently no discounted products in your store.","woocommerce")}),U=e=>{const{attributes:t,setAttributes:o,name:s}=e,r=(0,h.useBlockProps)();return t.isPreview?(0,d.jsx)("div",{...r,children:m}):(0,d.jsxs)("div",{...r,children:[(0,d.jsx)(Y,{attributes:t,setAttributes:o}),(0,d.jsx)(l.Disabled,{children:(0,d.jsx)(a(),{block:s,attributes:t,EmptyResponsePlaceholder:q})})]})};var Z;o(1449);const ee={columns:{type:"number",default:(0,H.getSetting)("defaultColumns",3)},rows:{type:"number",default:(0,H.getSetting)("defaultRows",3)},alignButtons:{type:"boolean",default:!1},categories:{type:"array",default:[]},catOperator:{type:"string",default:"any"},contentVisibility:{type:"object",default:{image:!0,title:!0,price:!0,rating:!0,button:!0}},isPreview:{type:"boolean",default:!1},stockStatus:{type:"array",default:Object.keys((0,H.getSetting)("stockStatusOptions",[]))}},te=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"woocommerce/product-on-sale","title":"On Sale Products","category":"woocommerce","description":"Display a grid of products currently on sale.","keywords":["WooCommerce"],"supports":{"interactivity":{"clientNavigation":false},"align":["wide","full"],"html":false,"inserter":false},"textdomain":"woocommerce","attributes":{"columns":{"type":"number","default":3},"rows":{"type":"number","default":3},"alignButtons":{"type":"boolean","default":false},"categories":{"type":"array","default":[]},"catOperator":{"type":"string","default":"any"},"contentVisibility":{"type":"object","default":{"image":true,"title":true,"price":true,"rating":true,"button":true},"properties":{"image":{"type":"boolean","default":true},"title":{"type":"boolean","default":true},"price":{"type":"boolean","default":true},"rating":{"type":"boolean","default":true},"button":{"type":"boolean","default":true}}},"isPreview":{"type":"boolean","default":false},"stockStatus":{"type":"array"},"orderby":{"type":"string","default":"date"}}}');(0,s.registerBlockType)(te,{icon:{src:(0,d.jsx)(r.A,{icon:i.A,className:"wc-block-editor-components-block-icon"})},attributes:{...ee,...te.attributes},transforms:{from:[{type:"block",blocks:["woocommerce/product-best-sellers","woocommerce/product-category","woocommerce/product-new","woocommerce/product-on-sale","woocommerce/product-top-rated"].filter((e=>"woocommerce/product-on-sale"!==e)),transform:e=>(0,s.createBlock)("woocommerce/product-on-sale",e)}]},edit:e=>(0,d.jsx)(U,{...e}),save:()=>null})},1449:()=>{},6982:()=>{},1939:()=>{},5022:()=>{},1609:e=>{"use strict";e.exports=window.React},790:e=>{"use strict";e.exports=window.ReactJSXRuntime},9491:e=>{"use strict";e.exports=window.wp.compose},6087:e=>{"use strict";e.exports=window.wp.element},7723:e=>{"use strict";e.exports=window.wp.i18n},5573:e=>{"use strict";e.exports=window.wp.primitives}},r={};function i(e){var t=r[e];if(void 0!==t)return t.exports;var o=r[e]={exports:{}};return s[e].call(o.exports,o,o.exports,i),o.exports}i.m=s,e=[],i.O=(t,o,s,r)=>{if(!o){var c=1/0;for(d=0;d<e.length;d++){for(var[o,s,r]=e[d],l=!0,n=0;n<o.length;n++)(!1&r||c>=r)&&Object.keys(i.O).every((e=>i.O[e](o[n])))?o.splice(n--,1):(l=!1,r<c&&(c=r));if(l){e.splice(d--,1);var a=s();void 0!==a&&(t=a)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[o,s,r]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},o=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(e,s){if(1&s&&(e=this(e)),8&s)return e;if("object"==typeof e&&e){if(4&s&&e.__esModule)return e;if(16&s&&"function"==typeof e.then)return e}var r=Object.create(null);i.r(r);var c={};t=t||[null,o({}),o([]),o(o)];for(var l=2&s&&e;"object"==typeof l&&!~t.indexOf(l);l=o(l))Object.getOwnPropertyNames(l).forEach((t=>c[t]=()=>e[t]));return c.default=()=>e,i.d(r,c),r},i.d=(e,t)=>{for(var o in t)i.o(t,o)&&!i.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.j=7686,(()=>{var e={7686:0};i.O.j=t=>0===e[t];var t=(t,o)=>{var s,r,[c,l,n]=o,a=0;if(c.some((t=>0!==e[t]))){for(s in l)i.o(l,s)&&(i.m[s]=l[s]);if(n)var d=n(i)}for(t&&t(o);a<c.length;a++)r=c[a],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(d)},o=globalThis.webpackChunkwebpackWcBlocksMainJsonp=globalThis.webpackChunkwebpackWcBlocksMainJsonp||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var c=i.O(void 0,[94],(()=>i(6737)));c=i.O(c),((this.wc=this.wc||{}).blocks=this.wc.blocks||{})["product-on-sale"]=c})();
=======
(()=>{var e,t,r,l={7836:(e,t,r)=>{"use strict";r.r(t);var l=r(1609),o=r(7723);const c=window.wp.blocks;var n=r(7104),a=r(1173);const i=window.wp.components,s=window.wp.serverSideRender;var m=r.n(s);const d=(0,l.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 230 250",style:{width:"100%"}},(0,l.createElement)("title",null,"Grid Block Preview"),(0,l.createElement)("rect",{width:"65.374",height:"65.374",x:".162",y:".779",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"47.266",height:"5.148",x:"9.216",y:"76.153",fill:"#E1E3E6",rx:"2.574"}),(0,l.createElement)("rect",{width:"62.8",height:"15",x:"1.565",y:"101.448",fill:"#E1E3E6",rx:"5"}),(0,l.createElement)("rect",{width:"65.374",height:"65.374",x:".162",y:"136.277",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"47.266",height:"5.148",x:"9.216",y:"211.651",fill:"#E1E3E6",rx:"2.574"}),(0,l.createElement)("rect",{width:"62.8",height:"15",x:"1.565",y:"236.946",fill:"#E1E3E6",rx:"5"}),(0,l.createElement)("rect",{width:"65.374",height:"65.374",x:"82.478",y:".779",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"47.266",height:"5.148",x:"91.532",y:"76.153",fill:"#E1E3E6",rx:"2.574"}),(0,l.createElement)("rect",{width:"62.8",height:"15",x:"83.882",y:"101.448",fill:"#E1E3E6",rx:"5"}),(0,l.createElement)("rect",{width:"65.374",height:"65.374",x:"82.478",y:"136.277",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"47.266",height:"5.148",x:"91.532",y:"211.651",fill:"#E1E3E6",rx:"2.574"}),(0,l.createElement)("rect",{width:"62.8",height:"15",x:"83.882",y:"236.946",fill:"#E1E3E6",rx:"5"}),(0,l.createElement)("rect",{width:"65.374",height:"65.374",x:"164.788",y:".779",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"47.266",height:"5.148",x:"173.843",y:"76.153",fill:"#E1E3E6",rx:"2.574"}),(0,l.createElement)("rect",{width:"62.8",height:"15",x:"166.192",y:"101.448",fill:"#E1E3E6",rx:"5"}),(0,l.createElement)("rect",{width:"65.374",height:"65.374",x:"164.788",y:"136.277",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"47.266",height:"5.148",x:"173.843",y:"211.651",fill:"#E1E3E6",rx:"2.574"}),(0,l.createElement)("rect",{width:"62.8",height:"15",x:"166.192",y:"236.946",fill:"#E1E3E6",rx:"5"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"13.283",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"21.498",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"29.713",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"37.927",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"46.238",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"95.599",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"103.814",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"112.029",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"120.243",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"128.554",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"177.909",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"186.124",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"194.339",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"202.553",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"210.864",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"13.283",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"21.498",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"29.713",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"37.927",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"46.238",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"95.599",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"103.814",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"112.029",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"120.243",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"128.554",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"177.909",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"186.124",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"194.339",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"202.553",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"210.864",y:"221.798",fill:"#E1E3E6",rx:"3"})),u=window.wp.blockEditor,h=({onChange:e,settings:t})=>{const{image:r,button:c,price:n,rating:a,title:s}=t,m=!1!==r;return(0,l.createElement)(l.Fragment,null,(0,l.createElement)(i.ToggleControl,{label:(0,o.__)("Product image","woocommerce"),checked:m,onChange:()=>e({...t,image:!m})}),(0,l.createElement)(i.ToggleControl,{label:(0,o.__)("Product title","woocommerce"),checked:s,onChange:()=>e({...t,title:!s})}),(0,l.createElement)(i.ToggleControl,{label:(0,o.__)("Product price","woocommerce"),checked:n,onChange:()=>e({...t,price:!n})}),(0,l.createElement)(i.ToggleControl,{label:(0,o.__)("Product rating","woocommerce"),checked:a,onChange:()=>e({...t,rating:!a})}),(0,l.createElement)(i.ToggleControl,{label:(0,o.__)("Add to Cart button","woocommerce"),checked:c,onChange:()=>e({...t,button:!c})}))},E=(e,t,r)=>r?Math.min(e,t)===e?t:Math.max(e,r)===e?r:e:Math.max(e,t)===t?e:t,g=({columns:e,rows:t,setAttributes:r,alignButtons:c,minColumns:n=1,maxColumns:a=6,minRows:s=1,maxRows:m=6})=>(0,l.createElement)(l.Fragment,null,(0,l.createElement)(i.RangeControl,{label:(0,o.__)("Columns","woocommerce"),value:e,onChange:e=>{const t=E(e,n,a);r({columns:Number.isNaN(t)?"":t})},min:n,max:a}),(0,l.createElement)(i.RangeControl,{label:(0,o.__)("Rows","woocommerce"),value:t,onChange:e=>{const t=E(e,s,m);r({rows:Number.isNaN(t)?"":t})},min:s,max:m}),(0,l.createElement)(i.ToggleControl,{label:(0,o.__)("Align the last block to the bottom","woocommerce"),help:c?(0,o.__)("Align the last block to the bottom.","woocommerce"):(0,o.__)("The last inner block will follow other content.","woocommerce"),checked:c,onChange:()=>r({alignButtons:!c})}));var w=r(851),p=r(6087);function _(e,t,r){const l=new Set(t.map((e=>e[r])));return e.filter((e=>!l.has(e[r])))}const f=window.wp.htmlEntities,b={clear:(0,o.__)("Clear all selected items","woocommerce"),noItems:(0,o.__)("No items found.","woocommerce"),
/* Translators: %s search term */
noResults:(0,o.__)("No results for %s","woocommerce"),search:(0,o.__)("Search for items","woocommerce"),selected:e=>(0,o.sprintf)(/* translators: Number of items selected from list. */ /* translators: Number of items selected from list. */
(0,o._n)("%d item selected","%d items selected",e,"woocommerce"),e),updated:(0,o.__)("Search results updated.","woocommerce")},x=(e,t=e)=>{const r=e.reduce(((e,t)=>{const r=t.parent||0;return e[r]||(e[r]=[]),e[r].push(t),e}),{}),l=t.reduce(((e,t)=>(e[String(t.id)]=t,e)),{});const o=["0"],c=(e={})=>e.parent?[...c(l[e.parent]),e.name]:e.name?[e.name]:[],n=e=>e.map((e=>{const t=r[e.id];return o.push(""+e.id),{...e,breadcrumbs:c(l[e.parent]),children:t&&t.length?n(t):[]}})),a=n(r[0]||[]);return Object.entries(r).forEach((([e,t])=>{o.includes(e)||a.push(...n(t||[]))})),a},y=(e,t)=>{if(!t)return e;const r=new RegExp(`(${t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")})`,"ig");return e.split(r).map(((e,t)=>r.test(e)?(0,l.createElement)("strong",{key:t},e):(0,l.createElement)(p.Fragment,{key:t},e)))},v=({label:e})=>(0,l.createElement)("span",{className:"woocommerce-search-list__item-count"},e),k=e=>{const{item:t,search:r}=e,o=t.breadcrumbs&&t.breadcrumbs.length;return(0,l.createElement)("span",{className:"woocommerce-search-list__item-label"},o?(0,l.createElement)("span",{className:"woocommerce-search-list__item-prefix"},1===(c=t.breadcrumbs).length?c.slice(0,1).toString():2===c.length?c.slice(0,1).toString()+" › "+c.slice(-1).toString():c.slice(0,1).toString()+" … "+c.slice(-1).toString()):null,(0,l.createElement)("span",{className:"woocommerce-search-list__item-name"},y((0,f.decodeEntities)(t.name),r)));var c},C=({countLabel:e,className:t,depth:r=0,controlId:o="",item:c,isSelected:n,isSingle:a,onSelect:s,search:m="",selected:d,useExpandedPanelId:u,...h})=>{var E,g;const[b,x]=u,C=null!=e&&void 0!==c.count&&null!==c.count,S=!(null===(E=c.breadcrumbs)||void 0===E||!E.length),N=!(null===(g=c.children)||void 0===g||!g.length),O=b===c.id,P=(0,w.A)(["woocommerce-search-list__item",`depth-${r}`,t],{"has-breadcrumbs":S,"has-children":N,"has-count":C,"is-expanded":O,"is-radio-button":a});(0,p.useEffect)((()=>{N&&n&&x(c.id)}),[c,N,n,x]);const A=h.name||`search-list-item-${o}`,I=`${A}-${c.id}`,R=(0,p.useCallback)((()=>{x(O?-1:Number(c.id))}),[O,c.id,x]);return N?(0,l.createElement)("div",{className:P,onClick:R,onKeyDown:e=>"Enter"===e.key||" "===e.key?R():null,role:"treeitem",tabIndex:0},a?(0,l.createElement)(l.Fragment,null,(0,l.createElement)("input",{type:"radio",id:I,name:A,value:c.value,onChange:s(c),onClick:e=>e.stopPropagation(),checked:n,className:"woocommerce-search-list__item-input",...h}),(0,l.createElement)(k,{item:c,search:m}),C?(0,l.createElement)(v,{label:e||c.count}):null):(0,l.createElement)(l.Fragment,null,(0,l.createElement)(i.CheckboxControl,{className:"woocommerce-search-list__item-input",checked:n,...!n&&c.children.some((e=>d.find((t=>t.id===e.id))))?{indeterminate:!0}:{},label:y((0,f.decodeEntities)(c.name),m),onChange:()=>{n?s(_(d,c.children,"id"))():s(function(e,t){const r=_(t,e,"id");return[...e,...r]}(d,c.children))()},onClick:e=>e.stopPropagation()}),C?(0,l.createElement)(v,{label:e||c.count}):null)):(0,l.createElement)("label",{htmlFor:I,className:P},a?(0,l.createElement)(l.Fragment,null,(0,l.createElement)("input",{...h,type:"radio",id:I,name:A,value:c.value,onChange:s(c),checked:n,className:"woocommerce-search-list__item-input"}),(0,l.createElement)(k,{item:c,search:m})):(0,l.createElement)(i.CheckboxControl,{...h,id:I,name:A,className:"woocommerce-search-list__item-input",value:(0,f.decodeEntities)(c.value),label:y((0,f.decodeEntities)(c.name),m),onChange:s(c),checked:n}),C?(0,l.createElement)(v,{label:e||c.count}):null)},S=C;var N=r(2478),O=r(9491),P=r(2370);r(6636);const A=({id:e,label:t,popoverContents:r,remove:c,screenReaderLabel:a,className:s=""})=>{const[m,d]=(0,p.useState)(!1),u=(0,O.useInstanceId)(A);if(a=a||t,!t)return null;t=(0,f.decodeEntities)(t);const h=(0,w.A)("woocommerce-tag",s,{"has-remove":!!c}),E=`woocommerce-tag__label-${u}`,g=(0,l.createElement)(l.Fragment,null,(0,l.createElement)("span",{className:"screen-reader-text"},a),(0,l.createElement)("span",{"aria-hidden":"true"},t));return(0,l.createElement)("span",{className:h},r?(0,l.createElement)(i.Button,{className:"woocommerce-tag__text",id:E,onClick:()=>d(!0)},g):(0,l.createElement)("span",{className:"woocommerce-tag__text",id:E},g),r&&m&&(0,l.createElement)(i.Popover,{onClose:()=>d(!1)},r),c&&(0,l.createElement)(i.Button,{className:"woocommerce-tag__remove",onClick:c(e),label:(0,o.sprintf)(
// Translators: %s label.
// Translators: %s label.
(0,o.__)("Remove %s","woocommerce"),t),"aria-describedby":E},(0,l.createElement)(n.A,{icon:P.A,size:20,className:"clear-icon",role:"img"})))},I=A;r(8137);const R=e=>(0,l.createElement)(S,{...e}),B=e=>{const{list:t,selected:r,renderItem:o,depth:c=0,onSelect:n,instanceId:a,isSingle:i,search:s,useExpandedPanelId:m}=e,[d]=m;return t?(0,l.createElement)(p.Fragment,null,t.map((t=>{var u,h;const E=null!==(u=t.children)&&void 0!==u&&u.length&&!i?t.children.every((({id:e})=>r.find((t=>t.id===e)))):!!r.find((({id:e})=>e===t.id)),g=(null===(h=t.children)||void 0===h?void 0:h.length)&&d===t.id;return(0,l.createElement)(p.Fragment,{key:t.id},(0,l.createElement)("li",null,o({item:t,isSelected:E,onSelect:n,isSingle:i,selected:r,search:s,depth:c,useExpandedPanelId:m,controlId:a})),g?(0,l.createElement)(B,{...e,list:t.children,depth:c+1}):null)}))):null},j=({isLoading:e,isSingle:t,selected:r,messages:c,onChange:n,onRemove:a})=>{if(e||t||!r)return null;const s=r.length;return(0,l.createElement)("div",{className:"woocommerce-search-list__selected"},(0,l.createElement)("div",{className:"woocommerce-search-list__selected-header"},(0,l.createElement)("strong",null,c.selected(s)),s>0?(0,l.createElement)(i.Button,{variant:"link",isDestructive:!0,onClick:()=>n([]),"aria-label":c.clear},(0,o.__)("Clear all","woocommerce")):null),s>0?(0,l.createElement)("ul",null,r.map(((e,t)=>(0,l.createElement)("li",{key:t},(0,l.createElement)(I,{label:e.name,id:e.id,remove:a}))))):null)},T=({filteredList:e,search:t,onSelect:r,instanceId:c,useExpandedPanelId:a,...i})=>{const{messages:s,renderItem:m,selected:d,isSingle:u}=i,h=m||R;return 0===e.length?(0,l.createElement)("div",{className:"woocommerce-search-list__list is-not-found"},(0,l.createElement)("span",{className:"woocommerce-search-list__not-found-icon"},(0,l.createElement)(n.A,{icon:N.A,role:"img"})),(0,l.createElement)("span",{className:"woocommerce-search-list__not-found-text"},t?(0,o.sprintf)(s.noResults,t):s.noItems)):(0,l.createElement)("ul",{className:"woocommerce-search-list__list"},(0,l.createElement)(B,{useExpandedPanelId:a,list:e,selected:d,renderItem:h,onSelect:r,instanceId:c,isSingle:u,search:t}))},$=e=>{const{className:t="",isCompact:r,isHierarchical:c,isLoading:n,isSingle:a,list:s,messages:m=b,onChange:d,onSearch:u,selected:h,type:E="text",debouncedSpeak:g}=e,[_,f]=(0,p.useState)(""),y=(0,p.useState)(-1),v=(0,O.useInstanceId)($),k=(0,p.useMemo)((()=>({...b,...m})),[m]),C=(0,p.useMemo)((()=>((e,t,r)=>{if(!t)return r?x(e):e;const l=new RegExp(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"i"),o=e.map((e=>!!l.test(e.name)&&e)).filter(Boolean);return r?x(o,e):o})(s,_,c)),[s,_,c]);(0,p.useEffect)((()=>{g&&g(k.updated)}),[g,k]),(0,p.useEffect)((()=>{"function"==typeof u&&u(_)}),[_,u]);const S=(0,p.useCallback)((e=>()=>{a&&d([]);const t=h.findIndex((({id:t})=>t===e));d([...h.slice(0,t),...h.slice(t+1)])}),[a,h,d]),N=(0,p.useCallback)((e=>()=>{Array.isArray(e)?d(e):-1===h.findIndex((({id:t})=>t===e.id))?d(a?[e]:[...h,e]):S(e.id)()}),[a,S,d,h]),P=(0,p.useCallback)((e=>{const[t]=h.filter((t=>!e.find((e=>t.id===e.id))));S(t.id)()}),[S,h]);return(0,l.createElement)("div",{className:(0,w.A)("woocommerce-search-list",t,{"is-compact":r,"is-loading":n,"is-token":"token"===E})},"text"===E&&(0,l.createElement)(j,{...e,onRemove:S,messages:k}),(0,l.createElement)("div",{className:"woocommerce-search-list__search"},"text"===E?(0,l.createElement)(i.TextControl,{label:k.search,type:"search",value:_,onChange:e=>f(e)}):(0,l.createElement)(i.FormTokenField,{disabled:n,label:k.search,onChange:P,onInputChange:e=>f(e),suggestions:[],__experimentalValidateInput:()=>!1,value:n?[(0,o.__)("Loading…","woocommerce")]:h.map((e=>({...e,value:e.name}))),__experimentalShowHowTo:!1})),n?(0,l.createElement)("div",{className:"woocommerce-search-list__list"},(0,l.createElement)(i.Spinner,null)):(0,l.createElement)(T,{...e,search:_,filteredList:C,messages:k,onSelect:N,instanceId:v,useExpandedPanelId:y}))},F=((0,i.withSpokenMessages)($),window.wp.url),M=window.wp.apiFetch;var L=r.n(M);const H=window.wc.wcSettings,D=window.wp.escapeHtml,V=({error:e})=>(0,l.createElement)("div",{className:"wc-block-error-message"},(({message:e,type:t})=>e?"general"===t?(0,l.createElement)("span",null,(0,o.__)("The following error was returned","woocommerce"),(0,l.createElement)("br",null),(0,l.createElement)("code",null,(0,D.escapeHTML)(e))):"api"===t?(0,l.createElement)("span",null,(0,o.__)("The following error was returned from the API","woocommerce"),(0,l.createElement)("br",null),(0,l.createElement)("code",null,(0,D.escapeHTML)(e))):e:(0,o.__)("An error has prevented the block from being updated.","woocommerce"))(e)),W=e=>{const{id:t,name:r,parent:l,count:o}=e;return{id:t,name:r,parent:l,count:o,breadcrumbs:[],children:[],details:e,value:e.slug}};r(6876);const J=(X=({categories:e=[],error:t=null,isLoading:r=!1,onChange:c,onOperatorChange:n,operator:a="any",selected:s,isCompact:m=!1,isSingle:d=!1,showReviewCount:u})=>{const h={clear:(0,o.__)("Clear all product categories","woocommerce"),list:(0,o.__)("Product Categories","woocommerce"),noItems:(0,o.__)("Your store doesn't have any product categories.","woocommerce"),search:(0,o.__)("Search for product categories","woocommerce"),selected:e=>(0,o.sprintf)(/* translators: %d is the count of selected categories. */ /* translators: %d is the count of selected categories. */
(0,o._n)("%d category selected","%d categories selected",e,"woocommerce"),e),updated:(0,o.__)("Category search results updated.","woocommerce")};if(t)return(0,l.createElement)(V,{error:t});const E=e.map(W);return(0,l.createElement)(l.Fragment,null,(0,l.createElement)($,{className:"woocommerce-product-categories",list:E,isLoading:r,selected:E.filter((({id:e})=>s.includes(Number(e)))),onChange:c,renderItem:e=>{var t,r,c,n,a,i,s,m;const{item:d,search:h,depth:E=0}=e,g=d.breadcrumbs.length?`${d.breadcrumbs.join(", ")}, ${d.name}`:d.name,p=u?(0,o.sprintf)(/* translators: %1$s is the item name, %2$d is the count of reviews for the item. */ /* translators: %1$s is the item name, %2$d is the count of reviews for the item. */
(0,o._n)("%1$s, has %2$d review","%1$s, has %2$d reviews",(null===(t=d.details)||void 0===t?void 0:t.review_count)||0,"woocommerce"),g,(null===(r=d.details)||void 0===r?void 0:r.review_count)||0):(0,o.sprintf)(/* translators: %1$s is the item name, %2$d is the count of products for the item. */ /* translators: %1$s is the item name, %2$d is the count of products for the item. */
(0,o._n)("%1$s, has %2$d product","%1$s, has %2$d products",(null===(c=d.details)||void 0===c?void 0:c.count)||0,"woocommerce"),g,(null===(n=d.details)||void 0===n?void 0:n.count)||0),_=u?(0,o.sprintf)(/* translators: %d is the count of reviews. */ /* translators: %d is the count of reviews. */
(0,o._n)("%d review","%d reviews",(null===(a=d.details)||void 0===a?void 0:a.review_count)||0,"woocommerce"),(null===(i=d.details)||void 0===i?void 0:i.review_count)||0):(0,o.sprintf)(/* translators: %d is the count of products. */ /* translators: %d is the count of products. */
(0,o._n)("%d product","%d products",(null===(s=d.details)||void 0===s?void 0:s.count)||0,"woocommerce"),(null===(m=d.details)||void 0===m?void 0:m.count)||0);return(0,l.createElement)(C,{className:(0,w.A)("woocommerce-product-categories__item","has-count",{"is-searching":h.length>0,"is-skip-level":0===E&&0!==d.parent}),...e,countLabel:_,"aria-label":p})},messages:h,isCompact:m,isHierarchical:!0,isSingle:d}),!!n&&(0,l.createElement)("div",{hidden:s.length<2},(0,l.createElement)(i.SelectControl,{className:"woocommerce-product-categories__operator",label:(0,o.__)("Display products matching","woocommerce"),help:(0,o.__)("Pick at least two categories to use this setting.","woocommerce"),value:a,onChange:n,options:[{label:(0,o.__)("Any selected categories","woocommerce"),value:"any"},{label:(0,o.__)("All selected categories","woocommerce"),value:"all"}]})))},({selected:e,...t})=>{const[r,o]=(0,p.useState)(!0),[c,n]=(0,p.useState)(null),[a,i]=(0,p.useState)([]),s=async e=>{const t=await(async e=>{if(!("json"in e))return{code:e.code||"",message:e.message,type:e.type||"general"};try{const t=await e.json();return{code:t.code||"",message:t.message,type:t.type||"api"}}catch(e){return{message:e.message,type:"general"}}})(e);n(t),o(!1)},m=(0,p.useRef)(e);return(0,p.useEffect)((()=>{var e;(e={selected:m.current},L()({path:(0,F.addQueryArgs)("wc/store/v1/products/categories",{per_page:0,...e})})).then((e=>{i(e),o(!1)})).catch(s)}),[m]),(0,l.createElement)(X,{...t,selected:e,error:c,categories:a,isLoading:r})}),z=({value:e,setAttributes:t})=>(0,l.createElement)(i.SelectControl,{label:(0,o.__)("Order products by","woocommerce"),value:e,options:[{label:(0,o.__)("Newness - newest first","woocommerce"),value:"date"},{label:(0,o.__)("Price - low to high","woocommerce"),value:"price_asc"},{label:(0,o.__)("Price - high to low","woocommerce"),value:"price_desc"},{label:(0,o.__)("Rating - highest first","woocommerce"),value:"rating"},{label:(0,o.__)("Sales - most first","woocommerce"),value:"popularity"},{label:(0,o.__)("Title - alphabetical","woocommerce"),value:"title"},{label:(0,o.__)("Menu Order","woocommerce"),value:"menu_order"}],onChange:e=>t({orderby:e})}),G=(0,H.getSetting)("hideOutOfStockItems",!1),K=(0,H.getSetting)("stockStatusOptions",{}),Q=({value:e,setAttributes:t})=>{const{outofstock:r,...c}=K,n=G?c:K,a=Object.entries(n).map((([e,t])=>({value:e,label:t}))).filter((e=>!!e.label)),s=Object.keys(n).filter((e=>!!e)),[m,d]=(0,p.useState)(e||s);(0,p.useEffect)((()=>{t({stockStatus:["",...m]})}),[m,t]);const u=(0,p.useCallback)((e=>{const t=m.includes(e),r=m.filter((t=>t!==e));t||(r.push(e),r.sort()),d(r)}),[m]);return(0,l.createElement)(l.Fragment,null,a.map((e=>{const t=m.includes(e.value)?/* translators: %s stock status. */ /* translators: %s stock status. */(0,o.__)('Stock status "%s" visible.',"woocommerce"):/* translators: %s stock status. */ /* translators: %s stock status. */(0,o.__)('Stock status "%s" hidden.',"woocommerce");return(0,l.createElement)(i.ToggleControl,{label:e.label,key:e.value,help:(0,o.sprintf)(t,e.label),checked:m.includes(e.value),onChange:()=>u(e.value)})})))},Y=e=>{const{attributes:t,setAttributes:r}=e,{categories:c,catOperator:n,columns:a,contentVisibility:s,rows:m,orderby:d,alignButtons:E,stockStatus:w}=t;return(0,l.createElement)(u.InspectorControls,{key:"inspector"},(0,l.createElement)(i.PanelBody,{title:(0,o.__)("Layout","woocommerce"),initialOpen:!0},(0,l.createElement)(g,{columns:a,rows:m,alignButtons:E,setAttributes:r,minColumns:(0,H.getSetting)("minColumns",1),maxColumns:(0,H.getSetting)("maxColumns",6),minRows:(0,H.getSetting)("minRows",1),maxRows:(0,H.getSetting)("maxRows",6)})),(0,l.createElement)(i.PanelBody,{title:(0,o.__)("Content","woocommerce"),initialOpen:!0},(0,l.createElement)(h,{settings:s,onChange:e=>r({contentVisibility:e})})),(0,l.createElement)(i.PanelBody,{title:(0,o.__)("Order By","woocommerce"),initialOpen:!1},(0,l.createElement)(z,{setAttributes:r,value:d})),(0,l.createElement)(i.PanelBody,{title:(0,o.__)("Filter by Product Category","woocommerce"),initialOpen:!1},(0,l.createElement)(J,{selected:c,onChange:(e=[])=>{const t=e.map((({id:e})=>e));r({categories:t})},operator:n,onOperatorChange:(e="any")=>r({catOperator:e})})),(0,l.createElement)(i.PanelBody,{title:(0,o.__)("Filter by stock status","woocommerce"),initialOpen:!1},(0,l.createElement)(Q,{setAttributes:r,value:w})))},q=()=>(0,l.createElement)(i.Placeholder,{icon:(0,l.createElement)(n.A,{icon:a.A}),label:(0,o.__)("On Sale Products","woocommerce"),className:"wc-block-product-on-sale"},(0,o.__)("This block shows on-sale products. There are currently no discounted products in your store.","woocommerce")),U=e=>{const{attributes:t,setAttributes:r,name:o}=e,c=(0,u.useBlockProps)();return t.isPreview?(0,l.createElement)("div",{...c},d):(0,l.createElement)("div",{...c},(0,l.createElement)(Y,{attributes:t,setAttributes:r}),(0,l.createElement)(i.Disabled,null,(0,l.createElement)(m(),{block:o,attributes:t,EmptyResponsePlaceholder:q})))};var X;r(6779);const Z={columns:{type:"number",default:(0,H.getSetting)("defaultColumns",3)},rows:{type:"number",default:(0,H.getSetting)("defaultRows",3)},alignButtons:{type:"boolean",default:!1},categories:{type:"array",default:[]},catOperator:{type:"string",default:"any"},contentVisibility:{type:"object",default:{image:!0,title:!0,price:!0,rating:!0,button:!0}},isPreview:{type:"boolean",default:!1},stockStatus:{type:"array",default:Object.keys((0,H.getSetting)("stockStatusOptions",[]))}};(0,c.registerBlockType)("woocommerce/product-on-sale",{title:(0,o.__)("On Sale Products","woocommerce"),apiVersion:3,icon:{src:(0,l.createElement)(n.A,{icon:a.A,className:"wc-block-editor-components-block-icon"})},category:"woocommerce",keywords:[(0,o.__)("WooCommerce","woocommerce")],description:(0,o.__)("Display a grid of products currently on sale.","woocommerce"),supports:{align:["wide","full"],html:!1,inserter:!1},attributes:{...Z,orderby:{type:"string",default:"date"}},transforms:{from:[{type:"block",blocks:["woocommerce/product-best-sellers","woocommerce/product-category","woocommerce/product-new","woocommerce/product-on-sale","woocommerce/product-top-rated"].filter((e=>"woocommerce/product-on-sale"!==e)),transform:e=>(0,c.createBlock)("woocommerce/product-on-sale",e)}]},edit:e=>(0,l.createElement)(U,{...e}),save:()=>null})},6779:()=>{},6876:()=>{},8137:()=>{},6636:()=>{},1609:e=>{"use strict";e.exports=window.React},9491:e=>{"use strict";e.exports=window.wp.compose},6087:e=>{"use strict";e.exports=window.wp.element},7723:e=>{"use strict";e.exports=window.wp.i18n},5573:e=>{"use strict";e.exports=window.wp.primitives}},o={};function c(e){var t=o[e];if(void 0!==t)return t.exports;var r=o[e]={exports:{}};return l[e].call(r.exports,r,r.exports,c),r.exports}c.m=l,e=[],c.O=(t,r,l,o)=>{if(!r){var n=1/0;for(m=0;m<e.length;m++){for(var[r,l,o]=e[m],a=!0,i=0;i<r.length;i++)(!1&o||n>=o)&&Object.keys(c.O).every((e=>c.O[e](r[i])))?r.splice(i--,1):(a=!1,o<n&&(n=o));if(a){e.splice(m--,1);var s=l();void 0!==s&&(t=s)}}return t}o=o||0;for(var m=e.length;m>0&&e[m-1][2]>o;m--)e[m]=e[m-1];e[m]=[r,l,o]},c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,c.t=function(e,l){if(1&l&&(e=this(e)),8&l)return e;if("object"==typeof e&&e){if(4&l&&e.__esModule)return e;if(16&l&&"function"==typeof e.then)return e}var o=Object.create(null);c.r(o);var n={};t=t||[null,r({}),r([]),r(r)];for(var a=2&l&&e;"object"==typeof a&&!~t.indexOf(a);a=r(a))Object.getOwnPropertyNames(a).forEach((t=>n[t]=()=>e[t]));return n.default=()=>e,c.d(o,n),o},c.d=(e,t)=>{for(var r in t)c.o(t,r)&&!c.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.j=7686,(()=>{var e={7686:0};c.O.j=t=>0===e[t];var t=(t,r)=>{var l,o,[n,a,i]=r,s=0;if(n.some((t=>0!==e[t]))){for(l in a)c.o(a,l)&&(c.m[l]=a[l]);if(i)var m=i(c)}for(t&&t(r);s<n.length;s++)o=n[s],c.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return c.O(m)},r=self.webpackChunkwebpackWcBlocksMainJsonp=self.webpackChunkwebpackWcBlocksMainJsonp||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var n=c.O(void 0,[94],(()=>c(7836)));n=c.O(n),((this.wc=this.wc||{}).blocks=this.wc.blocks||{})["product-on-sale"]=n})();
>>>>>>> b1eea7a (Merged existing code from https://dev-vices.rafaeldeveloper.co)
