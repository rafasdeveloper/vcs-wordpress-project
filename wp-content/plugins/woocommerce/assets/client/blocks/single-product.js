<<<<<<< HEAD
(()=>{var e,t,o,r,s,c={4264:(e,t,o)=>{"use strict";o.d(t,{e:()=>r});let r=function(e){return e.SINGLE="single",e.THUMBNAIL="thumbnail",e}({})},8723:(e,t,o)=>{"use strict";const r=window.wp.blocks;var s=o(4530),c=o(3492);const n=window.wc.wcBlocksRegistry;var i=o(6087),a=o(8331);o.p=a.XK,(0,n.registerBlockComponent)({blockName:"woocommerce/product-price",component:(0,i.lazy)((()=>Promise.all([o.e(94),o.e(2388)]).then(o.bind(o,1308))))}),(0,n.registerBlockComponent)({blockName:"woocommerce/product-image",component:(0,i.lazy)((()=>Promise.all([o.e(94),o.e(4232)]).then(o.bind(o,933))))}),(0,n.registerBlockComponent)({blockName:"woocommerce/product-title",component:(0,i.lazy)((()=>Promise.all([o.e(94),o.e(2105)]).then(o.bind(o,5168))))}),(0,n.registerBlockComponent)({blockName:"woocommerce/product-rating",component:(0,i.lazy)((()=>Promise.all([o.e(94),o.e(462)]).then(o.bind(o,9812))))}),(0,n.registerBlockComponent)({blockName:"woocommerce/product-rating-stars",component:(0,i.lazy)((()=>Promise.all([o.e(94),o.e(8578)]).then(o.bind(o,7220))))}),(0,n.registerBlockComponent)({blockName:"woocommerce/product-rating-counter",component:(0,i.lazy)((()=>Promise.all([o.e(94),o.e(8553)]).then(o.bind(o,9147))))}),(0,n.registerBlockComponent)({blockName:"woocommerce/product-average-rating",component:(0,i.lazy)((()=>Promise.all([o.e(94),o.e(8647)]).then(o.bind(o,4514))))}),(0,n.registerBlockComponent)({blockName:"woocommerce/product-button",component:(0,i.lazy)((()=>Promise.all([o.e(94),o.e(7409)]).then(o.bind(o,595))))}),(0,n.registerBlockComponent)({blockName:"woocommerce/product-summary",component:(0,i.lazy)((()=>Promise.all([o.e(94),o.e(3895)]).then(o.bind(o,4001))))}),(0,n.registerBlockComponent)({blockName:"woocommerce/product-sale-badge",component:(0,i.lazy)((()=>Promise.all([o.e(94),o.e(4442)]).then(o.bind(o,3848))))}),(0,n.registerBlockComponent)({blockName:"woocommerce/product-sku",component:(0,i.lazy)((()=>Promise.all([o.e(94),o.e(2724)]).then(o.bind(o,1648))))}),(0,n.registerBlockComponent)({blockName:"woocommerce/product-stock-indicator",component:(0,i.lazy)((()=>Promise.all([o.e(94),o.e(345)]).then(o.bind(o,6374))))});const l=JSON.parse('{"name":"woocommerce/single-product","icon":"info","title":"Single Product","description":"Display a single product.","category":"woocommerce","keywords":["WooCommerce"],"supports":{"interactivity":true,"align":["wide","full"]},"attributes":{"isPreview":{"type":"boolean","default":false},"productId":{"type":"number"}},"example":{"attributes":{"isPreview":true}},"usesContext":["postId","postType","queryId"],"textdomain":"woocommerce","apiVersion":3,"$schema":"https://schemas.wp.org/trunk/block.json"}');var d=o(6427),m=o(3925),u=o(8992),p=o(790);const h="woocommerce/product-query/product-title";!function(e,{blockDescription:t,blockIcon:o,blockTitle:s,variationName:c,scope:n}){(0,r.registerBlockVariation)(e,{description:t,name:c,title:s,isActive:e=>e.__woocommerceNamespace===c,icon:{src:o},attributes:{__woocommerceNamespace:c},scope:n})}("core/post-title",{blockDescription:m.description,blockIcon:(0,p.jsx)(d.Icon,{icon:u.A}),blockTitle:m.title,variationName:h,scope:["block"]});var g=o(4264);const w=(0,p.jsx)(s.A,{icon:c.A,className:"wc-block-editor-components-block-icon"}),b=[["core/columns",{},[["core/column",{},[["woocommerce/product-image",{showSaleBadge:!1,isDescendentOfSingleProductBlock:!0,imageSizing:g.e.SINGLE},[["woocommerce/product-sale-badge",{align:"right"}]]]]],["core/column",{},[["core/post-title",{headingLevel:2,isLink:!0,__woocommerceNamespace:h}],["woocommerce/product-rating",{isDescendentOfSingleProductBlock:!0}],["woocommerce/product-price",{isDescendentOfSingleProductBlock:!0}],["woocommerce/product-summary",{isDescendentOfSingleProductBlock:!0}],["woocommerce/add-to-cart-form"],["woocommerce/product-meta"]]]]]],x=["core/columns","core/column","core/post-title","core/post-excerpt","woocommerce/add-to-cart-form","woocommerce/add-to-cart-with-options","woocommerce/product-meta","woocommerce/product-gallery","woocommerce/product-reviews","woocommerce/product-details",...Object.keys((_=l.name,(0,n.getRegisteredBlockComponents)(_)))];var _,v=o(7723),k=o(9491);const f=window.wp.url,j=window.wp.apiFetch;var y=o.n(j),S=o(5703);const P=({selected:e=[],search:t="",queryArgs:o={}})=>{const r=(({selected:e=[],search:t="",queryArgs:o={}})=>{const r=a.r7.productCount>100,s={per_page:r?100:0,catalog_visibility:"any",search:t,orderby:"title",order:"asc"},c=[(0,f.addQueryArgs)("/wc/store/v1/products",{...s,...o})];return r&&e.length&&c.push((0,f.addQueryArgs)("/wc/store/v1/products",{catalog_visibility:"any",include:e,per_page:0})),c})({selected:e,search:t,queryArgs:o});return Promise.all(r.map((e=>y()({path:e})))).then((e=>{const t=((e,t)=>{const o=new Map;return e.filter((e=>{const r=t(e);return!o.has(r)&&(o.set(r,e),!0)}))})(e.flat(),(e=>e.id));return t.map((e=>({...e,parent:0})))})).catch((e=>{throw e}))},E=async e=>{if(!("json"in e))return{code:e.code||"",message:e.message,type:e.type||"general"};try{const t=await e.json();return{code:t.code||"",message:t.message,type:t.type||"api"}}catch(e){return{message:e.message,type:"general"}}},N=(0,k.createHigherOrderComponent)((e=>class extends i.Component{state={error:null,loading:!1,product:"preview"===this.props.attributes.productId?this.props.attributes.previewProduct:null};componentDidMount(){this.loadProduct()}componentDidUpdate(e){e.attributes.productId!==this.props.attributes.productId&&this.loadProduct()}loadProduct=()=>{const{productId:e}=this.props.attributes;"preview"!==e&&(e?(this.setState({loading:!0}),(e=>y()({path:`/wc/store/v1/products/${e}`}))(e).then((e=>{this.setState({product:e,loading:!1,error:null})})).catch((async e=>{const t=await E(e);this.setState({product:null,loading:!1,error:t})}))):this.setState({product:null,loading:!1,error:null}))};render(){const{error:t,loading:o,product:r}=this.state;return(0,p.jsx)(e,{...this.props,error:t,getProduct:this.loadProduct,isLoading:o,product:r})}}),"withProduct"),C=({imageUrl:e=`${a.sW}/block-error.svg`,header:t=(0,v.__)("Oops!","woocommerce"),text:o=(0,v.__)("There was an error loading the content.","woocommerce"),errorMessage:r,errorMessagePrefix:s=(0,v.__)("Error:","woocommerce"),button:c,showErrorBlock:n=!0})=>n?(0,p.jsxs)("div",{className:"wc-block-error wc-block-components-error",children:[e&&(0,p.jsx)("img",{className:"wc-block-error__image wc-block-components-error__image",src:e,alt:""}),(0,p.jsxs)("div",{className:"wc-block-error__content wc-block-components-error__content",children:[t&&(0,p.jsx)("p",{className:"wc-block-error__header wc-block-components-error__header",children:t}),o&&(0,p.jsx)("p",{className:"wc-block-error__text wc-block-components-error__text",children:o}),r&&(0,p.jsxs)("p",{className:"wc-block-error__message wc-block-components-error__message",children:[s?s+" ":"",r]}),c&&(0,p.jsx)("p",{className:"wc-block-error__button wc-block-components-error__button",children:c})]})]}):null;o(5893);class I extends i.Component{state={errorMessage:"",hasError:!1};static getDerivedStateFromError(e){return void 0!==e.statusText&&void 0!==e.status?{errorMessage:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("strong",{children:e.status}),":Â ",e.statusText]}),hasError:!0}:{errorMessage:e.message,hasError:!0}}render(){const{header:e,imageUrl:t,showErrorMessage:o=!0,showErrorBlock:r=!0,text:s,errorMessagePrefix:c,renderError:n,button:i}=this.props,{errorMessage:a,hasError:l}=this.state;return l?"function"==typeof n?n({errorMessage:a}):(0,p.jsx)(C,{showErrorBlock:r,errorMessage:o?a:null,header:e,imageUrl:t,text:s,errorMessagePrefix:c,button:i}):this.props.children}}const A=I;var B=o(7035),O=o(4715),T=o(415);const L=e=>{const t=((0,T.useProductDataContext)().product||{}).id||e.productId||0;return t&&1!==t?(0,p.jsx)(O.InspectorControls,{children:(0,p.jsxs)("div",{className:"wc-block-single-product__edit-card",children:[(0,p.jsx)("div",{className:"wc-block-single-product__edit-card-title",children:(0,p.jsxs)("a",{href:`${S.ADMIN_URL}post.php?post=${t}&action=edit`,target:"_blank",rel:"noopener noreferrer",children:[(0,v.__)("Edit this product's details","woocommerce"),(0,p.jsx)(s.A,{icon:B.A,size:16})]})}),(0,p.jsx)("div",{className:"wc-block-single-product__edit-card-description",children:(0,v.__)("Edit details such as title, price, description and more.","woocommerce")})]})}):null};var R=o(2098),M=o(4921);const $=window.wp.escapeHtml,F=({message:e,type:t})=>e?"general"===t?(0,p.jsxs)("span",{children:[(0,v.__)("The following error was returned","woocommerce"),(0,p.jsx)("br",{}),(0,p.jsx)("code",{children:(0,$.escapeHTML)(e)})]}):"api"===t?(0,p.jsxs)("span",{children:[(0,v.__)("The following error was returned from the API","woocommerce"),(0,p.jsx)("br",{}),(0,p.jsx)("code",{children:(0,$.escapeHTML)(e)})]}):e:(0,v.__)("An error has prevented the block from being updated.","woocommerce"),D=({error:e})=>(0,p.jsx)("div",{className:"wc-block-error-message",children:F(e)});o(3120);const z=({className:e="",error:t,isLoading:o=!1,onRetry:r})=>(0,p.jsxs)(d.Placeholder,{icon:(0,p.jsx)(s.A,{icon:R.A}),label:(0,v.__)("Sorry, an error occurred","woocommerce"),className:(0,M.A)("wc-block-api-error",e),children:[(0,p.jsx)(D,{error:t}),r&&(0,p.jsx)(p.Fragment,{children:o?(0,p.jsx)(d.Spinner,{}):(0,p.jsx)(d.Button,{variant:"secondary",onClick:r,children:(0,v.__)("Retry","woocommerce")})})]}),V=window.wc.data;var G=o(7143),H=o(2624),U=(o(7539),o(3993));function W(e,t,o){const r=new Set(t.map((e=>e[o])));return e.filter((e=>!r.has(e[o])))}var q=o(8537);const J={clear:(0,v.__)("Clear all selected items","woocommerce"),noItems:(0,v.__)("No items found.","woocommerce"),
/* Translators: %s search term */
noResults:(0,v.__)("No results for %s","woocommerce"),search:(0,v.__)("Search for items","woocommerce"),selected:e=>(0,v.sprintf)(/* translators: Number of items selected from list. */ /* translators: Number of items selected from list. */
(0,v._n)("%d item selected","%d items selected",e,"woocommerce"),e),updated:(0,v.__)("Search results updated.","woocommerce")},K=(e,t=e)=>{const o=e.reduce(((e,t)=>{const o=t.parent||0;return e[o]||(e[o]=[]),e[o].push(t),e}),{}),r=t.reduce(((e,t)=>(e[String(t.id)]=t,e)),{});const s=["0"],c=(e={})=>e.parent?[...c(r[e.parent]),e.name]:e.name?[e.name]:[],n=e=>e.map((e=>{const t=o[e.id];return s.push(""+e.id),{...e,breadcrumbs:c(r[e.parent]),children:t&&t.length?n(t):[]}})),i=n(o[0]||[]);return Object.entries(o).forEach((([e,t])=>{s.includes(e)||i.push(...n(t||[]))})),i},X=(e,t)=>{if(!t)return e;const o=new RegExp(`(${t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")})`,"ig");return e.split(o).map(((e,t)=>o.test(e)?(0,p.jsx)("strong",{children:e},t):(0,p.jsx)(i.Fragment,{children:e},t)))},Q=({label:e})=>(0,p.jsx)("span",{className:"woocommerce-search-list__item-count",children:e}),Y=e=>{const{item:t,search:o}=e,r=t.breadcrumbs&&t.breadcrumbs.length;return(0,p.jsxs)("span",{className:"woocommerce-search-list__item-label",children:[r?(0,p.jsx)("span",{className:"woocommerce-search-list__item-prefix",children:(s=t.breadcrumbs,1===s.length?s.slice(0,1).toString():2===s.length?s.slice(0,1).toString()+" âº "+s.slice(-1).toString():s.slice(0,1).toString()+" â¦ "+s.slice(-1).toString())}):null,(0,p.jsx)("span",{className:"woocommerce-search-list__item-name",children:X((0,q.decodeEntities)(t.name),o)})]});var s},Z=({countLabel:e,className:t,depth:o=0,controlId:r="",item:s,isSelected:c,isSingle:n,onSelect:a,search:l="",selected:m,useExpandedPanelId:u,...h})=>{const[g,w]=u,b=null!=e&&void 0!==s.count&&null!==s.count,x=!!s.breadcrumbs?.length,_=!!s.children?.length,v=g===s.id,k=(0,M.A)(["woocommerce-search-list__item",`depth-${o}`,t],{"has-breadcrumbs":x,"has-children":_,"has-count":b,"is-expanded":v,"is-radio-button":n});(0,i.useEffect)((()=>{_&&c&&w(s.id)}),[s,_,c,w]);const f=h.name||`search-list-item-${r}`,j=`${f}-${s.id}`,y=(0,i.useCallback)((()=>{w(v?-1:Number(s.id))}),[v,s.id,w]);return _?(0,p.jsx)("div",{className:k,onClick:y,onKeyDown:e=>"Enter"===e.key||" "===e.key?y():null,role:"treeitem",tabIndex:0,children:n?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("input",{type:"radio",id:j,name:f,value:s.value,onChange:a(s),onClick:e=>e.stopPropagation(),checked:c,className:"woocommerce-search-list__item-input",...h}),(0,p.jsx)(Y,{item:s,search:l}),b?(0,p.jsx)(Q,{label:e||s.count}):null]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(d.CheckboxControl,{className:"woocommerce-search-list__item-input",checked:c,...!c&&s.children.some((e=>m.find((t=>t.id===e.id))))?{indeterminate:!0}:{},label:X((0,q.decodeEntities)(s.name),l),onChange:()=>{c?a(W(m,s.children,"id"))():a(function(e,t){const o=W(t,e,"id");return[...e,...o]}(m,s.children))()},onClick:e=>e.stopPropagation()}),b?(0,p.jsx)(Q,{label:e||s.count}):null]})}):(0,p.jsxs)("label",{htmlFor:j,className:k,children:[n?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("input",{...h,type:"radio",id:j,name:f,value:s.value,onChange:a(s),checked:c,className:"woocommerce-search-list__item-input"}),(0,p.jsx)(Y,{item:s,search:l})]}):(0,p.jsx)(d.CheckboxControl,{...h,id:j,name:f,className:"woocommerce-search-list__item-input",value:(0,q.decodeEntities)(s.value),label:X((0,q.decodeEntities)(s.name),l),onChange:a(s),checked:c}),b?(0,p.jsx)(Q,{label:e||s.count}):null]})},ee=Z;var te=o(3028);o(5022);const oe=({id:e,label:t,popoverContents:o,remove:r,screenReaderLabel:c,className:n=""})=>{const[a,l]=(0,i.useState)(!1),m=(0,k.useInstanceId)(oe);if(c=c||t,!t)return null;t=(0,q.decodeEntities)(t);const u=(0,M.A)("woocommerce-tag",n,{"has-remove":!!r}),h=`woocommerce-tag__label-${m}`,g=(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("span",{className:"screen-reader-text",children:c}),(0,p.jsx)("span",{"aria-hidden":"true",children:t})]});return(0,p.jsxs)("span",{className:u,children:[o?(0,p.jsx)(d.Button,{className:"woocommerce-tag__text",id:h,onClick:()=>l(!0),children:g}):(0,p.jsx)("span",{className:"woocommerce-tag__text",id:h,children:g}),o&&a&&(0,p.jsx)(d.Popover,{onClose:()=>l(!1),children:o}),r&&(0,p.jsx)(d.Button,{className:"woocommerce-tag__remove",onClick:r(e),label:(0,v.sprintf)(
// Translators: %s label.
// Translators: %s label.
(0,v.__)("Remove %s","woocommerce"),t),"aria-describedby":h,children:(0,p.jsx)(s.A,{icon:te.A,size:20,className:"clear-icon",role:"img"})})]})},re=oe;o(1939);const se=e=>(0,p.jsx)(ee,{...e}),ce=e=>{const{list:t,selected:o,renderItem:r,depth:s=0,onSelect:c,instanceId:n,isSingle:a,search:l,useExpandedPanelId:d}=e,[m]=d;return t?(0,p.jsx)(p.Fragment,{children:t.map((t=>{const u=t.children?.length&&!a?t.children.every((({id:e})=>o.find((t=>t.id===e)))):!!o.find((({id:e})=>e===t.id)),h=t.children?.length&&m===t.id;return(0,p.jsxs)(i.Fragment,{children:[(0,p.jsx)("li",{children:r({item:t,isSelected:u,onSelect:c,isSingle:a,selected:o,search:l,depth:s,useExpandedPanelId:d,controlId:n})}),h?(0,p.jsx)(ce,{...e,list:t.children,depth:s+1}):null]},t.id)}))}):null},ne=({isLoading:e,isSingle:t,selected:o,messages:r,onChange:s,onRemove:c})=>{if(e||t||!o)return null;const n=o.length;return(0,p.jsxs)("div",{className:"woocommerce-search-list__selected",children:[(0,p.jsxs)("div",{className:"woocommerce-search-list__selected-header",children:[(0,p.jsx)("strong",{children:r.selected(n)}),n>0?(0,p.jsx)(d.Button,{variant:"link",isDestructive:!0,onClick:()=>s([]),"aria-label":r.clear,children:(0,v.__)("Clear all","woocommerce")}):null]}),n>0?(0,p.jsx)("ul",{children:o.map(((e,t)=>(0,p.jsx)("li",{children:(0,p.jsx)(re,{label:e.name,id:e.id,remove:c})},t)))}):null]})},ie=({filteredList:e,search:t,onSelect:o,instanceId:r,useExpandedPanelId:c,...n})=>{const{messages:i,renderItem:a,selected:l,isSingle:d}=n,m=a||se;return 0===e.length?(0,p.jsxs)("div",{className:"woocommerce-search-list__list is-not-found",children:[(0,p.jsx)("span",{className:"woocommerce-search-list__not-found-icon",children:(0,p.jsx)(s.A,{icon:H.A,role:"img"})}),(0,p.jsx)("span",{className:"woocommerce-search-list__not-found-text",children:t?(0,v.sprintf)(i.noResults,t):i.noItems})]}):(0,p.jsx)("ul",{className:"woocommerce-search-list__list",children:(0,p.jsx)(ce,{useExpandedPanelId:c,list:e,selected:l,renderItem:m,onSelect:o,instanceId:r,isSingle:d,search:t})})},ae=e=>{const{className:t="",isCompact:o,isHierarchical:r,isLoading:s,isSingle:c,list:n,messages:a=J,onChange:l,onSearch:m,selected:u,type:h="text",debouncedSpeak:g}=e,[w,b]=(0,i.useState)(""),x=(0,i.useState)(-1),_=(0,k.useInstanceId)(ae),f=(0,i.useMemo)((()=>({...J,...a})),[a]),j=(0,i.useMemo)((()=>((e,t,o)=>{if(!t)return o?K(e):e;const r=new RegExp(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"i"),s=e.map((e=>!!r.test(e.name)&&e)).filter(Boolean);return o?K(s,e):s})(n,w,r)),[n,w,r]);(0,i.useEffect)((()=>{g&&g(f.updated)}),[g,f]),(0,i.useEffect)((()=>{"function"==typeof m&&m(w)}),[w,m]);const y=(0,i.useCallback)((e=>()=>{c&&l([]);const t=u.findIndex((({id:t})=>t===e));l([...u.slice(0,t),...u.slice(t+1)])}),[c,u,l]),S=(0,i.useCallback)((e=>()=>{Array.isArray(e)?l(e):-1===u.findIndex((({id:t})=>t===e.id))?l(c?[e]:[...u,e]):y(e.id)()}),[c,y,l,u]),P=(0,i.useCallback)((e=>{const[t]=u.filter((t=>!e.find((e=>t.id===e.id))));y(t.id)()}),[y,u]);return(0,p.jsxs)("div",{className:(0,M.A)("woocommerce-search-list",t,{"is-compact":o,"is-loading":s,"is-token":"token"===h}),children:["text"===h&&(0,p.jsx)(ne,{...e,onRemove:y,messages:f}),(0,p.jsx)("div",{className:"woocommerce-search-list__search",children:"text"===h?(0,p.jsx)(d.TextControl,{label:f.search,type:"search",value:w,onChange:e=>b(e)}):(0,p.jsx)(d.FormTokenField,{disabled:s,label:f.search,onChange:P,onInputChange:e=>b(e),suggestions:[],__experimentalValidateInput:()=>!1,value:s?[(0,v.__)("Loadingâ¦","woocommerce")]:u.map((e=>({...e,value:e.name}))),__experimentalShowHowTo:!1})}),s?(0,p.jsx)("div",{className:"woocommerce-search-list__list",children:(0,p.jsx)(d.Spinner,{})}):(0,p.jsx)(ie,{...e,search:w,filteredList:j,messages:f,onSelect:S,instanceId:_,useExpandedPanelId:x})]})},le=((0,d.withSpokenMessages)(ae),e=>t=>{let{selected:o}=t;o=void 0===o?null:o;const r=null===o;return Array.isArray(o)?(0,p.jsx)(e,{...t}):(0,p.jsx)(e,{...t,selected:r?[]:[o]})});var de=o(4347);var me=o(923),ue=o.n(me);const pe=(0,k.createHigherOrderComponent)((e=>{class t extends i.Component{state={error:null,loading:!1,variations:{}};componentDidMount(){const{selected:e,showVariations:t}=this.props;e&&t&&this.loadVariations()}componentDidUpdate(e){const{isLoading:t,selected:o,showVariations:r}=this.props;r&&(!ue()(e.selected,o)||e.isLoading&&!t)&&this.loadVariations()}loadVariations=()=>{const{products:e}=this.props,{loading:t,variations:o}=this.state;if(t)return;const r=this.getExpandedProduct();if(!r||o[r])return;const s=e.find((e=>e.id===r));var c;s?.variations&&0!==s.variations.length?(this.setState({loading:!0}),(c=r,y()({path:(0,f.addQueryArgs)("wc/store/v1/products",{per_page:0,type:"variation",parent:c})})).then((e=>{const t=e.map((e=>({...e,parent:r})));this.setState({variations:{...this.state.variations,[r]:t},loading:!1,error:null})})).catch((async e=>{const t=await E(e);this.setState({variations:{...this.state.variations,[r]:null},loading:!1,error:t})}))):this.setState({variations:{...this.state.variations,[r]:null},loading:!1,error:null})};isProductId(e){const{products:t}=this.props;return t.some((t=>t.id===e))}findParentProduct(e){const{products:t}=this.props,o=t.filter((t=>t.variations&&t.variations.find((({id:t})=>t===e))));return o[0]?.id}getExpandedProduct(){const{isLoading:e,selected:t,showVariations:o}=this.props;if(!o)return null;let r=t&&t.length?t[0]:null;return r?this.prevSelectedItem=r:!this.prevSelectedItem||e||this.isProductId(this.prevSelectedItem)||(r=this.prevSelectedItem),!e&&r?this.isProductId(r)?r:this.findParentProduct(r):null}render(){const{error:t,isLoading:o}=this.props,{error:r,loading:s,variations:c}=this.state;return(0,p.jsx)(e,{...this.props,error:r||t,expandedProduct:this.getExpandedProduct(),isLoading:o,variations:c,variationsLoading:s})}}return t}),"withProductVariations"),he=e=>{const{id:t,name:o,parent:r}=e;return{id:t,name:o,parent:r,breadcrumbs:[],children:[],details:e,value:e.slug}};var ge=o(1609);const we=({className:e,item:t,isSelected:o,isLoading:r,onSelect:s,disabled:c,...n})=>(0,p.jsxs)(p.Fragment,{children:[(0,ge.createElement)(Z,{...n,key:t.id,className:e,isSelected:o,item:t,onSelect:s,disabled:c}),o&&r&&(0,p.jsx)("div",{className:(0,M.A)("woocommerce-search-list__item","woocommerce-product-attributes__item","depth-1","is-loading","is-not-active"),children:(0,p.jsx)(d.Spinner,{})},"loading")]});o(5653);const be={list:(0,v.__)("Products","woocommerce"),noItems:(0,v.__)("Your store doesn't have any products.","woocommerce"),search:(0,v.__)("Search for a product to display","woocommerce"),updated:(0,v.__)("Product search results updated.","woocommerce")},xe=le((ke=pe((0,k.withInstanceId)((e=>{const{expandedProduct:t=null,error:o,instanceId:r,isCompact:s=!1,isLoading:c,onChange:n,onSearch:i,products:a,renderItem:l,selected:d=[],showVariations:m=!1,variations:u,variationsLoading:h}=e;if(o)return(0,p.jsx)(D,{error:o});const g=[...a,...u&&t&&u[t]?u[t]:[]].map(he);return(0,p.jsx)(ae,{className:"woocommerce-products",list:g,isCompact:s,isLoading:c,isSingle:!0,selected:g.filter((({id:e})=>d.includes(Number(e)))),onChange:n,renderItem:l||(m?e=>{const{item:t,search:o,depth:s=0,isSelected:n,onSelect:i}=e,a=t.details?.variations&&Array.isArray(t.details.variations)?t.details.variations.length:0,l=(0,M.A)("woocommerce-search-product__item","woocommerce-search-list__item",`depth-${s}`,"has-count",{"is-searching":o.length>0,"is-skip-level":0===s&&0!==t.parent,"is-variable":a>0});if(!t.breadcrumbs.length){const o=t.details?.variations&&t.details.variations.length>0;return(0,p.jsx)(we,{...e,className:(0,M.A)(l,{"is-selected":n}),isSelected:n,item:t,onSelect:()=>()=>{i(t)()},isLoading:c||h,countLabel:o?(0,v.sprintf)(/* translators: %1$d is the number of variations of a product product. */ /* translators: %1$d is the number of variations of a product product. */
(0,v.__)("%1$d variations","woocommerce"),t.details?.variations.length):null,name:`products-${r}`,"aria-label":o?(0,v.sprintf)(/* translators: %1$s is the product name, %2$d is the number of variations of that product. */ /* translators: %1$s is the product name, %2$d is the number of variations of that product. */
(0,v._n)("%1$s, has %2$d variation","%1$s, has %2$d variations",t.details?.variations?.length,"woocommerce"),t.name,t.details?.variations.length):void 0})}const d=(0,U.isEmpty)(t.details?.variation)?e:{...e,item:{...e.item,name:t.details?.variation},"aria-label":`${t.breadcrumbs[0]}: ${t.details?.variation}`};return(0,p.jsx)(Z,{...d,className:l,name:`variations-${r}`})}:void 0),onSearch:i,messages:{...be,...e.messages},isHierarchical:!0})}))),({selected:e,...t})=>{const[o,r]=(0,i.useState)(!0),[s,c]=(0,i.useState)(null),[n,l]=(0,i.useState)([]),d=a.r7.productCount>100,m=async e=>{const t=await E(e);c(t),r(!1)},u=(0,i.useRef)(e);(0,i.useEffect)((()=>{P({selected:u.current}).then((e=>{l(e),r(!1)})).catch(m)}),[u]);const h=(0,de.YQ)((t=>{P({selected:e,search:t}).then((e=>{l(e),r(!1)})).catch(m)}),400),g=(0,i.useCallback)((e=>{r(!0),h(e)}),[r,h]);return(0,p.jsx)(ke,{...t,selected:e,error:s,products:n,isLoading:o,onSearch:d?g:null})})),_e=({attributes:e,setAttributes:t,onChange:o})=>(0,p.jsx)(xe,{selected:e.productId||0,showVariations:!0,onChange:(e=[])=>{const r=e[0]?e[0].id:0;t({productId:r}),o&&o()}}),ve=({isEditing:e,setIsEditing:t})=>(0,p.jsx)(O.BlockControls,{children:(0,p.jsx)(d.ToolbarGroup,{controls:[{icon:"edit",title:(0,v.__)("Edit selected product","woocommerce"),onClick:()=>t(!e),isActive:e}]})});var ke,fe=o(1465);const je=({isLoading:e,product:t,clientId:o})=>{const s=".wc-block-editor-single-product .wc-block-editor-layout",{replaceInnerBlocks:c}=(0,G.useDispatch)("core/block-editor"),n=(0,i.useCallback)((()=>{c(o,(0,r.createBlocksFromInnerBlocksTemplate)(b),!1)}),[o,c]);return(0,p.jsx)(T.InnerBlockLayoutContextProvider,{parentName:l.name,parentClassName:s,children:(0,p.jsxs)(T.ProductDataContextProvider,{product:t,isLoading:e,children:[(0,p.jsx)(O.InspectorControls,{children:(0,p.jsx)(d.PanelBody,{title:(0,v.__)("Layout","woocommerce"),initialOpen:!0,children:(0,p.jsx)(d.Button,{label:(0,v.__)("Reset layout to default","woocommerce"),onClick:n,variant:"tertiary",className:"wc-block-editor-single-product__reset-layout",icon:fe.A,children:(0,v.__)("Reset layout","woocommerce")})})}),(0,p.jsx)("div",{className:s,children:(0,p.jsx)(O.BlockContextProvider,{value:{postId:t?.id,postType:"product"},children:(0,p.jsx)(O.InnerBlocks,{template:b,allowedBlocks:x,templateLock:!1})})})]})})},ye=N((({attributes:e,setAttributes:t,error:o,getProduct:r,product:c,isLoading:n,clientId:a})=>{const{productId:m,isPreview:u}=e,[h,g]=(0,i.useState)(!m),b=(0,O.useBlockProps)(),x=(0,G.useSelect)((e=>e("core/blocks").getBlockType(l.name)),[]),_=(0,G.useSelect)((e=>u?e(V.PRODUCTS_STORE_NAME).getProducts({per_page:1}):null)),k="object"==typeof o&&"woocommerce_rest_product_invalid_id"===o?.code;if((0,i.useEffect)((()=>{const o=_?_[0]?.id:null;o&&!m&&(t({...e,productId:o}),g(!1))}),[e,m,_,t]),(0,i.useEffect)((()=>{k&&!h&&g(!0)}),[k]),o&&!k)return(0,p.jsx)(z,{className:"wc-block-editor-single-product-error",error:o,isLoading:n,onRetry:r});const f=k?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(s.A,{icon:H.A,className:"wc-block-editor-single-product__info-icon"}),(0,p.jsx)(d.__experimentalText,{children:(0,v.__)("Previously selected product is no longer available.","woocommerce")})]}):(0,p.jsx)(d.__experimentalText,{children:x.description}),j=k?()=>g(!1):void 0;return(0,p.jsx)("div",{...b,children:(0,p.jsxs)(A,{header:(0,v.__)("Single Product Block Error","woocommerce"),children:[(0,p.jsx)(ve,{setIsEditing:g,isEditing:h}),h?(0,p.jsxs)(d.Placeholder,{icon:w,label:x.title,className:"wc-block-editor-single-product",children:[(0,p.jsxs)(d.__experimentalHStack,{alignment:"center",children:[" ",f," "]}),(0,p.jsxs)("div",{className:"wc-block-editor-single-product__selection",children:[(0,p.jsx)(_e,{attributes:e,setAttributes:t,onChange:j}),!k&&(0,p.jsx)(d.Button,{variant:"secondary",onClick:()=>{g(!1)},children:(0,v.__)("Done","woocommerce")})]})]}):(0,p.jsxs)("div",{children:[(0,p.jsx)(O.InspectorControls,{children:(0,p.jsx)(d.PanelBody,{title:(0,v.__)("Product","woocommerce"),initialOpen:!1,children:(0,p.jsx)(_e,{attributes:e,setAttributes:t})})}),(0,p.jsx)(L,{productId:m}),(0,p.jsx)(je,{clientId:a,product:c,isLoading:n})]})]})})})),Se=[{attributes:l.attributes,supports:l.supports,save:()=>{const e=O.useBlockProps.save();return(0,p.jsx)("div",{...e,children:(0,p.jsx)(O.InnerBlocks.Content,{})})}}];(0,r.registerBlockType)(l,{icon:w,edit:ye,save:()=>{const e=O.useBlockProps.save({className:"woocommerce"});return(0,p.jsx)("div",{...e,children:(0,p.jsx)(O.InnerBlocks.Content,{})})},deprecated:Se})},6070:(e,t,o)=>{"use strict";o.d(t,{Hw:()=>p,Vo:()=>i,XK:()=>n,iI:()=>m,r7:()=>s,sW:()=>c});var r=o(5703);const s=(0,r.getSetting)("wcBlocksConfig",{pluginUrl:"",productCount:0,defaultAvatar:"",restApiRoutes:{},wordCountType:"words"}),c=s.pluginUrl+"assets/images/",n=s.pluginUrl+"assets/client/blocks/",i=(r.STORE_PAGES.shop,r.STORE_PAGES.checkout,r.STORE_PAGES.checkout,r.STORE_PAGES.privacy,r.STORE_PAGES.privacy,r.STORE_PAGES.terms,r.STORE_PAGES.terms,r.STORE_PAGES.cart,r.STORE_PAGES.cart?.permalink),a=(r.STORE_PAGES.myaccount?.permalink?r.STORE_PAGES.myaccount.permalink:(0,r.getSetting)("wpLoginUrl","/wp-login.php"),(0,r.getSetting)("localPickupEnabled",!1),(0,r.getSetting)("shippingMethodsExist",!1),(0,r.getSetting)("shippingEnabled",!0),(0,r.getSetting)("countries",{})),l=(0,r.getSetting)("countryData",{}),d={...Object.fromEntries(Object.keys(l).filter((e=>!0===l[e].allowBilling)).map((e=>[e,a[e]||""]))),...Object.fromEntries(Object.keys(l).filter((e=>!0===l[e].allowShipping)).map((e=>[e,a[e]||""])))},m=(Object.fromEntries(Object.keys(d).map((e=>[e,l[e].states||{}]))),Object.fromEntries(Object.keys(d).map((e=>[e,l[e].locale||{}])))),u={address:["first_name","last_name","company","address_1","address_2","city","postcode","country","state","phone"],contact:["email"],order:[]},p=(0,r.getSetting)("addressFieldsLocations",u).address;(0,r.getSetting)("addressFieldsLocations",u).contact,(0,r.getSetting)("addressFieldsLocations",u).order,(0,r.getSetting)("additionalOrderFields",{}),(0,r.getSetting)("additionalContactFields",{}),(0,r.getSetting)("additionalAddressFields",{})},8331:(e,t,o)=>{"use strict";o.d(t,{Hw:()=>r.Hw,Vo:()=>r.Vo,XK:()=>r.XK,iI:()=>r.iI,r7:()=>r.r7,sW:()=>r.sW});var r=o(6070)},5893:()=>{},7539:()=>{},3120:()=>{},5653:()=>{},1939:()=>{},5022:()=>{},1609:e=>{"use strict";e.exports=window.React},790:e=>{"use strict";e.exports=window.ReactJSXRuntime},4656:e=>{"use strict";e.exports=window.wc.blocksComponents},910:e=>{"use strict";e.exports=window.wc.priceFormat},7594:e=>{"use strict";e.exports=window.wc.wcBlocksData},415:e=>{"use strict";e.exports=window.wc.wcBlocksSharedContext},1616:e=>{"use strict";e.exports=window.wc.wcBlocksSharedHocs},5703:e=>{"use strict";e.exports=window.wc.wcSettings},3993:e=>{"use strict";e.exports=window.wc.wcTypes},6004:e=>{"use strict";e.exports=window.wp.autop},4715:e=>{"use strict";e.exports=window.wp.blockEditor},6427:e=>{"use strict";e.exports=window.wp.components},9491:e=>{"use strict";e.exports=window.wp.compose},7143:e=>{"use strict";e.exports=window.wp.data},6087:e=>{"use strict";e.exports=window.wp.element},2619:e=>{"use strict";e.exports=window.wp.hooks},8537:e=>{"use strict";e.exports=window.wp.htmlEntities},7723:e=>{"use strict";e.exports=window.wp.i18n},923:e=>{"use strict";e.exports=window.wp.isShallowEqual},5573:e=>{"use strict";e.exports=window.wp.primitives},9786:e=>{"use strict";e.exports=window.wp.styleEngine},9446:e=>{"use strict";e.exports=window.wp.wordcount},3925:e=>{"use strict";e.exports=JSON.parse('{"title":"Product Title","description":"Display the title of a product.","attributes":{"headingLevel":{"type":"number","default":2},"showProductLink":{"type":"boolean","default":true},"linkTarget":{"type":"string"},"productId":{"type":"number","default":0},"align":{"type":"string"}}}')}},n={};function i(e){var t=n[e];if(void 0!==t)return t.exports;var o=n[e]={exports:{}};return c[e].call(o.exports,o,o.exports,i),o.exports}i.m=c,e=[],i.O=(t,o,r,s)=>{if(!o){var c=1/0;for(d=0;d<e.length;d++){for(var[o,r,s]=e[d],n=!0,a=0;a<o.length;a++)(!1&s||c>=s)&&Object.keys(i.O).every((e=>i.O[e](o[a])))?o.splice(a--,1):(n=!1,s<c&&(c=s));if(n){e.splice(d--,1);var l=r();void 0!==l&&(t=l)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[o,r,s]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},o=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var s=Object.create(null);i.r(s);var c={};t=t||[null,o({}),o([]),o(o)];for(var n=2&r&&e;"object"==typeof n&&!~t.indexOf(n);n=o(n))Object.getOwnPropertyNames(n).forEach((t=>c[t]=()=>e[t]));return c.default=()=>e,i.d(s,c),s},i.d=(e,t)=>{for(var o in t)i.o(t,o)&&!i.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,o)=>(i.f[o](e,t),t)),[])),i.u=e=>({345:"product-stock-indicator",462:"product-rating",2105:"product-title",2388:"product-price",2724:"product-sku",3895:"product-summary",4232:"product-image",4442:"product-sale-badge",7409:"product-button",8553:"product-rating-counter",8578:"product-rating-stars",8647:"product-average-rating"}[e]+".js?ver="+{345:"df5124dfa21ae95f6b99",462:"02cc37a867f60254e361",2105:"d92c3a074be89ba952d1",2388:"4ab3eedb61b81ca7c883",2724:"68c6a5abd5b457353eed",3895:"c99871176d228931e1e3",4232:"8785fea747275064fc23",4442:"e8a10a172a750d04f107",7409:"c976ffceecc2244ed340",8553:"50f738006badde9aa053",8578:"b848aa5a3ddcb304776b",8647:"7c7c74fa303f8fca8df1"}[e]),i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r={},s="webpackWcBlocksMainJsonp:",i.l=(e,t,o,c)=>{if(r[e])r[e].push(t);else{var n,a;if(void 0!==o)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var m=l[d];if(m.getAttribute("src")==e||m.getAttribute("data-webpack")==s+o){n=m;break}}n||(a=!0,(n=document.createElement("script")).charset="utf-8",n.timeout=120,i.nc&&n.setAttribute("nonce",i.nc),n.setAttribute("data-webpack",s+o),n.src=e),r[e]=[t];var u=(t,o)=>{n.onerror=n.onload=null,clearTimeout(p);var s=r[e];if(delete r[e],n.parentNode&&n.parentNode.removeChild(n),s&&s.forEach((e=>e(o))),t)return t(o)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=u.bind(null,n.onerror),n.onload=u.bind(null,n.onload),a&&document.head.appendChild(n)}},i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.j=5065,(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var o=t.getElementsByTagName("script");if(o.length)for(var r=o.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=o[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),(()=>{var e={5065:0};i.f.j=(t,o)=>{var r=i.o(e,t)?e[t]:void 0;if(0!==r)if(r)o.push(r[2]);else{var s=new Promise(((o,s)=>r=e[t]=[o,s]));o.push(r[2]=s);var c=i.p+i.u(t),n=new Error;i.l(c,(o=>{if(i.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var s=o&&("load"===o.type?"missing":o.type),c=o&&o.target&&o.target.src;n.message="Loading chunk "+t+" failed.\n("+s+": "+c+")",n.name="ChunkLoadError",n.type=s,n.request=c,r[1](n)}}),"chunk-"+t,t)}},i.O.j=t=>0===e[t];var t=(t,o)=>{var r,s,[c,n,a]=o,l=0;if(c.some((t=>0!==e[t]))){for(r in n)i.o(n,r)&&(i.m[r]=n[r]);if(a)var d=a(i)}for(t&&t(o);l<c.length;l++)s=c[l],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return i.O(d)},o=globalThis.webpackChunkwebpackWcBlocksMainJsonp=globalThis.webpackChunkwebpackWcBlocksMainJsonp||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var a=i.O(void 0,[94],(()=>i(8723)));a=i.O(a),((this.wc=this.wc||{}).blocks=this.wc.blocks||{})["single-product"]=a})();
=======
(()=>{var e,t,r,o,n,c={3945:(e,t,r)=>{"use strict";r.d(t,{e:()=>o});let o=function(e){return e.SINGLE="single",e.THUMBNAIL="thumbnail",e}({})},586:(e,t,r)=>{"use strict";r.r(t);const o=window.wp.blocks;var n=r(1609),c=r(7104),s=r(2466);const a=window.wc.wcBlocksRegistry;var i=r(6087),l=r(2516);r.p=l.XK,(0,a.registerBlockComponent)({blockName:"woocommerce/product-price",component:(0,i.lazy)((()=>Promise.all([r.e(94),r.e(2388)]).then(r.bind(r,4431))))}),(0,a.registerBlockComponent)({blockName:"woocommerce/product-image",component:(0,i.lazy)((()=>Promise.all([r.e(94),r.e(4232)]).then(r.bind(r,2934))))}),(0,a.registerBlockComponent)({blockName:"woocommerce/product-title",component:(0,i.lazy)((()=>Promise.all([r.e(94),r.e(2105)]).then(r.bind(r,3303))))}),(0,a.registerBlockComponent)({blockName:"woocommerce/product-rating",component:(0,i.lazy)((()=>Promise.all([r.e(94),r.e(462)]).then(r.bind(r,9325))))}),(0,a.registerBlockComponent)({blockName:"woocommerce/product-rating-stars",component:(0,i.lazy)((()=>Promise.all([r.e(94),r.e(8578)]).then(r.bind(r,53))))}),(0,a.registerBlockComponent)({blockName:"woocommerce/product-rating-counter",component:(0,i.lazy)((()=>Promise.all([r.e(94),r.e(8553)]).then(r.bind(r,8494))))}),(0,a.registerBlockComponent)({blockName:"woocommerce/product-average-rating",component:(0,i.lazy)((()=>Promise.all([r.e(94),r.e(8647)]).then(r.bind(r,9075))))}),(0,a.registerBlockComponent)({blockName:"woocommerce/product-button",component:(0,i.lazy)((()=>Promise.all([r.e(94),r.e(7409)]).then(r.bind(r,1526))))}),(0,a.registerBlockComponent)({blockName:"woocommerce/product-summary",component:(0,i.lazy)((()=>Promise.all([r.e(94),r.e(3895)]).then(r.bind(r,3591))))}),(0,a.registerBlockComponent)({blockName:"woocommerce/product-sale-badge",component:(0,i.lazy)((()=>Promise.all([r.e(94),r.e(4442)]).then(r.bind(r,3905))))}),(0,a.registerBlockComponent)({blockName:"woocommerce/product-sku",component:(0,i.lazy)((()=>Promise.all([r.e(94),r.e(2724)]).then(r.bind(r,6511))))}),(0,a.registerBlockComponent)({blockName:"woocommerce/product-stock-indicator",component:(0,i.lazy)((()=>Promise.all([r.e(94),r.e(345)]).then(r.bind(r,5916))))});const d=JSON.parse('{"name":"woocommerce/single-product","version":"1.0.0","icon":"info","title":"Single Product","description":"Display a single product.","category":"woocommerce","keywords":["WooCommerce"],"supports":{"align":["wide","full"]},"attributes":{"isPreview":{"type":"boolean","default":false},"productId":{"type":"number"}},"example":{"attributes":{"isPreview":true}},"usesContext":["postId","postType","queryId"],"textdomain":"woocommerce","apiVersion":3,"$schema":"https://schemas.wp.org/trunk/block.json"}');var m=r(6427),u=r(7723),p=r(4478);const g=(0,u.__)("Product Title","woocommerce");(0,n.createElement)(c.A,{icon:p.A,className:"wc-block-editor-components-block-icon"});const h="woocommerce/product-query/product-title";!function(e,{blockDescription:t,blockIcon:r,blockTitle:n,variationName:c,scope:s}){(0,o.registerBlockVariation)(e,{description:t,name:c,title:n,isActive:e=>e.__woocommerceNamespace===c,icon:{src:r},attributes:{__woocommerceNamespace:c},scope:s})}("core/post-title",{blockDescription:(0,u.__)("Display the title of a product.","woocommerce"),blockIcon:(0,n.createElement)(m.Icon,{icon:p.A}),blockTitle:g,variationName:h,scope:["block"]});var w=r(3945);const b=(0,n.createElement)(c.A,{icon:s.A,className:"wc-block-editor-components-block-icon"}),v=[["core/columns",{},[["core/column",{},[["woocommerce/product-image",{showSaleBadge:!1,isDescendentOfSingleProductBlock:!0,imageSizing:w.e.SINGLE}]]],["core/column",{},[["core/post-title",{headingLevel:2,isLink:!0,__woocommerceNamespace:h}],["woocommerce/product-rating",{isDescendentOfSingleProductBlock:!0}],["woocommerce/product-price",{isDescendentOfSingleProductBlock:!0}],["woocommerce/product-summary",{isDescendentOfSingleProductBlock:!0}],["woocommerce/add-to-cart-form"],["woocommerce/product-meta"]]]]]],E=["core/columns","core/column","core/post-title","core/post-excerpt","woocommerce/add-to-cart-form","woocommerce/add-to-cart-with-options","woocommerce/product-meta","woocommerce/product-gallery",...Object.keys((_=d.name,(0,a.getRegisteredBlockComponents)(_)))];var _,k=r(2294),f=r(9491),y=r(3832);const S=window.wp.apiFetch;var P=r.n(S),N=r(5703);const C=({selected:e=[],search:t="",queryArgs:r={}})=>{const o=(({selected:e=[],search:t="",queryArgs:r={}})=>{const o=l.r7.productCount>100,n={per_page:o?100:0,catalog_visibility:"any",search:t,orderby:"title",order:"asc"},c=[(0,y.addQueryArgs)("/wc/store/v1/products",{...n,...r})];return o&&e.length&&c.push((0,y.addQueryArgs)("/wc/store/v1/products",{catalog_visibility:"any",include:e,per_page:0})),c})({selected:e,search:t,queryArgs:r});return Promise.all(o.map((e=>P()({path:e})))).then((e=>{const t=((e,t)=>{const r=new Map;return e.filter((e=>{const o=t(e);return!r.has(o)&&(r.set(o,e),!0)}))})(e.flat(),(e=>e.id));return t.map((e=>({...e,parent:0})))})).catch((e=>{throw e}))},x=async e=>{if(!("json"in e))return{code:e.code||"",message:e.message,type:e.type||"general"};try{const t=await e.json();return{code:t.code||"",message:t.message,type:t.type||"api"}}catch(e){return{message:e.message,type:"general"}}},I=(0,f.createHigherOrderComponent)((e=>class extends i.Component{constructor(...e){super(...e),(0,k.A)(this,"state",{error:null,loading:!1,product:"preview"===this.props.attributes.productId?this.props.attributes.previewProduct:null}),(0,k.A)(this,"loadProduct",(()=>{const{productId:e}=this.props.attributes;"preview"!==e&&(e?(this.setState({loading:!0}),(e=>P()({path:`/wc/store/v1/products/${e}`}))(e).then((e=>{this.setState({product:e,loading:!1,error:null})})).catch((async e=>{const t=await x(e);this.setState({product:null,loading:!1,error:t})}))):this.setState({product:null,loading:!1,error:null}))}))}componentDidMount(){this.loadProduct()}componentDidUpdate(e){e.attributes.productId!==this.props.attributes.productId&&this.loadProduct()}render(){const{error:t,loading:r,product:o}=this.state;return(0,n.createElement)(e,{...this.props,error:t,getProduct:this.loadProduct,isLoading:r,product:o})}}),"withProduct"),A=({imageUrl:e=`${l.sW}/block-error.svg`,header:t=(0,u.__)("Oops!","woocommerce"),text:r=(0,u.__)("There was an error loading the content.","woocommerce"),errorMessage:o,errorMessagePrefix:c=(0,u.__)("Error:","woocommerce"),button:s,showErrorBlock:a=!0})=>a?(0,n.createElement)("div",{className:"wc-block-error wc-block-components-error"},e&&(0,n.createElement)("img",{className:"wc-block-error__image wc-block-components-error__image",src:e,alt:""}),(0,n.createElement)("div",{className:"wc-block-error__content wc-block-components-error__content"},t&&(0,n.createElement)("p",{className:"wc-block-error__header wc-block-components-error__header"},t),r&&(0,n.createElement)("p",{className:"wc-block-error__text wc-block-components-error__text"},r),o&&(0,n.createElement)("p",{className:"wc-block-error__message wc-block-components-error__message"},c?c+" ":"",o),s&&(0,n.createElement)("p",{className:"wc-block-error__button wc-block-components-error__button"},s))):null;r(9407);class B extends i.Component{constructor(...e){super(...e),(0,k.A)(this,"state",{errorMessage:"",hasError:!1})}static getDerivedStateFromError(e){return void 0!==e.statusText&&void 0!==e.status?{errorMessage:(0,n.createElement)(n.Fragment,null,(0,n.createElement)("strong",null,e.status),":Â ",e.statusText),hasError:!0}:{errorMessage:e.message,hasError:!0}}render(){const{header:e,imageUrl:t,showErrorMessage:r=!0,showErrorBlock:o=!0,text:c,errorMessagePrefix:s,renderError:a,button:i}=this.props,{errorMessage:l,hasError:d}=this.state;return d?"function"==typeof a?a({errorMessage:l}):(0,n.createElement)(A,{showErrorBlock:o,errorMessage:r?l:null,header:e,imageUrl:t,text:c,errorMessagePrefix:s,button:i}):this.props.children}}const O=B;var T=r(4133),L=r(4715),j=r(2796);const R=e=>{const t=((0,j.useProductDataContext)().product||{}).id||e.productId||0;return t&&1!==t?(0,n.createElement)(L.InspectorControls,null,(0,n.createElement)("div",{className:"wc-block-single-product__edit-card"},(0,n.createElement)("div",{className:"wc-block-single-product__edit-card-title"},(0,n.createElement)("a",{href:`${N.ADMIN_URL}post.php?post=${t}&action=edit`,target:"_blank",rel:"noopener noreferrer"},(0,u.__)("Edit this product's details","woocommerce"),(0,n.createElement)(c.A,{icon:T.A,size:16}))),(0,n.createElement)("div",{className:"wc-block-single-product__edit-card-description"},(0,u.__)("Edit details such as title, price, description and more.","woocommerce")))):null};var M=r(3588),$=r(851);const F=window.wp.escapeHtml,D=({error:e})=>(0,n.createElement)("div",{className:"wc-block-error-message"},(({message:e,type:t})=>e?"general"===t?(0,n.createElement)("span",null,(0,u.__)("The following error was returned","woocommerce"),(0,n.createElement)("br",null),(0,n.createElement)("code",null,(0,F.escapeHTML)(e))):"api"===t?(0,n.createElement)("span",null,(0,u.__)("The following error was returned from the API","woocommerce"),(0,n.createElement)("br",null),(0,n.createElement)("code",null,(0,F.escapeHTML)(e))):e:(0,u.__)("An error has prevented the block from being updated.","woocommerce"))(e));r(4974);const z=({className:e="",error:t,isLoading:r=!1,onRetry:o})=>(0,n.createElement)(m.Placeholder,{icon:(0,n.createElement)(c.A,{icon:M.A}),label:(0,u.__)("Sorry, an error occurred","woocommerce"),className:(0,$.A)("wc-block-api-error",e)},(0,n.createElement)(D,{error:t}),o&&(0,n.createElement)(n.Fragment,null,r?(0,n.createElement)(m.Spinner,null):(0,n.createElement)(m.Button,{variant:"secondary",onClick:o},(0,u.__)("Retry","woocommerce")))),V=window.wc.data;var G=r(7143),H=r(2478),U=(r(8625),r(3993));function W(e,t,r){const o=new Set(t.map((e=>e[r])));return e.filter((e=>!o.has(e[r])))}var q=r(8537);const K={clear:(0,u.__)("Clear all selected items","woocommerce"),noItems:(0,u.__)("No items found.","woocommerce"),
/* Translators: %s search term */
noResults:(0,u.__)("No results for %s","woocommerce"),search:(0,u.__)("Search for items","woocommerce"),selected:e=>(0,u.sprintf)(/* translators: Number of items selected from list. */ /* translators: Number of items selected from list. */
(0,u._n)("%d item selected","%d items selected",e,"woocommerce"),e),updated:(0,u.__)("Search results updated.","woocommerce")},J=(e,t=e)=>{const r=e.reduce(((e,t)=>{const r=t.parent||0;return e[r]||(e[r]=[]),e[r].push(t),e}),{}),o=t.reduce(((e,t)=>(e[String(t.id)]=t,e)),{});const n=["0"],c=(e={})=>e.parent?[...c(o[e.parent]),e.name]:e.name?[e.name]:[],s=e=>e.map((e=>{const t=r[e.id];return n.push(""+e.id),{...e,breadcrumbs:c(o[e.parent]),children:t&&t.length?s(t):[]}})),a=s(r[0]||[]);return Object.entries(r).forEach((([e,t])=>{n.includes(e)||a.push(...s(t||[]))})),a},Q=(e,t)=>{if(!t)return e;const r=new RegExp(`(${t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")})`,"ig");return e.split(r).map(((e,t)=>r.test(e)?(0,n.createElement)("strong",{key:t},e):(0,n.createElement)(i.Fragment,{key:t},e)))},X=({label:e})=>(0,n.createElement)("span",{className:"woocommerce-search-list__item-count"},e),Y=e=>{const{item:t,search:r}=e,o=t.breadcrumbs&&t.breadcrumbs.length;return(0,n.createElement)("span",{className:"woocommerce-search-list__item-label"},o?(0,n.createElement)("span",{className:"woocommerce-search-list__item-prefix"},1===(c=t.breadcrumbs).length?c.slice(0,1).toString():2===c.length?c.slice(0,1).toString()+" âº "+c.slice(-1).toString():c.slice(0,1).toString()+" â¦ "+c.slice(-1).toString()):null,(0,n.createElement)("span",{className:"woocommerce-search-list__item-name"},Q((0,q.decodeEntities)(t.name),r)));var c},Z=({countLabel:e,className:t,depth:r=0,controlId:o="",item:c,isSelected:s,isSingle:a,onSelect:l,search:d="",selected:u,useExpandedPanelId:p,...g})=>{var h,w;const[b,v]=p,E=null!=e&&void 0!==c.count&&null!==c.count,_=!(null===(h=c.breadcrumbs)||void 0===h||!h.length),k=!(null===(w=c.children)||void 0===w||!w.length),f=b===c.id,y=(0,$.A)(["woocommerce-search-list__item",`depth-${r}`,t],{"has-breadcrumbs":_,"has-children":k,"has-count":E,"is-expanded":f,"is-radio-button":a});(0,i.useEffect)((()=>{k&&s&&v(c.id)}),[c,k,s,v]);const S=g.name||`search-list-item-${o}`,P=`${S}-${c.id}`,N=(0,i.useCallback)((()=>{v(f?-1:Number(c.id))}),[f,c.id,v]);return k?(0,n.createElement)("div",{className:y,onClick:N,onKeyDown:e=>"Enter"===e.key||" "===e.key?N():null,role:"treeitem",tabIndex:0},a?(0,n.createElement)(n.Fragment,null,(0,n.createElement)("input",{type:"radio",id:P,name:S,value:c.value,onChange:l(c),onClick:e=>e.stopPropagation(),checked:s,className:"woocommerce-search-list__item-input",...g}),(0,n.createElement)(Y,{item:c,search:d}),E?(0,n.createElement)(X,{label:e||c.count}):null):(0,n.createElement)(n.Fragment,null,(0,n.createElement)(m.CheckboxControl,{className:"woocommerce-search-list__item-input",checked:s,...!s&&c.children.some((e=>u.find((t=>t.id===e.id))))?{indeterminate:!0}:{},label:Q((0,q.decodeEntities)(c.name),d),onChange:()=>{s?l(W(u,c.children,"id"))():l(function(e,t){const r=W(t,e,"id");return[...e,...r]}(u,c.children))()},onClick:e=>e.stopPropagation()}),E?(0,n.createElement)(X,{label:e||c.count}):null)):(0,n.createElement)("label",{htmlFor:P,className:y},a?(0,n.createElement)(n.Fragment,null,(0,n.createElement)("input",{...g,type:"radio",id:P,name:S,value:c.value,onChange:l(c),checked:s,className:"woocommerce-search-list__item-input"}),(0,n.createElement)(Y,{item:c,search:d})):(0,n.createElement)(m.CheckboxControl,{...g,id:P,name:S,className:"woocommerce-search-list__item-input",value:(0,q.decodeEntities)(c.value),label:Q((0,q.decodeEntities)(c.name),d),onChange:l(c),checked:s}),E?(0,n.createElement)(X,{label:e||c.count}):null)},ee=Z;var te=r(2370);r(6636);const re=({id:e,label:t,popoverContents:r,remove:o,screenReaderLabel:s,className:a=""})=>{const[l,d]=(0,i.useState)(!1),p=(0,f.useInstanceId)(re);if(s=s||t,!t)return null;t=(0,q.decodeEntities)(t);const g=(0,$.A)("woocommerce-tag",a,{"has-remove":!!o}),h=`woocommerce-tag__label-${p}`,w=(0,n.createElement)(n.Fragment,null,(0,n.createElement)("span",{className:"screen-reader-text"},s),(0,n.createElement)("span",{"aria-hidden":"true"},t));return(0,n.createElement)("span",{className:g},r?(0,n.createElement)(m.Button,{className:"woocommerce-tag__text",id:h,onClick:()=>d(!0)},w):(0,n.createElement)("span",{className:"woocommerce-tag__text",id:h},w),r&&l&&(0,n.createElement)(m.Popover,{onClose:()=>d(!1)},r),o&&(0,n.createElement)(m.Button,{className:"woocommerce-tag__remove",onClick:o(e),label:(0,u.sprintf)(
// Translators: %s label.
// Translators: %s label.
(0,u.__)("Remove %s","woocommerce"),t),"aria-describedby":h},(0,n.createElement)(c.A,{icon:te.A,size:20,className:"clear-icon",role:"img"})))},oe=re;r(8137);const ne=e=>(0,n.createElement)(ee,{...e}),ce=e=>{const{list:t,selected:r,renderItem:o,depth:c=0,onSelect:s,instanceId:a,isSingle:l,search:d,useExpandedPanelId:m}=e,[u]=m;return t?(0,n.createElement)(i.Fragment,null,t.map((t=>{var p,g;const h=null!==(p=t.children)&&void 0!==p&&p.length&&!l?t.children.every((({id:e})=>r.find((t=>t.id===e)))):!!r.find((({id:e})=>e===t.id)),w=(null===(g=t.children)||void 0===g?void 0:g.length)&&u===t.id;return(0,n.createElement)(i.Fragment,{key:t.id},(0,n.createElement)("li",null,o({item:t,isSelected:h,onSelect:s,isSingle:l,selected:r,search:d,depth:c,useExpandedPanelId:m,controlId:a})),w?(0,n.createElement)(ce,{...e,list:t.children,depth:c+1}):null)}))):null},se=({isLoading:e,isSingle:t,selected:r,messages:o,onChange:c,onRemove:s})=>{if(e||t||!r)return null;const a=r.length;return(0,n.createElement)("div",{className:"woocommerce-search-list__selected"},(0,n.createElement)("div",{className:"woocommerce-search-list__selected-header"},(0,n.createElement)("strong",null,o.selected(a)),a>0?(0,n.createElement)(m.Button,{variant:"link",isDestructive:!0,onClick:()=>c([]),"aria-label":o.clear},(0,u.__)("Clear all","woocommerce")):null),a>0?(0,n.createElement)("ul",null,r.map(((e,t)=>(0,n.createElement)("li",{key:t},(0,n.createElement)(oe,{label:e.name,id:e.id,remove:s}))))):null)},ae=({filteredList:e,search:t,onSelect:r,instanceId:o,useExpandedPanelId:s,...a})=>{const{messages:i,renderItem:l,selected:d,isSingle:m}=a,p=l||ne;return 0===e.length?(0,n.createElement)("div",{className:"woocommerce-search-list__list is-not-found"},(0,n.createElement)("span",{className:"woocommerce-search-list__not-found-icon"},(0,n.createElement)(c.A,{icon:H.A,role:"img"})),(0,n.createElement)("span",{className:"woocommerce-search-list__not-found-text"},t?(0,u.sprintf)(i.noResults,t):i.noItems)):(0,n.createElement)("ul",{className:"woocommerce-search-list__list"},(0,n.createElement)(ce,{useExpandedPanelId:s,list:e,selected:d,renderItem:p,onSelect:r,instanceId:o,isSingle:m,search:t}))},ie=e=>{const{className:t="",isCompact:r,isHierarchical:o,isLoading:c,isSingle:s,list:a,messages:l=K,onChange:d,onSearch:p,selected:g,type:h="text",debouncedSpeak:w}=e,[b,v]=(0,i.useState)(""),E=(0,i.useState)(-1),_=(0,f.useInstanceId)(ie),k=(0,i.useMemo)((()=>({...K,...l})),[l]),y=(0,i.useMemo)((()=>((e,t,r)=>{if(!t)return r?J(e):e;const o=new RegExp(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"i"),n=e.map((e=>!!o.test(e.name)&&e)).filter(Boolean);return r?J(n,e):n})(a,b,o)),[a,b,o]);(0,i.useEffect)((()=>{w&&w(k.updated)}),[w,k]),(0,i.useEffect)((()=>{"function"==typeof p&&p(b)}),[b,p]);const S=(0,i.useCallback)((e=>()=>{s&&d([]);const t=g.findIndex((({id:t})=>t===e));d([...g.slice(0,t),...g.slice(t+1)])}),[s,g,d]),P=(0,i.useCallback)((e=>()=>{Array.isArray(e)?d(e):-1===g.findIndex((({id:t})=>t===e.id))?d(s?[e]:[...g,e]):S(e.id)()}),[s,S,d,g]),N=(0,i.useCallback)((e=>{const[t]=g.filter((t=>!e.find((e=>t.id===e.id))));S(t.id)()}),[S,g]);return(0,n.createElement)("div",{className:(0,$.A)("woocommerce-search-list",t,{"is-compact":r,"is-loading":c,"is-token":"token"===h})},"text"===h&&(0,n.createElement)(se,{...e,onRemove:S,messages:k}),(0,n.createElement)("div",{className:"woocommerce-search-list__search"},"text"===h?(0,n.createElement)(m.TextControl,{label:k.search,type:"search",value:b,onChange:e=>v(e)}):(0,n.createElement)(m.FormTokenField,{disabled:c,label:k.search,onChange:N,onInputChange:e=>v(e),suggestions:[],__experimentalValidateInput:()=>!1,value:c?[(0,u.__)("Loadingâ¦","woocommerce")]:g.map((e=>({...e,value:e.name}))),__experimentalShowHowTo:!1})),c?(0,n.createElement)("div",{className:"woocommerce-search-list__list"},(0,n.createElement)(m.Spinner,null)):(0,n.createElement)(ae,{...e,search:b,filteredList:y,messages:k,onSelect:P,instanceId:_,useExpandedPanelId:E}))},le=((0,m.withSpokenMessages)(ie),e=>t=>{let{selected:r}=t;r=void 0===r?null:r;const o=null===r;return Array.isArray(r)?(0,n.createElement)(e,{...t}):(0,n.createElement)(e,{...t,selected:o?[]:[r]})});var de=r(4717);var me=r(923),ue=r.n(me);const pe=(0,f.createHigherOrderComponent)((e=>{class t extends i.Component{constructor(...e){super(...e),(0,k.A)(this,"state",{error:null,loading:!1,variations:{}}),(0,k.A)(this,"prevSelectedItem",void 0),(0,k.A)(this,"loadVariations",(()=>{const{products:e}=this.props,{loading:t,variations:r}=this.state;if(t)return;const o=this.getExpandedProduct();if(!o||r[o])return;const n=e.find((e=>e.id===o));var c;null!=n&&n.variations&&0!==n.variations.length?(this.setState({loading:!0}),(c=o,P()({path:(0,y.addQueryArgs)("wc/store/v1/products",{per_page:0,type:"variation",parent:c})})).then((e=>{const t=e.map((e=>({...e,parent:o})));this.setState({variations:{...this.state.variations,[o]:t},loading:!1,error:null})})).catch((async e=>{const t=await x(e);this.setState({variations:{...this.state.variations,[o]:null},loading:!1,error:t})}))):this.setState({variations:{...this.state.variations,[o]:null},loading:!1,error:null})}))}componentDidMount(){const{selected:e,showVariations:t}=this.props;e&&t&&this.loadVariations()}componentDidUpdate(e){const{isLoading:t,selected:r,showVariations:o}=this.props;o&&(!ue()(e.selected,r)||e.isLoading&&!t)&&this.loadVariations()}isProductId(e){const{products:t}=this.props;return t.some((t=>t.id===e))}findParentProduct(e){var t;const{products:r}=this.props;return null===(t=r.filter((t=>t.variations&&t.variations.find((({id:t})=>t===e))))[0])||void 0===t?void 0:t.id}getExpandedProduct(){const{isLoading:e,selected:t,showVariations:r}=this.props;if(!r)return null;let o=t&&t.length?t[0]:null;return o?this.prevSelectedItem=o:!this.prevSelectedItem||e||this.isProductId(this.prevSelectedItem)||(o=this.prevSelectedItem),!e&&o?this.isProductId(o)?o:this.findParentProduct(o):null}render(){const{error:t,isLoading:r}=this.props,{error:o,loading:c,variations:s}=this.state;return(0,n.createElement)(e,{...this.props,error:o||t,expandedProduct:this.getExpandedProduct(),isLoading:r,variations:s,variationsLoading:c})}}return t}),"withProductVariations"),ge=e=>{const{id:t,name:r,parent:o}=e;return{id:t,name:r,parent:o,breadcrumbs:[],children:[],details:e,value:e.slug}},he=({className:e,item:t,isSelected:r,isLoading:o,onSelect:c,disabled:s,...a})=>(0,n.createElement)(n.Fragment,null,(0,n.createElement)(Z,{...a,key:t.id,className:e,isSelected:r,item:t,onSelect:c,disabled:s}),r&&o&&(0,n.createElement)("div",{key:"loading",className:(0,$.A)("woocommerce-search-list__item","woocommerce-product-attributes__item","depth-1","is-loading","is-not-active")},(0,n.createElement)(m.Spinner,null)));r(7369);const we={list:(0,u.__)("Products","woocommerce"),noItems:(0,u.__)("Your store doesn't have any products.","woocommerce"),search:(0,u.__)("Search for a product to display","woocommerce"),updated:(0,u.__)("Product search results updated.","woocommerce")},be=le((_e=pe((0,f.withInstanceId)((e=>{const{expandedProduct:t=null,error:r,instanceId:o,isCompact:c=!1,isLoading:s,onChange:a,onSearch:i,products:l,renderItem:d,selected:m=[],showVariations:p=!1,variations:g,variationsLoading:h}=e;if(r)return(0,n.createElement)(D,{error:r});const w=[...l,...g&&t&&g[t]?g[t]:[]].map(ge);return(0,n.createElement)(ie,{className:"woocommerce-products",list:w,isCompact:c,isLoading:s,isSingle:!0,selected:w.filter((({id:e})=>m.includes(Number(e)))),onChange:a,renderItem:d||(p?e=>{var t,r,c,a;const{item:i,search:l,depth:d=0,isSelected:m,onSelect:p}=e,g=null!==(t=i.details)&&void 0!==t&&t.variations&&Array.isArray(i.details.variations)?i.details.variations.length:0,w=(0,$.A)("woocommerce-search-product__item","woocommerce-search-list__item",`depth-${d}`,"has-count",{"is-searching":l.length>0,"is-skip-level":0===d&&0!==i.parent,"is-variable":g>0});if(!i.breadcrumbs.length){var b,v,E,_;const t=(null===(b=i.details)||void 0===b?void 0:b.variations)&&i.details.variations.length>0;return(0,n.createElement)(he,{...e,className:(0,$.A)(w,{"is-selected":m}),isSelected:m,item:i,onSelect:()=>()=>{p(i)()},isLoading:s||h,countLabel:t?(0,u.sprintf)(/* translators: %1$d is the number of variations of a product product. */ /* translators: %1$d is the number of variations of a product product. */
(0,u.__)("%1$d variations","woocommerce"),null===(v=i.details)||void 0===v?void 0:v.variations.length):null,name:`products-${o}`,"aria-label":t?(0,u.sprintf)(/* translators: %1$s is the product name, %2$d is the number of variations of that product. */ /* translators: %1$s is the product name, %2$d is the number of variations of that product. */
(0,u._n)("%1$s, has %2$d variation","%1$s, has %2$d variations",null===(E=i.details)||void 0===E||null===(E=E.variations)||void 0===E?void 0:E.length,"woocommerce"),i.name,null===(_=i.details)||void 0===_?void 0:_.variations.length):void 0})}const k=(0,U.isEmpty)(null===(r=i.details)||void 0===r?void 0:r.variation)?e:{...e,item:{...e.item,name:null===(c=i.details)||void 0===c?void 0:c.variation},"aria-label":`${i.breadcrumbs[0]}: ${null===(a=i.details)||void 0===a?void 0:a.variation}`};return(0,n.createElement)(Z,{...k,className:w,name:`variations-${o}`})}:void 0),onSearch:i,messages:{...we,...e.messages},isHierarchical:!0})}))),({selected:e,...t})=>{const[r,o]=(0,i.useState)(!0),[c,s]=(0,i.useState)(null),[a,d]=(0,i.useState)([]),m=l.r7.productCount>100,u=async e=>{const t=await x(e);s(t),o(!1)},p=(0,i.useRef)(e);(0,i.useEffect)((()=>{C({selected:p.current}).then((e=>{d(e),o(!1)})).catch(u)}),[p]);const g=(0,de.YQ)((t=>{C({selected:e,search:t}).then((e=>{d(e),o(!1)})).catch(u)}),400),h=(0,i.useCallback)((e=>{o(!0),g(e)}),[o,g]);return(0,n.createElement)(_e,{...t,selected:e,error:c,products:a,isLoading:r,onSearch:m?h:null})})),ve=({attributes:e,setAttributes:t,onChange:r})=>(0,n.createElement)(be,{selected:e.productId||0,showVariations:!0,onChange:(e=[])=>{const o=e[0]?e[0].id:0;t({productId:o}),r&&r()}}),Ee=({isEditing:e,setIsEditing:t})=>(0,n.createElement)(L.BlockControls,null,(0,n.createElement)(m.ToolbarGroup,{controls:[{icon:"edit",title:(0,u.__)("Edit selected product","woocommerce"),onClick:()=>t(!e),isActive:e}]}));var _e,ke=r(3380);const fe=({isLoading:e,product:t,clientId:r})=>{const c=".wc-block-editor-single-product .wc-block-editor-layout",{replaceInnerBlocks:s}=(0,G.useDispatch)("core/block-editor"),a=(0,i.useCallback)((()=>{s(r,(0,o.createBlocksFromInnerBlocksTemplate)(v),!1)}),[r,s]);return(0,n.createElement)(j.InnerBlockLayoutContextProvider,{parentName:d.name,parentClassName:c},(0,n.createElement)(j.ProductDataContextProvider,{product:t,isLoading:e},(0,n.createElement)(L.InspectorControls,null,(0,n.createElement)(m.PanelBody,{title:(0,u.__)("Layout","woocommerce"),initialOpen:!0},(0,n.createElement)(m.Button,{label:(0,u.__)("Reset layout to default","woocommerce"),onClick:a,variant:"tertiary",className:"wc-block-editor-single-product__reset-layout",icon:ke.A},(0,u.__)("Reset layout","woocommerce")))),(0,n.createElement)("div",{className:c},(0,n.createElement)(L.BlockContextProvider,{value:{postId:null==t?void 0:t.id,postType:"product"}},(0,n.createElement)(L.InnerBlocks,{template:v,allowedBlocks:E,templateLock:!1})))))},ye=I((({attributes:e,setAttributes:t,error:r,getProduct:o,product:s,isLoading:a,clientId:l})=>{const{productId:p,isPreview:g}=e,[h,w]=(0,i.useState)(!p),v=(0,L.useBlockProps)(),E=(0,G.useSelect)((e=>e("core/blocks").getBlockType(d.name)),[]),_=(0,G.useSelect)((e=>g?e(V.PRODUCTS_STORE_NAME).getProducts({per_page:1}):null)),k="object"==typeof r&&"woocommerce_rest_product_invalid_id"===(null==r?void 0:r.code);if((0,i.useEffect)((()=>{var r;const o=_?null===(r=_[0])||void 0===r?void 0:r.id:null;o&&!p&&(t({...e,productId:o}),w(!1))}),[e,p,_,t]),(0,i.useEffect)((()=>{k&&!h&&w(!0)}),[k]),r&&!k)return(0,n.createElement)(z,{className:"wc-block-editor-single-product-error",error:r,isLoading:a,onRetry:o});const f=k?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(c.A,{icon:H.A,className:"wc-block-editor-single-product__info-icon"}),(0,n.createElement)(m.__experimentalText,null,(0,u.__)("Previously selected product is no longer available.","woocommerce"))):(0,n.createElement)(m.__experimentalText,null,E.description),y=k?()=>w(!1):void 0;return(0,n.createElement)("div",{...v},(0,n.createElement)(O,{header:(0,u.__)("Single Product Block Error","woocommerce")},(0,n.createElement)(Ee,{setIsEditing:w,isEditing:h}),h?(0,n.createElement)(m.Placeholder,{icon:b,label:E.title,className:"wc-block-editor-single-product"},(0,n.createElement)(m.__experimentalHStack,{alignment:"center"}," ",f," "),(0,n.createElement)("div",{className:"wc-block-editor-single-product__selection"},(0,n.createElement)(ve,{attributes:e,setAttributes:t,onChange:y}),!k&&(0,n.createElement)(m.Button,{variant:"secondary",onClick:()=>{w(!1)}},(0,u.__)("Done","woocommerce")))):(0,n.createElement)("div",null,(0,n.createElement)(L.InspectorControls,null,(0,n.createElement)(m.PanelBody,{title:(0,u.__)("Product","woocommerce"),initialOpen:!1},(0,n.createElement)(ve,{attributes:e,setAttributes:t}))),(0,n.createElement)(R,{productId:p}),(0,n.createElement)(fe,{clientId:l,product:s,isLoading:a}))))})),Se=[{attributes:d.attributes,supports:d.supports,save:()=>{const e=L.useBlockProps.save();return(0,n.createElement)("div",{...e},(0,n.createElement)(L.InnerBlocks.Content,null))}}];(0,o.registerBlockType)(d,{icon:b,edit:ye,save:()=>{const e=L.useBlockProps.save({className:"woocommerce"});return(0,n.createElement)("div",{...e},(0,n.createElement)(L.InnerBlocks.Content,null))},deprecated:Se})},2897:(e,t,r)=>{"use strict";r.d(t,{Hw:()=>f,Vo:()=>b,XK:()=>w,iI:()=>_,r7:()=>g,sW:()=>h});var o,n,c,s,a,i,l,d,m,u,p=r(5703);const g=(0,p.getSetting)("wcBlocksConfig",{pluginUrl:"",productCount:0,defaultAvatar:"",restApiRoutes:{},wordCountType:"words"}),h=g.pluginUrl+"assets/images/",w=g.pluginUrl+"assets/client/blocks/",b=(null===(o=p.STORE_PAGES.shop)||void 0===o||o.permalink,null===(n=p.STORE_PAGES.checkout)||void 0===n||n.id,null===(c=p.STORE_PAGES.checkout)||void 0===c||c.permalink,null===(s=p.STORE_PAGES.privacy)||void 0===s||s.permalink,null===(a=p.STORE_PAGES.privacy)||void 0===a||a.title,null===(i=p.STORE_PAGES.terms)||void 0===i||i.permalink,null===(l=p.STORE_PAGES.terms)||void 0===l||l.title,null===(d=p.STORE_PAGES.cart)||void 0===d||d.id,null===(m=p.STORE_PAGES.cart)||void 0===m?void 0:m.permalink),v=(null!==(u=p.STORE_PAGES.myaccount)&&void 0!==u&&u.permalink?p.STORE_PAGES.myaccount.permalink:(0,p.getSetting)("wpLoginUrl","/wp-login.php"),(0,p.getSetting)("localPickupEnabled",!1),(0,p.getSetting)("shippingMethodsExist",!1),(0,p.getSetting)("shippingEnabled",!0),(0,p.getSetting)("countries",{})),E=(0,p.getSetting)("countryData",{}),_=(Object.fromEntries(Object.keys(E).filter((e=>!0===E[e].allowBilling)).map((e=>[e,v[e]||""]))),Object.fromEntries(Object.keys(E).filter((e=>!0===E[e].allowBilling)).map((e=>[e,E[e].states||{}]))),Object.fromEntries(Object.keys(E).filter((e=>!0===E[e].allowShipping)).map((e=>[e,v[e]||""]))),Object.fromEntries(Object.keys(E).filter((e=>!0===E[e].allowShipping)).map((e=>[e,E[e].states||{}]))),Object.fromEntries(Object.keys(E).map((e=>[e,E[e].locale||{}])))),k={address:["first_name","last_name","company","address_1","address_2","city","postcode","country","state","phone"],contact:["email"],order:[]},f=(0,p.getSetting)("addressFieldsLocations",k).address;(0,p.getSetting)("addressFieldsLocations",k).contact,(0,p.getSetting)("addressFieldsLocations",k).order,(0,p.getSetting)("additionalOrderFields",{}),(0,p.getSetting)("additionalContactFields",{}),(0,p.getSetting)("additionalAddressFields",{})},2516:(e,t,r)=>{"use strict";r.d(t,{Hw:()=>o.Hw,Vo:()=>o.Vo,XK:()=>o.XK,iI:()=>o.iI,r7:()=>o.r7,sW:()=>o.sW});var o=r(2897)},9407:()=>{},8625:()=>{},4974:()=>{},7369:()=>{},8137:()=>{},6636:()=>{},1609:e=>{"use strict";e.exports=window.React},4656:e=>{"use strict";e.exports=window.wc.blocksComponents},8529:e=>{"use strict";e.exports=window.wc.priceFormat},7594:e=>{"use strict";e.exports=window.wc.wcBlocksData},2796:e=>{"use strict";e.exports=window.wc.wcBlocksSharedContext},1616:e=>{"use strict";e.exports=window.wc.wcBlocksSharedHocs},5703:e=>{"use strict";e.exports=window.wc.wcSettings},3993:e=>{"use strict";e.exports=window.wc.wcTypes},6004:e=>{"use strict";e.exports=window.wp.autop},4715:e=>{"use strict";e.exports=window.wp.blockEditor},6427:e=>{"use strict";e.exports=window.wp.components},9491:e=>{"use strict";e.exports=window.wp.compose},7143:e=>{"use strict";e.exports=window.wp.data},6087:e=>{"use strict";e.exports=window.wp.element},2619:e=>{"use strict";e.exports=window.wp.hooks},8537:e=>{"use strict";e.exports=window.wp.htmlEntities},7723:e=>{"use strict";e.exports=window.wp.i18n},923:e=>{"use strict";e.exports=window.wp.isShallowEqual},5573:e=>{"use strict";e.exports=window.wp.primitives},9786:e=>{"use strict";e.exports=window.wp.styleEngine},3832:e=>{"use strict";e.exports=window.wp.url},9446:e=>{"use strict";e.exports=window.wp.wordcount}},s={};function a(e){var t=s[e];if(void 0!==t)return t.exports;var r=s[e]={exports:{}};return c[e].call(r.exports,r,r.exports,a),r.exports}a.m=c,e=[],a.O=(t,r,o,n)=>{if(!r){var c=1/0;for(d=0;d<e.length;d++){for(var[r,o,n]=e[d],s=!0,i=0;i<r.length;i++)(!1&n||c>=n)&&Object.keys(a.O).every((e=>a.O[e](r[i])))?r.splice(i--,1):(s=!1,n<c&&(c=n));if(s){e.splice(d--,1);var l=o();void 0!==l&&(t=l)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[r,o,n]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(e,o){if(1&o&&(e=this(e)),8&o)return e;if("object"==typeof e&&e){if(4&o&&e.__esModule)return e;if(16&o&&"function"==typeof e.then)return e}var n=Object.create(null);a.r(n);var c={};t=t||[null,r({}),r([]),r(r)];for(var s=2&o&&e;"object"==typeof s&&!~t.indexOf(s);s=r(s))Object.getOwnPropertyNames(s).forEach((t=>c[t]=()=>e[t]));return c.default=()=>e,a.d(n,c),n},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,r)=>(a.f[r](e,t),t)),[])),a.u=e=>({345:"product-stock-indicator",462:"product-rating",2105:"product-title",2388:"product-price",2724:"product-sku",3895:"product-summary",4232:"product-image",4442:"product-sale-badge",7409:"product-button",8553:"product-rating-counter",8578:"product-rating-stars",8647:"product-average-rating"}[e]+".js?ver="+{345:"94d4fcb970dbe175da80",462:"f18e748e3e503e3573f0",2105:"c31ddfa7baf698942dcd",2388:"0389c6f76e1746ee196b",2724:"d272f170b41d7faf1c55",3895:"242b611762a3cfb6f001",4232:"212ed9f8329cbf61fd5b",4442:"999abc96ba9a00950609",7409:"38e658aa9039622ca6dc",8553:"0b5fccaf1150013df996",8578:"111421f96aa9bb228f01",8647:"c21cf5cb50f21d32e328"}[e]),a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o={},n="webpackWcBlocksMainJsonp:",a.l=(e,t,r,c)=>{if(o[e])o[e].push(t);else{var s,i;if(void 0!==r)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var m=l[d];if(m.getAttribute("src")==e||m.getAttribute("data-webpack")==n+r){s=m;break}}s||(i=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",n+r),s.src=e),o[e]=[t];var u=(t,r)=>{s.onerror=s.onload=null,clearTimeout(p);var n=o[e];if(delete o[e],s.parentNode&&s.parentNode.removeChild(s),n&&n.forEach((e=>e(r))),t)return t(r)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=u.bind(null,s.onerror),s.onload=u.bind(null,s.onload),i&&document.head.appendChild(s)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.j=5065,(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var o=r.length-1;o>-1&&(!e||!/^http(s?):/.test(e));)e=r[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{var e={5065:0};a.f.j=(t,r)=>{var o=a.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var n=new Promise(((r,n)=>o=e[t]=[r,n]));r.push(o[2]=n);var c=a.p+a.u(t),s=new Error;a.l(c,(r=>{if(a.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var n=r&&("load"===r.type?"missing":r.type),c=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+n+": "+c+")",s.name="ChunkLoadError",s.type=n,s.request=c,o[1](s)}}),"chunk-"+t,t)}},a.O.j=t=>0===e[t];var t=(t,r)=>{var o,n,[c,s,i]=r,l=0;if(c.some((t=>0!==e[t]))){for(o in s)a.o(s,o)&&(a.m[o]=s[o]);if(i)var d=i(a)}for(t&&t(r);l<c.length;l++)n=c[l],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(d)},r=self.webpackChunkwebpackWcBlocksMainJsonp=self.webpackChunkwebpackWcBlocksMainJsonp||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var i=a.O(void 0,[94],(()=>a(586)));i=a.O(i),((this.wc=this.wc||{}).blocks=this.wc.blocks||{})["single-product"]=i})();
>>>>>>> b1eea7a (Merged existing code from https://dev-vices.rafaeldeveloper.co)
