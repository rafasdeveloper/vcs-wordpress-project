<<<<<<< HEAD
(()=>{var e,t,o,r={2721:(e,t,o)=>{"use strict";var r=o(5573),n=o(790);const a=window.wc.wcSettings,l=window.wp.blocks;var s=o(7723);const c=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","name":"woocommerce/product-filter-attribute","title":"Attribute","description":"Enable customers to filter the product grid by selecting one or more attributes, such as color.","category":"woocommerce","keywords":["WooCommerce"],"textdomain":"woocommerce","apiVersion":3,"ancestor":["woocommerce/product-filters"],"supports":{"interactivity":true,"color":{"text":true,"background":false,"__experimentalDefaultControls":{"text":false}},"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontWeight":true,"__experimentalFontFamily":true,"__experimentalFontStyle":true,"__experimentalTextTransform":true,"__experimentalTextDecoration":true,"__experimentalLetterSpacing":true,"__experimentalDefaultControls":{"fontSize":false}},"spacing":{"margin":true,"padding":true,"blockGap":true,"__experimentalDefaultControls":{"margin":false,"padding":false,"blockGap":false}},"__experimentalBorder":{"color":true,"radius":true,"style":true,"width":true,"__experimentalDefaultControls":{"color":false,"radius":false,"style":false,"width":false}}},"usesContext":["query","filterParams"],"attributes":{"attributeId":{"type":"number","default":0},"showCounts":{"type":"boolean","default":false},"queryType":{"type":"string","default":"or"},"displayStyle":{"type":"string","default":"woocommerce/product-filter-checkbox-list"},"selectType":{"type":"string","default":"multiple"},"isPreview":{"type":"boolean","default":false},"sortOrder":{"type":"string","default":"count-desc"},"hideEmpty":{"type":"boolean","default":true}},"example":{"attributes":{"isPreview":true}},"style":"woocommerce/product-filter-attribute-view-style"}'),i=window.wc.wcBlocksData,u=window.wp.data;var d=o(6087),m=o(923),p=o.n(m);function _(e){const t=(0,d.useRef)(e);return p()(e,t.current)||(t.current=e),t.current}const b=window.wc.wcTypes,w=e=>{const{namespace:t,resourceName:o,resourceValues:r=[],query:n={},shouldSelect:a=!0}=e;if(!t||!o)throw new Error("The options object must have valid values for the namespace and the resource properties.");const l=(0,d.useRef)({results:[],isLoading:!0}),s=_(n),c=_(r),m=(()=>{const[,e]=(0,d.useState)();return(0,d.useCallback)((t=>{e((()=>{throw t}))}),[])})(),p=(0,u.useSelect)((e=>{if(!a)return null;const r=e(i.COLLECTIONS_STORE_KEY),n=[t,o,s,c],l=r.getCollectionError(...n);if(l){if(!(0,b.isError)(l))throw new Error("TypeError: `error` object is not an instance of Error constructor");m(l)}return{results:r.getCollection(...n),isLoading:!r.hasFinishedResolution("getCollection",n)}}),[t,o,c,s,a,m]);return null!==p&&(l.current=p),l.current};var f=o(4347),y=o(9456);const h=(0,d.createContext)("page"),g=()=>(0,d.useContext)(h),x=(h.Provider,e=>{const t=g();e=e||t;const o=(0,u.useSelect)((t=>t(i.QUERY_STATE_STORE_KEY).getValueForQueryContext(e,void 0)),[e]),{setValueForQueryContext:r}=(0,u.useDispatch)(i.QUERY_STATE_STORE_KEY);return[o,(0,d.useCallback)((t=>{r(e,t)}),[e,r])]}),v=(e,t,o)=>{const r=g();o=o||r;const n=(0,u.useSelect)((r=>r(i.QUERY_STATE_STORE_KEY).getValueForQueryKey(o,e,t)),[o,e]),{setQueryValue:a}=(0,u.useDispatch)(i.QUERY_STATE_STORE_KEY);return[n,(0,d.useCallback)((t=>{a(o,e,t)}),[o,e,a])]},j=window.wp.blockEditor,C=window.wp.components,k=[{label:(0,s.__)("Blue","woocommerce"),value:"blue",rawData:{id:23,name:(0,s.__)("Blue","woocommerce"),slug:"blue",attr_slug:"blue",description:"",parent:0,count:4}},{label:(0,s.__)("Gray","woocommerce"),value:"gray",selected:!0,rawData:{id:29,name:(0,s.__)("Gray","woocommerce"),slug:"gray",attr_slug:"gray",description:"",parent:0,count:3}},{label:(0,s.__)("Green","woocommerce"),value:"green",rawData:{id:24,name:(0,s.__)("Green","woocommerce"),slug:"green",attr_slug:"green",description:"",parent:0,count:3}},{label:(0,s.__)("Red","woocommerce"),value:"red",selected:!0,rawData:{id:25,name:(0,s.__)("Red","woocommerce"),slug:"red",attr_slug:"red",description:"",parent:0,count:4}},{label:(0,s.__)("Yellow","woocommerce"),value:"yellow",rawData:{id:30,name:(0,s.__)("Yellow","woocommerce"),slug:"yellow",attr_slug:"yellow",description:"",parent:0,count:1}}],S={"name-asc":(0,s.__)("Name, A to Z","woocommerce"),"name-desc":(0,s.__)("Name, Z to A","woocommerce"),"count-desc":(0,s.__)("Most results first","woocommerce"),"count-asc":(0,s.__)("Least results first","woocommerce")},E=Object.entries(S).map((([e,t])=>({label:t,value:e}))),T=(0,a.getSetting)("attributes",[]).reduce(((e,t)=>{const o=(r=t)&&r.attribute_name?{id:parseInt(r.attribute_id,10),name:r.attribute_name,taxonomy:"pa_"+r.attribute_name,label:r.attribute_label}:null;var r;return o&&o.id&&e.push(o),e}),[]);function O(e){if(e)return T.find((t=>t.id===e))}const B=(e,t)=>{if(!e)return null;if(0===e.innerBlocks.length)return null;for(const o of e.innerBlocks){if(t(o))return o;const e=B(o,t);if(e)return e}return null},L=(e,t)=>B(e,(function(e){return e.name===t})),P=(0,a.getSetting)("attributes",[]);let A=[];const I=({clientId:e,attributes:t,setAttributes:o})=>{const{attributeId:r,sortOrder:a,queryType:c,displayStyle:i,showCounts:m,hideEmpty:p}=t,{updateBlockAttributes:_,insertBlock:b,replaceBlock:w}=(0,u.dispatch)("core/block-editor"),f=(0,u.useSelect)((t=>t("core/block-editor").getBlock(e)),[e]),[y,h]=(0,d.useState)({}),g=L(f,"core/heading");return 0===A.length&&(A=(0,l.getBlockTypes)().filter((e=>e.ancestor?.includes("woocommerce/product-filter-attribute")))),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(j.InspectorControls,{children:[(0,n.jsx)(C.PanelBody,{title:(0,s.__)("Attribute","woocommerce"),children:(0,n.jsx)(C.ComboboxControl,{__nextHasNoMarginBottom:!0,options:P.map((e=>({value:e.attribute_id,label:e.attribute_label}))),value:r+"",onChange:e=>{const t=parseInt(e||"",10);o({attributeId:t});const r=O(t);var n;g&&_(g.clientId,{content:null!==(n=r?.label)&&void 0!==n?n:(0,s.__)("Attribute","woocommerce")})},help:(0,s.__)("Choose the attribute to show in this filter.","woocommerce")})}),(0,n.jsxs)(C.PanelBody,{title:(0,s.__)("Display","woocommerce"),children:[(0,n.jsx)(C.SelectControl,{label:(0,s.__)("Sort order","woocommerce"),value:a,options:[{value:"",label:(0,s.__)("Select an option","woocommerce"),disabled:!0},...E],onChange:e=>o({sortOrder:e}),help:(0,s.__)("Determine the order of filter options.","woocommerce"),__nextHasNoMarginBottom:!0}),(0,n.jsxs)(C.__experimentalToggleGroupControl,{label:(0,s.__)("Logic","woocommerce"),isBlock:!0,value:c,onChange:e=>o({queryType:e}),__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,style:{width:"100%"},help:"and"===c?(0,d.createInterpolateElement)((0,s.__)("Show results for <b>all</b> selected attributes. Displayed products must contain <b>all of them</b> to appear in the results.","woocommerce"),{b:(0,n.jsx)("strong",{})}):(0,s.__)("Show results for any of the attributes selected (displayed products don’t have to have them all).","woocommerce"),children:[(0,n.jsx)(C.__experimentalToggleGroupControlOption,{label:(0,s.__)("Any","woocommerce"),value:"or"}),(0,n.jsx)(C.__experimentalToggleGroupControlOption,{label:(0,s.__)("All","woocommerce"),value:"and"})]}),(0,n.jsx)(C.__experimentalToggleGroupControl,{value:i,isBlock:!0,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,onChange:e=>{if(!f)return;const t=L(f,i);t?(h({...y,[i]:t.attributes}),w(t.clientId,(0,l.createBlock)(e,y[e]||{}))):b((0,l.createBlock)(e),f.innerBlocks.length,f.clientId,!1),o({displayStyle:e})},style:{width:"100%"},children:A.map((e=>(0,n.jsx)(C.__experimentalToggleGroupControlOption,{label:e.title,value:e.name},e.name)))}),(0,n.jsx)(C.ToggleControl,{label:(0,s.__)("Product counts","woocommerce"),checked:m,onChange:e=>o({showCounts:e}),__nextHasNoMarginBottom:!0}),(0,n.jsx)(C.ToggleControl,{label:(0,s.__)("Empty filter options","woocommerce"),checked:!p,onChange:e=>o({hideEmpty:!e}),__nextHasNoMarginBottom:!0})]})]},"inspector")})};o(2933);const q=(e=[])=>(0,l.getBlockTypes)().map((e=>e.name)).filter((t=>!e.includes(t))),D=["woocommerce/product-filters","woocommerce/product-filter-attribute","woocommerce/product-filter-active","woocommerce/product-filter-price","woocommerce/product-filter-status","woocommerce/product-collection","core/query"];o(1652);const R=({children:e})=>(0,n.jsxs)("div",{className:"wc-block-product-filter-components-initial-disabled",children:[(0,n.jsx)("div",{className:"wc-block-product-filter-components-initial-disabled-overlay"}),e]});var M=o(2624);o(1007);const N=({children:e})=>(0,n.jsxs)("div",{className:"wc-block-product-filter-components-notice",children:[(0,n.jsx)(C.Icon,{className:"wc-block-product-filter-components-notice__icon",icon:M.A}),(0,n.jsx)("div",{className:"wc-block-product-filter-components-notice__content",children:e})]}),V=(0,a.getSetting)("attributes",[]),G=(0,C.withSpokenMessages)((e=>{const{attributes:t}=e,{attributeId:o,queryType:r,isPreview:a,displayStyle:l,showCounts:c,sortOrder:i,hideEmpty:u}=t,m=O(o),[p,h]=(0,d.useState)([]),[C,S]=(0,d.useState)(!0),{results:E,isLoading:T}=w({namespace:"/wc/store/v1",resourceName:"products/attributes/terms",resourceValues:[m?.id||0],shouldSelect:!!m?.id,query:{orderby:"menu_order",hide_empty:u}}),{data:B,isLoading:L}=(({queryAttribute:e,queryPrices:t,queryStock:o,queryRating:r,queryState:n,isEditor:a=!1})=>{let l=g();l=`${l}-collection-data`;const[s]=x(l),[c,i]=v("calculate_attribute_counts",[],l),[u,m]=v("calculate_price_range",null,l),[p,h]=v("calculate_stock_status_counts",null,l),[j,C]=v("calculate_rating_counts",null,l),k=_(e||{}),S=_(t),E=_(o),T=_(r);(0,d.useEffect)((()=>{"object"==typeof k&&Object.keys(k).length&&(c.find((e=>(0,b.objectHasProp)(k,"taxonomy")&&e.taxonomy===k.taxonomy))||i([...c,k]))}),[k,c,i]),(0,d.useEffect)((()=>{u!==S&&void 0!==S&&m(S)}),[S,m,u]),(0,d.useEffect)((()=>{p!==E&&void 0!==E&&h(E)}),[E,h,p]),(0,d.useEffect)((()=>{j!==T&&void 0!==T&&C(T)}),[T,C,j]);const[O,B]=(0,d.useState)(a),[L]=(0,f.d7)(O,200);O||B(!0);const P=(0,d.useMemo)((()=>(e=>{const t=e;return Array.isArray(e.calculate_attribute_counts)&&(t.calculate_attribute_counts=(0,y.di)(e.calculate_attribute_counts.map((({taxonomy:e,queryType:t})=>({taxonomy:e,query_type:t})))).asc(["taxonomy","query_type"])),t})(s)),[s]),{results:A,isLoading:I}=w({namespace:"/wc/store/v1",resourceName:"products/collection-data",query:{...n,page:void 0,per_page:void 0,orderby:void 0,order:void 0,...P},shouldSelect:L});return{data:A,isLoading:I}})({queryAttribute:{taxonomy:m?.taxonomy||"",queryType:r},queryState:{},isEditor:!0});(0,d.useEffect)((()=>{if(T||L)return;const e=(0,b.objectHasProp)(B,"attribute_counts")&&(t=B.attribute_counts,Array.isArray(t)&&t.every((e=>"term"in e&&"count"in e)))?B.attribute_counts.map((e=>e.term)):[];var t;0===e.length&&u?h([]):h(E.filter((t=>!u||e.includes(t.id))).sort(((e,t)=>{switch(i){case"name-asc":return e.name>t.name?1:-1;case"name-desc":return e.name<t.name?1:-1;case"count-asc":return e.count>t.count?1:-1;default:return e.count<t.count?1:-1}})).map(((e,t)=>({label:e.name,ariaLabel:e.name,value:e.id.toString(),selected:0===t,count:e.count,type:`attribute/${m?.taxonomy}`})))),S(!1)}),[c,E,B,i,u,T,L]);const{children:P,...A}=(0,j.useInnerBlocksProps)((0,j.useBlockProps)(),{allowedBlocks:q(D),template:[["core/heading",{level:3,content:m?.label||(0,s.__)("Attribute","woocommerce"),style:{spacing:{margin:{bottom:"0.625rem",top:"0"}}}}],[l]]}),M=T||L||C;return 0===Object.keys(V).length?(0,n.jsxs)("div",{...A,children:[(0,n.jsx)(I,{...e}),(0,n.jsx)(N,{children:(0,n.jsx)("p",{children:(0,s.__)("Attributes are needed for filtering your products. You haven't created any attributes yet.","woocommerce")})})]}):o&&m?M||0!==E.length?(0,n.jsxs)("div",{...A,children:[(0,n.jsx)(I,{...e}),(0,n.jsx)(R,{children:(0,n.jsx)(j.BlockContextProvider,{value:{filterData:{items:0===p.length&&a?k:p,isLoading:M,showCounts:c}},children:P})})]}):(0,n.jsxs)("div",{...A,children:[(0,n.jsx)(I,{...e}),(0,n.jsx)(N,{children:(0,n.jsx)("p",{children:(0,s.__)("There are no products with the selected attributes.","woocommerce")})})]}):(0,n.jsxs)("div",{...A,children:[(0,n.jsx)(I,{...e}),(0,n.jsx)(N,{children:(0,n.jsx)("p",{children:(0,s.__)("Please select an attribute to use this filter!","woocommerce")})})]})})),H=(0,a.getSetting)("attributes",[]),Y=(0,a.getSetting)("defaultProductFilterAttribute");(0,l.registerBlockType)(c,{edit:G,icon:()=>(0,n.jsx)(r.SVG,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)(r.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M4.25 4C4.25 3.58579 4.58579 3.25 5 3.25L9.17284 3.25C9.37179 3.25 9.56258 3.32904 9.70324 3.46974L13.2877 7.05515L13.2893 7.05673C13.5844 7.35367 13.75 7.75532 13.75 8.17393C13.75 8.59255 13.5844 8.99419 13.2893 9.29114L12.7573 8.76246L13.2877 9.29272L10.2961 12.2851C10.1489 12.4325 9.97417 12.5494 9.78179 12.6292C9.58941 12.7089 9.38319 12.75 9.17493 12.75C8.96667 12.75 8.76045 12.7089 8.56807 12.6292C8.37575 12.5494 8.20104 12.4326 8.05392 12.2853L8.05378 12.2851L4.46991 8.7045C4.32911 8.56383 4.25 8.37296 4.25 8.17393V4ZM12.2253 8.23378L12.2257 8.23341C12.2412 8.21758 12.25 8.19622 12.25 8.17393C12.25 8.15164 12.2412 8.13029 12.2257 8.11446L12.2253 8.11409L8.86212 4.75H5.75V7.86307L9.11456 11.2246L9.11517 11.2252C9.12303 11.2331 9.13236 11.2393 9.14261 11.2436C9.15286 11.2478 9.16384 11.25 9.17493 11.25C9.18602 11.25 9.197 11.2478 9.20725 11.2436C9.2175 11.2393 9.22683 11.2331 9.23469 11.2252L9.23499 11.2249L12.2253 8.23378ZM12.9999 20H3.99988V18.5H12.9999V20ZM3.99988 16L19.9999 16V14.5L3.99988 14.5V16Z",fill:"currentColor"})}),attributes:{...c.attributes,attributeId:{...c.attributes.attributeId,default:parseInt(Y.attribute_id,10)}},save:()=>{const e=j.useBlockProps.save(),t=j.useInnerBlocksProps.save(e);return(0,n.jsx)("div",{...t})},variations:H.map(((e,t)=>({name:`product-filter-attribute-${e.attribute_name}`,title:`${e.attribute_label}`,description:(0,s.sprintf)(
// translators: %s is the attribute label.
// translators: %s is the attribute label.
(0,s.__)("Enable customers to filter the product collection by selecting one or more %s attributes.","woocommerce"),e.attribute_label),attributes:{attributeId:parseInt(e.attribute_id,10)},isActive:["attributeId"],isDefault:0===t})))})},1652:()=>{},1007:()=>{},2933:()=>{},1609:e=>{"use strict";e.exports=window.React},790:e=>{"use strict";e.exports=window.ReactJSXRuntime},6087:e=>{"use strict";e.exports=window.wp.element},7723:e=>{"use strict";e.exports=window.wp.i18n},923:e=>{"use strict";e.exports=window.wp.isShallowEqual},5573:e=>{"use strict";e.exports=window.wp.primitives}},n={};function a(e){var t=n[e];if(void 0!==t)return t.exports;var o=n[e]={exports:{}};return r[e].call(o.exports,o,o.exports,a),o.exports}a.m=r,e=[],a.O=(t,o,r,n)=>{if(!o){var l=1/0;for(u=0;u<e.length;u++){for(var[o,r,n]=e[u],s=!0,c=0;c<o.length;c++)(!1&n||l>=n)&&Object.keys(a.O).every((e=>a.O[e](o[c])))?o.splice(c--,1):(s=!1,n<l&&(l=n));if(s){e.splice(u--,1);var i=r();void 0!==i&&(t=i)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[o,r,n]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},o=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var n=Object.create(null);a.r(n);var l={};t=t||[null,o({}),o([]),o(o)];for(var s=2&r&&e;"object"==typeof s&&!~t.indexOf(s);s=o(s))Object.getOwnPropertyNames(s).forEach((t=>l[t]=()=>e[t]));return l.default=()=>e,a.d(n,l),n},a.d=(e,t)=>{for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.j=2448,(()=>{var e={2448:0};a.O.j=t=>0===e[t];var t=(t,o)=>{var r,n,[l,s,c]=o,i=0;if(l.some((t=>0!==e[t]))){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);if(c)var u=c(a)}for(t&&t(o);i<l.length;i++)n=l[i],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(u)},o=globalThis.webpackChunkwebpackWcBlocksMainJsonp=globalThis.webpackChunkwebpackWcBlocksMainJsonp||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var l=a.O(void 0,[94],(()=>a(2721)));l=a.O(l),((this.wc=this.wc||{}).blocks=this.wc.blocks||{})["product-filter-attribute"]=l})();
=======
(()=>{var e,t,r,o={6941:(e,t,r)=>{"use strict";r.r(t);const o=window.wc.wcSettings;var l=r(1609),n=r(5573);const a=()=>(0,l.createElement)(n.SVG,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,l.createElement)(n.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M4.25 4C4.25 3.58579 4.58579 3.25 5 3.25L9.17284 3.25C9.37179 3.25 9.56258 3.32904 9.70324 3.46974L13.2877 7.05515L13.2893 7.05673C13.5844 7.35367 13.75 7.75532 13.75 8.17393C13.75 8.59255 13.5844 8.99419 13.2893 9.29114L12.7573 8.76246L13.2877 9.29272L10.2961 12.2851C10.1489 12.4325 9.97417 12.5494 9.78179 12.6292C9.58941 12.7089 9.38319 12.75 9.17493 12.75C8.96667 12.75 8.76045 12.7089 8.56807 12.6292C8.37575 12.5494 8.20104 12.4326 8.05392 12.2853L8.05378 12.2851L4.46991 8.7045C4.32911 8.56383 4.25 8.37296 4.25 8.17393V4ZM12.2253 8.23378L12.2257 8.23341C12.2412 8.21758 12.25 8.19622 12.25 8.17393C12.25 8.15164 12.2412 8.13029 12.2257 8.11446L12.2253 8.11409L8.86212 4.75H5.75V7.86307L9.11456 11.2246L9.11517 11.2252C9.12303 11.2331 9.13236 11.2393 9.14261 11.2436C9.15286 11.2478 9.16384 11.25 9.17493 11.25C9.18602 11.25 9.197 11.2478 9.20725 11.2436C9.2175 11.2393 9.22683 11.2331 9.23469 11.2252L9.23499 11.2249L12.2253 8.23378ZM12.9999 20H3.99988V18.5H12.9999V20ZM3.99988 16L19.9999 16V14.5L3.99988 14.5V16Z",fill:"currentColor"})),c=window.wp.blocks;var i=r(7723);const s=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","name":"woocommerce/product-filter-attribute","version":"1.0.0","title":"Attribute (Experimental)","description":"Enable customers to filter the product grid by selecting one or more attributes, such as color.","category":"woocommerce","keywords":["WooCommerce"],"textdomain":"woocommerce","apiVersion":3,"ancestor":["woocommerce/product-filters"],"supports":{"interactivity":true,"color":{"text":true,"background":false,"__experimentalDefaultControls":{"text":false}},"typography":{"fontSize":true,"lineHeight":true,"__experimentalFontWeight":true,"__experimentalFontFamily":true,"__experimentalFontStyle":true,"__experimentalTextTransform":true,"__experimentalTextDecoration":true,"__experimentalLetterSpacing":true,"__experimentalDefaultControls":{"fontSize":false}},"spacing":{"margin":true,"padding":true,"blockGap":true,"__experimentalDefaultControls":{"margin":false,"padding":false,"blockGap":false}},"__experimentalBorder":{"color":true,"radius":true,"style":true,"width":true,"__experimentalDefaultControls":{"color":false,"radius":false,"style":false,"width":false}}},"usesContext":["query","filterParams"],"attributes":{"attributeId":{"type":"number","default":0},"showCounts":{"type":"boolean","default":false},"queryType":{"type":"string","default":"or"},"displayStyle":{"type":"string","default":"woocommerce/product-filter-checkbox-list"},"selectType":{"type":"string","default":"multiple"},"isPreview":{"type":"boolean","default":false},"sortOrder":{"type":"string","default":"count-desc"},"hideEmpty":{"type":"boolean","default":true}},"example":{"attributes":{"isPreview":true}}}'),u=window.wc.wcBlocksData,m=window.wp.data;var d=r(6087),p=r(923),_=r.n(p);function b(e){const t=(0,d.useRef)(e);return _()(e,t.current)||(t.current=e),t.current}const w=window.wc.wcTypes,f=e=>{const{namespace:t,resourceName:r,resourceValues:o=[],query:l={},shouldSelect:n=!0}=e;if(!t||!r)throw new Error("The options object must have valid values for the namespace and the resource properties.");const a=(0,d.useRef)({results:[],isLoading:!0}),c=b(l),i=b(o),s=(()=>{const[,e]=(0,d.useState)();return(0,d.useCallback)((t=>{e((()=>{throw t}))}),[])})(),p=(0,m.useSelect)((e=>{if(!n)return null;const o=e(u.COLLECTIONS_STORE_KEY),l=[t,r,c,i],a=o.getCollectionError(...l);if(a){if(!(0,w.isError)(a))throw new Error("TypeError: `error` object is not an instance of Error constructor");s(a)}return{results:o.getCollection(...l),isLoading:!o.hasFinishedResolution("getCollection",l)}}),[t,r,i,c,n,s]);return null!==p&&(a.current=p),a.current};var y=r(4717),g=r(5574);const h=(0,d.createContext)("page"),v=()=>(0,d.useContext)(h),E=(h.Provider,e=>{const t=v();e=e||t;const r=(0,m.useSelect)((t=>t(u.QUERY_STATE_STORE_KEY).getValueForQueryContext(e,void 0)),[e]),{setValueForQueryContext:o}=(0,m.useDispatch)(u.QUERY_STATE_STORE_KEY);return[r,(0,d.useCallback)((t=>{o(e,t)}),[e,o])]}),k=(e,t,r)=>{const o=v();r=r||o;const l=(0,m.useSelect)((o=>o(u.QUERY_STATE_STORE_KEY).getValueForQueryKey(r,e,t)),[r,e]),{setQueryValue:n}=(0,m.useDispatch)(u.QUERY_STATE_STORE_KEY);return[l,(0,d.useCallback)((t=>{n(r,e,t)}),[r,e,n])]},C=window.wp.blockEditor,x=window.wp.components,S=[{label:(0,i.__)("Blue","woocommerce"),value:"blue",rawData:{id:23,name:(0,i.__)("Blue","woocommerce"),slug:"blue",attr_slug:"blue",description:"",parent:0,count:4}},{label:(0,i.__)("Gray","woocommerce"),value:"gray",selected:!0,rawData:{id:29,name:(0,i.__)("Gray","woocommerce"),slug:"gray",attr_slug:"gray",description:"",parent:0,count:3}},{label:(0,i.__)("Green","woocommerce"),value:"green",rawData:{id:24,name:(0,i.__)("Green","woocommerce"),slug:"green",attr_slug:"green",description:"",parent:0,count:3}},{label:(0,i.__)("Red","woocommerce"),value:"red",selected:!0,rawData:{id:25,name:(0,i.__)("Red","woocommerce"),slug:"red",attr_slug:"red",description:"",parent:0,count:4}},{label:(0,i.__)("Yellow","woocommerce"),value:"yellow",rawData:{id:30,name:(0,i.__)("Yellow","woocommerce"),slug:"yellow",attr_slug:"yellow",description:"",parent:0,count:1}}],T={"name-asc":(0,i.__)("Name, A to Z","woocommerce"),"name-desc":(0,i.__)("Name, Z to A","woocommerce"),"count-desc":(0,i.__)("Most results first","woocommerce"),"count-asc":(0,i.__)("Least results first","woocommerce")},O=Object.entries(T).map((([e,t])=>({label:t,value:e}))),B=(0,o.getSetting)("attributes",[]).reduce(((e,t)=>{const r=(o=t)&&o.attribute_name?{id:parseInt(o.attribute_id,10),name:o.attribute_name,taxonomy:"pa_"+o.attribute_name,label:o.attribute_label}:null;var o;return r&&r.id&&e.push(r),e}),[]);function L(e){if(e)return B.find((t=>t.id===e))}const P=(e,t)=>{if(!e)return null;if(0===e.innerBlocks.length)return null;for(const r of e.innerBlocks){if(t(r))return r;const e=P(r,t);if(e)return e}return null},A=(e,t)=>P(e,(function(e){return e.name===t})),I=(0,o.getSetting)("attributes",[]);let j=[];const q=({clientId:e,attributes:t,setAttributes:r})=>{const{attributeId:o,sortOrder:n,queryType:a,displayStyle:s,showCounts:u,hideEmpty:p}=t,{updateBlockAttributes:_,insertBlock:b,replaceBlock:w}=(0,m.dispatch)("core/block-editor"),f=(0,m.useSelect)((t=>t("core/block-editor").getBlock(e)),[e]),[y,g]=(0,d.useState)({}),h=A(f,"core/heading");return 0===j.length&&(j=(0,c.getBlockTypes)().filter((e=>{var t;return null===(t=e.ancestor)||void 0===t?void 0:t.includes("woocommerce/product-filter-attribute")}))),(0,l.createElement)(l.Fragment,null,(0,l.createElement)(C.InspectorControls,{key:"inspector"},(0,l.createElement)(x.PanelBody,{title:(0,i.__)("Attribute","woocommerce")},(0,l.createElement)(x.ComboboxControl,{options:I.map((e=>({value:e.attribute_id,label:e.attribute_label}))),value:o+"",onChange:e=>{const t=parseInt(e||"",10);r({attributeId:t});const o=L(t);var l;h&&_(h.clientId,{content:null!==(l=null==o?void 0:o.label)&&void 0!==l?l:(0,i.__)("Attribute","woocommerce")})},help:(0,i.__)("Choose the attribute to show in this filter.","woocommerce")})),(0,l.createElement)(x.PanelBody,{title:(0,i.__)("Settings","woocommerce")},(0,l.createElement)(x.SelectControl,{label:(0,i.__)("Sort order","woocommerce"),value:n,options:[{value:"",label:(0,i.__)("Select an option","woocommerce"),disabled:!0},...O],onChange:e=>r({sortOrder:e}),help:(0,i.__)("Determine the order of filter options.","woocommerce")}),(0,l.createElement)(x.__experimentalToggleGroupControl,{label:(0,i.__)("Logic","woocommerce"),isBlock:!0,value:a,onChange:e=>r({queryType:e}),style:{width:"100%"},help:"and"===a?(0,d.createInterpolateElement)((0,i.__)("Show results for <b>all</b> selected attributes. Displayed products must contain <b>all of them</b> to appear in the results.","woocommerce"),{b:(0,l.createElement)("strong",null)}):(0,i.__)("Show results for any of the attributes selected (displayed products don’t have to have them all).","woocommerce")},(0,l.createElement)(x.__experimentalToggleGroupControlOption,{label:(0,i.__)("Any","woocommerce"),value:"or"}),(0,l.createElement)(x.__experimentalToggleGroupControlOption,{label:(0,i.__)("All","woocommerce"),value:"and"})))),(0,l.createElement)(C.InspectorControls,{group:"styles"},(0,l.createElement)(x.PanelBody,{title:(0,i.__)("Display","woocommerce")},(0,l.createElement)(x.__experimentalToggleGroupControl,{value:s,isBlock:!0,onChange:e=>{if(!f)return;const t=A(f,s);t?(g({...y,[s]:t.attributes}),w(t.clientId,(0,c.createBlock)(e,y[e]||{}))):b((0,c.createBlock)(e),f.innerBlocks.length,f.clientId,!1),r({displayStyle:e})},style:{width:"100%"}},j.map((e=>(0,l.createElement)(x.__experimentalToggleGroupControlOption,{key:e.name,label:e.title,value:e.name})))),(0,l.createElement)(x.ToggleControl,{label:(0,i.__)("Product counts","woocommerce"),checked:u,onChange:e=>r({showCounts:e})}),(0,l.createElement)(x.ToggleControl,{label:(0,i.__)("Empty filter options","woocommerce"),checked:!p,onChange:e=>r({hideEmpty:!e})}))))};r(5135);const D=(e=[])=>(0,c.getBlockTypes)().map((e=>e.name)).filter((t=>!e.includes(t))),R=["woocommerce/product-filters","woocommerce/product-filter-attribute","woocommerce/product-filter-active","woocommerce/product-filter-price","woocommerce/product-filter-status","woocommerce/product-collection","core/query"];r(9498);const V=({children:e})=>(0,l.createElement)("div",{className:"wc-block-product-filter-components-initial-disabled"},(0,l.createElement)("div",{className:"wc-block-product-filter-components-initial-disabled-overlay"}),e);var M=r(2478);r(1925);const N=({children:e})=>(0,l.createElement)("div",{className:"wc-block-product-filter-components-notice"},(0,l.createElement)(x.Icon,{className:"wc-block-product-filter-components-notice__icon",icon:M.A}),(0,l.createElement)("div",{className:"wc-block-product-filter-components-notice__content"},e)),G=(0,o.getSetting)("attributes",[]),Y=(0,x.withSpokenMessages)((e=>{const{attributes:t}=e,{attributeId:r,queryType:o,isPreview:n,displayStyle:a,showCounts:c,sortOrder:s,hideEmpty:u}=t,m=L(r),[p,_]=(0,d.useState)([]),[h,x]=(0,d.useState)(!0),{results:T,isLoading:O}=f({namespace:"/wc/store/v1",resourceName:"products/attributes/terms",resourceValues:[(null==m?void 0:m.id)||0],shouldSelect:!(null==m||!m.id),query:{orderby:"menu_order",hide_empty:u}}),{data:B,isLoading:P}=(({queryAttribute:e,queryPrices:t,queryStock:r,queryRating:o,queryState:l,isEditor:n=!1})=>{let a=v();a=`${a}-collection-data`;const[c]=E(a),[i,s]=k("calculate_attribute_counts",[],a),[u,m]=k("calculate_price_range",null,a),[p,_]=k("calculate_stock_status_counts",null,a),[h,C]=k("calculate_rating_counts",null,a),x=b(e||{}),S=b(t),T=b(r),O=b(o);(0,d.useEffect)((()=>{"object"==typeof x&&Object.keys(x).length&&(i.find((e=>(0,w.objectHasProp)(x,"taxonomy")&&e.taxonomy===x.taxonomy))||s([...i,x]))}),[x,i,s]),(0,d.useEffect)((()=>{u!==S&&void 0!==S&&m(S)}),[S,m,u]),(0,d.useEffect)((()=>{p!==T&&void 0!==T&&_(T)}),[T,_,p]),(0,d.useEffect)((()=>{h!==O&&void 0!==O&&C(O)}),[O,C,h]);const[B,L]=(0,d.useState)(n),[P]=(0,y.d7)(B,200);B||L(!0);const A=(0,d.useMemo)((()=>(e=>{const t=e;return Array.isArray(e.calculate_attribute_counts)&&(t.calculate_attribute_counts=(0,g.di)(e.calculate_attribute_counts.map((({taxonomy:e,queryType:t})=>({taxonomy:e,query_type:t})))).asc(["taxonomy","query_type"])),t})(c)),[c]),{results:I,isLoading:j}=f({namespace:"/wc/store/v1",resourceName:"products/collection-data",query:{...l,page:void 0,per_page:void 0,orderby:void 0,order:void 0,...A},shouldSelect:P});return{data:I,isLoading:j}})({queryAttribute:{taxonomy:(null==m?void 0:m.taxonomy)||"",queryType:o},queryState:{},isEditor:!0});(0,d.useEffect)((()=>{if(O||P)return;const e=(0,w.objectHasProp)(B,"attribute_counts")&&(t=B.attribute_counts,Array.isArray(t)&&t.every((e=>"term"in e&&"count"in e)))?B.attribute_counts.map((e=>e.term)):[];var t;0===e.length&&u?_([]):_(T.filter((t=>!u||e.includes(t.id))).sort(((e,t)=>{switch(s){case"name-asc":return e.name>t.name?1:-1;case"name-desc":return e.name<t.name?1:-1;case"count-asc":return e.count>t.count?1:-1;default:return e.count<t.count?1:-1}})).map(((e,t)=>({label:c?`${e.name} (${e.count})`:e.name,value:e.id.toString(),selected:0===t,rawData:e})))),x(!1)}),[c,T,B,s,u,O,P]);const{children:A,...I}=(0,C.useInnerBlocksProps)((0,C.useBlockProps)(),{allowedBlocks:D(R),template:[["core/heading",{level:4,content:(null==m?void 0:m.label)||(0,i.__)("Attribute","woocommerce"),style:{spacing:{margin:{bottom:"0.625rem",top:"0"}}}}],[a]]}),j=O||P||h;return 0===Object.keys(G).length?(0,l.createElement)("div",{...I},(0,l.createElement)(q,{...e}),(0,l.createElement)(N,null,(0,l.createElement)("p",null,(0,i.__)("Attributes are needed for filtering your products. You haven't created any attributes yet.","woocommerce")))):r&&m?j||0!==T.length?(0,l.createElement)("div",{...I},(0,l.createElement)(q,{...e}),(0,l.createElement)(V,null,(0,l.createElement)(C.BlockContextProvider,{value:{filterData:{items:0===p.length&&n?S:p,isLoading:j}}},A))):(0,l.createElement)("div",{...I},(0,l.createElement)(q,{...e}),(0,l.createElement)(N,null,(0,l.createElement)("p",null,(0,i.__)("There are no products with the selected attributes.","woocommerce")))):(0,l.createElement)("div",{...I},(0,l.createElement)(q,{...e}),(0,l.createElement)(N,null,(0,l.createElement)("p",null,(0,i.__)("Please select an attribute to use this filter!","woocommerce"))))})),F=()=>{const e=C.useBlockProps.save(),t=C.useInnerBlocksProps.save(e);return(0,l.createElement)("div",{...t})},Q=(0,o.getSetting)("attributes",[]);if((()=>{const{experimentalBlocksEnabled:e}=(0,o.getSetting)("wcBlocksConfig",{experimentalBlocksEnabled:!1});return e})()){const e=(0,o.getSetting)("defaultProductFilterAttribute");(0,c.registerBlockType)(s,{edit:Y,icon:a,attributes:{...s.attributes,attributeId:{...s.attributes.attributeId,default:parseInt(e.attribute_id,10)}},save:F,variations:Q.map(((e,t)=>({name:`product-filter-attribute-${e.attribute_name}`,title:`${e.attribute_label} (Experimental)`,description:(0,i.sprintf)(
// translators: %s is the attribute label.
// translators: %s is the attribute label.
(0,i.__)("Enable customers to filter the product collection by selecting one or more %s attributes.","woocommerce"),e.attribute_label),attributes:{attributeId:parseInt(e.attribute_id,10)},isActive:["attributeId"],isDefault:0===t})))})}},9498:()=>{},1925:()=>{},5135:()=>{},1609:e=>{"use strict";e.exports=window.React},6087:e=>{"use strict";e.exports=window.wp.element},7723:e=>{"use strict";e.exports=window.wp.i18n},923:e=>{"use strict";e.exports=window.wp.isShallowEqual},5573:e=>{"use strict";e.exports=window.wp.primitives}},l={};function n(e){var t=l[e];if(void 0!==t)return t.exports;var r=l[e]={exports:{}};return o[e].call(r.exports,r,r.exports,n),r.exports}n.m=o,e=[],n.O=(t,r,o,l)=>{if(!r){var a=1/0;for(u=0;u<e.length;u++){for(var[r,o,l]=e[u],c=!0,i=0;i<r.length;i++)(!1&l||a>=l)&&Object.keys(n.O).every((e=>n.O[e](r[i])))?r.splice(i--,1):(c=!1,l<a&&(a=l));if(c){e.splice(u--,1);var s=o();void 0!==s&&(t=s)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[r,o,l]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,n.t=function(e,o){if(1&o&&(e=this(e)),8&o)return e;if("object"==typeof e&&e){if(4&o&&e.__esModule)return e;if(16&o&&"function"==typeof e.then)return e}var l=Object.create(null);n.r(l);var a={};t=t||[null,r({}),r([]),r(r)];for(var c=2&o&&e;"object"==typeof c&&!~t.indexOf(c);c=r(c))Object.getOwnPropertyNames(c).forEach((t=>a[t]=()=>e[t]));return a.default=()=>e,n.d(l,a),l},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.j=2448,(()=>{var e={2448:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var o,l,[a,c,i]=r,s=0;if(a.some((t=>0!==e[t]))){for(o in c)n.o(c,o)&&(n.m[o]=c[o]);if(i)var u=i(n)}for(t&&t(r);s<a.length;s++)l=a[s],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(u)},r=self.webpackChunkwebpackWcBlocksMainJsonp=self.webpackChunkwebpackWcBlocksMainJsonp||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var a=n.O(void 0,[94],(()=>n(6941)));a=n.O(a),((this.wc=this.wc||{}).blocks=this.wc.blocks||{})["product-filter-attribute"]=a})();
>>>>>>> b1eea7a (Merged existing code from https://dev-vices.rafaeldeveloper.co)
