<<<<<<< HEAD
(()=>{var e,t,o,s={3404:(e,t,o)=>{"use strict";var s=o(4921),r=o(5573),c=o(790);const n=(0,c.jsxs)(r.SVG,{xmlns:"http://www.w3.org/2000/SVG",viewBox:"0 0 24 24",fill:"none",children:[(0,c.jsx)("path",{stroke:"currentColor",strokeWidth:"1.5",fill:"none",d:"M5 3.75h14c.69 0 1.25.56 1.25 1.25v14c0 .69-.56 1.25-1.25 1.25H5c-.69 0-1.25-.56-1.25-1.25V5c0-.69.56-1.25 1.25-1.25z"}),(0,c.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M6.4 10.75c0-.47.38-.85.85-.85h9.5c.47 0 .85.38.85.85v1.5c0 .47-.38.85-.85.85h-9.5a.85.85 0 01-.85-.85v-1.5zm1.2.35v.8h8.8v-.8H7.6zM12.4 15.25c0-.47.38-.85.85-.85h3.5c.47 0 .85.38.85.85v1.5c0 .47-.38.85-.85.85h-3.5a.85.85 0 01-.85-.85v-1.5zm1.2.35v.8h2.8v-.8h-2.8zM6.5 15.9a.6.6 0 01.6-.6h2.8a.6.6 0 010 1.2H7.1a.6.6 0 01-.6-.6zM6.5 7.9a.6.6 0 01.6-.6h9.8a.6.6 0 110 1.2H7.1a.6.6 0 01-.6-.6z",clipRule:"evenodd"})]});var i=o(4530);const a=window.wp.blocks,l=window.wp.blockEditor;var d=o(6087),p=o(9491);const m=(0,d.createContext)({hasContainerWidth:!1,containerClassName:"",isMobile:!1,isSmall:!1,isMedium:!1,isLarge:!1}),u=()=>(0,d.useContext)(m),h=({children:e,className:t=""})=>{const[o,r]=(()=>{const[e,{width:t}]=(0,p.useResizeObserver)();let o="";return t>700?o="is-large":t>520?o="is-medium":t>400?o="is-small":t&&(o="is-mobile"),[e,o]})(),n={hasContainerWidth:""!==r,containerClassName:r,isMobile:"is-mobile"===r,isSmall:"is-small"===r,isMedium:"is-medium"===r,isLarge:"is-large"===r};return(0,c.jsx)(m.Provider,{value:n,children:(0,c.jsxs)("div",{className:(0,s.A)(t,r),children:[o,e]})})};o(9163);const g=({children:e,className:t})=>(0,c.jsx)(h,{className:(0,s.A)("wc-block-components-sidebar-layout",t),children:e}),_=window.wp.data,k=(0,d.createContext)({isEditor:!1,currentPostId:0,currentView:"",previewData:{},getPreviewData:()=>({})}),b=()=>(0,d.useContext)(k),w=({children:e,currentPostId:t=0,previewData:o={},currentView:s="",isPreview:r=!1})=>{const n=(0,_.useSelect)((e=>t||e("core/editor").getCurrentPostId()),[t]),i=(0,d.useCallback)(((e,t={})=>o&&e in o?o[e]:t),[o]),a={isEditor:!0,currentPostId:n,currentView:s,previewData:o,getPreviewData:i,isPreview:r};return(0,c.jsx)(k.Provider,{value:a,children:e})},y=window.wp.plugins,x=window.wc.wcSettings;var v=o(7723);const f=(0,x.getSetting)("wcBlocksConfig",{pluginUrl:"",productCount:0,defaultAvatar:"",restApiRoutes:{},wordCountType:"words"}),S=f.pluginUrl+"assets/images/",j=(f.pluginUrl,x.STORE_PAGES.shop,x.STORE_PAGES.checkout?.id),C=(x.STORE_PAGES.checkout,x.STORE_PAGES.privacy?.permalink),E=(x.STORE_PAGES.privacy,x.STORE_PAGES.terms?.permalink),P=(x.STORE_PAGES.terms,x.STORE_PAGES.cart?.id),N=x.STORE_PAGES.cart?.permalink,A=(x.STORE_PAGES.myaccount?.permalink?x.STORE_PAGES.myaccount.permalink:(0,x.getSetting)("wpLoginUrl","/wp-login.php"),(0,x.getSetting)("localPickupEnabled",!1)),I=((0,x.getSetting)("shippingMethodsExist",!1),(0,x.getSetting)("shippingEnabled",!0)),R=(0,x.getSetting)("countries",{}),T=(0,x.getSetting)("countryData",{}),M=Object.fromEntries(Object.keys(T).filter((e=>!0===T[e].allowBilling)).map((e=>[e,R[e]||""]))),B=Object.fromEntries(Object.keys(T).filter((e=>!0===T[e].allowShipping)).map((e=>[e,R[e]||""]))),D={...M,...B},O=Object.fromEntries(Object.keys(D).map((e=>[e,T[e].states||{}]))),F=Object.fromEntries(Object.keys(D).map((e=>[e,T[e].locale||{}]))),L={address:["first_name","last_name","company","address_1","address_2","city","postcode","country","state","phone"],contact:["email"],order:[]},V=(0,x.getSetting)("addressFieldsLocations",L).address,U=(0,x.getSetting)("addressFieldsLocations",L).contact,$=(0,x.getSetting)("addressFieldsLocations",L).order,H=((0,x.getSetting)("additionalOrderFields",{}),(0,x.getSetting)("additionalContactFields",{}),(0,x.getSetting)("additionalAddressFields",{}),()=>{const{experimentalBlocksEnabled:e}=(0,x.getSetting)("wcBlocksConfig",{experimentalBlocksEnabled:!1});return e}),q=({imageUrl:e=`${S}/block-error.svg`,header:t=(0,v.__)("Oops!","woocommerce"),text:o=(0,v.__)("There was an error loading the content.","woocommerce"),errorMessage:s,errorMessagePrefix:r=(0,v.__)("Error:","woocommerce"),button:n,showErrorBlock:i=!0})=>i?(0,c.jsxs)("div",{className:"wc-block-error wc-block-components-error",children:[e&&(0,c.jsx)("img",{className:"wc-block-error__image wc-block-components-error__image",src:e,alt:""}),(0,c.jsxs)("div",{className:"wc-block-error__content wc-block-components-error__content",children:[t&&(0,c.jsx)("p",{className:"wc-block-error__header wc-block-components-error__header",children:t}),o&&(0,c.jsx)("p",{className:"wc-block-error__text wc-block-components-error__text",children:o}),s&&(0,c.jsxs)("p",{className:"wc-block-error__message wc-block-components-error__message",children:[r?r+" ":"",s]}),n&&(0,c.jsx)("p",{className:"wc-block-error__button wc-block-components-error__button",children:n})]})]}):null;o(5893);class z extends d.Component{state={errorMessage:"",hasError:!1};static getDerivedStateFromError(e){return void 0!==e.statusText&&void 0!==e.status?{errorMessage:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("strong",{children:e.status}),":Â ",e.statusText]}),hasError:!0}:{errorMessage:e.message,hasError:!0}}render(){const{header:e,imageUrl:t,showErrorMessage:o=!0,showErrorBlock:s=!0,text:r,errorMessagePrefix:n,renderError:i,button:a}=this.props,{errorMessage:l,hasError:d}=this.state;return d?"function"==typeof i?i({errorMessage:l}):(0,c.jsx)(q,{showErrorBlock:s,errorMessage:o?l:null,header:e,imageUrl:t,text:r,errorMessagePrefix:n,button:a}):this.props.children}}const W=z,X=window.wc.wcBlocksData;var Y=o(4040),G=o.n(Y);let J=function(e){return e.ADD_EVENT_CALLBACK="add_event_callback",e.REMOVE_EVENT_CALLBACK="remove_event_callback",e}({});const K={},Z=(e=K,{type:t,eventType:o,id:s,callback:r,priority:c})=>{const n=e.hasOwnProperty(o)?new Map(e[o]):new Map;switch(t){case J.ADD_EVENT_CALLBACK:return n.set(s,{priority:c,callback:r}),{...e,[o]:n};case J.REMOVE_EVENT_CALLBACK:return n.delete(s),{...e,[o]:n}}},Q=(e,t)=>(o,s=10)=>{const r=((e,t,o=10)=>({id:Math.floor(Math.random()*Date.now()).toString(),type:J.ADD_EVENT_CALLBACK,eventType:e,callback:t,priority:o}))(e,o,s);return t(r),()=>{var o;t((o=e,{id:r.id,type:J.REMOVE_EVENT_CALLBACK,eventType:o}))}},ee=(0,d.createContext)({onPaymentProcessing:()=>()=>()=>{},onPaymentSetup:()=>()=>()=>{}}),te=({children:e})=>{const{isProcessing:t,isIdle:o,isCalculating:s,hasError:r}=(0,_.useSelect)((e=>{const t=e(X.checkoutStore);return{isProcessing:t.isProcessing(),isIdle:t.isIdle(),hasError:t.hasError(),isCalculating:t.isCalculating()}})),{isPaymentReady:n}=(0,_.useSelect)((e=>{const t=e(X.paymentStore);return{isPaymentProcessing:t.isPaymentProcessing(),isPaymentReady:t.isPaymentReady()}})),{setValidationErrors:i}=(0,_.useDispatch)(X.validationStore),[a,l]=(0,d.useReducer)(Z,{}),{onPaymentSetup:p}=(e=>(0,d.useMemo)((()=>({onPaymentSetup:Q("payment_setup",e)})),[e]))(l),m=(0,d.useRef)(a);(0,d.useEffect)((()=>{m.current=a}),[a]);const{__internalSetPaymentProcessing:u,__internalSetPaymentIdle:h,__internalEmitPaymentProcessingEvent:g}=(0,_.useDispatch)(X.paymentStore);(0,d.useEffect)((()=>{!t||r||s||(u(),g(m.current,i))}),[t,r,s,u,g,i]),(0,d.useEffect)((()=>{o&&!n&&h()}),[o,n,h]),(0,d.useEffect)((()=>{r&&n&&h()}),[r,n,h]);const k={onPaymentProcessing:(0,d.useMemo)((()=>function(...e){return G()("onPaymentProcessing",{alternative:"onPaymentSetup",plugin:"WooCommerce Blocks"}),p(...e)}),[p]),onPaymentSetup:p};return(0,c.jsx)(ee.Provider,{value:k,children:e})},oe={NONE:"none",INVALID_ADDRESS:"invalid_address",UNKNOWN:"unknown_error"},se={INVALID_COUNTRY:"woocommerce_rest_cart_shipping_rates_invalid_country",MISSING_COUNTRY:"woocommerce_rest_cart_shipping_rates_missing_country",INVALID_STATE:"woocommerce_rest_cart_shipping_rates_invalid_state"},re={shippingErrorStatus:{isPristine:!0,isValid:!1,hasInvalidAddress:!1,hasError:!1},dispatchErrorStatus:e=>e,shippingErrorTypes:oe,onShippingRateSuccess:()=>()=>{},onShippingRateFail:()=>()=>{},onShippingRateSelectSuccess:()=>()=>{},onShippingRateSelectFail:()=>()=>{}},ce=(e,{type:t})=>Object.values(oe).includes(t)?t:e,ne="shipping_rates_success",ie="shipping_rates_fail",ae="shipping_rate_select_success",le="shipping_rate_select_fail",de=e=>({onSuccess:Q(ne,e),onFail:Q(ie,e),onSelectSuccess:Q(ae,e),onSelectFail:Q(le,e)}),pe=window.wc.wcTypes;let me=function(e){return e.CART="wc/cart",e.CHECKOUT="wc/checkout",e.PAYMENTS="wc/checkout/payments",e.EXPRESS_PAYMENTS="wc/checkout/express-payments",e.CONTACT_INFORMATION="wc/checkout/contact-information",e.SHIPPING_ADDRESS="wc/checkout/shipping-address",e.BILLING_ADDRESS="wc/checkout/billing-address",e.SHIPPING_METHODS="wc/checkout/shipping-methods",e.CHECKOUT_ACTIONS="wc/checkout/checkout-actions",e.ORDER_INFORMATION="wc/checkout/order-information",e}({});const ue=async(e,t,o)=>{const s=((e,t)=>e[t]?Array.from(e[t].values()).sort(((e,t)=>e.priority-t.priority)):[])(e,t),r=[];for(const e of s)try{const t=await Promise.resolve(e.callback(o));"object"==typeof t&&r.push(t)}catch(e){console.error(e)}return!r.length||r};var he=o(1824),ge=o.n(he);const _e=window.wp.htmlEntities,ke=Object.entries(F).reduce(((e,[t,o])=>(e[t]=Object.entries(o).reduce(((e,[t,o])=>(e[t]=(e=>{const t={};return void 0!==e.label&&(t.label=e.label),void 0!==e.required&&(t.required=e.required),void 0!==e.hidden&&(t.hidden=e.hidden),void 0===e.label||e.optionalLabel||(t.optionalLabel=(0,v.sprintf)(/* translators: %s Field label. */ /* translators: %s Field label. */
(0,v.__)("%s (optional)","woocommerce"),e.label)),e.index&&((0,pe.isNumber)(e.index)&&(t.index=e.index),(0,pe.isString)(e.index)&&(t.index=parseInt(e.index,10))),e.hidden&&(t.required=!1),t})(o),e)),{}),e)),{}),be=(e,t,o="")=>{const s=o&&void 0!==ke[o]?ke[o]:{};return e.map((e=>({key:e,...t&&e in t?t[e]:{},...s&&e in s?s[e]:{}}))).sort(((e,t)=>e.index-t.index))},we=["state","country","postcode","city"],ye=(e,t)=>e in t,xe=e=>{const t=be(V,x.defaultFields,e.country),o=Object.assign({},e);return t.forEach((({key:t,hidden:s})=>{!0===s&&ye(t,e)&&(o[t]="")})),o},ve=e=>!!e.country&&be(V,x.defaultFields,e.country).filter((({key:e})=>we.includes(e))).every((({key:t,hidden:o,required:s})=>!0===o||!1===s||ye(t,e)&&""!==e[t])),fe=window.CustomEvent||null,Se=(e,t,o=!1,s=!1)=>{if("function"!=typeof jQuery)return()=>{};const r=()=>{((e,{bubbles:t=!1,cancelable:o=!1,element:s,detail:r={}})=>{if(!fe)return;s||(s=document.body);const c=new fe(e,{bubbles:t,cancelable:o,detail:r});s.dispatchEvent(c)})(t,{bubbles:o,cancelable:s})};return jQuery(document).on(e,r),()=>jQuery(document).off(e,r)},je=e=>{const t=e?.detail;t&&t.preserveCartData||(0,_.dispatch)(X.cartStore).invalidateResolutionForStore()},Ce=e=>{(e?.persisted||"back_forward"===(window.performance&&window.performance.getEntriesByType("navigation").length?window.performance.getEntriesByType("navigation")[0].type:""))&&(0,_.dispatch)(X.cartStore).invalidateResolutionForStore()},Ee=()=>{1===window.wcBlocksStoreCartListeners.count&&window.wcBlocksStoreCartListeners.remove(),window.wcBlocksStoreCartListeners.count--},Pe={first_name:"",last_name:"",company:"",address_1:"",address_2:"",city:"",state:"",postcode:"",country:"",phone:""},Ne={...Pe,email:""},Ae={total_items:"",total_items_tax:"",total_fees:"",total_fees_tax:"",total_discount:"",total_discount_tax:"",total_shipping:"",total_shipping_tax:"",total_price:"",total_tax:"",tax_lines:X.EMPTY_TAX_LINES,currency_code:"",currency_symbol:"",currency_minor_unit:2,currency_decimal_separator:"",currency_thousand_separator:"",currency_prefix:"",currency_suffix:""},Ie=e=>Object.fromEntries(Object.entries(e).map((([e,t])=>[e,(0,_e.decodeEntities)(t)]))),Re={cartCoupons:X.EMPTY_CART_COUPONS,cartItems:X.EMPTY_CART_ITEMS,cartFees:X.EMPTY_CART_FEES,cartItemsCount:0,cartItemsWeight:0,crossSellsProducts:X.EMPTY_CART_CROSS_SELLS,cartNeedsPayment:!0,cartNeedsShipping:!0,cartItemErrors:X.EMPTY_CART_ITEM_ERRORS,cartTotals:Ae,cartIsLoading:!0,cartErrors:X.EMPTY_CART_ERRORS,billingData:Ne,billingAddress:Ne,shippingAddress:Pe,shippingRates:X.EMPTY_SHIPPING_RATES,isLoadingRates:!1,cartHasCalculatedShipping:!1,paymentMethods:X.EMPTY_PAYMENT_METHODS,paymentRequirements:X.EMPTY_PAYMENT_REQUIREMENTS,receiveCart:()=>{},receiveCartContents:()=>{},extensions:X.EMPTY_EXTENSIONS},Te=(e={shouldSelect:!0})=>{const{shouldSelect:t}=e,o=(0,d.useRef)(),s=(0,d.useRef)(Ne),r=(0,d.useRef)(Pe);(0,d.useEffect)((()=>((()=>{if(window.wcBlocksStoreCartListeners||(window.wcBlocksStoreCartListeners={count:0,remove:()=>{}}),window.wcBlocksStoreCartListeners?.count>0)return void window.wcBlocksStoreCartListeners.count++;document.body.addEventListener("wc-blocks_added_to_cart",je),document.body.addEventListener("wc-blocks_removed_from_cart",je),window.addEventListener("pageshow",Ce);const e=Se("added_to_cart","wc-blocks_added_to_cart"),t=Se("removed_from_cart","wc-blocks_removed_from_cart");window.wcBlocksStoreCartListeners.count=1,window.wcBlocksStoreCartListeners.remove=()=>{document.body.removeEventListener("wc-blocks_added_to_cart",je),document.body.removeEventListener("wc-blocks_removed_from_cart",je),window.removeEventListener("pageshow",Ce),e(),t()}})(),Ee)),[]);const{receiveCart:c,receiveCartContents:n}=(0,_.useDispatch)(X.cartStore),{cartData:i,cartErrors:a,cartTotals:l,cartIsLoading:p,isLoadingRates:m}=(0,_.useSelect)((e=>{const t=e(X.cartStore);return{cartData:t.getCartData(),cartErrors:t.getCartErrors(),cartTotals:t.getCartTotals(),cartIsLoading:!t.hasFinishedResolution("getCartData"),isLoadingRates:t.isAddressFieldsForShippingRatesUpdating()}}),[]);if(!t)return Re;const u=xe(Ie(i.billingAddress));ge()(s.current,u)||(s.current=u);const h=s.current,g=i.needsShipping?xe(Ie(i.shippingAddress)):h;ge()(r.current,g)||(r.current=g);const k=r.current,b={cartCoupons:i.coupons.length>0?i.coupons.map((e=>({...e,label:(0,_e.decodeEntities)(e.code)}))):X.EMPTY_CART_COUPONS,cartItems:i.items,crossSellsProducts:i.crossSells,cartFees:i.fees.length>0?i.fees.map((e=>Ie(e))):X.EMPTY_CART_FEES,cartItemsCount:i.itemsCount,cartItemsWeight:i.itemsWeight,cartNeedsPayment:i.needsPayment,cartNeedsShipping:i.needsShipping,cartItemErrors:i.errors,cartTotals:l,cartIsLoading:p,cartErrors:a,billingData:h,billingAddress:h,shippingAddress:k,extensions:i.extensions,shippingRates:i.shippingRates,isLoadingRates:m,cartHasCalculatedShipping:i.hasCalculatedShipping,paymentRequirements:i.paymentRequirements,paymentMethods:i.paymentMethods,receiveCart:c,receiveCartContents:n};return o.current&&ge()(o.current,b)||(o.current=b),o.current},Me=e=>e.length,Be=(0,x.getSetting)("collectableMethodIds",[]),De=e=>Be.includes(e.method_id),Oe=e=>!!A&&(Array.isArray(e)?!!e.find((e=>Be.includes(e))):Be.includes(e)),Fe=e=>e.some((e=>!!e.shipping_rates.length)),Le=e=>!!Fe(e)&&e.some((e=>e.shipping_rates.some((e=>e.selected)))),Ve=e=>Array.from(new Set(e.flatMap((e=>e.shipping_rates.filter((e=>e.selected)).map((e=>e.name)))))),Ue=e=>Object.fromEntries(e.map((({package_id:e,shipping_rates:t})=>[e,t.find((e=>e.selected))?.rate_id||""])));var $e=o(923),He=o.n($e);const qe=window.wp.hooks,ze=()=>({dispatchStoreEvent:(0,d.useCallback)(((e,t={})=>{try{(0,qe.doAction)(`experimental__woocommerce_blocks-${e}`,t)}catch(e){console.error(e)}}),[]),dispatchCheckoutEvent:(0,d.useCallback)(((e,t={})=>{try{(0,qe.doAction)(`experimental__woocommerce_blocks-checkout-${e}`,{...t,storeCart:(0,_.select)("wc/store/cart").getCartData()})}catch(e){console.error(e)}}),[])}),We=()=>{const{shippingRates:e,needsShipping:t,hasCalculatedShipping:o,isLoadingRates:s,isCollectable:r,isSelectingRate:c}=(0,_.useSelect)((e=>{const t=e(X.cartStore),o=t.getShippingRates();return{shippingRates:o,needsShipping:t.getNeedsShipping(),hasCalculatedShipping:t.getHasCalculatedShipping(),isLoadingRates:t.isAddressFieldsForShippingRatesUpdating(),isCollectable:o.every((({shipping_rates:e})=>e.find((({method_id:e})=>Oe(e))))),isSelectingRate:t.isShippingRateBeingSelected()}}),[]),n=(0,d.useRef)({});(0,d.useEffect)((()=>{const t=Ue(e);(0,pe.isObject)(t)&&!He()(n.current,t)&&(n.current=t)}),[e]);const{selectShippingRate:i}=(0,_.useDispatch)(X.cartStore),a=Oe(Object.values(n.current).map((e=>e.split(":")[0]))),{dispatchCheckoutEvent:l}=ze(),p=(0,d.useCallback)(((e,t)=>{let o;void 0!==e&&(o=Oe(e.split(":")[0])?i(e,null):i(e,t),o.then((()=>{l("set-selected-shipping-rate",{shippingRateId:e})})).catch((e=>{(0,X.processErrorResponse)(e)})))}),[i,l]);return{isSelectingRate:c,selectedRates:n.current,selectShippingRate:p,shippingRates:e,needsShipping:t,hasCalculatedShipping:o,isLoadingRates:s,isCollectable:r,hasSelectedLocalPickup:a}},{NONE:Xe,INVALID_ADDRESS:Ye,UNKNOWN:Ge}=oe,Je=(0,d.createContext)(re),Ke=()=>(0,d.useContext)(Je),Ze=({children:e})=>{const{__internalStartCalculation:t,__internalFinishCalculation:o}=(0,_.useDispatch)(X.checkoutStore),{shippingRates:s,isLoadingRates:r,cartErrors:n}=Te(),{selectedRates:i,isSelectingRate:a}=We(),[l,p]=(0,d.useReducer)(ce,Xe),[m,u]=(0,d.useReducer)(Z,{}),h=(0,d.useRef)(m),g=(0,d.useMemo)((()=>({onShippingRateSuccess:de(u).onSuccess,onShippingRateFail:de(u).onFail,onShippingRateSelectSuccess:de(u).onSelectSuccess,onShippingRateSelectFail:de(u).onSelectFail})),[u]);(0,d.useEffect)((()=>{h.current=m}),[m]),(0,d.useEffect)((()=>{r?t():o()}),[r,t,o]),(0,d.useEffect)((()=>{a?t():o()}),[t,o,a]),(0,d.useEffect)((()=>{n.length>0&&n.some((e=>!(!e.code||!Object.values(se).includes(e.code))))?p({type:Ye}):p({type:Xe})}),[n]);const k=(0,d.useMemo)((()=>({isPristine:l===Xe,isValid:l===Xe,hasInvalidAddress:l===Ye,hasError:l===Ge||l===Ye})),[l]);(0,d.useEffect)((()=>{r||0!==s.length&&!k.hasError||ue(h.current,ie,{hasInvalidAddress:k.hasInvalidAddress,hasError:k.hasError})}),[s,r,k.hasError,k.hasInvalidAddress]),(0,d.useEffect)((()=>{!r&&s.length>0&&!k.hasError&&ue(h.current,ne,s)}),[s,r,k.hasError]),(0,d.useEffect)((()=>{a||(k.hasError?ue(h.current,le,{hasError:k.hasError,hasInvalidAddress:k.hasInvalidAddress}):ue(h.current,ae,i.current))}),[i,a,k.hasError,k.hasInvalidAddress]);const b={shippingErrorStatus:k,dispatchErrorStatus:p,shippingErrorTypes:oe,...g};return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(Je.Provider,{value:b,children:e})})};function Qe(e,t){const o=(0,d.useRef)();return(0,d.useEffect)((()=>{o.current===e||t&&!t(e,o.current)||(o.current=e)}),[e,t]),o.current}const et=window.wp.notices,tt=window.wc.blocksCheckoutEvents,ot={},st={},rt=()=>ot,ct=()=>st,nt=(0,d.createContext)({onSubmit:()=>{},onCheckoutAfterProcessingWithSuccess:()=>()=>{},onCheckoutAfterProcessingWithError:()=>()=>{},onCheckoutBeforeProcessing:()=>()=>{},onCheckoutValidationBeforeProcessing:()=>()=>{},onCheckoutSuccess:()=>()=>{},onCheckoutFail:()=>()=>{},onCheckoutValidation:()=>()=>{}}),it=({children:e,redirectUrl:t})=>{const o=rt(),s=ct(),{isEditor:r}=b(),{__internalUpdateAvailablePaymentMethods:n}=(0,_.useDispatch)(X.paymentStore);(0,d.useEffect)((()=>{(r||0!==Object.keys(o).length||0!==Object.keys(s).length)&&n()}),[r,o,s,n]);const{__internalSetRedirectUrl:i,__internalEmitValidateEvent:a,__internalEmitAfterProcessingEvents:l,__internalSetBeforeProcessing:p}=(0,_.useDispatch)(X.checkoutStore),{checkoutRedirectUrl:m,checkoutStatus:u,isCheckoutBeforeProcessing:h,isCheckoutAfterProcessing:g,checkoutHasError:k,checkoutOrderId:w,checkoutOrderNotes:y,checkoutCustomerId:x}=(0,_.useSelect)((e=>{const t=e(X.checkoutStore);return{checkoutRedirectUrl:t.getRedirectUrl(),checkoutStatus:t.getCheckoutStatus(),isCheckoutBeforeProcessing:t.isBeforeProcessing(),isCheckoutAfterProcessing:t.isAfterProcessing(),checkoutHasError:t.hasError(),checkoutOrderId:t.getOrderId(),checkoutOrderNotes:t.getOrderNotes(),checkoutCustomerId:t.getCustomerId()}}));t&&t!==m&&i(t);const{setValidationErrors:v}=(0,_.useDispatch)(X.validationStore),{dispatchCheckoutEvent:f}=ze(),S=Object.values(me).filter((e=>e!==me.PAYMENTS&&e!==me.EXPRESS_PAYMENTS)),j=(0,_.useSelect)((e=>{const{getNotices:t}=e(et.store);return S.reduce(((e,o)=>[...e,...t(o)]),[])}),[S]),{paymentNotices:C,expressPaymentNotices:E}=(0,_.useSelect)((e=>{const{getNotices:t}=e(et.store);return{paymentNotices:t(me.PAYMENTS),expressPaymentNotices:t(me.EXPRESS_PAYMENTS)}}),[]),[P]=(0,d.useReducer)(Z,{}),N=(0,d.useRef)(P),{onCheckoutValidation:A,onCheckoutSuccess:I,onCheckoutFail:R}=tt.checkoutEvents;(0,d.useEffect)((()=>{N.current=P}),[P]);const T=(0,d.useMemo)((()=>function(...e){return G()("onCheckoutBeforeProcessing",{alternative:"onCheckoutValidation",plugin:"WooCommerce Blocks"}),A(...e)}),[A]),M=(0,d.useMemo)((()=>function(...e){return G()("onCheckoutValidationBeforeProcessing",{since:"9.7.0",alternative:"onCheckoutValidation",plugin:"WooCommerce Blocks",link:"https://github.com/woocommerce/woocommerce-blocks/pull/8381"}),A(...e)}),[A]),B=(0,d.useMemo)((()=>function(...e){return G()("onCheckoutAfterProcessingWithSuccess",{since:"9.7.0",alternative:"onCheckoutSuccess",plugin:"WooCommerce Blocks",link:"https://github.com/woocommerce/woocommerce-blocks/pull/8381"}),I(...e)}),[I]),D=(0,d.useMemo)((()=>function(...e){return G()("onCheckoutAfterProcessingWithError",{since:"9.7.0",alternative:"onCheckoutFail",plugin:"WooCommerce Blocks",link:"https://github.com/woocommerce/woocommerce-blocks/pull/8381"}),R(...e)}),[R]);(0,d.useEffect)((()=>{h&&a({setValidationErrors:v})}),[h,v,a]);const O=Qe(u),F=Qe(k);(0,d.useEffect)((()=>{u===O&&k===F||g&&l({notices:{checkoutNotices:j,paymentNotices:C,expressPaymentNotices:E}})}),[u,k,m,w,x,y,g,h,O,F,j,E,C,a,l]);const L={onSubmit:(0,d.useCallback)((()=>{f("submit"),p()}),[f,p]),onCheckoutBeforeProcessing:T,onCheckoutValidationBeforeProcessing:M,onCheckoutAfterProcessingWithSuccess:B,onCheckoutAfterProcessingWithError:D,onCheckoutSuccess:I,onCheckoutFail:R,onCheckoutValidation:A};return(0,c.jsx)(nt.Provider,{value:L,children:e})},at=window.wp.apiFetch;var lt=o.n(at);(0,v.__)("Something went wrong. Please contact us to get assistance.","woocommerce");const dt=window.wc.wcBlocksRegistry,pt=(e,t,o)=>{const s=Object.keys(e).map((t=>({key:t,value:e[t]})),[]),r=`wc-${o}-new-payment-method`;return s.push({key:r,value:t}),s},mt=e=>{if(!e)return;const{__internalSetCustomerId:t}=(0,_.dispatch)(X.checkoutStore);lt().setNonce&&"function"==typeof lt().setNonce&&lt().setNonce(e),lt().setCartHash&&"function"==typeof lt().setCartHash&&lt().setCartHash(e),e?.get("User-ID")&&t(parseInt(e.get("User-ID")||"0",10))},ut=()=>{const{customerData:e,isInitialized:t}=(0,_.useSelect)((e=>{const t=e(X.cartStore);return{customerData:t.getCustomerData(),isInitialized:t.hasFinishedResolution("getCartData")}})),{setShippingAddress:o,setBillingAddress:s}=(0,_.useDispatch)(X.cartStore);return{isInitialized:t,billingAddress:e.billingAddress,shippingAddress:e.shippingAddress,setBillingAddress:s,setShippingAddress:o}},ht=()=>{const{isEditor:e,getPreviewData:t}=b(),{needsShipping:o}=We(),{useShippingAsBilling:s,prefersCollection:r,editingBillingAddress:c,editingShippingAddress:n}=(0,_.useSelect)((e=>({useShippingAsBilling:e(X.checkoutStore).getUseShippingAsBilling(),prefersCollection:e(X.checkoutStore).prefersCollection(),editingBillingAddress:e(X.checkoutStore).getEditingBillingAddress(),editingShippingAddress:e(X.checkoutStore).getEditingShippingAddress()}))),{__internalSetUseShippingAsBilling:i,setEditingBillingAddress:a,setEditingShippingAddress:l}=(0,_.useDispatch)(X.checkoutStore),{billingAddress:p,setBillingAddress:m,shippingAddress:u,setShippingAddress:h}=ut(),g=(0,d.useCallback)((e=>{m({email:e})}),[m]),k=(0,x.getSetting)("forcedBillingAddress",!1);return{shippingAddress:u,billingAddress:p,setShippingAddress:h,setBillingAddress:m,setEmail:g,defaultFields:e?t("defaultFields",x.defaultFields):x.defaultFields,useShippingAsBilling:s,setUseShippingAsBilling:i,editingBillingAddress:c,editingShippingAddress:n,setEditingBillingAddress:a,setEditingShippingAddress:l,needsShipping:o,showShippingFields:!k&&o&&!r,showShippingMethods:o&&!r,showBillingFields:!o||!s||!!r,forcedBillingAddress:k,useBillingAsShipping:k||!!r}},gt=()=>{const{onCheckoutValidation:e}=tt.checkoutEvents,{additionalFields:t,customerId:o,customerPassword:s,extensionData:r,hasError:c,isBeforeProcessing:n,isComplete:i,isProcessing:a,orderNotes:l,redirectUrl:p,shouldCreateAccount:m}=(0,_.useSelect)((e=>{const t=e(X.checkoutStore);return{additionalFields:t.getAdditionalFields(),customerId:t.getCustomerId(),customerPassword:t.getCustomerPassword(),extensionData:t.getExtensionData(),hasError:t.hasError(),isBeforeProcessing:t.isBeforeProcessing(),isComplete:t.isComplete(),isProcessing:t.isProcessing(),orderNotes:t.getOrderNotes(),redirectUrl:t.getRedirectUrl(),shouldCreateAccount:t.getShouldCreateAccount()}}),[]),{__internalSetHasError:u,__internalProcessCheckoutResponse:h}=(0,_.useDispatch)(X.checkoutStore),g=(0,_.useSelect)((e=>e(X.validationStore).hasValidationErrors),[]),{shippingErrorStatus:k}=Ke(),{shippingAddress:b,billingAddress:w,useBillingAsShipping:y}=ht(),{cartNeedsPayment:x,cartNeedsShipping:f,receiveCartContents:S}=Te(),{activePaymentMethod:j,paymentMethodData:C,isExpressPaymentMethodActive:E,hasPaymentError:P,isPaymentReady:N,shouldSavePayment:A}=(0,_.useSelect)((e=>{const t=e(X.paymentStore);return{activePaymentMethod:t.getActivePaymentMethod(),paymentMethodData:t.getPaymentMethodData(),isExpressPaymentMethodActive:t.isExpressPaymentMethodActive(),hasPaymentError:t.hasPaymentError(),isPaymentReady:t.isPaymentReady(),shouldSavePayment:t.getShouldSavePaymentMethod()}}),[]),I=(0,dt.getPaymentMethods)(),R=(0,dt.getExpressPaymentMethods)(),T=(0,d.useRef)(w),M=(0,d.useRef)(b),B=(0,d.useRef)(p),[D,O]=(0,d.useState)(!1),F=(0,d.useMemo)((()=>{const e={...R,...I};return e?.[j]?.paymentMethodId}),[j,R,I]),L=g()&&!E||P||k.hasError,V=!c&&!L&&(N||!x)&&a;(0,d.useEffect)((()=>{L===c||!a&&!n||E||u(L)}),[L,c,a,n,E,u]),(0,d.useEffect)((()=>{T.current=w,M.current=b,B.current=p}),[w,b,p]);const U=(0,d.useCallback)((()=>g()?void 0!==(0,_.select)(X.validationStore).getValidationError("shipping-rates-error")&&{type:pe.responseTypes.ERROR,errorMessage:(0,v.__)("Sorry, this order requires a shipping option.","woocommerce")}:P?{type:pe.responseTypes.ERROR,errorMessage:(0,v.__)("There was a problem with your payment option.","woocommerce"),context:"wc/checkout/payments"}:!k.hasError||{type:pe.responseTypes.ERROR,errorMessage:(0,v.__)("There was a problem with your shipping option.","woocommerce"),context:"wc/checkout/shipping-methods"}),[g,P,k.hasError]);(0,d.useEffect)((()=>{let t;return E||(t=e(U,0)),()=>{E||"function"!=typeof t||t()}}),[e,U,E]),(0,d.useEffect)((()=>{window.localStorage.removeItem("WOOCOMMERCE_CHECKOUT_IS_CUSTOMER_DATA_DIRTY"),B.current&&(window.location.href=B.current)}),[i]);const $=(0,d.useCallback)((async()=>{if(D)return;O(!0),(()=>{const e=(0,_.select)("wc/store/store-notices").getRegisteredContainers(),{removeNotice:t}=(0,_.dispatch)(et.store),{getNotices:o}=(0,_.select)(et.store);e.forEach((e=>{o(e).forEach((o=>{t(o.id,e)}))}))})();const e=x?{payment_method:F,payment_data:pt(C,A,j)}:{},c=xe(T.current),n=y?c:xe(M.current),i={additional_fields:t,billing_address:c,create_account:m,customer_note:l,customer_password:s,extensions:{...r},shipping_address:f?n:void 0,...e};(0,X.clearCheckoutPutRequests)(),lt()({path:"/wc/store/v1/checkout",method:"POST",data:i,cache:"no-store",parse:!1}).then((e=>{if((0,pe.assertResponseIsValid)(e),mt(e.headers),!e.ok)throw e;return e.json()})).then((e=>{h(e),O(!1)})).catch((e=>{mt(e?.headers);try{e.json().then((e=>e)).then((e=>{e.data?.cart&&S(e.data.cart),(0,X.processErrorResponse)(e),h(e)}))}catch{let e=(0,v.__)("Something went wrong when placing the order. Check your email for order updates before retrying.","woocommerce");0!==o&&(e=(0,v.__)("Something went wrong when placing the order. Check your account's order history or your email for order updates before retrying.","woocommerce")),(0,X.processErrorResponse)({code:"unknown_error",message:e,data:null})}u(!0),O(!1)}))}),[D,x,F,C,A,j,l,m,o,s,r,t,f,S,u,h,y]);return(0,d.useEffect)((()=>{V&&!D&&$()}),[$,V,D]),null},_t=({children:e,redirectUrl:t})=>(0,c.jsx)(it,{redirectUrl:t,children:(0,c.jsx)(Ze,{children:(0,c.jsxs)(te,{children:[e,(0,c.jsx)(W,{renderError:x.CURRENT_USER_IS_ADMIN?null:()=>null,children:(0,c.jsx)(y.PluginArea,{scope:"woocommerce-checkout"})}),(0,c.jsx)(gt,{})]})})}),kt={currency_code:x.SITE_CURRENCY.code,currency_symbol:x.SITE_CURRENCY.symbol,currency_minor_unit:x.SITE_CURRENCY.minorUnit,currency_decimal_separator:x.SITE_CURRENCY.decimalSeparator,currency_thousand_separator:x.SITE_CURRENCY.thousandSeparator,currency_prefix:x.SITE_CURRENCY.prefix,currency_suffix:x.SITE_CURRENCY.suffix},bt=(e,t=2)=>{const o=x.SITE_CURRENCY.minorUnit;if(o===t||!e)return e;const s=Math.pow(10,o);return(Math.round(parseInt(e,10)/Math.pow(10,t))*s).toString()},wt=(0,x.getSetting)("localPickupEnabled",!1),yt=(0,x.getSetting)("localPickupText",(0,v.__)("Local pickup","woocommerce")),xt=(0,x.getSetting)("localPickupCost",""),vt=wt?(0,x.getSetting)("localPickupLocations",[]):[],ft=vt?Object.values(vt).map(((e,t)=>({...kt,name:`${yt} (${e.name})`,description:"",delivery_time:"",price:bt(xt,0)||"0",taxes:"0",rate_id:`pickup_location:${t+1}`,instance_id:t+1,meta_data:[{key:"pickup_location",value:e.name},{key:"pickup_address",value:e.formatted_address},{key:"pickup_details",value:e.details}],method_id:"pickup_location",selected:!1}))):[],St=[{destination:{address_1:"",address_2:"",city:"",state:"",postcode:"",country:""},package_id:0,name:(0,v.__)("Shipping","woocommerce"),items:[{key:"33e75ff09dd601bbe69f351039152189",name:(0,v._x)("Beanie with Logo","example product in Cart Block","woocommerce"),quantity:2},{key:"6512bd43d9caa6e02c990b0a82652dca",name:(0,v._x)("Beanie","example product in Cart Block","woocommerce"),quantity:1}],shipping_rates:[{...kt,name:(0,v.__)("Flat rate shipping","woocommerce"),description:"",delivery_time:"",price:bt("500"),taxes:"0",rate_id:"flat_rate:0",instance_id:0,meta_data:[],method_id:"flat_rate",selected:!1},{...kt,name:(0,v.__)("Free shipping","woocommerce"),description:"",delivery_time:"",price:"0",taxes:"0",rate_id:"free_shipping:1",instance_id:0,meta_data:[],method_id:"flat_rate",selected:!0},...ft]}],jt=(0,x.getSetting)("displayCartPricesIncludingTax",!1),Ct={coupons:[],shipping_rates:(0,x.getSetting)("shippingMethodsExist",!1)||(0,x.getSetting)("localPickupEnabled",!1)?St:[],items:[{key:"1",id:1,type:"simple",quantity:2,catalog_visibility:"visible",name:(0,v.__)("Beanie","woocommerce"),summary:(0,v.__)("Beanie","woocommerce"),short_description:(0,v.__)("Warm hat for winter","woocommerce"),description:"Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo.",sku:"woo-beanie",permalink:"https://example.org",low_stock_remaining:2,backorders_allowed:!1,show_backorder_badge:!1,sold_individually:!1,quantity_limits:{minimum:1,maximum:99,multiple_of:1,editable:!0},images:[{id:10,src:S+"previews/beanie.jpg",thumbnail:S+"previews/beanie.jpg",srcset:"",sizes:"",name:"",alt:""}],variation:[{attribute:(0,v.__)("Color","woocommerce"),value:(0,v.__)("Yellow","woocommerce")},{attribute:(0,v.__)("Size","woocommerce"),value:(0,v.__)("Small","woocommerce")}],prices:{...kt,price:bt(jt?"12000":"10000"),regular_price:bt(jt?"120":"100"),sale_price:bt(jt?"12000":"10000"),price_range:null,raw_prices:{precision:6,price:jt?"12000000":"10000000",regular_price:jt?"12000000":"10000000",sale_price:jt?"12000000":"10000000"}},totals:{...kt,line_subtotal:bt("2000"),line_subtotal_tax:bt("400"),line_total:bt("2000"),line_total_tax:bt("400")},extensions:{},item_data:[]},{key:"2",id:2,type:"simple",quantity:1,catalog_visibility:"visible",name:(0,v.__)("Cap","woocommerce"),summary:(0,v.__)("Cap","woocommerce"),short_description:(0,v.__)("Lightweight baseball cap","woocommerce"),description:"Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo.",sku:"woo-cap",low_stock_remaining:null,permalink:"https://example.org",backorders_allowed:!1,show_backorder_badge:!1,sold_individually:!1,quantity_limits:{minimum:1,maximum:99,multiple_of:1,editable:!0},images:[{id:11,src:S+"previews/cap.jpg",thumbnail:S+"previews/cap.jpg",srcset:"",sizes:"",name:"",alt:""}],variation:[{attribute:(0,v.__)("Color","woocommerce"),value:(0,v.__)("Orange","woocommerce")}],prices:{...kt,price:bt(jt?"2400":"2000"),regular_price:bt(jt?"2400":"2000"),sale_price:bt(jt?"2400":"2000"),price_range:null,raw_prices:{precision:6,price:jt?"24000000":"20000000",regular_price:jt?"24000000":"20000000",sale_price:jt?"24000000":"20000000"}},totals:{...kt,line_subtotal:bt("2000"),line_subtotal_tax:bt("400"),line_total:bt("2000"),line_total_tax:bt("400")},extensions:{},item_data:[]}],cross_sells:[{id:1,name:(0,v.__)("Polo","woocommerce"),slug:"polo",parent:0,type:"simple",variation:"",permalink:"https://example.org",sku:"woo-polo",short_description:(0,v.__)("Polo","woocommerce"),description:(0,v.__)("Polo","woocommerce"),on_sale:!1,prices:{...kt,price:bt(jt?"24000":"20000"),regular_price:bt(jt?"24000":"20000"),sale_price:bt(jt?"12000":"10000"),price_range:null},price_html:"",average_rating:"4.5",review_count:2,images:[{id:17,src:S+"previews/polo.jpg",thumbnail:S+"previews/polo.jpg",srcset:"",sizes:"",name:"",alt:""}],categories:[],tags:[],attributes:[],variations:[],has_options:!1,is_purchasable:!0,is_in_stock:!0,is_on_backorder:!1,low_stock_remaining:null,sold_individually:!1,add_to_cart:{text:"",description:"",url:"",minimum:1,maximum:99,multiple_of:1}},{id:2,name:(0,v.__)("Long Sleeve Tee","woocommerce"),slug:"long-sleeve-tee",parent:0,type:"simple",variation:"",permalink:"https://example.org",sku:"woo-long-sleeve-tee",short_description:(0,v.__)("Long Sleeve Tee","woocommerce"),description:(0,v.__)("Long Sleeve Tee","woocommerce"),on_sale:!1,prices:{...kt,price:bt(jt?"30000":"25000"),regular_price:bt(jt?"30000":"25000"),sale_price:bt(jt?"30000":"25000"),price_range:null},price_html:"",average_rating:"4",review_count:2,images:[{id:17,src:S+"previews/long-sleeve-tee.jpg",thumbnail:S+"previews/long-sleeve-tee.jpg",srcset:"",sizes:"",name:"",alt:""}],categories:[],tags:[],attributes:[],variations:[],has_options:!1,is_purchasable:!0,is_in_stock:!0,is_on_backorder:!1,low_stock_remaining:null,sold_individually:!1,add_to_cart:{text:"",description:"",url:"",minimum:1,maximum:99,multiple_of:1}},{id:3,name:(0,v.__)("Hoodie with Zipper","woocommerce"),slug:"hoodie-with-zipper",parent:0,type:"simple",variation:"",permalink:"https://example.org",sku:"woo-hoodie-with-zipper",short_description:(0,v.__)("Hoodie with Zipper","woocommerce"),description:(0,v.__)("Hoodie with Zipper","woocommerce"),on_sale:!0,prices:{...kt,price:bt(jt?"15000":"12500"),regular_price:bt(jt?"30000":"25000"),sale_price:bt(jt?"15000":"12500"),price_range:null},price_html:"",average_rating:"1",review_count:2,images:[{id:17,src:S+"previews/hoodie-with-zipper.jpg",thumbnail:S+"previews/hoodie-with-zipper.jpg",srcset:"",sizes:"",name:"",alt:""}],categories:[],tags:[],attributes:[],variations:[],has_options:!1,is_purchasable:!0,is_in_stock:!0,is_on_backorder:!1,low_stock_remaining:null,sold_individually:!1,add_to_cart:{text:"",description:"",url:"",minimum:1,maximum:99,multiple_of:1}},{id:4,name:(0,v.__)("Hoodie with Logo","woocommerce"),slug:"hoodie-with-logo",parent:0,type:"simple",variation:"",permalink:"https://example.org",sku:"woo-hoodie-with-logo",short_description:(0,v.__)("Polo","woocommerce"),description:(0,v.__)("Polo","woocommerce"),on_sale:!1,prices:{...kt,price:bt(jt?"4500":"4250"),regular_price:bt(jt?"4500":"4250"),sale_price:bt(jt?"4500":"4250"),price_range:null},price_html:"",average_rating:"5",review_count:2,images:[{id:17,src:S+"previews/hoodie-with-logo.jpg",thumbnail:S+"previews/hoodie-with-logo.jpg",srcset:"",sizes:"",name:"",alt:""}],categories:[],tags:[],attributes:[],variations:[],has_options:!1,is_purchasable:!0,is_in_stock:!0,is_on_backorder:!1,low_stock_remaining:null,sold_individually:!1,add_to_cart:{text:"",description:"",url:"",minimum:1,maximum:99,multiple_of:1}},{id:5,name:(0,v.__)("Hoodie with Pocket","woocommerce"),slug:"hoodie-with-pocket",parent:0,type:"simple",variation:"",permalink:"https://example.org",sku:"woo-hoodie-with-pocket",short_description:(0,v.__)("Hoodie with Pocket","woocommerce"),description:(0,v.__)("Hoodie with Pocket","woocommerce"),on_sale:!0,prices:{...kt,price:bt(jt?"3500":"3250"),regular_price:bt(jt?"4500":"4250"),sale_price:bt(jt?"3500":"3250"),price_range:null},price_html:"",average_rating:"3.75",review_count:4,images:[{id:17,src:S+"previews/hoodie-with-pocket.jpg",thumbnail:S+"previews/hoodie-with-pocket.jpg",srcset:"",sizes:"",name:"",alt:""}],categories:[],tags:[],attributes:[],variations:[],has_options:!1,is_purchasable:!0,is_in_stock:!0,is_on_backorder:!1,low_stock_remaining:null,sold_individually:!1,add_to_cart:{text:"",description:"",url:"",minimum:1,maximum:99,multiple_of:1}},{id:6,name:(0,v.__)("T-Shirt","woocommerce"),slug:"t-shirt",parent:0,type:"simple",variation:"",permalink:"https://example.org",sku:"woo-t-shirt",short_description:(0,v.__)("T-Shirt","woocommerce"),description:(0,v.__)("T-Shirt","woocommerce"),on_sale:!1,prices:{...kt,price:bt(jt?"1800":"1500"),regular_price:bt(jt?"1800":"1500"),sale_price:bt(jt?"1800":"1500"),price_range:null},price_html:"",average_rating:"3",review_count:2,images:[{id:17,src:S+"previews/tshirt.jpg",thumbnail:S+"previews/tshirt.jpg",srcset:"",sizes:"",name:"",alt:""}],categories:[],tags:[],attributes:[],variations:[],has_options:!1,is_purchasable:!0,is_in_stock:!0,is_on_backorder:!1,low_stock_remaining:null,sold_individually:!1,add_to_cart:{text:"",description:"",url:"",minimum:1,maximum:99,multiple_of:1}}],fees:[{id:"fee",name:(0,v.__)("Fee","woocommerce"),totals:{...kt,total:bt("100"),total_tax:bt("20")}}],items_count:3,items_weight:0,needs_payment:!0,needs_shipping:I,has_calculated_shipping:!0,shipping_address:{first_name:"",last_name:"",company:"",address_1:"",address_2:"",city:"",state:"",postcode:"",country:"",phone:""},billing_address:{first_name:"",last_name:"",company:"",address_1:"",address_2:"",city:"",state:"",postcode:"",country:"",email:"",phone:""},totals:{...kt,total_items:bt("4000"),total_items_tax:bt("800"),total_fees:bt("100"),total_fees_tax:bt("20"),total_discount:"0",total_discount_tax:"0",total_shipping:"0",total_shipping_tax:"0",total_tax:bt("820"),total_price:bt("4920"),tax_lines:[{name:(0,v.__)("Sales tax","woocommerce"),rate:"20%",price:bt("820")}]},errors:[],payment_methods:["cod","bacs","cheque"],payment_requirements:["products"],extensions:{}},Et={cc:[{method:{gateway:"credit-card",last4:"5678",brand:"Visa"},expires:"12/20",is_default:!1,tokenId:"1"}]},Pt=window.wc.blocksCheckout,Nt=window.wp.url,At=window.wp.coreData;var It=o(4782);const Rt=(0,d.forwardRef)((({children:e,className:t=""},o)=>(0,c.jsx)("div",{ref:o,className:(0,s.A)("wc-block-components-main",t),children:e}))),Tt={showOrderNotes:!0,showPolicyLinks:!0,showReturnToCart:!0,cartPageId:0,showRateAfterTaxName:!1,showFormStepNumbers:!1,defaultFields:x.defaultFields},Mt=(0,d.createContext)(Tt),Bt=()=>{const e=(0,d.useContext)(Mt);return{...Tt,...e}},Dt=["core/paragraph","core/image","core/separator"],Ot=e=>{const t=(0,Pt.applyCheckoutFilter)({filterName:"additionalCartCheckoutInnerBlockTypes",defaultValue:[],extensions:(0,_.select)(X.cartStore).getCartData().extensions,arg:{block:e},validation:e=>{if(Array.isArray(e)&&e.every((e=>"string"==typeof e)))return!0;throw new Error("allowedBlockTypes filters must return an array of strings.")}});return Array.from(new Set([...(0,a.getBlockTypes)().filter((t=>(t?.parent||[]).includes(e))).map((({name:e})=>e)),...Dt,...t]))},Ft=({clientId:e,registeredBlocks:t,defaultTemplate:o=[]})=>{const s=(0,d.useRef)(t),r=(0,d.useRef)(o),c=(0,_.useRegistry)(),{isPreview:n}=b();(0,d.useEffect)((()=>{let t=!1;if(n)return;const{replaceInnerBlocks:o}=(0,_.dispatch)("core/block-editor");return c.subscribe((()=>{if(!c.select("core/block-editor").getBlock(e))return;const n=c.select("core/block-editor").getBlocks(e);if(0===n.length&&r.current.length>0&&!t){const s=(0,a.createBlocksFromInnerBlocksTemplate)(r.current);if(0!==s.length)return t=!0,void o(e,s)}const i=s.current.map((e=>(0,a.getBlockType)(e))),l=((e,t)=>{const o=t.filter((e=>e&&(({attributes:e})=>Boolean(e.lock?.remove||e.lock?.default?.remove))(e))),s=[];return o.forEach((t=>{if(void 0===t)return;const o=e.find((e=>e.name===t.name));o||s.push(t)})),s})(n,i);if(0===l.length)return;let d=-1;const p=l.map((e=>{const t=r.current.findIndex((([t])=>t===e.name)),o=(0,a.createBlock)(e.name);return-1===d&&(d=(({defaultTemplatePosition:e,innerBlocks:t,currentDefaultTemplate:o})=>{switch(e){case-1:return t.length;case 0:return 0;default:const s=o.current[e-1],r=t.findIndex((({name:e})=>e===s[0]));return-1===r?e:r+1}})({defaultTemplatePosition:t,innerBlocks:n,currentDefaultTemplate:r})),o}));c.batch((()=>{c.dispatch("core/block-editor").insertBlocks(p,d,e)}))}),"core/block-editor")}),[e,n,c])};o(4793);const Lt=window.wp.components,Vt=()=>{const{defaultFields:e}=Bt(),t=(e,t)=>{["phone","company","address_2"].includes(e)&&["optional","required","hidden"].includes(t)&&(0,_.dispatch)(At.store).editEntityRecord("root","site",void 0,{[`woocommerce_checkout_${e}_field`]:t})},o=[{label:(0,v.__)("Optional","woocommerce"),value:"false"},{label:(0,v.__)("Required","woocommerce"),value:"true"}];return(0,c.jsx)(l.InspectorControls,{children:(0,c.jsxs)(Lt.PanelBody,{title:(0,v.__)("Address Fields","woocommerce"),children:[(0,c.jsx)("p",{className:"wc-block-checkout__controls-text",children:(0,v.__)("Show or hide fields in the checkout address forms.","woocommerce")}),(0,c.jsx)(Lt.ToggleControl,{label:(0,v.__)("Company","woocommerce"),checked:!e.company.hidden,onChange:()=>{e.company.hidden?t("company","optional"):t("company","hidden")}}),!e.company.hidden&&(0,c.jsx)(Lt.RadioControl,{selected:e.company.required?"true":"false",options:o,onChange:e=>{t("company","true"===e?"required":"optional")},className:"components-base-control--nested wc-block-components-require-company-field"}),(0,c.jsx)(Lt.ToggleControl,{label:(0,v.__)("Address line 2","woocommerce"),checked:!e.address_2.hidden,onChange:()=>{e.address_2.hidden?t("address_2","optional"):t("address_2","hidden")}}),!e.address_2.hidden&&(0,c.jsx)(Lt.RadioControl,{selected:e.address_2.required?"true":"false",options:o,onChange:e=>{t("address_2","true"===e?"required":"optional")},className:"components-base-control--nested wc-block-components-require-address_2-field"}),(0,c.jsx)(Lt.ToggleControl,{label:(0,v.__)("Phone","woocommerce"),checked:!e.phone.hidden,onChange:()=>{e.phone.hidden?t("phone","optional"):t("phone","hidden")}}),!e.phone.hidden&&(0,c.jsx)(Lt.RadioControl,{selected:e.phone.required?"true":"false",options:o,onChange:e=>{t("phone","true"===e?"required":"optional")},className:"components-base-control--nested wc-block-components-require-phone-field"})]})})},Ut=JSON.parse('{"DD":"Checkout Fields","XV":3}');(0,a.registerBlockType)("woocommerce/checkout-fields-block",{apiVersion:Ut.XV,title:Ut.DD,icon:{src:(0,c.jsx)(i.A,{icon:It.A,className:"wc-block-editor-components-block-icon"})},edit:({clientId:e,attributes:t})=>{const o=(0,l.useBlockProps)({className:(0,s.A)("wc-block-checkout__main",t?.className)}),r=Ot(Pt.innerBlockAreas.CHECKOUT_FIELDS),{showFormStepNumbers:n}=Bt(),i=[["woocommerce/checkout-express-payment-block",{},[]],["woocommerce/checkout-contact-information-block",{},[]],["woocommerce/checkout-shipping-method-block",{},[]],["woocommerce/checkout-pickup-options-block",{},[]],["woocommerce/checkout-shipping-address-block",{},[]],["woocommerce/checkout-billing-address-block",{},[]],["woocommerce/checkout-shipping-methods-block",{},[]],["woocommerce/checkout-payment-block",{},[]],["woocommerce/checkout-additional-information-block",{},[]],["woocommerce/checkout-order-note-block",{},[]],["woocommerce/checkout-terms-block",{},[]],["woocommerce/checkout-actions-block",{},[]]].filter(Boolean);return Ft({clientId:e,registeredBlocks:r,defaultTemplate:i}),(0,c.jsxs)(Rt,{...o,children:[(0,c.jsx)(Vt,{}),(0,c.jsx)("form",{className:(0,s.A)("wc-block-components-form wc-block-checkout__form",{"wc-block-checkout__form--with-step-numbers":n}),children:(0,c.jsx)(l.InnerBlocks,{allowedBlocks:r,templateLock:!1,template:i,renderAppender:l.InnerBlocks.ButtonBlockAppender})})]})},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save(),children:(0,c.jsx)(l.InnerBlocks.Content,{})})});const $t=(0,d.forwardRef)((({children:e,className:t=""},o)=>(0,c.jsx)("div",{ref:o,className:(0,s.A)("wc-block-components-sidebar",t),children:e})));o(6811);const Ht=JSON.parse('{"DD":"Checkout Totals","XV":3}');(0,a.registerBlockType)("woocommerce/checkout-totals-block",{apiVersion:Ht.XV,title:Ht.DD,icon:{src:(0,c.jsx)(i.A,{icon:It.A,className:"wc-block-editor-components-block-icon"})},edit:({clientId:e,attributes:t})=>{const o=(0,l.useBlockProps)({className:(0,s.A)("wc-block-checkout__sidebar",t?.className)}),r=Ot(Pt.innerBlockAreas.CHECKOUT_TOTALS),n=[["woocommerce/checkout-order-summary-block",{},[]]];return Ft({clientId:e,registeredBlocks:r,defaultTemplate:n}),(0,c.jsx)($t,{...o,children:(0,c.jsx)(l.InnerBlocks,{allowedBlocks:r,templateLock:!1,template:n,renderAppender:l.InnerBlocks.ButtonBlockAppender})})},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save(),children:(0,c.jsx)(l.InnerBlocks.Content,{})})});var qt=o(2216);const zt=window.wc.blocksComponents,Wt=({children:e,stepHeadingContent:t})=>(0,c.jsxs)("div",{className:"wc-block-components-checkout-step__heading",children:[(0,c.jsx)(zt.Title,{"aria-hidden":"true",className:"wc-block-components-checkout-step__title",headingLevel:"2",children:e}),!!t&&(0,c.jsx)("span",{className:"wc-block-components-checkout-step__heading-content",children:t})]}),Xt=({attributes:e,setAttributes:t,className:o="",children:r})=>{const{showFormStepNumbers:n}=Bt(),{title:i="",description:a=""}=e,d=(0,l.useBlockProps)({className:(0,s.A)("wc-block-components-checkout-step",o,{"wc-block-components-checkout-step--with-step-number":n})});return(0,c.jsxs)("div",{...d,children:[(0,c.jsx)(Wt,{children:(0,c.jsx)(l.PlainText,{className:"",value:i,onChange:e=>t({title:e}),style:{backgroundColor:"transparent"}})}),(0,c.jsxs)("div",{className:"wc-block-components-checkout-step__container",children:[(0,c.jsx)("p",{className:"wc-block-components-checkout-step__description",children:(0,c.jsx)(l.PlainText,{className:a?"":"wc-block-components-checkout-step__description-placeholder",value:a,placeholder:(0,v.__)("Optional text for this form step.","woocommerce"),onChange:e=>t({description:e}),style:{backgroundColor:"transparent"}})}),(0,c.jsx)("div",{className:"wc-block-components-checkout-step__content",children:r})]})]})};o(2862);const Yt=({block:e})=>{const{"data-block":t}=(0,l.useBlockProps)(),o=Ot(e);return Ft({clientId:t,registeredBlocks:o}),(0,c.jsx)("div",{className:"wc-block-checkout__additional_fields",children:(0,c.jsx)(l.InnerBlocks,{allowedBlocks:o})})},Gt=()=>(0,c.jsx)(l.InnerBlocks.Content,{});var Jt=o(5929),Kt=o(8107),Zt=o(4347);const Qt=["BUTTON","FIELDSET","INPUT","OPTGROUP","OPTION","SELECT","TEXTAREA","A"],eo=({children:e,style:t={},...o})=>{const s=(0,d.useRef)(null),r=()=>{s.current&&Kt.focus.focusable.find(s.current).forEach((e=>{Qt.includes(e.nodeName)&&e.setAttribute("tabindex","-1"),e.hasAttribute("contenteditable")&&e.setAttribute("contenteditable","false")}))},n=(0,Zt.YQ)(r,0,{leading:!0});return(0,d.useLayoutEffect)((()=>{let e;return r(),s.current&&(e=new window.MutationObserver(n),e.observe(s.current,{childList:!0,attributes:!0,subtree:!0})),()=>{e&&e.disconnect(),n.cancel()}}),[n]),(0,c.jsx)("div",{ref:s,"aria-disabled":"true",style:{userSelect:"none",pointerEvents:"none",cursor:"normal",...t},...o,children:e})};o(4249);var to=o(2174);o(8306);const oo=e=>{const{onChange:t,options:o,label:r,value:n="",className:a,size:l,errorId:p,required:m,errorMessage:u=(0,v.__)("Please select a valid option","woocommerce"),placeholder:h,...g}=e,k=(0,d.useCallback)((e=>{t(e.target.value)}),[t]),b=(0,Pt.getFieldLabel)(r),w=(0,d.useMemo)((()=>({value:"",label:null!=h?h:(0,v.sprintf)(
// translators: %s will be label of the field. For example "country/region".
// translators: %s will be label of the field. For example "country/region".
(0,v.__)("Select a %s","woocommerce"),b),disabled:!!m})),[h,m,b]),y=(0,d.useId)(),x=g.id||`wc-blocks-components-select-${y}`,f=p||x,S=(0,d.useMemo)((()=>m&&n?o:[w].concat(o)),[m,n,w,o]),{setValidationErrors:j,clearValidationError:C}=(0,_.useDispatch)(X.validationStore),{error:E,validationErrorId:P}=(0,_.useSelect)((e=>{const t=e(X.validationStore);return{error:t.getValidationError(f),validationErrorId:t.getValidationErrorId(f)}}),[f]);(0,d.useEffect)((()=>(!m||n?C(f):j({[f]:{message:u,hidden:!0}}),()=>{C(f)})),[C,n,f,u,m,j]);const N=(0,_.useSelect)((e=>e(X.validationStore).getValidationError(f||"")||{hidden:!0}),[f]);return(0,c.jsxs)("div",{className:(0,s.A)(a,{"has-error":!N.hidden}),children:[(0,c.jsx)("div",{className:"wc-blocks-components-select",children:(0,c.jsxs)("div",{className:"wc-blocks-components-select__container",children:[(0,c.jsx)("label",{htmlFor:x,className:"wc-blocks-components-select__label",children:r}),(0,c.jsx)("select",{className:"wc-blocks-components-select__select",id:x,size:void 0!==l?l:1,onChange:k,value:n,"aria-invalid":!(!E?.message||E?.hidden),"aria-errormessage":P,...g,children:S.map((e=>(0,c.jsx)("option",{value:e.value,"data-alternate-values":`[${e.label}]`,disabled:void 0!==e.disabled&&e.disabled,children:e.label},e.value)))}),(0,c.jsx)(i.A,{className:"wc-blocks-components-select__expand",icon:to.A})]})}),(0,c.jsx)(zt.ValidationInputError,{propertyName:f})]})},so=({className:e,countries:t,id:o,errorId:r,label:n,onChange:i,value:a="",autoComplete:l="off",required:p=!1})=>{const m=(0,d.useMemo)((()=>Object.entries(t).map((([e,t])=>({value:e,label:(0,_e.decodeEntities)(t)})))),[t]);return(0,c.jsx)(oo,{className:(0,s.A)(e,"wc-block-components-country-input"),id:o,errorId:r,label:n||"",onChange:i,options:m,value:a,required:p,autoComplete:l})},ro=e=>{const{...t}=e;return(0,c.jsx)(so,{countries:D,...t})},co=e=>(0,c.jsx)(so,{countries:D,...e});o(3930);const no=(e,t)=>{const o=t.find((t=>t.label.toLocaleUpperCase()===e.toLocaleUpperCase()||t.value.toLocaleUpperCase()===e.toLocaleUpperCase()));return o?o.value:""},io=({className:e,id:t,states:o,country:r,label:n,onChange:i,autoComplete:a="off",value:l="",required:p=!1})=>{const m=o[r],u=(0,d.useMemo)((()=>m&&Object.keys(m).length>0?Object.keys(m).map((e=>({value:e,label:(0,_e.decodeEntities)(m[e])}))):[]),[m]),h=(0,d.useCallback)((e=>{const t=u.length>0?no(e,u):e;t!==l&&i(t)}),[i,u,l]),g=(0,d.useRef)(l);return(0,d.useEffect)((()=>{g.current!==l&&(g.current=l)}),[l]),(0,d.useEffect)((()=>{if(u.length>0&&g.current){const e=no(g.current,u);e!==g.current&&h(e)}}),[u,h]),u.length>0?(0,c.jsx)(oo,{className:(0,s.$)(e,"wc-block-components-state-input"),options:u,label:n||"",id:t,onChange:h,value:l,autoComplete:a,required:p}):(0,c.jsx)(zt.ValidatedTextInput,{className:e,id:t,label:n,onChange:h,autoComplete:a,value:l,required:p})},ao=e=>{const{...t}=e;return(0,c.jsx)(io,{states:O,...t})},lo=e=>(0,c.jsx)(io,{states:O,...e});function po(e){const t=(0,d.useRef)(e);return He()(e,t.current)||(t.current=e),t.current}var mo=o(111);o(2770);const uo=({field:e,props:t,onChange:o,value:s})=>{var r;const n=null!==(r=e?.required)&&void 0!==r&&r,i=Qe(n),[a,l]=(0,d.useState)((()=>Boolean(s)||n)),p=(0,Pt.getFieldLabel)(e.label);(0,d.useEffect)((()=>{i!==n&&l(Boolean(s)||n)}),[s,i,n]);const m=(0,d.useCallback)((e=>{o(e),l(!0)}),[o]);return(0,c.jsx)(d.Fragment,{children:a?(0,c.jsx)(zt.ValidatedTextInput,{...t,type:e.type,label:n?e.label:e.optionalLabel,className:"wc-block-components-address-form__address_2",value:s,onChange:e=>o(e)}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(mo.$,{render:(0,c.jsx)("span",{}),className:"wc-block-components-address-form__address_2-toggle",onClick:()=>l(!0),children:(0,v.sprintf)(
// translators: %s: address 2 field label.
// translators: %s: address 2 field label.
(0,v.__)("+ Add %s","woocommerce"),p)}),(0,c.jsx)("input",{type:"text",tabIndex:-1,className:"wc-block-components-address-form__address_2-hidden-input","aria-hidden":"true","aria-label":e.label,autoComplete:e.autocomplete,id:t?.id,value:s,onChange:e=>m(e.target.value)})]})})},ho=(e,t,o)=>({id:`${t}-${e?.key}`.replaceAll("/","-"),errorId:`${o}_${e?.key}`,label:(e?.required?e?.label:e?.optionalLabel)||"",autoCapitalize:e?.autocapitalize,autoComplete:e?.autocomplete,errorMessage:e?.errorMessage||"",required:e?.required,placeholder:e?.placeholder,className:`wc-block-components-address-form__${e?.key}`.replaceAll("/","-"),...e?.attributes}),go=(e,t,o)=>{const s=t.find((t=>t.key===e)),r=(0,pe.objectHasProp)(o,e)?o[e]:"";return s?{field:{...s,key:e},value:r}:null},_o=(e,t)=>(0,pe.isObject)(e[t])&&Object.keys(e[t]).length>0,ko=({formId:e,address1:t,address2:o,addressType:s,onChange:r})=>{const n=ho(t.field,e,s),i=ho(o.field,e,s);return(0,c.jsxs)(c.Fragment,{children:[t&&(0,c.jsx)(zt.ValidatedTextInput,{...n,type:t.field.type,label:t.field.label,className:"wc-block-components-address-form__address_1",value:t.value,onChange:e=>r("address_1",e)}),o.field&&!o.field.hidden&&(0,c.jsx)(uo,{field:o.field,props:i,onChange:e=>r("address_2",e),value:o.value})]})};var bo=o(7740);const wo=e=>((e,t)=>Object.entries(e).reduce(((e,[o,s])=>({...e,[t(0,o)]:s})),{}))(e,((e,t)=>(0,bo.L)(t))),yo=e=>{const t=(e=>{const t=(0,d.useRef)({cart:{},checkout:{},customer:{}}),{cartData:o,prefersCollection:s,shouldCreateAccount:r,orderNotes:c,additionalFields:n,activePaymentMethod:i,customerId:a}=(0,_.useSelect)((e=>{const t=e(X.cartStore),o=e(X.checkoutStore),s=e(X.paymentStore);return{cartData:t.getCartData(),prefersCollection:o.prefersCollection(),shouldCreateAccount:o.getShouldCreateAccount(),orderNotes:o.getOrderNotes(),additionalFields:o.getAdditionalFields(),activePaymentMethod:s.getActivePaymentMethod(),customerId:o.getCustomerId()}}),[]),l=(0,d.useMemo)((()=>{const{coupons:t,shippingRates:l,shippingAddress:d,billingAddress:p,items:m,itemsCount:u,itemsWeight:h,needsShipping:g,totals:_,extensions:k}=o,b={cart:{coupons:t.map((e=>e.code)),shippingRates:[...new Set(l.map((e=>e.shipping_rates.find((e=>e.selected))?.rate_id)).filter(Boolean))],items:m.map((e=>Array(e.quantity).fill(e.id))).flat(),itemsType:[...new Set(m.map((e=>e.type)))],itemsCount:u,itemsWeight:h,needsShipping:g,prefersCollection:"boolean"==typeof s&&s,totals:{totalPrice:Number(_.total_price),totalTax:Number(_.total_tax)},extensions:k},checkout:{createAccount:r,customerNote:c,additionalFields:n,paymentMethod:i},customer:{id:a,billingAddress:p,shippingAddress:d,..."billing"===e||"shipping"===e?{address:"billing"===e?p:d}:{}}};return{cart:wo(b.cart),checkout:wo(b.checkout),customer:wo(b.customer)}}),[o,s,r,c,n,i,a,e]);return t.current&&ge()(t.current,l)||(t.current=l),t.current})(e);return window.schemaParser?{parser:window.schemaParser,data:t}:{parser:null,data:t}},xo=(e,t,o,s="")=>{const r=(0,d.useRef)([]),{parser:c,data:n}=yo(o),i=be(e,t,s).map((e=>{const o=t[e.key]||{};if(c){if(_o(o,"required")){let t={};t=Object.keys(o.required).some((e=>"cart"===e||"checkout"===e||"customer"===e))?{type:"object",properties:o.required}:o.required;try{const o=c.validate(t,n);e.required=o}catch(e){x.CURRENT_USER_IS_ADMIN&&console.error(e)}}if(_o(o,"hidden")){let t={};t=Object.keys(o.hidden).some((e=>"cart"===e||"checkout"===e||"customer"===e))?{type:"object",properties:o.hidden}:o.hidden;try{const o=c.validate(t,n);e.hidden=o}catch(e){x.CURRENT_USER_IS_ADMIN&&console.error(e)}}}return e}));if(!r.current||!ge()(r.current,i)){const e=i.map((e=>({...e,hidden:"boolean"==typeof e.hidden&&e.hidden,required:"boolean"==typeof e.required&&e.required})));r.current=e}return r.current},vo={};function fo(e){let t=e;return function(e){const o=t;return t=e,o}}const So=fo(),jo=fo(),Co=({id:e="",fields:t,onChange:o,addressType:r="shipping",values:n,children:i,isEditing:a,ariaDescribedBy:l=""})=>{const m=(0,p.useInstanceId)(Co),u=(0,d.useRef)(!0),{defaultFields:h}=ht(),g=po(t),k=po("country"in n?n.country:""),b=xo(g,h,r,k),w=Qe(b),y=Qe(a),x=Qe(n),f=(0,d.useRef)({}),{errors:S,previousErrors:j}=((e,t,o)=>{const{parser:s,data:r}=yo(t),c=(0,d.useRef)(vo),n=Qe(c.current);if(!r)return{errors:c.current,previousErrors:void 0};let i;if(o)i=o;else switch(t){case"billing":case"shipping":i=r.customer.address||{};break;case"contact":case"order":i=r.checkout.additional_fields||{};break;default:i={}}const a=e.reduce(((e,t)=>(_o(t,"validation")&&!t.hidden&&(t.required||i[t.key])&&(e[t.key]=t.validation),e)),{});let l=vo;if(Object.keys(a).length>0&&s){const o={type:"object",properties:{}};switch(t){case"shipping":o.properties={customer:{type:"object",properties:{shipping_address:{type:"object",properties:a}}}};break;case"billing":o.properties={customer:{type:"object",properties:{billing_address:{type:"object",properties:a}}}};break;default:o.properties={checkout:{type:"object",properties:{additional_fields:{type:"object",properties:a}}}}}const c=s.compile(o),n=c(r);l=!n&&c.errors?((e,t)=>e.reduce(((e,o)=>{var s;const r=(c=o.instancePath,c.split("/").pop()?.replace("~1","/"));var c;const n=t.find((e=>e.key===r));if(!n||!r)return e;const i=(0,Pt.getFieldLabel)(n.label),a=(0,v.sprintf)(
// translators: %s is the label of the field.
// translators: %s is the label of the field.
(0,v.__)("%s is invalid","woocommerce"),i);if(r)switch(o.keyword){case"errorMessage":e[r]=null!==(s=o.message)&&void 0!==s?s:a;break;case"pattern":e[r]=(0,v.sprintf)(
// translators: %1$s is the label of the field, %2$s is the pattern.
// translators: %1$s is the label of the field, %2$s is the pattern.
(0,v.__)("%1$s must match the pattern %2$s","woocommerce"),i,o.params.pattern);break;default:e[r]=a}return e}),{}))(c.errors,e):vo}const p=e.map((e=>l[e.key]?[e.key,l[e.key]]:e.hidden||!e.required&&!i[e.key]?null:"postcode"===e.key&&"country"in i&&!(0,Pt.isPostcode)({postcode:i.postcode,country:i.country})?[e.key,(0,v.__)("Please enter a valid postcode","woocommerce")]:"email"===e.key&&"email"in i&&!(0,Nt.isEmail)(i.email)?[e.key,(0,v.__)("Please enter a valid email address","woocommerce")]:null)).filter(pe.nonNullable);return ge()(c.current,Object.fromEntries(p))||(c.current=Object.fromEntries(p)),{errors:c.current,previousErrors:n}})(b,r,"shipping"===r?n:void 0);return(0,d.useEffect)((()=>{if(Object.entries(S).forEach((([e,t])=>{const o=f.current[e];t&&(o?.setErrorMessage(t),(0,_.select)(X.validationStore).getValidationError(`${r}_${e}`)||(0,_.dispatch)(X.validationStore).setValidationErrors({[`${r}_${e}`]:{message:t,hidden:!!o?.isFocused()}}))})),j){const e=[];Object.entries(j).forEach((([t])=>{const o=f.current[t];t in S||(e.push(`${r}_${t}`),o?.setErrorMessage(""))})),e.length&&(0,_.dispatch)(X.validationStore).clearValidationErrors(e)}}),[S,j,r,n]),(0,d.useEffect)((()=>{f.current?.postcode?.revalidate()}),[k]),(0,d.useEffect)((()=>{let t;if(!u.current&&a&&f.current&&y!==a){const o=b.find((e=>!1===e.hidden));if(!o)return;const{id:s}=ho(o,e||`${m}`,r),c=document.getElementById(s);c&&(t=setTimeout((()=>{c.focus()}),300))}return u.current=!1,()=>{clearTimeout(t)}}),[a,b,e,m,r,y]),(0,d.useEffect)((()=>{if(ge()(w,b))return;const e={...n,...Object.fromEntries(b.filter((e=>e.hidden)).map((e=>[e.key,""])))};He()(n,e)||o(e)}),[o,b,w,n]),(0,d.useEffect)((()=>{if((!ge()(w,b)||!ge()(x,n))&&("country"in n&&((e,t)=>{const o=`${e}_country`,s=(0,_.select)(X.validationStore).getValidationError(o),r=t.city||t.state||t.postcode;try{if(!t.country&&r)throw(0,v.__)("Please select your country","woocommerce");if("billing"===e&&t.country&&!Object.keys(M).includes(t.country))throw(0,v.__)("Sorry, we do not allow orders from the selected country","woocommerce");if("shipping"===e&&t.country&&!Object.keys(B).includes(t.country))throw(0,v.__)("Sorry, we do not ship orders to the selected country","woocommerce");s&&(0,_.dispatch)(X.validationStore).clearValidationError(o)}catch(e){s?(0,_.dispatch)(X.validationStore).showValidationError(o):(0,_.dispatch)(X.validationStore).setValidationErrors({[o]:{message:String(e),hidden:!1}})}})(r,n),"state"in n)){const e=b.find((e=>"state"===e.key));e&&((e,t,o)=>{const s=`${e}_state`,r=(0,_.select)(X.validationStore).getValidationError(s),c=o.required,n="shipping"===e?So(t):jo(t),i=!!n&&!He()(n,t);r?!c||t.state?(0,_.dispatch)(X.validationStore).clearValidationError(s):i||(0,_.dispatch)(X.validationStore).showValidationError(s):!r&&c&&!t.state&&t.country&&(0,_.dispatch)(X.validationStore).setValidationErrors({[s]:{message:(0,v.sprintf)(/* translators: %s will be the state field label in lowercase e.g. "state" */ /* translators: %s will be the state field label in lowercase e.g. "state" */
(0,v.__)("Please select a %s","woocommerce"),o.label.toLowerCase()),hidden:!0}})})(r,n,e)}}),[n,x,r,b,w]),e=e||`${m}`,(0,c.jsxs)("div",{id:e,className:"wc-block-components-address-form",children:[b.map((t=>{var i;if(t.hidden)return null;const a=ho(t,e,r),d=(e=>{const{autoCapitalize:t,autoComplete:o,placeholder:s,...r}=e;return r})(a);if("email"===t.key&&(a.id="email",a.errorId="billing_email"),"checkbox"===t.type){const e=t.key in n&&n[t.key],s={checked:Boolean(e),onChange:e=>{o({...n,[t.key]:e})},...d};return t.required?(0,c.jsx)(zt.ValidatedCheckboxControl,{...t.errorMessage?{errorMessage:t.errorMessage}:{},...s},t.key):(0,c.jsx)(zt.CheckboxControl,{...s},t.key)}if("address_1"===t.key&&"address_1"in n){const s=go("address_1",b,n),i=go("address_2",b,n);return(0,pe.isNull)(s)||(0,pe.isNull)(i)?null:(0,c.jsx)(ko,{address1:s,address2:i,addressType:r,formId:e,onChange:(e,t)=>{o({...n,[e]:t})}},t.key)}if("address_2"===t.key)return null;if("country"===t.key&&"country"in n){const e="shipping"===r?co:ro;return(0,c.jsx)(e,{...a,value:n.country,onChange:e=>{o({...n,country:e,state:"",postcode:""})}},t.key)}if("state"===t.key&&"state"in n&&"country"in n){const e="shipping"===r?lo:ao;return(0,c.jsx)(e,{...a,country:n.country,value:n.state,onChange:e=>o({...n,state:e})},t.key)}return"select"===t.type&&"options"in t?void 0===t.options?null:(0,c.jsx)(oo,{...a,label:a.label||"",className:(0,s.A)("wc-block-components-select-input",`wc-block-components-select-input-${t.key}`.replaceAll("/","-")),value:t.key in n?n[t.key]:"",onChange:e=>{o({...n,[t.key]:e})},options:t.options,required:t.required,errorMessage:a.errorMessage||void 0},t.key):(0,c.jsx)(zt.ValidatedTextInput,{ref:e=>f.current[t.key]=e,...a,type:t.type,ariaDescribedBy:l,value:null!==(i=(0,_e.decodeEntities)(n[t.key]))&&void 0!==i?i:"",onChange:e=>o({...n,[t.key]:e}),customFormatter:e=>"postcode"===t.key?e.trimStart().toUpperCase():e},t.key)})),i]})},Eo=Co;o(1121);const Po=({isEditing:e=!1,addressCard:t,addressForm:o})=>{const r=(0,s.A)("wc-block-components-address-address-wrapper",{"is-editing":e});return(0,c.jsxs)("div",{className:r,children:[(0,c.jsx)("div",{className:"wc-block-components-address-card-wrapper",children:t}),(0,c.jsx)("div",{className:"wc-block-components-address-form-wrapper",children:o})]})},No=e=>(0,pe.isObject)(O[e.country])&&(0,pe.isString)(O[e.country][e.state])?(0,_e.decodeEntities)(O[e.country][e.state]):e.state,Ao=e=>(0,pe.isString)(D[e.country])?(0,_e.decodeEntities)(D[e.country]):e.country;o(8796);const Io=({address:e,onEdit:t,target:o,isExpanded:s})=>{const r=(0,x.getSetting)("countryData",{});let n=(0,x.getSetting)("defaultAddressFormat","{name}\n{company}\n{address_1}\n{address_2}\n{city}\n{state}\n{postcode}\n{country}");(0,pe.objectHasProp)(r,e?.country)&&(0,pe.objectHasProp)(r[e.country],"format")&&(0,pe.isString)(r[e.country].format)&&(n=r[e.country].format);const{name:i,address:a}=((e,t)=>{const o=(e=>["{name}","{name_upper}","{first_name} {last_name}","{last_name} {first_name}","{first_name_upper} {last_name_upper}","{last_name_upper} {first_name_upper}","{first_name} {last_name_upper}","{first_name_upper} {last_name}","{last_name} {first_name_upper}","{last_name_upper} {first_name}"].find((t=>e.indexOf(t)>=0))||"")(t),s=t.replace(`${o}\n`,""),r=[["{company}",e?.company||""],["{address_1}",e?.address_1||""],["{address_2}",e?.address_2||""],["{city}",e?.city||""],["{state}",No(e)],["{postcode}",e?.postcode||""],["{country}",Ao(e)],["{company_upper}",(e?.company||"").toUpperCase()],["{address_1_upper}",(e?.address_1||"").toUpperCase()],["{address_2_upper}",(e?.address_2||"").toUpperCase()],["{city_upper}",(e?.city||"").toUpperCase()],["{state_upper}",No(e).toUpperCase()],["{state_code}",e?.state||""],["{postcode_upper}",(e?.postcode||"").toUpperCase()],["{country_upper}",Ao(e).toUpperCase()]],c=[["{name}",e?.first_name+(e?.first_name&&e?.last_name?" ":"")+e?.last_name],["{name_upper}",(e?.first_name+(e?.first_name&&e?.last_name?" ":"")+e?.last_name).toUpperCase()],["{first_name}",e?.first_name||""],["{last_name}",e?.last_name||""],["{first_name_upper}",(e?.first_name||"").toUpperCase()],["{last_name_upper}",(e?.last_name||"").toUpperCase()]];let n=o;c.forEach((([e,t])=>{n=n.replace(e,t)}));let i=s;r.forEach((([e,t])=>{i=i.replace(e,t)}));const a=i.replace(/^,\s|,\s$/g,"").replace(/\n{2,}/,"\n").split("\n").filter(Boolean);return{name:n,address:a}})(e,n),l="shipping"===o?(0,v.__)("Edit shipping address","woocommerce"):(0,v.__)("Edit billing address","woocommerce");return(0,c.jsxs)("div",{className:"wc-block-components-address-card",children:[(0,c.jsxs)("address",{children:[(0,c.jsx)("span",{className:"wc-block-components-address-card__address-section",children:(0,_e.decodeEntities)(i)}),(0,c.jsx)("div",{className:"wc-block-components-address-card__address-section",children:a.filter((e=>!!e)).map(((e,t)=>(0,c.jsx)("span",{children:(0,_e.decodeEntities)(e)},"address-"+t)))}),e.phone?(0,c.jsx)("div",{className:"wc-block-components-address-card__address-section",children:e.phone},"address-phone"):""]}),t&&(0,c.jsx)(mo.$,{render:(0,c.jsx)("span",{}),className:"wc-block-components-address-card__edit","aria-controls":o,"aria-expanded":s,"aria-label":l,onClick:e=>{e.preventDefault(),t()},type:"button",children:(0,v.__)("Edit","woocommerce")})]})},Ro=()=>{const{shippingAddress:e,setShippingAddress:t,setBillingAddress:o,useShippingAsBilling:s,editingShippingAddress:r,setEditingShippingAddress:n}=ht(),{dispatchCheckoutEvent:i}=ze(),{hasValidationErrors:a,getValidationErrorSelector:l}=(0,_.useSelect)((e=>{const t=e(X.validationStore);return{hasValidationErrors:t.hasValidationErrors(),getValidationErrorSelector:t.getValidationError}}),[]),p=(0,d.useMemo)((()=>Object.keys(e).filter((e=>void 0!==l("shipping_"+e))).filter(Boolean)),[e,l]);(0,d.useEffect)((()=>{p.length>0&&!1===r&&n(!0)}),[r,a,p.length,n]);const m=(0,d.useCallback)((e=>{t(e),s&&(o(e),i("set-billing-address")),i("set-shipping-address")}),[i,o,t,s]);return(0,c.jsx)(Po,{isEditing:r,addressCard:(0,c.jsx)(Io,{address:e,target:"shipping",onEdit:()=>{n(!0)},isExpanded:r}),addressForm:(0,c.jsx)(Eo,{id:"shipping",addressType:"shipping",onChange:m,values:e,fields:V,isEditing:r})})},To=()=>{const{defaultFields:e,setBillingAddress:t,shippingAddress:o,billingAddress:s,useShippingAsBilling:r,setUseShippingAsBilling:n,setEditingBillingAddress:i}=ht(),{isEditor:a}=b(),l=0===(0,x.getSetting)("currentUserId"),p=()=>{const r={...o};e?.phone?.hidden&&delete r.phone,e?.company?.hidden&&delete r.company,(Object.keys(r).length!==Object.keys(s).length||!Object.keys(r).every((e=>r[e]===s[e])))&&t(r)};(0,Jt.Su)((()=>{r&&p()}));const m=a?eo:d.Fragment,u=r?[me.SHIPPING_ADDRESS,me.BILLING_ADDRESS]:[me.SHIPPING_ADDRESS],{cartDataLoaded:h}=(0,_.useSelect)((e=>({cartDataLoaded:e(X.cartStore).hasFinishedResolution("getCartData")})));return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(zt.StoreNoticesContainer,{context:u}),(0,c.jsx)(m,{children:h?(0,c.jsx)(Ro,{}):null}),(0,c.jsx)(zt.CheckboxControl,{className:"wc-block-checkout__use-address-for-billing",label:(0,v.__)("Use same address for billing","woocommerce"),checked:r,onChange:e=>{n(e),e?p():(i(!0),(e=>{if(!e||!l)return;const o=(e=>{const t=be(V,x.defaultFields,e.country),o=Object.assign({},e);return t.forEach((({key:t})=>{"country"!==t&&"state"!==t&&ye(t,e)&&(o[t]="")})),o})(e);t(o)})(s))}})]})},Mo=({defaultTitle:e=(0,v.__)("Step","woocommerce"),defaultDescription:t=(0,v.__)("Step description text.","woocommerce"),defaultShowStepNumber:o=!0})=>({title:{type:"string",default:e},description:{type:"string",default:t},showStepNumber:{type:"boolean",default:o}}),Bo={...Mo({defaultTitle:(0,v.__)("Shipping address","woocommerce"),defaultDescription:(0,v.__)("Enter the address where you want your order delivered.","woocommerce")}),className:{type:"string",default:""},lock:{type:"object",default:{move:!0,remove:!0}}},Do=JSON.parse('{"DD":"Shipping Address","XV":3}');(0,a.registerBlockType)("woocommerce/checkout-shipping-address-block",{apiVersion:Do.XV,title:Do.DD,icon:{src:(0,c.jsx)(i.A,{icon:qt.A,className:"wc-block-editor-components-block-icon"})},attributes:Bo,edit:({attributes:e,setAttributes:t})=>{const{showShippingFields:o}=ht();return o?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Vt,{}),(0,c.jsxs)(Xt,{setAttributes:t,attributes:e,className:(0,s.A)("wc-block-checkout__shipping-fields",e?.className),children:[(0,c.jsx)(To,{}),(0,c.jsx)(Yt,{block:Pt.innerBlockAreas.SHIPPING_ADDRESS})]})]}):null},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save(),children:(0,c.jsx)(Gt,{})})});var Oo=o(7223);o(6223);const Fo=E?`<a href="${E}" target="_blank">${(0,v.__)("Terms and Conditions","woocommerce")}</a>`:(0,v.__)("Terms and Conditions","woocommerce"),Lo=C?`<a href="${C}" target="_blank">${(0,v.__)("Privacy Policy","woocommerce")}</a>`:(0,v.__)("Privacy Policy","woocommerce"),Vo=(0,v.sprintf)(/* translators: %1$s terms page link, %2$s privacy page link. */ /* translators: %1$s terms page link, %2$s privacy page link. */
(0,v.__)("By proceeding with your purchase you agree to our %1$s and %2$s","woocommerce"),Fo,Lo),Uo=(0,v.sprintf)(/* translators: %1$s terms page link, %2$s privacy page link. */ /* translators: %1$s terms page link, %2$s privacy page link. */
(0,v.__)("You must accept our %1$s and %2$s to continue with your purchase.","woocommerce"),Fo,Lo),$o=JSON.parse('{"DD":"Terms and Conditions","XV":3}');o(5763),(0,a.registerBlockType)("woocommerce/checkout-terms-block",{apiVersion:$o.XV,title:$o.DD,icon:{src:(0,c.jsx)(i.A,{icon:Oo.A,className:"wc-block-editor-components-block-icon"})},edit:({attributes:{checkbox:e,text:t,showSeparator:o},setAttributes:r})=>{const n=(0,l.useBlockProps)(),i=t||(e?Uo:Vo);return(0,c.jsxs)("div",{...n,children:[(0,c.jsxs)(l.InspectorControls,{children:[(!E||!C)&&(0,c.jsxs)(Lt.Notice,{className:"wc-block-checkout__terms_notice",status:"warning",isDismissible:!1,children:[(0,v.__)("Link to your store's Terms and Conditions and Privacy Policy pages by creating pages for them.","woocommerce"),(0,c.jsx)("br",{}),!E&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("br",{}),(0,c.jsx)(Lt.ExternalLink,{href:`${x.ADMIN_URL}admin.php?page=wc-settings&tab=advanced`,children:(0,v.__)("Setup a Terms and Conditions page","woocommerce")})]}),!C&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("br",{}),(0,c.jsx)(Lt.ExternalLink,{href:`${x.ADMIN_URL}options-privacy.php`,children:(0,v.__)("Setup a Privacy Policy page","woocommerce")})]})]}),E&&C&&!(i.includes(E)&&i.includes(C))&&(0,c.jsx)(Lt.Notice,{className:"wc-block-checkout__terms_notice",status:"warning",isDismissible:!1,actions:Vo!==t?[{label:(0,v.__)("Restore default text","woocommerce"),onClick:()=>r({text:""})}]:[],children:(0,c.jsx)("p",{children:(0,v.__)("Ensure you add links to your policy pages in this section.","woocommerce")})}),(0,c.jsxs)(Lt.PanelBody,{title:(0,v.__)("Display options","woocommerce"),children:[(0,c.jsx)(Lt.ToggleControl,{label:(0,v.__)("Require checkbox","woocommerce"),checked:e,onChange:()=>r({checkbox:!e})}),(0,c.jsx)(Lt.ToggleControl,{label:(0,v.__)("Show separator","woocommerce"),checked:o,onChange:()=>r({showSeparator:!o})})]})]}),(0,c.jsx)("div",{className:(0,s.A)("wc-block-checkout__terms",{"wc-block-checkout__terms--with-separator":o}),children:e?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(zt.CheckboxControl,{id:"terms-condition",checked:!1}),(0,c.jsx)(l.RichText,{value:i,onChange:e=>r({text:e})})]}):(0,c.jsx)(l.RichText,{tagName:"span",value:i,onChange:e=>r({text:e})})})]})},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save()})});var Ho=o(5634),qo=o(3558);o(6713);const zo=[(0,v.__)("Too weak","woocommerce"),(0,v.__)("Weak","woocommerce"),(0,v.__)("Medium","woocommerce"),(0,v.__)("Strong","woocommerce"),(0,v.__)("Very strong","woocommerce")],Wo=({password:e="",onChange:t})=>{var o;const r=(0,p.useInstanceId)(Wo,"woocommerce-password-strength-meter");let n=-1;e.length>0&&(n=(e=>void 0===window.zxcvbn?(0,qo.Bi)(e,[{id:0,value:zo[0],minDiversity:0,minLength:0},{id:1,value:zo[1],minDiversity:1,minLength:4},{id:2,value:zo[2],minDiversity:2,minLength:8},{id:3,value:zo[3],minDiversity:4,minLength:12},{id:4,value:zo[4],minDiversity:4,minLength:20}]).id:window.zxcvbn(e).score)(e));const i=Qe(n);return(0,d.useEffect)((()=>{n!==i&&t&&t(n)}),[n,i,t]),(0,c.jsxs)("div",{id:r,className:(0,s.A)("wc-block-components-password-strength",{hidden:-1===n}),children:[(0,c.jsx)("label",{htmlFor:r+"-meter",className:"screen-reader-text",children:(0,v.__)("Password strength","woocommerce")}),(0,c.jsx)("meter",{id:r+"-meter",className:"wc-block-components-password-strength__meter",min:0,max:4,value:n>-1?n:0,children:null!==(o=zo[n])&&void 0!==o?o:""}),!!zo[n]&&(0,c.jsxs)("div",{id:r+"-result",className:"wc-block-components-password-strength__result",children:[(0,c.jsx)("span",{className:"screen-reader-text","aria-live":"polite",children:(0,v.sprintf)(/* translators: %s: Password strength */ /* translators: %s: Password strength */
(0,v.__)("Password strength: %1$s (%2$d characters long)","woocommerce"),zo[n],e.length)})," ",(0,c.jsx)("span",{"aria-hidden":!0,children:zo[n]})]})]})},Xo=Wo,Yo=()=>{const[e,t]=(0,d.useState)(0),{customerPassword:o}=(0,_.useSelect)((e=>({customerPassword:e(X.checkoutStore).getCustomerPassword()})),[]),{__internalSetCustomerPassword:s}=(0,_.useDispatch)(X.checkoutStore),{setValidationErrors:r,clearValidationError:n}=(0,_.useDispatch)(X.validationStore);return(0,c.jsx)(zt.ValidatedTextInput,{type:"password",label:(0,v.__)("Create a password","woocommerce"),className:"wc-block-components-address-form__password",value:o,required:!0,errorId:"account-password",onChange:t=>{s(t),t?e<2?r({"account-password":{message:(0,v.__)("Please create a stronger password","woocommerce"),hidden:!0}}):n("account-password"):r({"account-password":{message:(0,v.__)("Please enter a valid password","woocommerce"),hidden:!0}})},feedback:(0,c.jsx)(Xo,{password:o,onChange:e=>t(e)})})},Go="wc-guest-checkout-notice",Jo=()=>{const{shouldCreateAccount:e}=(0,_.useSelect)((e=>({shouldCreateAccount:e(X.checkoutStore).getShouldCreateAccount()}))),{__internalSetShouldCreateAccount:t,__internalSetCustomerPassword:o}=(0,_.useDispatch)(X.checkoutStore),s=(0,x.getSetting)("checkoutAllowsGuest",!1),r=(0,x.getSetting)("checkoutAllowsSignup",!1),n=s&&r,i=!(0,x.getSetting)("generatePassword",!1)&&(n&&e||!s);return s||n||i?(0,c.jsxs)(c.Fragment,{children:[s&&(0,c.jsx)("p",{id:Go,className:"wc-block-checkout__guest-checkout-notice",children:(0,v.__)("You are currently checking out as a guest.","woocommerce")}),n&&(0,c.jsx)(zt.CheckboxControl,{className:"wc-block-checkout__create-account",label:(0,v.sprintf)(/* translators: Store name */ /* translators: Store name */
(0,v.__)("Create an account with %s","woocommerce"),(0,x.getSetting)("siteTitle","")),checked:e,onChange:e=>{t(e),o("")}}),i&&(0,c.jsx)(Yo,{})]}):null},Ko=()=>{const{additionalFields:e,customerId:t}=(0,_.useSelect)((e=>{const t=e(X.checkoutStore);return{additionalFields:t.getAdditionalFields(),customerId:t.getCustomerId()}})),{setAdditionalFields:o}=(0,_.useDispatch)(X.checkoutStore),{billingAddress:s,setEmail:r}=ht(),{dispatchCheckoutEvent:n}=ze(),i={email:s.email,...e};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(zt.StoreNoticesContainer,{context:me.CONTACT_INFORMATION}),(0,c.jsx)(Eo,{id:"contact",addressType:"contact",ariaDescribedBy:Go,onChange:e=>{const{email:t,...s}=e;r(t),n("set-email-address"),o(s)},values:i,fields:U,children:!t&&(0,c.jsx)(Jo,{})})]})},Zo={...Mo({defaultTitle:(0,v.__)("Contact information","woocommerce"),defaultDescription:(0,v.__)("We'll use this email to send you details and updates about your order.","woocommerce")}),className:{type:"string",default:""},lock:{type:"object",default:{remove:!0,move:!0}}},Qo=JSON.parse('{"DD":"Contact Information","XV":3}');(0,a.registerBlockType)("woocommerce/checkout-contact-information-block",{apiVersion:Qo.XV,title:Qo.DD,icon:{src:(0,c.jsx)(i.A,{icon:Ho.A,className:"wc-block-editor-components-block-icon"})},attributes:Zo,edit:({attributes:e,setAttributes:t})=>(0,c.jsxs)(Xt,{attributes:e,setAttributes:t,className:(0,s.A)("wc-block-checkout__contact-fields",e?.className),children:[(0,c.jsx)(l.InspectorControls,{children:(0,c.jsxs)(Lt.PanelBody,{title:(0,v.__)("Account creation and guest checkout","woocommerce"),children:[(0,c.jsx)("p",{className:"wc-block-checkout__controls-text",children:(0,v.__)("Account creation and guest checkout settings can be managed in your store settings.","woocommerce")}),(0,c.jsx)(Lt.ExternalLink,{href:`${x.ADMIN_URL}admin.php?page=wc-settings&tab=account`,children:(0,v.__)("Manage account settings","woocommerce")})]})}),(0,c.jsx)(eo,{children:(0,c.jsx)(Ko,{})}),(0,c.jsx)(Yt,{block:Pt.innerBlockAreas.CONTACT_INFORMATION})]}),save:()=>(0,c.jsx)("div",{...l.useBlockProps.save(),children:(0,c.jsx)(Gt,{})})});const es=()=>{const{billingAddress:e,setShippingAddress:t,setBillingAddress:o,useBillingAsShipping:s,editingBillingAddress:r,setEditingBillingAddress:n}=ht(),{dispatchCheckoutEvent:i}=ze(),{hasValidationErrors:a,getValidationErrorSelector:l}=(0,_.useSelect)((e=>{const t=e(X.validationStore);return{hasValidationErrors:t.hasValidationErrors(),getValidationErrorSelector:t.getValidationError}}),[]),p=(0,d.useMemo)((()=>Object.keys(e).filter((e=>"email"!==e&&void 0!==l("billing_"+e))).filter(Boolean)),[e,l]);(0,d.useEffect)((()=>{p.length>0&&!1===r&&n(!0)}),[r,a,p.length,n]);const m=(0,d.useCallback)((e=>{o(e),s&&(t(e),i("set-shipping-address")),i("set-billing-address")}),[i,o,t,s]);return(0,c.jsx)(Po,{isEditing:r,addressCard:(0,c.jsx)(Io,{address:e,target:"billing",onEdit:()=>{n(!0)},isExpanded:r}),addressForm:(0,c.jsx)(Eo,{id:"billing",addressType:"billing",onChange:m,values:e,fields:V,isEditing:r})})},ts=()=>{const{defaultFields:e,billingAddress:t,setShippingAddress:o,useBillingAsShipping:s}=ht(),{isEditor:r}=b();(0,Jt.Su)((()=>{if(s){const{email:s,...r}=t,c={...r};e?.phone?.hidden&&delete c.phone,e?.company?.hidden&&delete c.company,o(c)}}));const n=r?eo:d.Fragment,i=s?[me.BILLING_ADDRESS,me.SHIPPING_ADDRESS]:[me.BILLING_ADDRESS],{cartDataLoaded:a}=(0,_.useSelect)((e=>({cartDataLoaded:e(X.cartStore).hasFinishedResolution("getCartData")})));return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(zt.StoreNoticesContainer,{context:i}),(0,c.jsx)(n,{children:a?(0,c.jsx)(es,{}):null})]})},os=(0,v.__)("Billing address","woocommerce"),ss=(0,v.__)("Enter the billing address that matches your payment method.","woocommerce"),rs=(0,v.__)("Billing and shipping address","woocommerce"),cs=(0,v.__)("Enter the billing and shipping address that matches your payment method.","woocommerce"),ns={...Mo({defaultTitle:os,defaultDescription:ss}),className:{type:"string",default:""},lock:{type:"object",default:{move:!0,remove:!0}}},is=JSON.parse('{"DD":"Billing Address","XV":3}');(0,a.registerBlockType)("woocommerce/checkout-billing-address-block",{apiVersion:is.XV,title:is.DD,icon:{src:(0,c.jsx)(i.A,{icon:qt.A,className:"wc-block-editor-components-block-icon"})},attributes:ns,edit:({attributes:e,setAttributes:t})=>{const{showBillingFields:o,forcedBillingAddress:r,useBillingAsShipping:n}=ht();return o||n?(e.title=((e,t)=>t?e===os?rs:e:e===rs?os:e)(e.title,r),e.description=((e,t)=>t?e===ss?cs:e:e===cs?ss:e)(e.description,r),(0,c.jsxs)(Xt,{setAttributes:t,attributes:e,className:(0,s.A)("wc-block-checkout__billing-fields",e?.className),children:[(0,c.jsx)(Vt,{}),(0,c.jsx)(ts,{}),(0,c.jsx)(Yt,{block:Pt.innerBlockAreas.BILLING_ADDRESS})]})):null},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save(),children:(0,c.jsx)(Gt,{})})});var as=o(6012);const ls=(0,v.__)("Place Order","woocommerce"),ds=(0,v.__)("Return to Cart","woocommerce"),ps={placeOrderButtonLabel:{type:"string",default:ls},returnToCartButtonLabel:{type:"string",default:ds}},ms=(e,t)=>{if(!e.title.raw)return e.slug;const o=1===t.filter((t=>t.title.raw===e.title.raw)).length;return e.title.raw+(o?"":` - ${e.slug}`)},us=({setPageId:e,pageId:t,labels:o})=>{const s=(0,_.useSelect)((e=>e("core").getEntityRecords("postType","page",{status:"publish",orderby:"title",order:"asc",per_page:100})),[])||null;return s?(0,c.jsx)(Lt.PanelBody,{title:o.title,children:(0,c.jsx)(Lt.SelectControl,{label:(0,v.__)("Link to","woocommerce"),value:t,options:[{label:o.default,value:0},...s.map((e=>({label:ms(e,s),value:parseInt(e.id,10)})))],onChange:t=>e(parseInt(t,10))})}):null};var hs=o(5181);o(2840);const gs=({href:e,children:t,element:o="a"})=>{const s=e||N;if(!s)return null;const r=o;return(0,c.jsxs)(r,{..."a"===o?{href:s}:{},className:"wc-block-components-checkout-return-to-cart-button",children:[(0,c.jsx)(i.A,{icon:hs.A}),t]})};o(6882);const _s=(0,d.forwardRef)(((e,t)=>{const{className:o,children:r,variant:n="contained",removeTextWrap:i=!1,...a}=e,l=(0,s.A)("wc-block-components-button","wp-element-button",o,n);if("href"in e)return(0,c.jsx)(mo.$,{render:(0,c.jsx)("a",{ref:t,href:e.href,children:(0,c.jsx)("div",{className:"wc-block-components-button__text",children:r})}),className:l,...a});const d=i?e.children:(0,c.jsx)("div",{className:"wc-block-components-button__text",children:e.children});return(0,c.jsx)(mo.$,{ref:t,className:l,...a,children:d})})),ks=({onChange:e,placeholder:t,value:o,children:s,...r})=>(0,c.jsxs)(_s,{...r,children:[(0,c.jsx)(l.RichText,{multiline:!1,allowedFormats:[],value:o,placeholder:t,onChange:e}),s]}),bs=window.wc.priceFormat;o(8599);const ws=JSON.parse('{"DD":"Actions","uK":{"lock":{"type":"object","default":{"remove":true,"move":true}},"cartPageId":{"type":"number","default":0},"showReturnToCart":{"type":"boolean","default":true},"className":{"type":"string","default":""},"priceSeparator":{"type":"string","default":"Â·"}},"XV":3}');o(7883);const ys={apiVersion:ws.XV,title:ws.DD,example:{attributes:{showPrice:!0,placeOrderButtonLabel:(0,v.__)("Place Order","woocommerce"),showReturnToCart:!1}},icon:{src:(0,c.jsx)(i.A,{icon:as.A,className:"wc-block-editor-components-block-icon"})},attributes:{...ps,...ws.uK},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save()}),edit:({attributes:e,setAttributes:t})=>{const o=(0,l.useBlockProps)(),{cartPageId:r=0,showReturnToCart:n=!1,placeOrderButtonLabel:i,returnToCartButtonLabel:a}=e,{cartTotals:p}=Te(),m=(0,bs.getCurrencyFromPriceResponse)(p),{current:u}=(0,d.useRef)(r),h=(0,_.useSelect)((e=>u||e("core/editor").getCurrentPostId()),[u]),g=o.className.includes("is-style-with-price");return(0,c.jsxs)("div",{...o,children:[(0,c.jsxs)(l.InspectorControls,{children:[(0,c.jsxs)(Lt.PanelBody,{title:(0,v.__)("Options","woocommerce"),children:[(0,c.jsx)(Lt.ToggleControl,{label:(0,v.__)('Show a "Return to Cart" link',"woocommerce"),help:(0,v.__)("Recommended to enable only if there is no Cart link in the header.","woocommerce"),checked:n,onChange:()=>t({showReturnToCart:!n})}),g&&(0,c.jsx)(Lt.TextControl,{label:(0,v.__)("Price separator","woocommerce"),id:"price-separator",value:e.priceSeparator,onChange:e=>{t({priceSeparator:e})}})]}),n&&!(h===j&&0===u)&&(0,c.jsx)(us,{pageId:r,setPageId:e=>t({cartPageId:e}),labels:{title:(0,v.__)("Return to Cart button","woocommerce"),default:(0,v.__)("WooCommerce Cart Page","woocommerce")}})]}),(0,c.jsx)("div",{className:"wc-block-checkout__actions",children:(0,c.jsxs)("div",{className:"wc-block-checkout__actions_row",children:[n&&(0,c.jsx)(gs,{element:"span",children:(0,c.jsx)(l.RichText,{multiline:!1,allowedFormats:[],value:a,placeholder:ds,onChange:e=>{t({returnToCartButtonLabel:e})}})}),(0,c.jsx)(ks,{className:(0,s.A)("wc-block-cart__submit-button","wc-block-components-checkout-place-order-button",{"wc-block-components-checkout-place-order-button--full-width":!n}),value:i,placeholder:ls,onChange:e=>{t({placeOrderButtonLabel:e})},children:g&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("style",{children:`.wp-block-woocommerce-checkout-actions-block {\n\t\t\t\t\t\t\t\t\t\t.wc-block-components-checkout-place-order-button__separator {\n\t\t\t\t\t\t\t\t\t\t\t&::after {\n\t\t\t\t\t\t\t\t\t\t\t\tcontent: "${e.priceSeparator}";\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}`}),(0,c.jsx)("div",{className:"wc-block-components-checkout-place-order-button__separator"}),(0,c.jsx)("div",{className:"wc-block-components-checkout-place-order-button__price",children:(0,c.jsx)(zt.FormattedMonetaryAmount,{value:p.total_price,currency:m})})]})})]})})]})}};(0,a.registerBlockType)("woocommerce/checkout-actions-block",ys);const xs=()=>{const{additionalFields:e}=(0,_.useSelect)((e=>({additionalFields:e(X.checkoutStore).getAdditionalFields()})),[]),{isEditor:t}=b(),{setAdditionalFields:o}=(0,_.useDispatch)(X.checkoutStore),s={...e},r=t?eo:d.Fragment;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(zt.StoreNoticesContainer,{context:me.ORDER_INFORMATION}),(0,c.jsx)(r,{children:(0,c.jsx)(Eo,{id:"order",addressType:"order",onChange:e=>{o(e)},fields:$,values:s})})]})},vs={...Mo({defaultTitle:(0,v.__)("Additional order information","woocommerce"),defaultDescription:""}),className:{type:"string",default:""},lock:{type:"object",default:{move:!1,remove:!0}}},fs=JSON.parse('{"DD":"Additional information","XV":3}');(0,a.registerBlockType)("woocommerce/checkout-additional-information-block",{apiVersion:fs.XV,title:fs.DD,attributes:vs,icon:{src:(0,c.jsx)(i.A,{icon:Oo.A,className:"wc-block-editor-components-block-icon"})},edit:({attributes:e,setAttributes:t})=>{const{defaultFields:o}=ht(),r=xo($,o,"order");return 0===r.length||r.every((e=>!!e.hidden))?null:(0,c.jsx)(Xt,{setAttributes:t,attributes:e,className:(0,s.A)("wc-block-checkout__additional-information-fields",e?.className),children:(0,c.jsx)(xs,{})})},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save()})});var Ss=o(7715);const js=({disabled:e,onChange:t,placeholder:o,value:s})=>{const[r,n]=(0,d.useState)(""!==s),[i,a]=(0,d.useState)("");return(0,c.jsxs)("div",{className:"wc-block-checkout__add-note",children:[(0,c.jsx)(zt.CheckboxControl,{disabled:e,label:(0,v.__)("Add a note to your order","woocommerce"),checked:r,onChange:e=>{n(e),e?s!==i&&t(i):(t(""),a(s))}}),r&&(0,c.jsx)(zt.Textarea,{disabled:e,onTextChange:t,placeholder:o,value:s})]})},Cs=({className:e})=>{const{needsShipping:t}=We(),{isProcessing:o,orderNotes:r}=(0,_.useSelect)((e=>{const t=e(X.checkoutStore);return{isProcessing:t.isProcessing(),orderNotes:t.getOrderNotes()}})),{__internalSetOrderNotes:n}=(0,_.useDispatch)(X.checkoutStore);return(0,c.jsx)(zt.FormStep,{id:"order-notes",showStepNumber:!1,className:(0,s.A)("wc-block-checkout__order-notes",e),disabled:o,children:(0,c.jsx)(js,{disabled:o,onChange:n,placeholder:t?(0,v.__)("Notes about your order, e.g. special notes for delivery.","woocommerce"):(0,v.__)("Notes about your order.","woocommerce"),value:r})})};o(9003);const Es=JSON.parse('{"DD":"Order Note","XV":3}');o(4255),(0,a.registerBlockType)("woocommerce/checkout-order-note-block",{apiVersion:Es.XV,title:Es.DD,icon:{src:(0,c.jsx)(i.A,{icon:Ss.A,className:"wc-block-editor-components-block-icon"})},edit:()=>{const e=(0,l.useBlockProps)();return(0,c.jsx)("div",{...e,children:(0,c.jsx)(eo,{children:(0,c.jsx)(Cs,{})})})},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save()})});const Ps=(0,c.jsxs)(r.SVG,{xmlns:"http://www.w3.org/2000/SVG",viewBox:"0 0 24 24",fill:"none",children:[(0,c.jsx)("path",{stroke:"currentColor",strokeWidth:"1.5",fill:"none",d:"M6 3.75h12c.69 0 1.25.56 1.25 1.25v14c0 .69-.56 1.25-1.25 1.25H6c-.69 0-1.25-.56-1.25-1.25V5c0-.69.56-1.25 1.25-1.25z"}),(0,c.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M6.9 7.5A1.1 1.1 0 018 6.4h8a1.1 1.1 0 011.1 1.1v2a1.1 1.1 0 01-1.1 1.1H8a1.1 1.1 0 01-1.1-1.1v-2zm1.2.1v1.8h7.8V7.6H8.1z",clipRule:"evenodd"}),(0,c.jsx)("path",{fill:"currentColor",d:"M8.5 12h1v1h-1v-1zM8.5 14h1v1h-1v-1zM8.5 16h1v1h-1v-1zM11.5 12h1v1h-1v-1zM11.5 14h1v1h-1v-1zM11.5 16h1v1h-1v-1zM14.5 12h1v1h-1v-1zM14.5 14h1v1h-1v-1zM14.5 16h1v1h-1v-1z"})]});o(9961);const Ns=({children:e,className:t,screenReaderLabel:o,showSpinner:r=!1,isLoading:n=!0})=>(0,c.jsxs)("div",{className:(0,s.A)(t,{"wc-block-components-loading-mask":n}),children:[n&&r&&(0,c.jsx)(zt.Spinner,{}),(0,c.jsx)("div",{className:(0,s.A)({"wc-block-components-loading-mask__children":n}),"aria-hidden":n,children:e}),n&&(0,c.jsx)("span",{className:"screen-reader-text",children:o||(0,v.__)("Loadingâ¦","woocommerce")})]});o(9581);const As=({instanceId:e,isLoading:t=!1,onSubmit:o,displayCouponForm:r=!1})=>{const[n,i]=(0,d.useState)(""),[a,l]=(0,d.useState)(r),p=`wc-block-components-totals-coupon__input-${e}`,{validationErrorId:m}=(0,_.useSelect)((t=>({validationErrorId:t(X.validationStore).getValidationErrorId(e)})),[e]),u=(0,d.useRef)(null);return(0,c.jsx)(zt.Panel,{className:"wc-block-components-totals-coupon",initialOpen:a,hasBorder:!1,headingLevel:2,title:(0,v.__)("Add coupons","woocommerce"),state:[a,l],children:(0,c.jsx)(Ns,{screenReaderLabel:(0,v.__)("Applying couponâ¦","woocommerce"),isLoading:t,showSpinner:!1,children:(0,c.jsxs)("div",{className:"wc-block-components-totals-coupon__content",children:[(0,c.jsxs)("form",{className:"wc-block-components-totals-coupon__form",id:"wc-block-components-totals-coupon__form",children:[(0,c.jsx)(zt.ValidatedTextInput,{id:p,errorId:"coupon",className:"wc-block-components-totals-coupon__input",label:(0,v.__)("Enter code","woocommerce"),value:n,ariaDescribedBy:m||"",onChange:e=>{i(e)},focusOnMount:!0,validateOnMount:!1,showError:!1,ref:u}),(0,c.jsxs)(_s,{className:(0,s.A)("wc-block-components-totals-coupon__button",{"wc-block-components-totals-coupon__button--loading":t}),disabled:t||!n,onClick:e=>{e.preventDefault(),void 0!==o?o(n)?.then((e=>{e?(i(""),l(!1)):u.current?.focus&&u.current.focus()})):(i(""),l(!0))},type:"submit",children:[t&&(0,c.jsx)(zt.Spinner,{}),(0,v.__)("Apply","woocommerce")]})]}),(0,c.jsx)(zt.ValidationInputError,{propertyName:"coupon",elementId:e})]})})})};o(619);const Is={context:"summary"},Rs=({cartCoupons:e=[],currency:t,isRemovingCoupon:o,removeCoupon:s,values:r})=>{const{total_discount:n,total_discount_tax:i}=r,a=parseInt(n,10),l=(0,Pt.applyCheckoutFilter)({arg:Is,filterName:"coupons",defaultValue:e});if(!a&&0===l.length)return null;const d=parseInt(i,10),p=(0,x.getSetting)("displayCartPricesIncludingTax",!1)?a+d:a;return(0,c.jsx)(zt.TotalsItem,{className:"wc-block-components-totals-discount",currency:t,description:0!==l.length&&(0,c.jsx)(Ns,{screenReaderLabel:(0,v.__)("Removing couponâ¦","woocommerce"),isLoading:o,showSpinner:!1,children:(0,c.jsx)("ul",{className:"wc-block-components-totals-discount__coupon-list",children:l.map((e=>(0,c.jsx)(zt.RemovableChip,{className:"wc-block-components-totals-discount__coupon-list-item",text:e.label,screenReaderText:(0,v.sprintf)(/* translators: %s Coupon code. */ /* translators: %s Coupon code. */
(0,v.__)("Coupon: %s","woocommerce"),e.label),disabled:o,onRemove:()=>{s(e.code)},radius:"large",ariaLabel:(0,v.sprintf)(/* translators: %s is a coupon code. */ /* translators: %s is a coupon code. */
(0,v.__)('Remove coupon "%s"',"woocommerce"),e.label)},"coupon-"+e.code)))})}),label:p?(0,v.__)("Discount","woocommerce"):(0,v.__)("Coupons","woocommerce"),value:p?-1*p:"-"})};o(8413);const Ts=({currency:e,values:t,className:o,isEstimate:r=!1})=>{const n=(0,x.getSetting)("taxesEnabled",!0)&&(0,x.getSetting)("displayCartPricesIncludingTax",!1),{total_price:i,total_tax:a,tax_lines:l}=t,{receiveCart:p,...m}=Te(),u=(0,Pt.applyCheckoutFilter)({filterName:"totalLabel",defaultValue:r?(0,v.__)("Estimated total","woocommerce"):(0,v.__)("Total","woocommerce"),extensions:m.extensions,arg:{cart:m}}),h=(0,Pt.applyCheckoutFilter)({filterName:"totalValue",defaultValue:"<price/>",extensions:m.extensions,arg:{cart:m},validation:Pt.productPriceValidation}),g=(0,c.jsx)(zt.FormattedMonetaryAmount,{className:"wc-block-components-totals-footer-item-tax-value",currency:e,value:parseInt(i,10)}),_=(0,d.createInterpolateElement)(h,{price:g}),k=parseInt(a,10),b=l&&l.length>0?(0,v.sprintf)(/* translators: %s is a list of tax rates */ /* translators: %s is a list of tax rates */
(0,v.__)("Including %s","woocommerce"),l.map((({name:t,price:o})=>`${(0,bs.formatPrice)(o,e)} ${t}`)).join(", ")):(0,v.__)("Including <TaxAmount/> in taxes","woocommerce"),w=Le(m.shippingRates),y=m.cartNeedsShipping;return(0,c.jsx)(zt.TotalsItem,{className:(0,s.A)("wc-block-components-totals-footer-item",o),currency:e,label:u,value:_,description:(0,c.jsxs)(c.Fragment,{children:[n&&0!==k&&(0,c.jsx)("p",{className:"wc-block-components-totals-footer-item-tax",children:(0,d.createInterpolateElement)(b,{TaxAmount:(0,c.jsx)(zt.FormattedMonetaryAmount,{className:"wc-block-components-totals-footer-item-tax-value",currency:e,value:k})})}),r&&!w&&y&&(0,c.jsx)("p",{className:"wc-block-components-totals-footer-item-shipping",children:(0,v.__)("Shipping will be calculated at checkout","woocommerce")})]})})},Ms=()=>{const{shippingRates:e}=Te(),t=Ve(e);return t?(0,c.jsx)("div",{className:"wc-block-components-totals-shipping__via",children:(0,_e.decodeEntities)(t.filter(((e,o)=>t.indexOf(e)===o)).join(", "))}):null},Bs=e=>{const t=(e=>(0,x.getSetting)("displayCartPricesIncludingTax",!1)?parseInt(e.total_shipping,10)+parseInt(e.total_shipping_tax,10):parseInt(e.total_shipping,10))(e);return 0===t?(0,c.jsx)("strong",{children:(0,v.__)("Free","woocommerce")}):t};o(6562);const Ds=({label:e=(0,v.__)("Shipping","woocommerce"),placeholder:t=null,collaterals:o=null})=>{const{cartTotals:s,shippingRates:r}=Te(),n=Le(r),i=Ve(r),a=i.length>1,l=!n||a?e:i[0];return(0,c.jsx)("div",{className:"wc-block-components-totals-shipping",children:(0,c.jsx)(zt.TotalsItem,{label:l,value:n?Bs(s):t,description:(0,c.jsxs)(c.Fragment,{children:[a&&(0,c.jsx)(Ms,{}),o&&(0,c.jsx)("div",{className:"wc-block-components-totals-shipping__collaterals",children:o})]}),currency:(0,bs.getCurrencyFromPriceResponse)(s)})})};var Os=o(559);const Fs=()=>{const{extensions:e,receiveCart:t,...o}=Te(),s={extensions:e,cart:o,context:"woocommerce/checkout"};return(0,c.jsx)(Pt.ExperimentalOrderMeta.Slot,{...s})},{Fill:Ls,Slot:Vs}=(0,Pt.createSlotFill)("checkoutOrderSummaryActionArea"),Us=JSON.parse('{"DD":"Order Summary","xY":{"align":false,"html":false,"multiple":false,"reusable":false,"inserter":false,"lock":false},"uK":{"lock":{"type":"object","default":{"remove":true}}},"XV":3}'),$s=[{attributes:Us.uK,save:()=>(0,c.jsx)("div",{...l.useBlockProps.save(),children:(0,c.jsx)(l.InnerBlocks.Content,{})}),supports:Us.xY,migrate:({attributes:e})=>[e,[(0,a.createBlock)("woocommerce/checkout-order-summary-cart-items-block",{},[]),(0,a.createBlock)("woocommerce/checkout-order-summary-coupon-form-block",{},[]),(0,a.createBlock)("woocommerce/checkout-order-summary-totals-block",{},[(0,a.createBlock)("woocommerce/checkout-order-summary-subtotal-block",{},[]),(0,a.createBlock)("woocommerce/checkout-order-summary-fee-block",{},[]),(0,a.createBlock)("woocommerce/checkout-order-summary-discount-block",{},[]),(0,a.createBlock)("woocommerce/checkout-order-summary-shipping-block",{},[]),(0,a.createBlock)("woocommerce/checkout-order-summary-taxes-block",{},[])])]],isEligible:(e,t)=>!t.some((e=>"woocommerce/checkout-order-summary-totals-block"===e.name))}],Hs=$s;o(6229),(0,a.registerBlockType)("woocommerce/checkout-order-summary-block",{apiVersion:Us.XV,title:Us.DD,icon:{src:(0,c.jsx)(i.A,{icon:Ps,className:"wc-block-editor-components-block-icon"})},attributes:{className:{type:"string",default:""},lock:{type:"object",default:{move:!0,remove:!0}}},edit:({clientId:e})=>{const t=(0,l.useBlockProps)(),{cartTotals:o}=Te(),r=(0,bs.getCurrencyFromPriceResponse)(o),n=parseInt(o.total_price,10),i=Ot(Pt.innerBlockAreas.CHECKOUT_ORDER_SUMMARY),{isLarge:a}=u(),[p,m]=(0,d.useState)(!1),h=(0,d.useId)(),g=a?{}:{role:"button",onClick:()=>m(!p),"aria-expanded":p,"aria-controls":h,tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||m(!p)}},_=[["woocommerce/checkout-order-summary-cart-items-block",{},[]],["woocommerce/checkout-order-summary-coupon-form-block",{},[]],["woocommerce/checkout-order-summary-totals-block",{},[]]];return Ft({clientId:e,registeredBlocks:i,defaultTemplate:_}),(0,c.jsxs)("div",{...t,children:[(0,c.jsxs)("div",{className:"wc-block-components-checkout-order-summary__title",...g,children:[(0,c.jsx)("p",{className:"wc-block-components-checkout-order-summary__title-text",role:"heading",children:(0,v.__)("Order summary","woocommerce")}),(0,c.jsx)(zt.FormattedMonetaryAmount,{currency:r,value:n,className:"wc-block-components-checkout-order-summary__title-price"}),(0,c.jsx)("span",{className:"wc-block-components-checkout-order-summary__title-icon",children:(0,c.jsx)(Lt.Icon,{icon:p?Os.A:to.A})})]}),(0,c.jsxs)("div",{className:(0,s.A)("wc-block-components-checkout-order-summary__content",{"is-open":p}),id:h,children:[(0,c.jsx)(l.InnerBlocks,{allowedBlocks:i,template:_}),(0,c.jsx)("div",{className:"wc-block-components-totals-wrapper",children:(0,c.jsx)(Ts,{currency:r,values:o})}),(0,c.jsx)(Fs,{})]})]})},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save(),children:(0,c.jsx)(l.InnerBlocks.Content,{})}),deprecated:Hs});var qs=o(6208),zs=o(7035),Ws=o(3240),Xs=o.n(Ws);const Ys=["a","b","em","i","strong","p","br"],Gs=["target","href","rel","name","download"],Js=(e,t)=>{const o=t?.tags||Ys,s=t?.attr||Gs;return Xs().sanitize(e,{ALLOWED_TAGS:o,ALLOWED_ATTR:s})},Ks={warning:"#F0B849",error:"#CC1818",success:"#46B450",info:"#0073AA"},Zs=({status:e="warning",...t})=>(0,c.jsxs)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",...t,children:[(0,c.jsx)("path",{d:"M12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20Z",stroke:Ks[e],strokeWidth:"1.5"}),(0,c.jsx)("path",{d:"M13 7H11V13H13V7Z",fill:Ks[e]}),(0,c.jsx)("path",{d:"M13 15H11V17H13V15Z",fill:Ks[e]})]});o(4459);const Qs=({href:e,title:t,description:o,warning:s})=>(0,c.jsxs)("a",{href:e,className:"wc-block-editor-components-external-link-card",target:"_blank",rel:"noreferrer",children:[(0,c.jsxs)("span",{className:"wc-block-editor-components-external-link-card__content",children:[(0,c.jsx)("strong",{className:"wc-block-editor-components-external-link-card__title",children:t}),o&&(0,c.jsx)("span",{className:"wc-block-editor-components-external-link-card__description",dangerouslySetInnerHTML:{__html:Js(o)}}),s?(0,c.jsxs)("span",{className:"wc-block-editor-components-external-link-card__warning",children:[(0,c.jsx)(i.A,{icon:(0,c.jsx)(Zs,{status:"error"})}),(0,c.jsx)("span",{children:s})]}):null]}),(0,c.jsx)(Lt.VisuallyHidden,{as:"span",children:/* translators: accessibility text */ /* translators: accessibility text */
(0,v.__)("(opens in a new tab)","woocommerce")}),(0,c.jsx)(i.A,{icon:zs.A,className:"wc-block-editor-components-external-link-card__icon"})]}),er=window.wp.autop,tr=e=>e.replace(/<\/?[a-z][^>]*?>/gi,""),or=(e,t)=>e.replace(/[\s|\.\,]+$/i,"")+t,sr=(e,t,o="&hellip;",s=!0)=>{const r=tr(e),c=r.split(" ").splice(0,t).join(" ");return c===r?s?(0,er.autop)(r):r:s?(0,er.autop)(or(c,o)):or(c,o)},rr=(e,t,o=!0,s="&hellip;",r=!0)=>{const c=tr(e),n=c.slice(0,t);if(n===c)return r?(0,er.autop)(c):c;if(o)return(0,er.autop)(or(n,s));const i=n.match(/([\s]+)/g),a=i?i.length:0,l=c.slice(0,t+a);return r?(0,er.autop)(or(l,s)):or(l,s)};var cr=o(5614),nr=(o(7575),o(8034)),ir=o(2624),ar=o(4144);const lr=e=>{switch(e){case"success":case"warning":case"info":case"default":return"polite";default:return"assertive"}},dr=e=>{switch(e){case"success":return nr.A;case"warning":case"info":case"error":return ir.A;default:return ar.A}};var pr=o(195);const mr=({className:e,status:t="default",children:o,spokenMessage:r=o,onRemove:n=()=>{},isDismissible:a=!0,politeness:l=lr(t),summary:p})=>(((e,t)=>{const o="string"==typeof e?e:(0,d.renderToString)(e);(0,d.useEffect)((()=>{o&&(0,pr.speak)(o,t)}),[o,t])})(r,l),(0,c.jsxs)("div",{className:(0,s.A)(e,"wc-block-components-notice-banner","is-"+t,{"is-dismissible":a}),children:[(0,c.jsx)(i.A,{icon:dr(t)}),(0,c.jsxs)("div",{className:"wc-block-components-notice-banner__content",children:[p&&(0,c.jsx)("p",{className:"wc-block-components-notice-banner__summary",children:p}),o]}),!!a&&(0,c.jsx)(_s,{className:"wc-block-components-notice-banner__dismiss","aria-label":(0,v.__)("Dismiss this notice","woocommerce"),onClick:e=>{"function"==typeof e?.preventDefault&&e.preventDefault&&e.preventDefault(),n()},removeTextWrap:!0,children:(0,c.jsx)(i.A,{icon:cr.A})})]}));o(4147);const ur=()=>(0,c.jsx)(mr,{isDismissible:!1,className:"wc-block-checkout__no-payment-methods-notice",status:"error",children:(0,v.__)("There are no payment methods available. This may be an error on our side. Please contact us if you need any help placing your order.","woocommerce")}),hr=(0,c.jsx)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,c.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[(0,c.jsx)("path",{d:"M0 0h24v24H0z"}),(0,c.jsx)("path",{fill:"#000",fillRule:"nonzero",d:"M17.3 8v1c1 .2 1.4.9 1.4 1.7h-1c0-.6-.3-1-1-1-.8 0-1.3.4-1.3.9 0 .4.3.6 1.4 1 1 .2 2 .6 2 1.9 0 .9-.6 1.4-1.5 1.5v1H16v-1c-.9-.1-1.6-.7-1.7-1.7h1c0 .6.4 1 1.3 1 1 0 1.2-.5 1.2-.8 0-.4-.2-.8-1.3-1.1-1.3-.3-2.1-.8-2.1-1.8 0-.9.7-1.5 1.6-1.6V8h1.3zM12 10v1H6v-1h6zm2-2v1H6V8h8zM2 4v16h20V4H2zm2 14V6h16v12H4z"}),(0,c.jsx)("path",{stroke:"#000",strokeLinecap:"round",d:"M6 16c2.6 0 3.9-3 1.7-3-2 0-1 3 1.5 3 1 0 1-.8 2.8-.8"})]})});var gr=o(6600),_r=o(8486);o(9287);const kr={bank:gr.A,bill:_r.A,card:qs.A,checkPayment:hr},br=({icon:e="",text:t=""})=>{const o=!!e,r=(0,d.useCallback)((e=>o&&(0,pe.isString)(e)&&(0,pe.objectHasProp)(kr,e)),[o]),n=(0,s.A)("wc-block-components-payment-method-label",{"wc-block-components-payment-method-label--with-icon":o});return(0,c.jsxs)("span",{className:n,children:[r(e)?(0,c.jsx)(i.A,{icon:kr[e]}):e,t]})},wr=e=>`wc-block-components-payment-method-icon wc-block-components-payment-method-icon--${e}`,yr=({id:e,src:t=null,alt:o=""})=>t?(0,c.jsx)("img",{className:wr(e),src:t,alt:o}):null,xr=[{id:"alipay",alt:"Alipay",src:S+"payment-methods/alipay.svg"},{id:"amex",alt:"American Express",src:S+"payment-methods/amex.svg"},{id:"bancontact",alt:"Bancontact",src:S+"payment-methods/bancontact.svg"},{id:"diners",alt:"Diners Club",src:S+"payment-methods/diners.svg"},{id:"discover",alt:"Discover",src:S+"payment-methods/discover.svg"},{id:"eps",alt:"EPS",src:S+"payment-methods/eps.svg"},{id:"giropay",alt:"Giropay",src:S+"payment-methods/giropay.svg"},{id:"ideal",alt:"iDeal",src:S+"payment-methods/ideal.svg"},{id:"jcb",alt:"JCB",src:S+"payment-methods/jcb.svg"},{id:"laser",alt:"Laser",src:S+"payment-methods/laser.svg"},{id:"maestro",alt:"Maestro",src:S+"payment-methods/maestro.svg"},{id:"mastercard",alt:"Mastercard",src:S+"payment-methods/mastercard.svg"},{id:"multibanco",alt:"Multibanco",src:S+"payment-methods/multibanco.svg"},{id:"p24",alt:"Przelewy24",src:S+"payment-methods/p24.svg"},{id:"sepa",alt:"Sepa",src:S+"payment-methods/sepa.svg"},{id:"sofort",alt:"Sofort",src:S+"payment-methods/sofort.svg"},{id:"unionpay",alt:"Union Pay",src:S+"payment-methods/unionpay.svg"},{id:"visa",alt:"Visa",src:S+"payment-methods/visa.svg"},{id:"wechat",alt:"WeChat",src:S+"payment-methods/wechat.svg"}];o(6983);const vr=({icons:e=[],align:t="center",className:o})=>{const r=(e=>{const t={};return e.forEach((e=>{let o={};"string"==typeof e&&(o={id:e,alt:e,src:null}),"object"==typeof e&&(o={id:e.id||"",alt:e.alt||"",src:e.src||null}),o.id&&(0,pe.isString)(o.id)&&!t[o.id]&&(t[o.id]=o)})),Object.values(t)})(e);if(0===r.length)return null;const n=(0,s.A)("wc-block-components-payment-method-icons",{"wc-block-components-payment-method-icons--align-left":"left"===t,"wc-block-components-payment-method-icons--align-right":"right"===t},o);return(0,c.jsx)("div",{className:n,children:r.map((e=>{const t={...e,...(o=e.id,xr.find((e=>e.id===o))||{})};var o;return(0,c.jsx)(yr,{...t},"payment-method-icon-"+e.id)}))})},fr=(e="")=>{const{cartCoupons:t,cartIsLoading:o}=Te(),{applyCoupon:s,removeCoupon:r}=(0,_.useDispatch)(X.cartStore),{isApplyingCoupon:c,isRemovingCoupon:n,orderId:i}=(0,_.useSelect)((e=>({isApplyingCoupon:e(X.cartStore).isApplyingCoupon(),isRemovingCoupon:e(X.cartStore).isRemovingCoupon(),orderId:e(X.checkoutStore).getOrderId()})),[]),a=(0,d.useCallback)((e=>i&&i>0&&e?.data?.details?.checkout?e.data.details.checkout:e?.data?.details?.cart?e.data.details.cart:e.message),[i]);return{appliedCoupons:t,isLoading:o,applyCoupon:(0,d.useCallback)((t=>s(t).then((()=>((0,Pt.applyCheckoutFilter)({filterName:"showApplyCouponNotice",defaultValue:!0,arg:{couponCode:t,context:e}})&&(0,_.dispatch)("core/notices").createNotice("info",(0,v.sprintf)(/* translators: %s coupon code. */ /* translators: %s coupon code. */
(0,v.__)('Coupon code "%s" has been applied to your cart.',"woocommerce"),t),{id:"coupon-form",type:"snackbar",context:e}),Promise.resolve(!0)))).catch((e=>{const t=a(e);return(0,_.dispatch)(X.validationStore).setValidationErrors({coupon:{message:(0,_e.decodeEntities)(t),hidden:!1}}),Promise.resolve(!1)}))),[s,a,e]),removeCoupon:(0,d.useCallback)((t=>r(t).then((()=>((0,Pt.applyCheckoutFilter)({filterName:"showRemoveCouponNotice",defaultValue:!0,arg:{couponCode:t,context:e}})&&(0,_.dispatch)("core/notices").createNotice("info",(0,v.sprintf)(/* translators: %s coupon code. */ /* translators: %s coupon code. */
(0,v.__)('Coupon code "%s" has been removed from your cart.',"woocommerce"),(0,_e.decodeEntities)(t)),{id:"coupon-form",type:"snackbar",context:e}),Promise.resolve(!0)))).catch((t=>((0,_.dispatch)("core/notices").createErrorNotice(t.message,{id:"coupon-form",type:"snackbar",context:e}),Promise.resolve(!1))))),[r,e]),isApplyingCoupon:c,isRemovingCoupon:n}},Sr=(e,t)=>{const o=[],s=(t,o)=>{const s=o+"_tax",r=(0,pe.objectHasProp)(e,o)&&(0,pe.isString)(e[o])?parseInt(e[o],10):0;return{key:o,label:t,value:r,valueWithTax:r+((0,pe.objectHasProp)(e,s)&&(0,pe.isString)(e[s])?parseInt(e[s],10):0)}};return o.push(s((0,v.__)("Subtotal:","woocommerce"),"total_items")),o.push(s((0,v.__)("Fees:","woocommerce"),"total_fees")),o.push(s((0,v.__)("Discount:","woocommerce"),"total_discount")),o.push({key:"total_tax",label:(0,v.__)("Taxes:","woocommerce"),value:parseInt(e.total_tax,10),valueWithTax:parseInt(e.total_tax,10)}),t&&o.push(s((0,v.__)("Shipping:","woocommerce"),"total_shipping")),o},jr=()=>{const{onCheckoutBeforeProcessing:e,onCheckoutValidationBeforeProcessing:t,onCheckoutAfterProcessingWithSuccess:o,onCheckoutAfterProcessingWithError:s,onSubmit:r}=(0,d.useContext)(nt),{onCheckoutValidation:c,onCheckoutSuccess:n,onCheckoutFail:i}=tt.checkoutEvents,{isCalculating:a,isComplete:l,isIdle:p,isProcessing:m,customerId:u}=(0,_.useSelect)((e=>{const t=e(X.checkoutStore);return{isComplete:t.isComplete(),isIdle:t.isIdle(),isProcessing:t.isProcessing(),customerId:t.getCustomerId(),isCalculating:t.isCalculating()}}),[]),{paymentIsIdle:h,paymentIsStarted:g,paymentIsProcessing:k,paymentHasError:b,paymentIsReady:w,paymentIsDoingExpressPayment:y,activePaymentMethod:f,shouldSavePayment:S}=(0,_.useSelect)((e=>{const t=e(X.paymentStore);return{paymentIsIdle:t.isPaymentIdle(),paymentIsStarted:t.isExpressPaymentStarted(),paymentIsProcessing:t.isPaymentProcessing(),paymentHasError:t.hasPaymentError(),paymentIsReady:t.isPaymentReady(),paymentIsDoingExpressPayment:t.isExpressPaymentMethodActive(),activePaymentMethod:t.getActivePaymentMethod(),shouldSavePayment:t.getShouldSavePaymentMethod()}}),[]),j={isIdle:h,isStarted:g,isProcessing:k,hasError:b,isReady:w,isDoingExpressPayment:y,get isPristine(){return G()("isPristine",{since:"9.6.0",alternative:"isIdle",plugin:"WooCommerce Blocks",link:"https://github.com/woocommerce/woocommerce-blocks/pull/8110"}),h},get isFinished(){return G()("isFinished",{since:"9.6.0",plugin:"WooCommerce Blocks",link:"https://github.com/woocommerce/woocommerce-blocks/pull/8110"}),b||w},get hasFailed(){return G()("hasFailed",{since:"9.6.0",plugin:"WooCommerce Blocks",link:"https://github.com/woocommerce/woocommerce-blocks/pull/8110"}),b},get isSuccessful(){return G()("isSuccessful",{since:"9.6.0",plugin:"WooCommerce Blocks",link:"https://github.com/woocommerce/woocommerce-blocks/pull/8110"}),w}},{__internalSetExpressPaymentError:C}=(0,_.useDispatch)(X.paymentStore),{onPaymentProcessing:E,onPaymentSetup:P}=(0,d.useContext)(ee),{shippingErrorStatus:N,shippingErrorTypes:A,onShippingRateSuccess:I,onShippingRateFail:R,onShippingRateSelectSuccess:T,onShippingRateSelectFail:M}=Ke(),{shippingRates:B,isLoadingRates:D,selectedRates:O,isSelectingRate:F,selectShippingRate:L,needsShipping:V}=We(),{billingAddress:U,shippingAddress:$}=(0,_.useSelect)((e=>e(X.cartStore).getCustomerData()),[]),{setShippingAddress:H}=(0,_.useDispatch)(X.cartStore),{cartItems:q,cartFees:z,cartTotals:W,extensions:Y}=Te(),{appliedCoupons:J}=fr(),K=(0,d.useRef)(Sr(W,V)),Z=(0,d.useRef)({label:(0,v.__)("Total","woocommerce"),value:parseInt(W.total_price,10)});(0,d.useEffect)((()=>{K.current=Sr(W,V),Z.current={label:(0,v.__)("Total","woocommerce"),value:parseInt(W.total_price,10)}}),[W,V]);const Q=(0,d.useCallback)(((e="")=>{G()("setExpressPaymentError should only be used by Express Payment Methods (using the provided onError handler).",{alternative:"",plugin:"woocommerce-gutenberg-products-block",link:"https://github.com/woocommerce/woocommerce-gutenberg-products-block/pull/4228"}),C(e)}),[C]);return{activePaymentMethod:f,billing:{appliedCoupons:J,billingAddress:U,billingData:U,cartTotal:Z.current,cartTotalItems:K.current,currency:(0,bs.getCurrencyFromPriceResponse)(W),customerId:u,displayPricesIncludingTax:(0,x.getSetting)("displayCartPricesIncludingTax",!1)},cartData:{cartItems:q,cartFees:z,extensions:Y},checkoutStatus:{isCalculating:a,isComplete:l,isIdle:p,isProcessing:m},components:{LoadingMask:Ns,PaymentMethodIcons:vr,PaymentMethodLabel:br,ValidationInputError:zt.ValidationInputError},emitResponse:{noticeContexts:me,responseTypes:pe.responseTypes},eventRegistration:{onCheckoutAfterProcessingWithError:s,onCheckoutAfterProcessingWithSuccess:o,onCheckoutBeforeProcessing:e,onCheckoutValidationBeforeProcessing:t,onCheckoutSuccess:n,onCheckoutFail:i,onCheckoutValidation:c,onPaymentProcessing:E,onPaymentSetup:P,onShippingRateFail:R,onShippingRateSelectFail:M,onShippingRateSelectSuccess:T,onShippingRateSuccess:I},onSubmit:r,paymentStatus:j,setExpressPaymentError:Q,shippingData:{isSelectingRate:F,needsShipping:V,selectedRates:O,setSelectedRates:L,setShippingAddress:H,shippingAddress:$,shippingRates:B,shippingRatesLoading:D},shippingStatus:{shippingErrorStatus:N,shippingErrorTypes:A},shouldSavePayment:S}};class Cr extends d.Component{state={errorMessage:"",hasError:!1};static getDerivedStateFromError(e){return{errorMessage:e.message,hasError:!0}}render(){const{hasError:e,errorMessage:t}=this.state,{isEditor:o}=this.props;if(e){let e=(0,v.__)("We are experiencing difficulties with this payment method. Please contact us for assistance.","woocommerce");(o||x.CURRENT_USER_IS_ADMIN)&&(e=t||(0,v.__)("There was an error with this payment method. Please verify it's configured correctly.","woocommerce"));const s=[{id:"0",content:e,isDismissible:!1,status:"error"}];return(0,c.jsx)(zt.StoreNoticesContainer,{additionalNotices:s,context:me.PAYMENTS})}return this.props.children}}const Er=Cr,Pr=({children:e,showSaveOption:t})=>{const{isEditor:o}=b(),{shouldSavePaymentMethod:s,customerId:r,shouldCreateAccount:n}=(0,_.useSelect)((e=>{const t=e(X.paymentStore),o=e(X.checkoutStore);return{shouldSavePaymentMethod:t.getShouldSavePaymentMethod(),customerId:o.getCustomerId(),shouldCreateAccount:o.getShouldCreateAccount()}}),[]),{__internalSetShouldSavePaymentMethod:i}=(0,_.useDispatch)(X.paymentStore),a=(0,x.getSetting)("checkoutAllowsGuest",!1),l=r>0||n||!a;return(0,d.useEffect)((()=>{!l&&s&&i(!1)}),[l,s,i]),(0,c.jsxs)(Er,{isEditor:o,children:[e,l&&t&&(0,c.jsx)(zt.CheckboxControl,{className:"wc-block-components-payment-methods__save-card-info",label:(0,v.__)("Save payment information to my account for future purchases.","woocommerce"),checked:s,onChange:()=>i(!s)})]})},Nr=()=>{const{activeSavedToken:e,activePaymentMethod:t,isExpressPaymentMethodActive:o,savedPaymentMethods:r,availablePaymentMethods:n}=(0,_.useSelect)((e=>{const t=e(X.paymentStore);return{activeSavedToken:t.getActiveSavedToken(),activePaymentMethod:t.getActivePaymentMethod(),isExpressPaymentMethodActive:t.isExpressPaymentMethodActive(),savedPaymentMethods:t.getSavedPaymentMethods(),availablePaymentMethods:t.getAvailablePaymentMethods()}})),{__internalSetActivePaymentMethod:i}=(0,_.useDispatch)(X.paymentStore),a=(0,dt.getPaymentMethods)(),{...l}=jr(),{removeNotice:p}=(0,_.useDispatch)("core/notices"),{dispatchCheckoutEvent:m}=ze(),{isEditor:u}=b(),h=Object.keys(n).map((e=>{const{edit:t,content:o,label:s,supports:r}=a[e],n=u?t:o;return{value:e,label:"string"==typeof s?s:(0,d.cloneElement)(s,{components:l.components}),name:`wc-saved-payment-method-token-${e}`,content:(0,c.jsx)(Pr,{showSaveOption:r.showSaveOption,children:(0,d.cloneElement)(n,{__internalSetActivePaymentMethod:i,...l})})}})),g=(0,d.useCallback)((e=>{i(e),p("wc-payment-error",me.PAYMENTS),m("set-active-payment-method",{paymentMethodSlug:e})}),[m,p,i]),k=0===Object.keys(r).length&&1===Object.keys(n).length,w=(0,s.A)({"disable-radio-control":k});return o?null:(0,c.jsx)(zt.RadioControlAccordion,{highlightChecked:!0,id:"wc-payment-method-options",className:w,selected:e?null:t,onChange:g,options:h})},Ar="wc/store/cart",Ir=((0,v.__)("Unable to get cart data from the API.","woocommerce"),[]),Rr=[],Tr={},Mr={};V.forEach((e=>{Mr[e]=""}));const Br={};V.forEach((e=>{Br[e]=""})),Br.email="";const Dr={cartItemsPendingQuantity:[],cartItemsPendingDelete:[],productsPendingAdd:[],cartData:{coupons:[],shippingRates:[],shippingAddress:Mr,billingAddress:Br,items:[],itemsCount:0,itemsWeight:0,crossSells:[],needsShipping:!0,needsPayment:!1,hasCalculatedShipping:!0,fees:[],totals:{currency_code:"",currency_symbol:"",currency_minor_unit:2,currency_decimal_separator:".",currency_thousand_separator:",",currency_prefix:"",currency_suffix:"",total_items:"0",total_items_tax:"0",total_fees:"0",total_fees_tax:"0",total_discount:"0",total_discount_tax:"0",total_shipping:"0",total_shipping_tax:"0",total_price:"0",total_tax:"0",tax_lines:[]},errors:Ir,paymentMethods:[],paymentRequirements:[],extensions:Tr},metaData:{updatingCustomerData:!1,updatingAddressFieldsForShippingRates:!1,updatingSelectedRate:!1,applyingCoupon:"",removingCoupon:"",isCartDataStale:!1},errors:Rr},Or=({method:e,expires:t})=>{var o,s;return(0,v.sprintf)(/* translators: %1$s is referring to the payment method brand, %2$s is referring to the last 4 digits of the payment card, %3$s is referring to the expiry date.  */ /* translators: %1$s is referring to the payment method brand, %2$s is referring to the last 4 digits of the payment card, %3$s is referring to the expiry date.  */
(0,v.__)("%1$s ending in %2$s (expires %3$s)","woocommerce"),null!==(o=null!==(s=e?.display_brand)&&void 0!==s?s:e?.networks?.preferred)&&void 0!==o?o:e.brand,e.last4,t)},Fr=({method:e})=>e.brand&&e.last4?(0,v.sprintf)(/* translators: %1$s is referring to the payment method brand, %2$s is referring to the last 4 digits of the payment card. */ /* translators: %1$s is referring to the payment method brand, %2$s is referring to the last 4 digits of the payment card. */
(0,v.__)("%1$s ending in %2$s","woocommerce"),e.brand,e.last4):(0,v.sprintf)(/* translators: %s is the name of the payment method gateway. */ /* translators: %s is the name of the payment method gateway. */
(0,v.__)("Saved token for %s","woocommerce"),e.gateway),Lr=()=>{const{activeSavedToken:e,activePaymentMethod:t,savedPaymentMethods:o}=(0,_.useSelect)((e=>{const t=e(X.paymentStore);return{activeSavedToken:t.getActiveSavedToken(),activePaymentMethod:t.getActivePaymentMethod(),savedPaymentMethods:t.getSavedPaymentMethods()}})),{__internalSetActivePaymentMethod:s}=(0,_.useDispatch)(X.paymentStore),r=(()=>{let e;if((0,_.select)("core/editor")){const t={cartCoupons:Ct.coupons,cartItems:Ct.items,crossSellsProducts:Ct.cross_sells,cartFees:Ct.fees,cartItemsCount:Ct.items_count,cartItemsWeight:Ct.items_weight,cartNeedsPayment:Ct.needs_payment,cartNeedsShipping:Ct.needs_shipping,cartItemErrors:Ir,cartTotals:Ct.totals,cartIsLoading:!1,cartErrors:Rr,billingData:Dr.cartData.billingAddress,billingAddress:Dr.cartData.billingAddress,shippingAddress:Dr.cartData.shippingAddress,extensions:Tr,shippingRates:Ct.shipping_rates,isLoadingRates:!1,cartHasCalculatedShipping:Ct.has_calculated_shipping,paymentRequirements:Ct.payment_requirements,receiveCart:()=>{}};e={cart:t,cartTotals:t.cartTotals,cartNeedsShipping:t.cartNeedsShipping,billingData:t.billingAddress,billingAddress:t.billingAddress,shippingAddress:t.shippingAddress,selectedShippingMethods:Ue(t.shippingRates),paymentMethods:Ct.payment_methods,paymentRequirements:t.paymentRequirements}}else{const t=(0,_.select)(Ar),o=t.getCartData(),s=t.getCartErrors(),r=t.getCartTotals(),c=!t.hasFinishedResolution("getCartData"),n=t.isAddressFieldsForShippingRatesUpdating(),i=Ue(o.shippingRates);e={cart:{cartCoupons:o.coupons,cartItems:o.items,crossSellsProducts:o.crossSells,cartFees:o.fees,cartItemsCount:o.itemsCount,cartItemsWeight:o.itemsWeight,cartNeedsPayment:o.needsPayment,cartNeedsShipping:o.needsShipping,cartItemErrors:o.errors,cartTotals:r,cartIsLoading:c,cartErrors:s,billingData:xe(o.billingAddress),billingAddress:xe(o.billingAddress),shippingAddress:xe(o.shippingAddress),extensions:o.extensions,shippingRates:o.shippingRates,isLoadingRates:n,cartHasCalculatedShipping:o.hasCalculatedShipping,paymentRequirements:o.paymentRequirements,receiveCart:(0,_.dispatch)(Ar).receiveCart},cartTotals:o.totals,cartNeedsShipping:o.needsShipping,billingData:o.billingAddress,billingAddress:o.billingAddress,shippingAddress:o.shippingAddress,selectedShippingMethods:i,paymentMethods:o.paymentMethods,paymentRequirements:o.paymentRequirements}}return e})(),n=(0,dt.getPaymentMethods)(),i=jr(),{removeNotice:a}=(0,_.useDispatch)("core/notices"),{dispatchCheckoutEvent:l}=ze(),p=(0,d.useMemo)((()=>{const e=Object.keys(o),t=new Set(e.flatMap((e=>o[e].map((e=>e.method.gateway))))),c=Array.from(t).filter((e=>n[e]?.canMakePayment(r)));return e.flatMap((e=>o[e].map((t=>{if(!c.includes(t.method.gateway))return;const o="cc"===e||"echeck"===e,r=t.method.gateway;return{name:`wc-saved-payment-method-token-${r}`,label:o?Or(t):Fr(t),value:t.tokenId.toString(),onChange:e=>{const t=`wc-${r}-payment-token`;s(r,{token:e,payment_method:r,[t]:e.toString(),isSavedToken:!0}),a("wc-payment-error",me.PAYMENTS),l("set-active-payment-method",{paymentMethodSlug:r})}}})))).filter((e=>void 0!==e))}),[o,n,s,a,l,r]),m=e&&n[t]&&void 0!==n[t]?.savedTokenComponent&&!(0,pe.isNull)(n[t].savedTokenComponent)?(0,d.cloneElement)(n[t].savedTokenComponent,{token:e,...i}):null;return p.length>0?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(zt.RadioControl,{highlightChecked:!0,id:"wc-payment-method-saved-tokens",selected:e,options:p,onChange:()=>{}}),m]}):null};o(7215);const Vr=({noPaymentMethods:e=(0,c.jsx)(ur,{})})=>{const{paymentMethodsInitialized:t,availablePaymentMethods:o,savedPaymentMethods:s}=(0,_.useSelect)((e=>{const t=e(X.paymentStore);return{paymentMethodsInitialized:t.paymentMethodsInitialized(),availablePaymentMethods:t.getAvailablePaymentMethods(),savedPaymentMethods:t.getSavedPaymentMethods()}}));return t&&0===Object.keys(o).length?e:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Lr,{}),Object.keys(s).length>0&&(0,c.jsx)(zt.Label,{label:(0,v.__)("Use another payment method.","woocommerce"),screenReaderLabel:(0,v.__)("Other available payment methods","woocommerce"),wrapperElement:"p",wrapperProps:{className:["wc-block-components-checkout-step__description wc-block-components-checkout-step__description-payments-aligned"]}}),(0,c.jsx)(Nr,{})]})},Ur=({noPaymentMethods:e})=>(0,c.jsx)(Vr,{noPaymentMethods:e});var $r=o(9143),Hr=o(5194);const qr=({label:e,description:t,buttonLabel:o,buttonHref:s,icon:r=$r.A})=>(0,c.jsxs)(Lt.Placeholder,{icon:(0,c.jsx)(i.A,{icon:r}),label:e,className:"wc-block-checkout__configure-placeholder",children:[(0,c.jsx)("span",{className:"wc-block-checkout__configure-placeholder-description",children:t}),(0,c.jsx)(Lt.Button,{variant:"primary",href:s,target:"_blank",rel:"noopener noreferrer",style:{backgroundColor:Hr.T.fN2,color:Hr.T.cai,pointerEvents:"all"},children:o})]}),zr={...Mo({defaultTitle:(0,v.__)("Payment options","woocommerce"),defaultDescription:""}),className:{type:"string",default:""},lock:{type:"object",default:{move:!0,remove:!0}}},Wr=JSON.parse('{"DD":"Payment Options","XV":3}');(0,a.registerBlockType)("woocommerce/checkout-payment-block",{apiVersion:Wr.XV,title:Wr.DD,icon:{src:(0,c.jsx)(i.A,{icon:qs.A,className:"wc-block-editor-components-block-icon"})},attributes:zr,edit:({attributes:e,setAttributes:t})=>{const o=(0,x.getSetting)("globalPaymentMethods"),r=(0,_.select)(X.paymentStore).getIncompatiblePaymentMethods(),n=(0,v.__)("Incompatible with block-based checkout","woocommerce"),i=f.wordCountType;return(0,c.jsxs)(Xt,{attributes:e,setAttributes:t,className:(0,s.A)("wc-block-checkout__payment-method",e?.className),children:[(0,c.jsx)(l.InspectorControls,{children:o.length>0&&(0,c.jsxs)(Lt.PanelBody,{title:(0,v.__)("Methods","woocommerce"),children:[(0,c.jsx)("p",{className:"wc-block-checkout__controls-text",children:(0,v.__)("You currently have the following payment integrations active.","woocommerce")}),o.map((e=>{const t=!!r[e.id];let o;return o="words"===i?sr(e.description,30,void 0,!1):rr(e.description,30,"characters_including_spaces"===i,void 0,!1),(0,c.jsx)(Qs,{href:`${x.ADMIN_URL}admin.php?page=wc-settings&tab=checkout&section=${e.id}`,title:e.title,description:o,...t?{warning:n}:{}},e.id)})),(0,c.jsx)(Lt.ExternalLink,{href:`${x.ADMIN_URL}admin.php?page=wc-settings&tab=checkout`,children:(0,v.__)("Manage payment methods","woocommerce")})]})}),(0,c.jsx)(eo,{children:(0,c.jsx)(Ur,{noPaymentMethods:(0,c.jsx)(qr,{icon:qs.A,label:(0,v.__)("Payment options","woocommerce"),description:(0,v.__)("Your store does not have any payment methods that support the Checkout block. Once you have configured a compatible payment method it will be displayed here.","woocommerce"),buttonLabel:(0,v.__)("Configure Payment Options","woocommerce"),buttonHref:`${x.ADMIN_URL}admin.php?page=wc-settings&tab=checkout`})})}),(0,c.jsx)(Yt,{block:Pt.innerBlockAreas.PAYMENT_METHODS})]})},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save(),children:(0,c.jsx)(Gt,{})})});const Xr=(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 0 24 24",children:[(0,c.jsx)("path",{stroke:"#1E1E1E",strokeLinejoin:"round",strokeWidth:"1.5",d:"M18.25 12a6.25 6.25 0 1 1-12.5 0 6.25 6.25 0 0 1 12.5 0Z"}),(0,c.jsx)("path",{fill:"#1E1E1E",d:"M10 3h4v3h-4z"}),(0,c.jsx)("rect",{width:"1.5",height:"5",x:"11.25",y:"8",fill:"#1E1E1E",rx:".75"}),(0,c.jsx)("path",{fill:"#1E1E1E",d:"m15.7 4.816 1.66 1.078-1.114 1.718-1.661-1.078z"})]}),Yr=()=>((e=!1)=>{const{paymentMethodsInitialized:t,expressPaymentMethodsInitialized:o,availablePaymentMethods:s,availableExpressPaymentMethods:r}=(0,_.useSelect)((e=>{const t=e(X.paymentStore);return{paymentMethodsInitialized:t.paymentMethodsInitialized(),expressPaymentMethodsInitialized:t.expressPaymentMethodsInitialized(),availableExpressPaymentMethods:t.getAvailableExpressPaymentMethods(),availablePaymentMethods:t.getAvailablePaymentMethods()}})),c=Object.values(s).map((({name:e})=>e)),n=Object.values(r).map((({name:e})=>e)),i=(0,dt.getPaymentMethods)(),a=(0,dt.getExpressPaymentMethods)(),l=Object.keys(i).reduce(((e,t)=>(c.includes(t)&&(e[t]=i[t]),e)),{}),d=Object.keys(a).reduce(((e,t)=>(n.includes(t)&&(e[t]=a[t]),e)),{}),p=po(l),m=po(d);return{paymentMethods:e?m:p,isInitialized:e?o:t}})(!0),Gr=["height","borderRadius"],Jr=e=>{const t=(0,_.select)(X.paymentStore).getAvailableExpressPaymentMethods();return Object.values(t).reduce(((t,o)=>t||o?.supportsStyle.some((t=>e.includes(t)))),!1)},Kr=({attributes:e,setAttributes:t})=>{const{buttonHeight:o,buttonBorderRadius:s}=e;return(0,c.jsxs)(c.Fragment,{children:[Jr(["height"])&&(0,c.jsx)(Lt.RadioControl,{label:(0,v.__)("Button height","woocommerce"),selected:o,options:[{label:(0,v.__)("Small (40px)","woocommerce"),value:"40"},{label:(0,v.__)("Medium (48px)","woocommerce"),value:"48"},{label:(0,v.__)("Large (55px)","woocommerce"),value:"55"}],onChange:e=>t({buttonHeight:e})}),Jr(["borderRadius"])&&(0,c.jsx)("div",{className:"border-radius-control-container",children:(0,c.jsx)(l.HeightControl,{label:(0,v.__)("Button border radius","woocommerce"),value:s,onChange:e=>{const o=e.replace("px","");t({buttonBorderRadius:o})}})})]})},Zr=({attributes:e,setAttributes:t})=>e.showButtonStyles?(0,c.jsx)(Kr,{attributes:e,setAttributes:t}):null,Qr=()=>{const e=(0,_.select)(X.paymentStore).getAvailableExpressPaymentMethods();return Object.entries(e).length<1?(0,c.jsx)("p",{className:"wc-block-checkout__controls-text",children:(0,v.__)("You currently have no express payment integrations active.","woocommerce")}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("p",{className:"wc-block-checkout__controls-text",children:(0,v.__)("You currently have the following express payment integrations active.","woocommerce")}),Object.values(e).map((e=>(0,c.jsx)(Qs,{href:`${x.ADMIN_URL}admin.php?page=wc-settings&tab=checkout&section=${encodeURIComponent(e.gatewayId)}`,title:e.title,description:e.description},e.name)))]})},ec=(0,c.jsxs)(c.Fragment,{children:[(0,v.__)("Apply uniform styles","woocommerce")," ",(0,c.jsx)("span",{className:"express-payment-styles-beta-badge",children:"Beta"})]}),tc=({attributes:e,setAttributes:t})=>(0,c.jsxs)(l.InspectorControls,{children:[Jr(Gr)&&(0,c.jsxs)(Lt.PanelBody,{title:(0,v.__)("Button Settings","woocommerce"),className:"express-payment-button-settings",children:[(0,c.jsx)(Lt.ToggleControl,{label:ec,checked:e.showButtonStyles,onChange:()=>t({showButtonStyles:!e.showButtonStyles}),help:(0,v.__)("Sets a consistent style for express payment buttons.","woocommerce")}),(0,c.jsxs)(Lt.Notice,{status:"warning",isDismissible:!1,className:"wc-block-checkout__notice express-payment-styles-notice",children:[(0,c.jsxs)("strong",{children:[(0,v.__)("Note","woocommerce"),":"]})," ",(0,v.__)("Some payment methods might not yet support all style controls","woocommerce")]}),(0,c.jsx)(Zr,{attributes:e,setAttributes:t})]}),(0,c.jsx)(Lt.PanelBody,{title:(0,v.__)("Express Payment Methods","woocommerce"),children:(0,c.jsx)(Qr,{})})]}),oc="wc/store/payment",sc=(0,d.createContext)({showButtonStyles:!1,buttonHeight:"48",buttonBorderRadius:"4"}),rc=()=>{const{isEditor:e}=b(),{showButtonStyles:t,buttonHeight:o,buttonBorderRadius:s}=(0,d.useContext)(sc),r=t?{height:o,borderRadius:s}:void 0,{activePaymentMethod:n,paymentMethodData:i}=(0,_.useSelect)((e=>{const t=e(oc);return{activePaymentMethod:t.getActivePaymentMethod(),paymentMethodData:t.getPaymentMethodData()}})),{__internalSetActivePaymentMethod:a,__internalSetExpressPaymentStarted:l,__internalSetPaymentIdle:p,__internalSetPaymentError:m,__internalSetPaymentMethodData:u,__internalSetExpressPaymentError:h}=(0,_.useDispatch)(oc),{paymentMethods:g}=Yr(),k=jr(),w=(0,d.useRef)(n),y=(0,d.useRef)(i),x=(0,d.useCallback)((e=>()=>{w.current=n,y.current=i,l(),a(e)}),[n,i,a,l]),f=(0,d.useCallback)((()=>{p(),a(w.current,y.current)}),[a,p]),S=(0,d.useCallback)((e=>{m(),u(e),h(e),a(w.current,y.current)}),[a,m,u,h]),j=(0,d.useCallback)(((e="")=>{G()("Express Payment Methods should use the provided onError handler instead.",{alternative:"onError",plugin:"woocommerce-gutenberg-products-block",link:"https://github.com/woocommerce/woocommerce-gutenberg-products-block/pull/4228"}),e?S(e):h("")}),[h,S]),C=Object.entries(g),E=C.length>0?C.map((([t,o])=>{const s=e?o.edit:o.content;return(0,d.isValidElement)(s)?(0,c.jsx)("li",{id:`express-payment-method-${t}`,children:(0,d.cloneElement)(s,{...k,onClick:x(t),onClose:f,onError:S,setExpressPaymentError:j,buttonAttributes:r})},t):null})):(0,c.jsx)("li",{children:(0,v.__)("No registered Payment Methods","woocommerce")},"noneRegistered");return(0,c.jsx)(Er,{isEditor:e,children:(0,c.jsx)("ul",{className:"wc-block-components-express-payment__event-buttons",children:E})})};o(2831);const cc=()=>{const{isCalculating:e,isProcessing:t,isAfterProcessing:o,isBeforeProcessing:s,isComplete:r,hasError:n}=(0,_.useSelect)((e=>{const t=e(X.checkoutStore);return{isCalculating:t.isCalculating(),isProcessing:t.isProcessing(),isAfterProcessing:t.isAfterProcessing(),isBeforeProcessing:t.isBeforeProcessing(),isComplete:t.isComplete(),hasError:t.hasError()}})),{availableExpressPaymentMethods:i,expressPaymentMethodsInitialized:a,isExpressPaymentMethodActive:l}=(0,_.useSelect)((e=>{const t=e(X.paymentStore);return{availableExpressPaymentMethods:t.getAvailableExpressPaymentMethods(),expressPaymentMethodsInitialized:t.expressPaymentMethodsInitialized(),isExpressPaymentMethodActive:t.isExpressPaymentMethodActive()}})),{isEditor:d}=b();if(!a||a&&0===Object.keys(i).length)return d||x.CURRENT_USER_IS_ADMIN?(0,c.jsx)(zt.StoreNoticesContainer,{context:me.EXPRESS_PAYMENTS}):null;const p=t||o||s||r&&!n;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Ns,{isLoading:e||p||l,children:(0,c.jsxs)("div",{className:"wc-block-components-express-payment wc-block-components-express-payment--checkout",children:[(0,c.jsx)("div",{className:"wc-block-components-express-payment__title-container",children:(0,c.jsx)(zt.Title,{className:"wc-block-components-express-payment__title",headingLevel:"2",children:(0,v.__)("Express Checkout","woocommerce")})}),(0,c.jsxs)("div",{className:"wc-block-components-express-payment__content",children:[(0,c.jsx)(zt.StoreNoticesContainer,{context:me.EXPRESS_PAYMENTS}),(0,c.jsx)(rc,{})]})]})}),(0,c.jsx)("div",{className:"wc-block-components-express-payment-continue-rule wc-block-components-express-payment-continue-rule--checkout",children:(0,v.__)("Or continue below","woocommerce")})]})},nc=({className:e})=>{const{cartNeedsPayment:t}=Te();return t?(0,c.jsx)("div",{className:e,children:(0,c.jsx)(cc,{})}):null};o(6715);const ic=JSON.parse('{"DD":"Express Checkout","XV":3}');(0,a.registerBlockType)("woocommerce/checkout-express-payment-block",{apiVersion:ic.XV,title:ic.DD,icon:{src:(0,c.jsx)(i.A,{style:{fill:"none"},icon:Xr,className:"wc-block-editor-components-block-icon"})},edit:({attributes:e,setAttributes:t})=>{const{paymentMethods:o,isInitialized:r}=Yr(),n=Object.keys(o).length>0,i=(0,l.useBlockProps)({className:(0,s.A)({"wp-block-woocommerce-checkout-express-payment-block--has-express-payment-methods":n},e?.className),attributes:e});if(!r||!n)return null;const{buttonHeight:a,buttonBorderRadius:d,showButtonStyles:p}=e;return(0,c.jsxs)("div",{...i,children:[(0,c.jsx)(tc,{attributes:e,setAttributes:t}),(0,c.jsx)(sc.Provider,{value:{showButtonStyles:p,buttonHeight:a,buttonBorderRadius:d},children:(0,c.jsx)(nc,{})})]})},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save()})});var ac=o(4970),lc=o(8415);const dc=({minRate:e,maxRate:t,multiple:o=!1})=>{if(void 0===e||void 0===t)return null;const s=(0,x.getSetting)("displayCartPricesIncludingTax",!1)?parseInt(e.price,10)+parseInt(e.taxes,10):parseInt(e.price,10),r=(0,x.getSetting)("displayCartPricesIncludingTax",!1)?parseInt(t.price,10)+parseInt(t.taxes,10):parseInt(t.price,10),n=0===s?(0,c.jsx)("em",{children:(0,v.__)("free","woocommerce")}):(0,c.jsx)(zt.FormattedMonetaryAmount,{currency:(0,bs.getCurrencyFromPriceResponse)(e),value:s});return(0,c.jsx)("span",{className:"wc-block-checkout__shipping-method-option-price",children:s!==r||o?(0,d.createInterpolateElement)(0===s&&0===r?"<price />":(0,v.__)("from <price />","woocommerce"),{price:n}):n})};function pc(e){return e?{min:e.reduce(((e,t)=>Oe(t.method_id)?e:void 0===e||parseInt(t.price,10)<parseInt(e.price,10)?t:e),void 0),max:e.reduce(((e,t)=>Oe(t.method_id)?e:void 0===e||parseInt(t.price,10)>parseInt(e.price,10)?t:e),void 0)}:{min:void 0,max:void 0}}function mc(e){return e?{min:e.reduce(((e,t)=>Oe(t.method_id)&&(void 0===e||t.price<e.price)?t:e),void 0),max:e.reduce(((e,t)=>Oe(t.method_id)&&(void 0===e||t.price>e.price)?t:e),void 0)}:{min:void 0,max:void 0}}o(6336);const uc=(0,v.__)("Pickup","woocommerce"),hc=(0,v.__)("Ship","woocommerce"),gc=({checked:e,rate:t,showPrice:o,showIcon:r,toggleText:n,setAttributes:a,onClick:d})=>(0,c.jsxs)(mo.$,{render:(0,c.jsx)("div",{}),className:(0,s.A)("wc-block-checkout__shipping-method-option",{"wc-block-checkout__shipping-method-option--selected":"pickup"===e}),onClick:d,children:[!0===r&&(0,c.jsx)(i.A,{icon:lc.A,size:28,className:"wc-block-checkout__shipping-method-option-icon"}),(0,c.jsx)(l.RichText,{value:n,placeholder:uc,tagName:"span",className:"wc-block-checkout__shipping-method-option-title",onChange:e=>a({localPickupText:e}),__unstableDisableFormats:!0,preserveWhiteSpace:!0}),!0===o&&(0,c.jsx)(dc,{minRate:t.min,maxRate:t.max})]}),_c=({checked:e,rate:t,showPrice:o,showIcon:r,toggleText:n,setAttributes:a,onClick:d})=>{const p=void 0===t.min?(0,c.jsx)("span",{className:"wc-block-checkout__shipping-method-option-price",children:(0,v.__)("calculated with an address","woocommerce")}):(0,c.jsx)(dc,{minRate:t.min,maxRate:t.max});return(0,c.jsxs)(mo.$,{render:(0,c.jsx)("div",{}),className:(0,s.A)("wc-block-checkout__shipping-method-option",{"wc-block-checkout__shipping-method-option--selected":"shipping"===e}),onClick:d,children:[!0===r&&(0,c.jsx)(i.A,{icon:ac.A,size:28,className:"wc-block-checkout__shipping-method-option-icon"}),(0,c.jsx)(l.RichText,{value:n,placeholder:hc,tagName:"span",className:"wc-block-checkout__shipping-method-option-title",onChange:e=>a({shippingText:e}),__unstableDisableFormats:!0,preserveWhiteSpace:!0}),!0===o&&p]})},kc={...Mo({defaultTitle:(0,v.__)("Delivery","woocommerce"),defaultDescription:(0,v.__)("Select how you would like to receive your order.","woocommerce")}),className:{type:"string",default:""},showIcon:{type:"boolean",default:!0},showPrice:{type:"boolean",default:!1},localPickupText:{type:"string",default:uc},shippingText:{type:"string",default:hc},lock:{type:"object",default:{move:!0,remove:!0}}},bc=JSON.parse('{"DD":"Delivery","XV":3}');(0,a.registerBlockType)("woocommerce/checkout-shipping-method-block",{apiVersion:bc.XV,title:bc.DD,icon:{src:(0,c.jsx)(i.A,{icon:ac.A,className:"wc-block-editor-components-block-icon"})},attributes:kc,edit:({attributes:e,setAttributes:t})=>{(0,d.useEffect)((()=>{const o=(0,x.getSetting)("localPickupText",e.localPickupText);t({localPickupText:o})}),[t]);const{setPrefersCollection:o}=(0,_.useDispatch)(X.checkoutStore),{prefersCollection:r}=(0,_.useSelect)((e=>({prefersCollection:e(X.checkoutStore).prefersCollection()}))),{showPrice:n,showIcon:i,className:a,localPickupText:p,shippingText:m}=e,{shippingRates:u,needsShipping:h,hasCalculatedShipping:g,isCollectable:k}=We();if(!(h&&g&&u&&k&&A))return null;const b=e=>{o("pickup"===e)};return(0,c.jsxs)(Xt,{attributes:e,setAttributes:t,className:(0,s.A)("wc-block-checkout__shipping-method",a),children:[(0,c.jsxs)(l.InspectorControls,{children:[(0,c.jsxs)(Lt.PanelBody,{title:(0,v.__)("Appearance","woocommerce"),children:[(0,c.jsx)("p",{className:"wc-block-checkout__controls-text",children:(0,v.__)("Choose how this block is displayed to your customers.","woocommerce")}),(0,c.jsx)(Lt.ToggleControl,{label:(0,v.__)("Show icon","woocommerce"),checked:i,onChange:()=>t({showIcon:!i})}),(0,c.jsx)(Lt.ToggleControl,{label:(0,v.__)("Show costs","woocommerce"),checked:n,onChange:()=>t({showPrice:!n})})]}),(0,c.jsxs)(Lt.PanelBody,{title:(0,v.__)("Shipping Methods","woocommerce"),children:[(0,c.jsx)("p",{className:"wc-block-checkout__controls-text",children:(0,v.__)("Methods can be made managed in your store settings.","woocommerce")}),(0,c.jsx)(Qs,{href:`${x.ADMIN_URL}admin.php?page=wc-settings&tab=shipping`,title:(0,v.__)("Shipping","woocommerce"),description:(0,v.__)("Manage your shipping zones, methods, and rates.","woocommerce")},"shipping_methods"),(0,c.jsx)(Qs,{href:`${x.ADMIN_URL}admin.php?page=wc-settings&tab=shipping&section=pickup_location`,title:(0,v.__)("Pickup","woocommerce"),description:(0,v.__)("Allow customers to choose a local pickup location during checkout.","woocommerce")},"pickup_location")]})]}),(0,c.jsxs)("div",{id:"shipping-method",className:"wc-block-checkout__shipping-method-container",role:"radiogroup",children:[(0,c.jsx)(_c,{checked:r?"pickup":"shipping",rate:pc(u[0]?.shipping_rates),onClick:()=>{b("shipping")},showPrice:n,showIcon:i,setAttributes:t,toggleText:m}),(0,c.jsx)(gc,{checked:r?"pickup":"shipping",rate:mc(u[0]?.shipping_rates),showPrice:n,onClick:()=>{b("pickup")},showIcon:i,setAttributes:t,toggleText:p})]}),(0,c.jsx)(Yt,{block:Pt.innerBlockAreas.SHIPPING_METHOD})]})},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save(),children:(0,c.jsx)(Gt,{})})});const wc=e=>{const t=(0,x.getSetting)("displayCartPricesIncludingTax",!1)?parseInt(e.price,10)+parseInt(e.taxes,10):parseInt(e.price,10);let o=(0,c.jsxs)(c.Fragment,{children:[Number.isFinite(t)&&(0,c.jsx)(zt.FormattedMonetaryAmount,{currency:(0,bs.getCurrencyFromPriceResponse)(e),value:t}),(0,c.jsxs)("span",{className:"wc-block-components-shipping-rates-control__package__delivery_time",children:[Number.isFinite(t)&&e.delivery_time?" â ":null,(0,_e.decodeEntities)(e.delivery_time)]})]});return 0===t&&(o=(0,c.jsxs)("span",{className:"wc-block-components-shipping-rates-control__package__description--free",children:[(0,v.__)("Free","woocommerce"),(0,c.jsx)("span",{className:"wc-block-components-shipping-rates-control__package__delivery_time",children:e.delivery_time&&" â "+(0,_e.decodeEntities)(e.delivery_time)})]})),{label:(0,_e.decodeEntities)(e.name),value:e.rate_id,description:o}},yc=({className:e="",noResultsMessage:t,onSelectRate:o,rates:s,renderOption:r=wc,selectedRate:n,disabled:i=!1,highlightChecked:a=!1})=>{const l=n?.rate_id,[p,m]=(0,d.useState)(null!=l?l:s[0]?.rate_id);return(0,d.useEffect)((()=>{p&&o(p)}),[]),(0,d.useEffect)((()=>{l&&l!==p&&m(l)}),[l]),0===s.length?t:(0,c.jsx)(zt.RadioControl,{className:e,onChange:e=>{m(e),o(e)},highlightChecked:a,disabled:i,selected:null!=p?p:"",options:s.map(r),descriptionStackingDirection:"column"})},xc=({packageData:e})=>(0,c.jsx)("ul",{className:"wc-block-components-shipping-rates-control__package-items",children:Object.values(e.items).map((e=>{const t=(0,_e.decodeEntities)(e.name),o=e.quantity;return(0,c.jsx)("li",{className:"wc-block-components-shipping-rates-control__package-item",children:(0,c.jsx)(zt.Label,{label:o>1?`${t} Ã ${o}`:`${t}`,allowHTML:!0,screenReaderLabel:(0,v.sprintf)(/* translators: %1$s name of the product (ie: Sunglasses), %2$d number of units in the current cart package */ /* translators: %1$s name of the product (ie: Sunglasses), %2$d number of units in the current cart package */
(0,v._n)("%1$s (%2$d unit)","%1$s (%2$d units)",o,"woocommerce"),t,o)})},e.key)}))});o(2793);const vc=({packageId:e,className:t="",noResultsMessage:o,renderOption:r,packageData:n,collapsible:i,showItems:a,highlightChecked:l=!1})=>{const{selectShippingRate:p,isSelectingRate:m,shippingRates:u}=We(),h=u?.length||1,[g,_]=(0,d.useState)(0),k=h>1||g>1;(0,d.useEffect)((()=>{const e=()=>{_(document.querySelectorAll(".wc-block-components-shipping-rates-control__package").length)};e();const t=new MutationObserver(e);return t.observe(document.body,{childList:!0,subtree:!0}),()=>{t.disconnect()}}),[]);const b=null!=a?a:k,w=null!=i?i:k,{selectedOptionNumber:y,selectedOption:x}=(0,d.useMemo)((()=>({selectedOptionNumber:n?.shipping_rates?.findIndex((e=>e?.selected)),selectedOption:n?.shipping_rates?.find((e=>e?.selected))})),[n?.shipping_rates]),v=w||b?(0,c.jsxs)("div",{className:"wc-block-components-shipping-rates-control__package-header",children:[(0,c.jsx)("div",{className:"wc-block-components-shipping-rates-control__package-title",dangerouslySetInnerHTML:{__html:Js(n.name)}}),w&&(0,c.jsx)("div",{className:"wc-block-components-totals-shipping__via",children:(0,_e.decodeEntities)(x?.name)}),b&&(0,c.jsx)(xc,{packageData:n})]}):null,f=(0,d.useCallback)((t=>{p(t,e)}),[e,p]),S={className:t,noResultsMessage:o,rates:n.shipping_rates,onSelectRate:f,selectedRate:n.shipping_rates.find((e=>e.selected)),renderOption:r,disabled:m,highlightChecked:l};return w?(0,c.jsx)(zt.Panel,{className:(0,s.A)("wc-block-components-shipping-rates-control__package",t,{"wc-block-components-shipping-rates-control__package--disabled":m}),initialOpen:!1,title:v,children:(0,c.jsx)(yc,{...S})}):(0,c.jsxs)("div",{className:(0,s.A)("wc-block-components-shipping-rates-control__package",t,{"wc-block-components-shipping-rates-control__package--disabled":m,"wc-block-components-shipping-rates-control__package--first-selected":!m&&0===y,"wc-block-components-shipping-rates-control__package--last-selected":!m&&y===n?.shipping_rates?.length-1}),children:[v,(0,c.jsx)(yc,{...S})]})},fc=({packages:e,showItems:t,collapsible:o,noResultsMessage:s,renderOption:r,context:n=""})=>e.length?(0,c.jsx)(c.Fragment,{children:e.map((({package_id:e,...i})=>(0,c.jsx)(vc,{highlightChecked:"woocommerce/cart"!==n,packageId:e,packageData:i,collapsible:o,showItems:t,noResultsMessage:s,renderOption:r},e)))}):null,Sc=({shippingRates:e,isLoadingRates:t,className:o,collapsible:s,showItems:r,noResultsMessage:n=(0,c.jsx)(c.Fragment,{}),renderOption:i,context:a})=>{const l=(e=>e.reduce((function(e,t){return e+t.shipping_rates.length}),0))(e),p=Me(e),m=Qe(l),u=Qe(p);(0,d.useEffect)((()=>{var e,o;t||m===l&&u===p||(o=l,1===(e=p)?(0,pr.speak)((0,v.sprintf)(/* translators: %d number of shipping options found. */ /* translators: %d number of shipping options found. */
(0,v._n)("%d shipping option was found.","%d shipping options were found.",o,"woocommerce"),o)):(0,pr.speak)((0,v.sprintf)(/* translators: %d number of shipping packages packages. */ /* translators: %d number of shipping packages packages. */
(0,v._n)("Shipping option searched for %d package.","Shipping options searched for %d packages.",e,"woocommerce"),e)+" "+(0,v.sprintf)(/* translators: %d number of shipping options available. */ /* translators: %d number of shipping options available. */
(0,v._n)("%d shipping option was found","%d shipping options were found",o,"woocommerce"),o)))}),[t,l,p,m,u]);const{extensions:h,receiveCart:g,..._}=Te(),k={className:o,collapsible:s,showItems:r,noResultsMessage:n,renderOption:i,extensions:h,cart:_,components:{ShippingRatesControlPackage:vc},context:a},{isEditor:w}=b(),{hasSelectedLocalPickup:y,selectedRates:x}=We(),f=(0,pe.isObject)(x)?Object.values(x):[],S=f.every((e=>e===f[0]));return(0,c.jsxs)(Ns,{isLoading:t,screenReaderLabel:(0,v.__)("Loading shipping ratesâ¦","woocommerce"),showSpinner:!0,children:[y&&"woocommerce/cart"===a&&e.length>1&&!S&&!w&&(0,c.jsx)(mr,{className:"wc-block-components-notice",isDismissible:!1,status:"warning",children:(0,v.__)("Multiple shipments must have the same pickup location","woocommerce")}),(0,c.jsx)(Pt.ExperimentalOrderShippingPackages.Slot,{...k}),(0,c.jsx)(Pt.ExperimentalOrderShippingPackages,{children:(0,c.jsx)(fc,{packages:e,noResultsMessage:n,renderOption:i})})]})},jc=e=>{const t=(0,x.getSetting)("displayCartPricesIncludingTax",!1)?parseInt(e.price,10)+parseInt(e.taxes,10):parseInt(e.price,10),o=0===t?(0,c.jsx)("span",{className:"wc-block-checkout__shipping-option--free",children:(0,v.__)("Free","woocommerce")}):(0,c.jsx)(zt.FormattedMonetaryAmount,{currency:(0,bs.getCurrencyFromPriceResponse)(e),value:t});return{label:(0,_e.decodeEntities)(e.name),value:e.rate_id,description:(0,_e.decodeEntities)(e.delivery_time),secondaryLabel:o,secondaryDescription:(0,_e.decodeEntities)(e.description)}},Cc=()=>(0,c.jsx)("p",{role:"status","aria-live":"polite",className:"wc-block-components-shipping-rates-control__no-shipping-address-message",children:(0,v.__)("Enter a shipping address to view shipping options.","woocommerce")}),Ec=({noShippingPlaceholder:e=null})=>{const{isEditor:t}=b(),{shippingRates:o,needsShipping:s,isLoadingRates:r,hasCalculatedShipping:n,isCollectable:i}=We(),{shippingAddress:a}=ut(),l=(0,d.useMemo)((()=>i?o.map((e=>({...e,shipping_rates:e.shipping_rates.filter((e=>!Oe(e.method_id)))}))):o),[o,i]);if(!s)return null;const p=Me(o);if(!n&&!p)return(0,c.jsx)(Cc,{});const m=ve(a);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(zt.StoreNoticesContainer,{context:me.SHIPPING_METHODS}),t&&!p?e:(0,c.jsx)(Sc,{noResultsMessage:(0,c.jsx)(c.Fragment,{children:m?(0,c.jsx)(mr,{isDismissible:!1,className:"wc-block-components-shipping-rates-control__no-results-notice",status:"warning",children:(0,v.__)("No shipping options are available for this address. Please verify the address is correct or try a different address.","woocommerce")}):(0,c.jsx)(Cc,{})}),renderOption:jc,collapsible:!1,shippingRates:l,isLoadingRates:r,context:"woocommerce/checkout"})]})};o(1393);const Pc={...Mo({defaultTitle:(0,v.__)("Shipping options","woocommerce"),defaultDescription:""}),className:{type:"string",default:""},lock:{type:"object",default:{move:!0,remove:!0}}},Nc=JSON.parse('{"DD":"Shipping Options","XV":3}');o(7693),(0,a.registerBlockType)("woocommerce/checkout-shipping-methods-block",{apiVersion:Nc.XV,title:Nc.DD,icon:{src:(0,c.jsx)(i.A,{icon:ac.A,className:"wc-block-editor-components-block-icon"})},attributes:Pc,edit:({attributes:e,setAttributes:t})=>{const o=(0,x.getSetting)("globalShippingMethods"),r=(0,x.getSetting)("activeShippingZones"),{showShippingMethods:n}=ht();return n?(0,c.jsxs)(Xt,{attributes:e,setAttributes:t,className:(0,s.A)("wc-block-checkout__shipping-option",e?.className),children:[(0,c.jsxs)(l.InspectorControls,{children:[(0,c.jsxs)(Lt.PanelBody,{title:(0,v.__)("Shipping Calculations","woocommerce"),children:[(0,c.jsx)("p",{className:"wc-block-checkout__controls-text",children:(0,v.__)("Options that control shipping can be managed in your store settings.","woocommerce")}),(0,c.jsx)(Lt.ExternalLink,{href:`${x.ADMIN_URL}admin.php?page=wc-settings&tab=shipping&section=options`,children:(0,v.__)("Manage shipping options","woocommerce")})," "]}),o.length>0&&(0,c.jsxs)(Lt.PanelBody,{title:(0,v.__)("Methods","woocommerce"),children:[(0,c.jsx)("p",{className:"wc-block-checkout__controls-text",children:(0,v.__)("The following shipping integrations are active on your store.","woocommerce")}),o.map((e=>(0,c.jsx)(Qs,{href:`${x.ADMIN_URL}admin.php?page=wc-settings&tab=shipping&section=${e.id}`,title:e.title,description:e.description},e.id))),(0,c.jsx)(Lt.ExternalLink,{href:`${x.ADMIN_URL}admin.php?page=wc-settings&tab=shipping`,children:(0,v.__)("Manage shipping methods","woocommerce")})]}),r.length&&(0,c.jsxs)(Lt.PanelBody,{title:(0,v.__)("Shipping Zones","woocommerce"),children:[(0,c.jsx)("p",{className:"wc-block-checkout__controls-text",children:(0,v.__)("Shipping Zones can be made managed in your store settings.","woocommerce")}),r.map((e=>(0,c.jsx)(Qs,{href:`${x.ADMIN_URL}admin.php?page=wc-settings&tab=shipping&zone_id=${e.id}`,title:e.title,description:e.description},e.id)))]})]}),(0,c.jsx)(eo,{children:(0,c.jsx)(Ec,{noShippingPlaceholder:(0,c.jsx)(qr,{icon:ac.A,label:(0,v.__)("Shipping options","woocommerce"),description:(0,v.__)("Your store does not have any Shipping Options configured. Once you have added your Shipping Options they will appear here.","woocommerce"),buttonLabel:(0,v.__)("Configure Shipping Options","woocommerce"),buttonHref:`${x.ADMIN_URL}admin.php?page=wc-settings&tab=shipping`})})}),(0,c.jsx)(Yt,{block:Pt.innerBlockAreas.SHIPPING_METHODS})]}):null},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save(),children:(0,c.jsx)(Gt,{})})});const Ac=({title:e,selectedOption:t,pickupLocations:o,renderPickupLocation:s,packageCount:r,onChange:n})=>{const{shippingRates:i}=We(),a=(i?.length||1)>1||document.querySelectorAll(".wc-block-components-local-pickup-select .wc-block-components-radio-control").length>1;return(0,c.jsxs)("div",{className:"wc-block-components-local-pickup-select",children:[!(!a||!e)&&(0,c.jsx)("div",{children:e}),(0,c.jsx)(zt.RadioControl,{onChange:n,highlightChecked:!0,selected:t,options:o.map((e=>s(e,r)))})]})};function Ic(e){let t,o,s,r=[];for(let c=0;c<e.length;c++)t=e.substring(c),o=t.match(/^&[a-z0-9#]+;/),o?(s=o[0],r.push(s),c+=s.length-1):r.push(e[c]);return r}const Rc=(e,t,o="...")=>{const s=function(e,t){const o=(t=t||{}).limit||100,s=void 0===t.preserveTags||t.preserveTags,r=void 0!==t.wordBreak&&t.wordBreak,c=t.suffix||"...",n=t.moreLink||"",i=t.moreText||"Â»",a=t.preserveWhiteSpace||!1,l=e.replace(/</g,"\n<").replace(/>/g,">\n").replace(/\n\n/g,"\n").replace(/^\n/g,"").replace(/\n$/g,"").split("\n");let d,p,m,u,h,g,_=0,k=[],b=!1;for(let e=0;e<l.length;e++){if(d=l[e],u=a?d:d.replace(/[ ]+/g," "),!d.length)continue;const t=Ic(u);if("<"!==d[0])if(_>=o)d="";else if(_+t.length>=o){if(p=o-_," "===t[p-1])for(;p&&(p-=1," "===t[p-1]););else m=t.slice(p).indexOf(" "),r||(-1!==m?p+=m:p=d.length);if(d=t.slice(0,p).join("")+c,n){const e=document.createElement("a");e.href=n,e.style.display="inline",e.textContent=i,d+=e.outerHTML}_=o,b=!0}else _+=t.length;else if(s){if(_>=o)if(h=d.match(/[a-zA-Z]+/),g=h?h[0]:"",g)if("</"!==d.substring(0,2))k.push(g),d="";else{for(;k[k.length-1]!==g&&k.length;)k.pop();k.length&&(d=""),k.pop()}else d=""}else d="";l[e]=d}return{html:l.join("\n").replace(/\n/g,""),more:b}}(e,{suffix:o,limit:t});return s.html},Tc=(e,t,o)=>(t<=o?e.start=e.middle+1:e.end=e.middle-1,e),Mc=(e,t,o,s)=>{const r=((e,t,o)=>{let s={start:0,middle:0,end:e.length};for(;s.start<=s.end;)s.middle=Math.floor((s.start+s.end)/2),t.innerHTML=Rc(e,s.middle),s=Tc(s,t.clientHeight,o);return s.middle})(e,t,o);return Rc(e,r-s.length,s)},Bc={className:"read-more-content",ellipsis:"&hellip;",lessText:(0,v.__)("Read less","woocommerce"),maxLines:3,moreText:(0,v.__)("Read more","woocommerce")};class Dc extends d.Component{static defaultProps=Bc;constructor(e){super(e),this.state={isExpanded:!1,clampEnabled:null,content:e.children,summary:"."},this.reviewContent=(0,d.createRef)(),this.reviewSummary=(0,d.createRef)(),this.getButton=this.getButton.bind(this),this.onClick=this.onClick.bind(this)}componentDidMount(){this.setSummary()}componentDidUpdate(e){e.maxLines===this.props.maxLines&&e.children===this.props.children||this.setState({clampEnabled:null,summary:"."},this.setSummary)}setSummary(){if(this.props.children){const{maxLines:e,ellipsis:t}=this.props;if(!this.reviewSummary.current||!this.reviewContent.current)return;const o=(this.reviewSummary.current.clientHeight+1)*e+1,s=this.reviewContent.current.clientHeight+1>o;this.setState({clampEnabled:s}),s&&this.setState({summary:Mc(this.reviewContent.current.innerHTML,this.reviewSummary.current,o,t)})}}getButton(){const{isExpanded:e}=this.state,{className:t,lessText:o,moreText:s}=this.props,r=e?o:s;if(r)return(0,c.jsx)("a",{href:"#more",className:t+"__read_more",onClick:this.onClick,"aria-expanded":!e,role:"button",children:r})}onClick(e){e.preventDefault();const{isExpanded:t}=this.state;this.setState({isExpanded:!t})}render(){const{className:e}=this.props,{content:t,summary:o,clampEnabled:s,isExpanded:r}=this.state;return t?!1===s?(0,c.jsx)("div",{className:e,children:(0,c.jsx)("div",{ref:this.reviewContent,children:t})}):(0,c.jsxs)("div",{className:e,children:[(!r||null===s)&&(0,c.jsx)("div",{ref:this.reviewSummary,"aria-hidden":r,dangerouslySetInnerHTML:{__html:o}}),(r||null===s)&&(0,c.jsx)("div",{ref:this.reviewContent,"aria-hidden":!r,children:t}),this.getButton()]}):null}}const Oc=Dc,Fc=(e,t)=>{const o=(0,x.getSetting)("displayCartPricesIncludingTax",!1)?parseInt(e.price,10)+parseInt(e.taxes,10):parseInt(e.price,10),s=(e=>{if(e?.meta_data){const t=e.meta_data.find((e=>"pickup_location"===e.key));return t?t.value:""}return""})(e),r=(e=>{if(e?.meta_data){const t=e.meta_data.find((e=>"pickup_address"===e.key));return t?t.value:""}return""})(e),n=(e=>{if(e?.meta_data){const t=e.meta_data.find((e=>"pickup_details"===e.key));return t?t.value:""}return""})(e),a=e?.selected;let l=(0,c.jsx)("em",{children:(0,v.__)("free","woocommerce")});return o>0&&(l=1===t?(0,c.jsx)(zt.FormattedMonetaryAmount,{currency:(0,bs.getCurrencyFromPriceResponse)(e),value:o}):(0,d.createInterpolateElement)(/* translators: <price/> is the price of the package, <packageCount/> is the number of packages. These must appear in the translated string. */ /* translators: <price/> is the price of the package, <packageCount/> is the number of packages. These must appear in the translated string. */
(0,v._n)("<price/> x <packageCount/> package","<price/> x <packageCount/> packages",t,"woocommerce"),{price:(0,c.jsx)(zt.FormattedMonetaryAmount,{currency:(0,bs.getCurrencyFromPriceResponse)(e),value:o}),packageCount:(0,c.jsx)(c.Fragment,{children:t})})),{value:e.rate_id,label:s?(0,_e.decodeEntities)(s):(0,_e.decodeEntities)(e.name),secondaryLabel:l,description:r?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(i.A,{icon:qt.A,className:"wc-block-editor-components-block-icon"}),(0,_e.decodeEntities)(r)]}):void 0,secondaryDescription:a&&n?(0,c.jsx)(Oc,{maxLines:2,children:(0,_e.decodeEntities)(n)}):void 0}},Lc=()=>{const{shippingRates:e,selectShippingRate:t}=We(),o=(0,d.useMemo)((()=>(e[0]?.shipping_rates||[]).filter(De)),[e]),[s,r]=(0,d.useState)((()=>{var e;return null!==(e=o.find((e=>e.selected))?.rate_id)&&void 0!==e?e:o[0]?.rate_id})),n=(0,d.useCallback)((e=>{r(e),t(e)}),[r,t]);(0,d.useEffect)((()=>{s&&t(s)}),[]),(0,d.useEffect)((()=>{const e=o.find((e=>e.selected)),t=e?.rate_id;t&&t!==s&&r(t)}),[o]);const{extensions:i,receiveCart:a,...l}=Te(),p={extensions:i,cart:l,components:{ShippingRatesControlPackage:vc,LocalPickupSelect:Ac},renderPickupLocation:Fc};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Pt.ExperimentalOrderLocalPickupPackages.Slot,{...p}),(0,c.jsx)(Pt.ExperimentalOrderLocalPickupPackages,{children:(0,c.jsx)(Ac,{title:e[0].name,selectedOption:null!=s?s:"",renderPickupLocation:Fc,pickupLocations:o,packageCount:Me(e),onChange:e=>n(e)})})]})},Vc={...Mo({defaultTitle:(0,v.__)("Pickup locations","woocommerce"),defaultDescription:""}),className:{type:"string",default:""},lock:{type:"object",default:{move:!0,remove:!0}}},Uc=JSON.parse('{"DD":"Pickup Method","XV":3}');o(5991),(0,a.registerBlockType)("woocommerce/checkout-pickup-options-block",{apiVersion:Uc.XV,title:Uc.DD,icon:{src:(0,c.jsx)(i.A,{icon:lc.A,className:"wc-block-editor-components-block-icon"})},attributes:Vc,edit:({attributes:e,setAttributes:t})=>{const{prefersCollection:o}=(0,_.useSelect)((e=>({prefersCollection:e(X.checkoutStore).prefersCollection()}))),{className:r}=e;return o&&A?(0,c.jsxs)(Xt,{attributes:e,setAttributes:t,className:(0,s.A)("wc-block-checkout__shipping-method",r),children:[(0,c.jsx)(Lt.Disabled,{children:(0,c.jsx)(Lc,{})}),(0,c.jsx)(Yt,{block:Pt.innerBlockAreas.PICKUP_LOCATION})]}):null},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save(),children:(0,c.jsx)(Gt,{})})});const $c=({className:e=""})=>{const{cartTotals:t}=Te(),o=(0,bs.getCurrencyFromPriceResponse)(t);return(0,c.jsx)(zt.TotalsWrapper,{className:e,children:(0,c.jsx)(zt.Subtotal,{currency:o,values:t})})},Hc=JSON.parse('{"DD":"Subtotal","XV":3}');(0,a.registerBlockType)("woocommerce/checkout-order-summary-subtotal-block",{apiVersion:Hc.XV,title:Hc.DD,icon:{src:(0,c.jsx)(i.A,{icon:Ps,className:"wc-block-editor-components-block-icon"})},edit:({attributes:e})=>{const{className:t}=e,o=(0,l.useBlockProps)();return(0,c.jsx)("div",{...o,children:(0,c.jsx)($c,{className:t})})},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save()})});const qc=({className:e=""})=>{const{cartFees:t,cartTotals:o}=Te(),s=(0,bs.getCurrencyFromPriceResponse)(o);return(0,c.jsx)(zt.TotalsWrapper,{className:e,children:(0,c.jsx)(zt.TotalsFees,{currency:s,cartFees:t})})};(0,a.registerBlockType)("woocommerce/checkout-order-summary-fee-block",{apiVersion:3,title:"Fees",icon:{src:(0,c.jsx)(i.A,{icon:Ps,className:"wc-block-editor-components-block-icon"})},edit:({attributes:e})=>{const{className:t}=e,o=(0,l.useBlockProps)();return(0,c.jsx)("div",{...o,children:(0,c.jsx)(qc,{className:t})})},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save()})});const zc=()=>{const{extensions:e,receiveCart:t,...o}=Te(),s={extensions:e,cart:o,context:"woocommerce/checkout"};return(0,c.jsx)(Pt.ExperimentalDiscountsMeta.Slot,{...s})},Wc=({className:e=""})=>{const{cartTotals:t,cartCoupons:o}=Te(),{removeCoupon:s,isRemovingCoupon:r}=fr("wc/checkout"),n=(0,bs.getCurrencyFromPriceResponse)(t);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(zt.TotalsWrapper,{className:e,children:(0,c.jsx)(Rs,{cartCoupons:o,currency:n,isRemovingCoupon:r,removeCoupon:s,values:t})}),(0,c.jsx)(zc,{})]})},Xc=JSON.parse('{"DD":"Discount","XV":3}');(0,a.registerBlockType)("woocommerce/checkout-order-summary-discount-block",{apiVersion:Xc.XV,title:Xc.DD,icon:{src:(0,c.jsx)(i.A,{icon:Ps,className:"wc-block-editor-components-block-icon"})},edit:({attributes:e})=>{const{className:t}=e,o=(0,l.useBlockProps)();return(0,c.jsx)("div",{...o,children:(0,c.jsx)(Wc,{className:t})})},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save()})});const Yc=({className:e=""})=>{const{cartNeedsShipping:t,shippingRates:o,shippingAddress:s}=Te(),r=(0,_.useSelect)((e=>e(X.checkoutStore).prefersCollection()));if(!t)return null;const n=(e=>!!Fe(e)&&e.every((e=>e.shipping_rates.every((e=>!e.selected||De(e))))))(((e,t)=>e.map((e=>({...e,shipping_rates:e.shipping_rates.filter((e=>{const o=Oe(e.method_id);return t?o:!o}))}))))(o,null!=r&&r)),i=ve(s);return(0,c.jsx)(Pt.TotalsWrapper,{className:e,children:(0,c.jsx)(Ds,{label:n?(0,v.__)("Pickup","woocommerce"):(0,v.__)("Delivery","woocommerce"),placeholder:(0,c.jsx)("span",{className:"wc-block-components-shipping-placeholder__value",children:i?(0,v.__)("No available delivery option","woocommerce"):(0,v.__)("Enter address to calculate","woocommerce")})})})},Gc=JSON.parse('{"DD":"Shipping","XV":3}');(0,a.registerBlockType)("woocommerce/checkout-order-summary-shipping-block",{apiVersion:Gc.XV,title:Gc.DD,icon:{src:(0,c.jsx)(i.A,{icon:Ps,className:"wc-block-editor-components-block-icon"})},edit:({attributes:e})=>{const{className:t}=e,o=(0,l.useBlockProps)();return(0,c.jsx)("div",{...o,children:(0,c.jsx)(eo,{children:(0,c.jsx)(Yc,{className:t})})})},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save()})});var Jc=o(1686);const Kc=({className:e=""})=>{const t=(0,x.getSetting)("couponsEnabled",!0),{applyCoupon:o,isApplyingCoupon:s}=fr("wc/checkout");return t?(0,c.jsx)(zt.TotalsWrapper,{className:e,children:(0,c.jsx)(As,{onSubmit:o,isLoading:s,instanceId:"coupon"})}):null},Zc=JSON.parse('{"DD":"Coupon Form","XV":3}');(0,a.registerBlockType)("woocommerce/checkout-order-summary-coupon-form-block",{apiVersion:Zc.XV,title:Zc.DD,icon:{src:(0,c.jsx)(i.A,{icon:Jc.A,className:"wc-block-editor-components-block-icon"})},edit:({attributes:e})=>{const{className:t}=e,o=(0,l.useBlockProps)();return(0,c.jsx)("div",{...o,children:(0,c.jsx)(eo,{children:(0,c.jsx)(Kc,{className:t})})})},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save()})});const Qc=({className:e,showRateAfterTaxName:t})=>{const{cartTotals:o}=Te();if((0,x.getSetting)("displayCartPricesIncludingTax",!1)||parseInt(o.total_tax,10)<=0)return null;const s=(0,bs.getCurrencyFromPriceResponse)(o);return(0,c.jsx)(zt.TotalsWrapper,{className:e,children:(0,c.jsx)(zt.TotalsTaxes,{showRateAfterTaxName:t,currency:s,values:o})})},en={showRateAfterTaxName:{type:"boolean",default:(0,x.getSetting)("displayCartPricesIncludingTax",!1)},lock:{type:"object",default:{remove:!0,move:!0}}},tn=JSON.parse('{"DD":"Taxes","XV":3}');(0,a.registerBlockType)("woocommerce/checkout-order-summary-taxes-block",{apiVersion:tn.XV,title:tn.DD,icon:{src:(0,c.jsx)(i.A,{icon:Ps,className:"wc-block-editor-components-block-icon"})},attributes:en,edit:({attributes:e,setAttributes:t})=>{const{className:o,showRateAfterTaxName:s}=e,r=(0,l.useBlockProps)(),n=(0,x.getSetting)("taxesEnabled"),i=(0,x.getSetting)("displayItemizedTaxes",!1),a=(0,x.getSetting)("displayCartPricesIncludingTax",!1);return(0,c.jsxs)("div",{...r,children:[(0,c.jsx)(l.InspectorControls,{children:n&&i&&!a&&(0,c.jsx)(Lt.PanelBody,{title:(0,v.__)("Taxes","woocommerce"),children:(0,c.jsx)(Lt.ToggleControl,{label:(0,v.__)("Show rate after tax name","woocommerce"),help:(0,v.__)("Show the percentage rate alongside each tax line in the summary.","woocommerce"),checked:s,onChange:()=>t({showRateAfterTaxName:!s})})})}),(0,c.jsx)(Qc,{className:o,showRateAfterTaxName:s})]})},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save()})});const on=(0,c.jsxs)(r.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[(0,c.jsx)("path",{fill:"none",d:"M0 0h24v24H0V0z"}),(0,c.jsx)("path",{d:"M15.55 13c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.37-.66-.11-1.48-.87-1.48H5.21l-.94-2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2h7.45zM6.16 6h12.15l-2.76 5H8.53L6.16 6zM7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"})]});o(8501);const sn=({currency:e,maxPrice:t,minPrice:o,priceClassName:r,priceStyle:n={}})=>(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:"screen-reader-text",children:(0,v.sprintf)(/* translators: %1$s min price, %2$s max price */ /* translators: %1$s min price, %2$s max price */
(0,v.__)("Price between %1$s and %2$s","woocommerce"),(0,bs.formatPrice)(o),(0,bs.formatPrice)(t))}),(0,c.jsxs)("span",{"aria-hidden":!0,children:[(0,c.jsx)(zt.FormattedMonetaryAmount,{className:(0,s.A)("wc-block-components-product-price__value",r),currency:e,value:o,style:n}),"Â âÂ ",(0,c.jsx)(zt.FormattedMonetaryAmount,{className:(0,s.A)("wc-block-components-product-price__value",r),currency:e,value:t,style:n})]})]}),rn=({currency:e,regularPriceClassName:t,regularPriceStyle:o,regularPrice:r,priceClassName:n,priceStyle:i,price:a})=>(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:"screen-reader-text",children:(0,v.__)("Previous price:","woocommerce")}),(0,c.jsx)(zt.FormattedMonetaryAmount,{currency:e,renderText:e=>(0,c.jsx)("del",{className:(0,s.A)("wc-block-components-product-price__regular",t),style:o,children:e}),value:r}),(0,c.jsx)("span",{className:"screen-reader-text",children:(0,v.__)("Discounted price:","woocommerce")}),(0,c.jsx)(zt.FormattedMonetaryAmount,{currency:e,renderText:e=>(0,c.jsx)("ins",{className:(0,s.A)("wc-block-components-product-price__value","is-discounted",n),style:i,children:e}),value:a})]}),cn=({align:e,className:t,currency:o,format:r="<price/>",maxPrice:n,minPrice:i,price:a,priceClassName:l,priceStyle:p,regularPrice:m,regularPriceClassName:u,regularPriceStyle:h,style:g})=>{const _=(0,s.A)(t,"price","wc-block-components-product-price",{[`wc-block-components-product-price--align-${e}`]:e});r.includes("<price/>")||(r="<price/>",console.error("Price formats need to include the `<price/>` tag."));const k=m&&a&&a<m;let b=(0,c.jsx)("span",{className:(0,s.A)("wc-block-components-product-price__value",l)});return k?b=(0,c.jsx)(rn,{currency:o,price:a,priceClassName:l,priceStyle:p,regularPrice:m,regularPriceClassName:u,regularPriceStyle:h}):void 0!==i&&void 0!==n?b=(0,c.jsx)(sn,{currency:o,maxPrice:n,minPrice:i,priceClassName:l,priceStyle:p}):a&&(b=(0,c.jsx)(zt.FormattedMonetaryAmount,{className:(0,s.A)("wc-block-components-product-price__value",l),currency:o,value:a,style:p})),(0,c.jsx)("span",{className:_,style:g,children:(0,d.createInterpolateElement)(r,{price:b})})};o(959);const nn=({className:e="",disabled:t=!1,name:o,permalink:r="",target:n,rel:i,style:a,onClick:l,disabledTagName:d="span",...p})=>{const m=(0,s.A)("wc-block-components-product-name",e),u=d;if(t){const e=p;return(0,c.jsx)(u,{className:m,...e,dangerouslySetInnerHTML:{__html:o}})}return(0,c.jsx)("a",{className:m,href:r,target:n,...p,dangerouslySetInnerHTML:{__html:o},style:a})};var an=o(6513);o(7605);const ln=({children:e,className:t})=>(0,c.jsx)("div",{className:(0,s.A)("wc-block-components-product-badge",t),children:e}),dn=()=>(0,c.jsx)(ln,{className:"wc-block-components-product-backorder-badge",children:(0,v.__)("Available on backorder","woocommerce")}),pn=({image:e={},fallbackAlt:t=""})=>{const o=e.thumbnail?{src:e.thumbnail,alt:(0,_e.decodeEntities)(e.alt)||t||"Product Image"}:{src:x.PLACEHOLDER_IMG_SRC,alt:""};return(0,c.jsx)("img",{...o,alt:o.alt})},mn=({lowStockRemaining:e})=>e?(0,c.jsx)(ln,{className:"wc-block-components-product-low-stock-badge",children:(0,v.sprintf)(/* translators: %d stock amount (number of items in stock for product) */ /* translators: %d stock amount (number of items in stock for product) */
(0,v.__)("%d left in stock","woocommerce"),e)}):null;var un=o(7356);o(3692);const hn=({details:e=[]})=>{if(!Array.isArray(e))return null;if(0===(e=e.filter((e=>!e.hidden))).length)return null;let t="ul",o="li";return 1===e.length&&(t="div",o="div"),(0,c.jsx)(t,{className:"wc-block-components-product-details",children:e.map((e=>{const t=e?.key||e.name||"",s=e?.className||(t?`wc-block-components-product-details__${(0,un.c)(t)}`:"");return(0,c.jsxs)(o,{className:s,children:[t&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("span",{className:"wc-block-components-product-details__name",children:[(0,_e.decodeEntities)(t),":"]})," "]}),(0,c.jsx)("span",{className:"wc-block-components-product-details__value",children:(0,_e.decodeEntities)(e.display||e.value)})]},t+(e.display||e.value))}))})},gn=window.wp.wordcount,kn=["a","b","em","i","strong","p","br","ul","ol","li","h1","h2","h3","h4","h5","h6","pre","blockquote","img"],bn=["target","href","rel","name","download","src","class","alt","style"],wn=({source:e,maxLength:t=15,countType:o="words",className:s="",style:r={}})=>{const n=(0,d.useMemo)((()=>((e,t=15,o="words")=>{const s=(0,er.autop)(e);if((0,gn.count)(s,o)<=t)return s;const r=(e=>{const t=e.indexOf("</p>");return-1===t?e:e.substr(0,t+4)})(s);return(0,gn.count)(r,o)<=t?r:"words"===o?sr(r,t):rr(r,t,"characters_including_spaces"===o)})(e,t,o)),[e,t,o]);return(0,c.jsx)(d.RawHTML,{style:r,className:s,children:Js(n,{tags:kn,attr:bn})})},yn=({className:e,shortDescription:t="",fullDescription:o=""})=>{const s=t||o;return s?(0,c.jsx)(wn,{className:e,source:s,maxLength:15,countType:f.wordCountType||"words"}):null};o(8879);const xn=({shortDescription:e="",fullDescription:t="",itemData:o=[],variation:s=[]})=>(0,c.jsxs)("div",{className:"wc-block-components-product-metadata",children:[(0,c.jsx)(yn,{className:"wc-block-components-product-metadata__description",shortDescription:e,fullDescription:t}),(0,c.jsx)(hn,{details:o}),(0,c.jsx)(hn,{details:s.map((({attribute:e="",value:t})=>({key:e,value:t})))})]}),vn=({cartItem:e,disableProductDescriptions:t})=>{const{images:o,low_stock_remaining:r,show_backorder_badge:n,name:i,permalink:a,prices:l,quantity:p,short_description:m,description:u,item_data:h,variation:g,totals:_,extensions:k}=e,{receiveCart:b,...w}=Te(),y=(0,d.useMemo)((()=>({context:"summary",cartItem:e,cart:w})),[e,w]),f=(0,bs.getCurrencyFromPriceResponse)(l),S=(0,Pt.applyCheckoutFilter)({filterName:"itemName",defaultValue:i,extensions:k,arg:y}),j=(0,an.A)({amount:parseInt(l.raw_prices.regular_price,10),precision:(0,pe.isString)(l.raw_prices.precision)?parseInt(l.raw_prices.precision,10):l.raw_prices.precision}).convertPrecision(f.minorUnit).getAmount(),C=(0,an.A)({amount:parseInt(l.raw_prices.price,10),precision:(0,pe.isString)(l.raw_prices.precision)?parseInt(l.raw_prices.precision,10):l.raw_prices.precision}).convertPrecision(f.minorUnit).getAmount(),E=(0,bs.getCurrencyFromPriceResponse)(_);let P=parseInt(_.line_subtotal,10);(0,x.getSetting)("displayCartPricesIncludingTax",!1)&&(P+=parseInt(_.line_subtotal_tax,10));const N=(0,an.A)({amount:P,precision:E.minorUnit}).getAmount(),A=(0,Pt.applyCheckoutFilter)({filterName:"subtotalPriceFormat",defaultValue:"<price/>",extensions:k,arg:y,validation:Pt.productPriceValidation}),I=(0,Pt.applyCheckoutFilter)({filterName:"cartItemPrice",defaultValue:"<price/>",extensions:k,arg:y,validation:Pt.productPriceValidation}),R=(0,Pt.applyCheckoutFilter)({filterName:"cartItemClass",defaultValue:"",extensions:k,arg:y}),T=t?{itemData:h,variation:g}:{itemData:h,variation:g,shortDescription:m,fullDescription:u};return(0,c.jsxs)("div",{className:(0,s.A)("wc-block-components-order-summary-item",R),children:[(0,c.jsxs)("div",{className:"wc-block-components-order-summary-item__image",children:[(0,c.jsx)("div",{className:"wc-block-components-order-summary-item__quantity",children:(0,c.jsx)(zt.Label,{label:p.toString(),screenReaderLabel:(0,v.sprintf)(/* translators: %d number of products of the same type in the cart */ /* translators: %d number of products of the same type in the cart */
(0,v._n)("%d item","%d items",p,"woocommerce"),p)})}),(0,c.jsx)(pn,{image:o.length?o[0]:{},fallbackAlt:S})]}),(0,c.jsxs)("div",{className:"wc-block-components-order-summary-item__description",children:[(0,c.jsx)(nn,{disabled:!0,name:S,permalink:a,disabledTagName:"h3"}),(0,c.jsx)(cn,{currency:f,price:C,regularPrice:j,className:"wc-block-components-order-summary-item__individual-prices",priceClassName:"wc-block-components-order-summary-item__individual-price",regularPriceClassName:"wc-block-components-order-summary-item__regular-individual-price",format:A}),n?(0,c.jsx)(dn,{}):!!r&&(0,c.jsx)(mn,{lowStockRemaining:r}),(0,c.jsx)(xn,{...T})]}),(0,c.jsx)("span",{className:"screen-reader-text",children:(0,v.sprintf)(/* translators: %1$d is the number of items, %2$s is the item name and %3$s is the total price including the currency symbol. */ /* translators: %1$d is the number of items, %2$s is the item name and %3$s is the total price including the currency symbol. */
(0,v._n)("Total price for %1$d %2$s item: %3$s","Total price for %1$d %2$s items: %3$s",p,"woocommerce"),p,S,(0,bs.formatPrice)(N,E))}),(0,c.jsx)("div",{className:"wc-block-components-order-summary-item__total-price","aria-hidden":"true",children:(0,c.jsx)(cn,{currency:E,format:I,price:N})})]})};o(6161);const fn=({cartItems:e=[],disableProductDescriptions:t=!1})=>{const{isLarge:o}=u();return(0,c.jsx)("div",{className:(0,s.A)("wc-block-components-order-summary",{"is-large":o}),children:(0,c.jsx)("div",{className:"wc-block-components-order-summary__content",children:e.map((e=>(0,c.jsx)(vn,{disableProductDescriptions:t,cartItem:e},e.key)))})})},Sn=({className:e="",disableProductDescriptions:t=!1})=>{const{cartItems:o}=Te();return(0,c.jsx)(zt.TotalsWrapper,{className:e,children:(0,c.jsx)(fn,{cartItems:o,disableProductDescriptions:t})})},jn=JSON.parse('{"DD":"Cart Items","XV":3}');(0,a.registerBlockType)("woocommerce/checkout-order-summary-cart-items-block",{apiVersion:jn.XV,title:jn.DD,icon:{src:(0,c.jsx)(i.A,{icon:on,className:"wc-block-editor-components-block-icon"})},edit:({attributes:e,setAttributes:t})=>{const{className:o="",disableProductDescriptions:s=!1}=e,r=(0,l.useBlockProps)();return(0,c.jsxs)("div",{...r,children:[H()&&(0,c.jsx)(l.InspectorControls,{children:(0,c.jsx)(Lt.PanelBody,{title:(0,v.__)("Settings","woocommerce"),children:(0,c.jsx)(Lt.ToggleControl,{label:(0,v.__)("Disable product descriptions","woocommerce"),help:(0,v.__)("Disable display of product descriptions.","woocommerce"),checked:s,onChange:()=>t({disableProductDescriptions:!s})})})}),(0,c.jsx)(Sn,{disableProductDescriptions:s,className:o})]})},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save()})});const Cn=JSON.parse('{"DD":"Totals","XV":3}');o(2739),(0,a.registerBlockType)("woocommerce/checkout-order-summary-totals-block",{apiVersion:Cn.XV,title:Cn.DD,icon:{src:(0,c.jsx)(i.A,{icon:Ps,className:"wc-block-editor-components-block-icon"})},edit:({clientId:e})=>{const t=(0,l.useBlockProps)(),o=Ot(Pt.innerBlockAreas.CHECKOUT_ORDER_SUMMARY_TOTALS),s=[["woocommerce/checkout-order-summary-subtotal-block",{},[]],["woocommerce/checkout-order-summary-fee-block",{},[]],["woocommerce/checkout-order-summary-discount-block",{},[]],["woocommerce/checkout-order-summary-shipping-block",{},[]],["woocommerce/checkout-order-summary-taxes-block",{},[]]];return Ft({clientId:e,registeredBlocks:o,defaultTemplate:s}),(0,c.jsx)("div",{...t,children:(0,c.jsx)(l.InnerBlocks,{allowedBlocks:o,template:s})})},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save(),children:(0,c.jsx)(l.InnerBlocks.Content,{})})}),o(4259);var En=o(8558);const Pn=(e,t=!0)=>{t?window.document.body.classList.add(e):window.document.body.classList.remove(e)},Nn=({attributes:e,setAttributes:t})=>{const{hasDarkControls:o,showFormStepNumbers:s}=e;return(0,c.jsx)(l.InspectorControls,{children:(0,c.jsxs)(Lt.PanelBody,{title:(0,v.__)("Style","woocommerce"),children:[(0,c.jsx)(Lt.ToggleControl,{label:(0,v.__)("Show form step numbers","woocommerce"),checked:s,onChange:()=>t({showFormStepNumbers:!s})}),(0,c.jsx)(Lt.ToggleControl,{label:(0,v.__)("Dark mode inputs","woocommerce"),help:(0,v.__)("Inputs styled specifically for use on dark background colors.","woocommerce"),checked:o,onChange:()=>t({hasDarkControls:!o})})]})})},An=window.wp.editor;function In({block:e}){const t="checkout"===e?j:P,o="checkout"===e?"woocommerce_checkout_page_id":"woocommerce_cart_page_id",{saveEntityRecord:s}=(0,_.useDispatch)(At.store),{editPost:r,savePost:n}=(0,_.useDispatch)(An.store),{slug:i,postPublished:a,currentPostId:l}=(0,_.useSelect)((o=>{const{getEntityRecord:s}=o(At.store),{isCurrentPostPublished:r,getCurrentPostId:c}=o(An.store);return{slug:s("postType","page",t)?.slug||e,postPublished:r(),currentPostId:c()}}),[]),[p,m]=(0,d.useState)("pristine"),u=(0,d.useCallback)((()=>{m("updating"),Promise.resolve().then((()=>lt()({path:`/wc/v3/settings/advanced/${o}`,method:"GET"}))).catch((e=>{"rest_setting_setting_invalid"===e.code&&m("error")})).then((()=>{if(!a)return r({status:"publish"}),n()})).then((()=>lt()({path:`/wc/v3/settings/advanced/${o}`,method:"POST",data:{value:l.toString()}}))).then((()=>{if(0!==t)return s("postType","page",{id:t,slug:`${i}-2`})})).then((()=>r({slug:i}))).then((()=>n())).then((()=>m("updated")))}),[a,r,n,o,l,t,s,i]);let h;return h="checkout"===e?(0,d.createInterpolateElement)((0,v.__)("If you would like to use this block as your default checkout, <a>update your page settings</a>.","woocommerce"),{a:(0,c.jsx)("a",{href:"#",onClick:u,children:(0,v.__)("update your page settings","woocommerce")})}):(0,d.createInterpolateElement)((0,v.__)("If you would like to use this block as your default cart, <a>update your page settings</a>.","woocommerce"),{a:(0,c.jsx)("a",{href:"#",onClick:u,children:(0,v.__)("update your page settings","woocommerce")})}),"string"==typeof pagenow&&"site-editor"===pagenow||l===t||"dismissed"===p?null:(0,c.jsx)(Lt.Notice,{className:"wc-default-page-notice",status:"updated"===p?"success":"info",onRemove:()=>m("dismissed"),spokenMessage:"updated"===p?(0,v.__)("Page settings updated","woocommerce"):h,children:"updated"===p?(0,v.__)("Page settings updated","woocommerce"):(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("p",{children:h})})})}o(3650);const Rn=[],Tn=e=>{const[t,o,s]=(()=>{const e={};(0,x.getSetting)("incompatibleExtensions")&&(0,x.getSetting)("incompatibleExtensions").forEach((t=>{e[t.id]=t.title}));const t=Object.keys(e),o=t.length;return[e,t,o]})(),[r,c,n]=(()=>{const{incompatiblePaymentMethods:e}=(0,_.useSelect)((e=>{const{getIncompatiblePaymentMethods:t}=e(X.paymentStore);return{incompatiblePaymentMethods:t()}}),[]),t=Object.keys(e);return[e,t,t.length]})(),i={...t,...r},a=[...o,...c],l=s+n,[p,m]=((e,t)=>{const[o,s]=(0,d.useState)((()=>{const o=window.localStorage.getItem(e);if(o)try{return JSON.parse(o)}catch{console.error(`Value for key '${e}' could not be retrieved from localStorage because it can't be parsed.`)}return t}));return(0,d.useEffect)((()=>{try{window.localStorage.setItem(e,JSON.stringify(o))}catch{console.error(`Value for key '${e}' could not be saved in localStorage because it can't be converted into a string.`)}}),[e,o]),[o,s]})("wc-blocks_dismissed_incompatible_extensions_notices",Rn),[u,h]=(0,d.useState)(!1),g=p.some((t=>{return Object.keys(t).includes(e)&&(o=t[e],s=a,o.length===s.length&&new Set([...o,...s]).size===o.length);var o,s})),k=0===l||g;return(0,d.useEffect)((()=>{h(!k),k||g||m((t=>t.reduce(((t,o)=>(Object.keys(o).includes(e)||t.push(o),t)),[])))}),[k,g,m,e]),[u,()=>{const t=new Set(p);t.add({[e]:a}),m([...t])},(b=i,Object.fromEntries(Object.entries(b).sort((([,e],[,t])=>e.localeCompare(t))))),l];var b};var Mn=o(1244),Bn=o.n(Mn);Bn()("wc-admin:tracks:stats");const Dn=Bn()("wc-admin:tracks");function On(e,t){if(Dn("recordevent %s %o","wcadmin_"+e,t,{_tqk:window._tkq,shouldRecord:!!window._tkq&&!!window.wcTracks&&!!window.wcTracks.isEnabled}),!window.wcTracks||"function"!=typeof window.wcTracks.recordEvent)return!1;window.wcTracks.recordEvent(e,t)}const Fn=({blocks:e,findCondition:t})=>{for(const o of e){if(t(o))return o;if(o.innerBlocks){const e=Fn({blocks:o.innerBlocks,findCondition:t});if(e)return e}}},Ln=({blockType:e="woocommerce/cart"})=>"woocommerce/cart"===e?(0,c.jsx)("p",{children:(0,v.__)("If you continue, the cart block will be replaced with the classic experience powered by shortcodes. This means that you may lose customizations that you made to the cart block.","woocommerce")}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("p",{children:(0,v.__)("If you continue, the checkout block will be replaced with the classic experience powered by shortcodes. This means that you may lose:","woocommerce")}),(0,c.jsxs)("ul",{className:"cross-list",children:[(0,c.jsx)("li",{children:(0,v.__)("Customizations and updates to the block","woocommerce")}),(0,c.jsx)("li",{children:(0,v.__)("Additional local pickup options created for the new checkout","woocommerce")})]})]});function Vn({block:e,clientId:t,type:o}){const{createInfoNotice:s}=(0,_.useDispatch)(et.store),{replaceBlock:r,selectBlock:n}=(0,_.useDispatch)(l.store),[i,p]=(0,d.useState)(!1),m=()=>p(!1),{undo:u}=(0,_.useDispatch)(At.store),[,,h,g]=Tn(e),k="woocommerce/cart"===e,b=k?(0,v.__)("Switch to classic cart","woocommerce"):(0,v.__)("Switch to classic checkout","woocommerce"),w=k?(0,v.__)("Switched to classic cart.","woocommerce"):(0,v.__)("Switched to classic checkout.","woocommerce"),y=k?"cart":"checkout",x={shortcode:y,notice:"incompatible"===o?"incompatible_notice":"generic_notice",incompatible_extensions_count:g,incompatible_extensions_names:JSON.stringify(h)},{getBlocks:f}=(0,_.useSelect)((e=>({getBlocks:e(l.store).getBlocks})),[]),S=()=>{u(),On("switch_to_classic_shortcode_undo",x)};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(Lt.Button,{variant:"secondary",onClick:()=>{On("switch_to_classic_shortcode_click",x),p(!0)},children:b}),i&&(0,c.jsxs)(Lt.Modal,{size:"medium",title:b,onRequestClose:m,className:"wc-blocks-switch-to-classic-shortcode-modal-content",children:[(0,c.jsx)(Ln,{blockType:e}),(0,c.jsxs)(Lt.TabbableContainer,{className:"wc-blocks-switch-to-classic-shortcode-modal-actions",children:[(0,c.jsx)(Lt.Button,{variant:"primary",isDestructive:!0,onClick:()=>{r(t,(0,a.createBlock)("woocommerce/classic-shortcode",{shortcode:y})),On("switch_to_classic_shortcode_confirm",x),(()=>{const e=Fn({blocks:f(),findCondition:e=>"woocommerce/classic-shortcode"===e.name});e&&n(e.clientId)})(),s(w,{actions:[{label:(0,v.__)("Undo","woocommerce"),onClick:S}],type:"snackbar"}),m()},children:(0,v.__)("Switch","woocommerce")})," ",(0,c.jsx)(Lt.Button,{variant:"secondary",onClick:()=>{On("switch_to_classic_shortcode_cancel",x),m()},children:(0,v.__)("Cancel","woocommerce")})]})]})]})}function Un({block:e,clientId:t}){const[o,s,r,n]=Tn(e);if(!o)return null;const a=(0,c.jsx)(c.Fragment,{children:n>1?(0,d.createInterpolateElement)((0,v.__)("Some active extensions do not yet support this block. This may impact the shopper experience. <a>Learn more</a>","woocommerce"),{a:(0,c.jsx)(Lt.ExternalLink,{href:"https://woocommerce.com/document/woocommerce-store-editing/customizing-cart-and-checkout/#incompatible-extensions/"})}):(0,d.createInterpolateElement)((0,v.sprintf)(
// translators: %s is the name of the extension.
// translators: %s is the name of the extension.
(0,v.__)("<strong>%s</strong> does not yet support this block. This may impact the shopper experience. <a>Learn more</a>","woocommerce"),Object.values(r)[0]),{strong:(0,c.jsx)("strong",{}),a:(0,c.jsx)(Lt.ExternalLink,{href:"https://woocommerce.com/document/woocommerce-store-editing/customizing-cart-and-checkout/#incompatible-extensions/"})})}),l=Object.entries(r),p=l.length-2;return(0,c.jsx)(Lt.Notice,{className:"wc-blocks-incompatible-extensions-notice",status:"warning",onRemove:s,spokenMessage:a,children:(0,c.jsxs)("div",{className:"wc-blocks-incompatible-extensions-notice__content",children:[(0,c.jsx)(i.A,{className:"wc-blocks-incompatible-extensions-notice__warning-icon",icon:(0,c.jsx)(Zs,{})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{children:a}),n>1&&(0,c.jsx)("ul",{children:l.slice(0,2).map((([e,t])=>(0,c.jsx)("li",{className:"wc-blocks-incompatible-extensions-notice__element",children:t},e)))}),l.length>2&&(0,c.jsxs)("details",{children:[(0,c.jsxs)("summary",{children:[(0,c.jsx)("span",{children:(0,v.sprintf)(
// translators: %s is the number of incompatible extensions.
// translators: %s is the number of incompatible extensions.
(0,v._n)("%s more incompatibility","%s more incompatibilities",p,"woocommerce"),p)}),(0,c.jsx)(i.A,{icon:to.A})]}),(0,c.jsx)("ul",{children:l.slice(2).map((([e,t])=>(0,c.jsx)("li",{className:"wc-blocks-incompatible-extensions-notice__element",children:t},e)))})]}),(0,c.jsx)(Vn,{block:e,clientId:t,type:"incompatible"})]})]})})}o(4490),o(6342);var $n=o(3791);o(4268);const Hn=({text:e,title:t=(0,v.__)("Feedback?","woocommerce"),url:o})=>{const[s,r]=(0,d.useState)(!1);return(0,d.useEffect)((()=>{r(!0)}),[]),(0,c.jsx)(c.Fragment,{children:s&&(0,c.jsxs)("div",{className:"wc-block-feedback-prompt",children:[(0,c.jsx)(i.A,{icon:$n.A}),(0,c.jsx)("h2",{className:"wc-block-feedback-prompt__title",children:t}),(0,c.jsx)("p",{className:"wc-block-feedback-prompt__text",children:e}),(0,c.jsxs)("a",{href:o,className:"wc-block-feedback-prompt__link",rel:"noreferrer noopener",target:"_blank",children:[(0,v.__)("Give us your feedback.","woocommerce"),(0,c.jsx)(i.A,{icon:zs.A,size:16})]})]})})},qn=()=>(0,c.jsx)(Hn,{text:(0,v.__)("We are currently working on improving our cart and checkout blocks to provide merchants with the tools and customization options they need.","woocommerce"),url:"https://github.com/woocommerce/woocommerce/discussions/new?category=checkout-flow&labels=type%3A+product%20feedback"}),zn=(0,p.createHigherOrderComponent)((e=>t=>{const{clientId:o,name:s,isSelected:r}=t,{isCart:n,isCheckout:i,parentId:a}=(0,_.useSelect)((e=>{const{getBlockParentsByBlockName:t,getBlockName:s}=e(l.store),r=t(o,["woocommerce/cart","woocommerce/checkout"]).reduce(((e,t)=>(e[s(t)]=t,e)),{}),c=s(o),n=Object.keys(r).includes("woocommerce/cart"),i=Object.keys(r).includes("woocommerce/checkout"),a="woocommerce/cart"===c||n,d=a?"woocommerce/cart":"woocommerce/checkout";return{isCart:a,isCheckout:"woocommerce/checkout"===c||i,parentId:c===d?o:r[d]}}));return s.startsWith("woocommerce/")&&r&&(n||i)?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(l.InspectorControls,{children:[(0,c.jsx)(Un,{block:n?"woocommerce/cart":"woocommerce/checkout",clientId:a}),(0,c.jsx)(In,{block:i?"checkout":"cart"}),(0,c.jsx)(qn,{})]}),(0,c.jsx)(e,{...t},"edit")]}):(0,c.jsx)(e,{...t},"edit")}),"withSidebarNotices");(0,qe.hasFilter)("editor.BlockEdit","woocommerce/add/sidebar-compatibility-notice")||(0,qe.addFilter)("editor.BlockEdit","woocommerce/add/sidebar-compatibility-notice",zn,11),(0,qe.hasFilter)("blocks.registerBlockType","core/lock/addAttribute")||(0,_.subscribe)((()=>{const e=(0,_.select)(l.store);if(!e)return;const t=e.getSelectedBlock();t&&(Pn("wc-lock-selected-block--remove",!!t?.attributes?.lock?.remove),Pn("wc-lock-selected-block--move",!!t?.attributes?.lock?.move))}));const Wn=["woocommerce/checkout-fields-block","woocommerce/checkout-totals-block"],Xn={hasDarkControls:{type:"boolean",default:(0,x.getSetting)("hasDarkEditorStyleSupport",!1)},showRateAfterTaxName:{type:"boolean",default:(0,x.getSetting)("displayCartPricesIncludingTax",!1)}},Yn={showOrderNotes:{type:"boolean",default:!0},showPolicyLinks:{type:"boolean",default:!0},showReturnToCart:{type:"boolean",default:!0},cartPageId:{type:"number",default:0},showCompanyField:{type:"boolean",default:!1},requireCompanyField:{type:"boolean",default:!1},showApartmentField:{type:"boolean",default:!0},requireApartmentField:{type:"boolean",default:!1},showPhoneField:{type:"boolean",default:!0},requirePhoneField:{type:"boolean",default:!1}},Gn=JSON.parse('{"name":"woocommerce/checkout","version":"1.0.0","title":"Checkout","description":"Display a checkout form so your customers can submit orders.","category":"woocommerce","keywords":["WooCommerce"],"supports":{"align":["wide"],"html":false,"multiple":false},"example":{"attributes":{"isPreview":true},"viewportWidth":800},"attributes":{"isPreview":{"type":"boolean","default":false,"save":false},"align":{"type":"string","default":"wide"},"showFormStepNumbers":{"type":"boolean","default":false}},"textdomain":"woocommerce","apiVersion":3,"$schema":"https://schemas.wp.org/trunk/block.json"}'),Jn={icon:{src:(0,c.jsx)(i.A,{icon:n,className:"wc-block-editor-components-block-icon"})},attributes:{...Gn.attributes,...Xn,...Yn},edit:({clientId:e,attributes:t,setAttributes:o})=>{const{showOrderNotes:r,showPolicyLinks:n,showReturnToCart:i,showRateAfterTaxName:p,cartPageId:m,isPreview:u=!1,showFormStepNumbers:h=!1,hasDarkControls:k=!1}=t,b=(0,_.useSelect)((e=>e(At.store).getEditedEntityRecord("root","site")),[]),y={...x.defaultFields,...Object.fromEntries(Object.entries({phone:"optional",company:"hidden",address_2:"optional"}).map((([e,t])=>{const o=b[`woocommerce_checkout_${e}_field`]||t;return[e,{...x.defaultFields[e],required:"required"===o,hidden:"hidden"===o}]})))},v=(0,d.useRef)((0,Nt.getQueryArg)(window.location.href,"focus"));(0,d.useEffect)((()=>{"checkout"!==v.current||(0,_.select)("core/block-editor").hasSelectedBlock()||((0,_.dispatch)("core/block-editor").selectBlock(e),(0,_.dispatch)("core/interface").enableComplementaryArea("core/edit-site","edit-site/block-inspector"))}),[e]);const f=((e={})=>{const t=(0,d.useRef)(),o=(0,l.useBlockProps)({ref:t,...e});return(({ref:e})=>{const t=(0,qe.hasFilter)("blocks.registerBlockType","core/lock/addAttribute"),o=e.current;(0,d.useEffect)((()=>{if(o&&!t)return o.addEventListener("keydown",e,{capture:!0,passive:!1}),()=>{o.removeEventListener("keydown",e,{capture:!0})};function e(e){const{keyCode:t,target:o}=e;if(!(o instanceof HTMLElement))return;if(t!==En.BACKSPACE&&t!==En.DELETE)return;if((0,Kt.isTextField)(o))return;const s=o;if(void 0===s.dataset.block)return;const r=(e=>{if(!e)return!1;const{getBlock:t}=(0,_.select)(l.store),o=t(e);if("boolean"==typeof o?.attributes?.lock?.remove)return o.attributes.lock.remove;const s=(0,a.getBlockType)(o.name);return"boolean"==typeof s?.attributes?.lock?.default?.remove&&s?.attributes?.lock?.default?.remove})(s.dataset.block);r&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())}}),[o,t])})({ref:t}),o})();return(0,c.jsxs)("div",{...f,children:[(0,c.jsx)(l.InspectorControls,{children:(0,c.jsx)(Nn,{attributes:t,setAttributes:o})}),(0,c.jsx)(w,{isPreview:!!u,previewData:{previewCart:Ct,previewSavedPaymentMethods:Et,defaultFields:y},children:(0,c.jsx)(Pt.SlotFillProvider,{children:(0,c.jsx)(_t,{children:(0,c.jsx)(g,{className:(0,s.A)("wc-block-checkout",{"has-dark-controls":k}),children:(0,c.jsx)(Mt.Provider,{value:{showOrderNotes:r,showPolicyLinks:n,showReturnToCart:i,cartPageId:m,showRateAfterTaxName:p,showFormStepNumbers:h,defaultFields:y},children:(0,c.jsx)(l.InnerBlocks,{allowedBlocks:Wn,template:[["woocommerce/checkout-totals-block",{},[]],["woocommerce/checkout-fields-block",{},[]]],templateLock:"insert"})})})})})})]})},save:()=>(0,c.jsx)("div",{...l.useBlockProps.save({className:"wc-block-checkout is-loading"}),children:(0,c.jsx)(l.InnerBlocks.Content,{})}),transforms:{to:[{type:"block",blocks:["woocommerce/classic-shortcode"],transform:e=>(0,a.createBlock)("woocommerce/classic-shortcode",{shortcode:"checkout",align:e.align},[])}]},deprecated:[{attributes:{...Gn.attributes,...Xn,...Yn},save:({attributes:e})=>(0,c.jsx)("div",{className:(0,s.A)("is-loading",e.className)}),migrate:e=>{const{showOrderNotes:t,showPolicyLinks:o,showReturnToCart:s,cartPageId:r}=e;return[e,[(0,a.createBlock)("woocommerce/checkout-fields-block",{},[(0,a.createBlock)("woocommerce/checkout-express-payment-block",{},[]),(0,a.createBlock)("woocommerce/checkout-contact-information-block",{},[]),(0,a.createBlock)("woocommerce/checkout-shipping-address-block",{},[]),(0,a.createBlock)("woocommerce/checkout-billing-address-block",{},[]),(0,a.createBlock)("woocommerce/checkout-shipping-methods-block",{},[]),(0,a.createBlock)("woocommerce/checkout-payment-block",{},[]),(0,a.createBlock)("woocommerce/checkout-additional-information-block",{},[]),!!t&&(0,a.createBlock)("woocommerce/checkout-order-note-block",{},[]),!!o&&(0,a.createBlock)("woocommerce/checkout-terms-block",{},[]),(0,a.createBlock)("woocommerce/checkout-actions-block",{showReturnToCart:s,cartPageId:r},[])].filter(Boolean)),(0,a.createBlock)("woocommerce/checkout-totals-block",{})]]},isEligible:(e,t)=>!t.some((e=>"woocommerce/checkout-fields-block"===e.name))},{save:({attributes:e})=>(0,c.jsx)("div",{className:(0,s.A)("is-loading",e.className)}),isEligible:(e,t)=>{const o=t.find((e=>"woocommerce/checkout-fields-block"===e.name));return!!o&&!o.innerBlocks.some((e=>"woocommerce/checkout-additional-information-block"===e.name))},migrate:(e,t)=>{const o=t.findIndex((e=>"woocommerce/checkout-fields-block"===e.name));if(-1===o)return!1;const s=t[o],r=s.innerBlocks.findIndex((e=>"wp-block-woocommerce-checkout-payment-block"===e.name));return-1!==r&&(t[o]=s.innerBlocks.slice(0,r).concat((0,a.createBlock)("woocommerce/checkout-additional-information-block",{},[])).concat(t.slice(r+1,t.length)),[e,t])}}]};(0,a.registerBlockType)(Gn,Jn)},5893:()=>{},6882:()=>{},2770:()=>{},6161:()=>{},6713:()=>{},6983:()=>{},9287:()=>{},7605:()=>{},3692:()=>{},8879:()=>{},2840:()=>{},2793:()=>{},9581:()=>{},619:()=>{},8413:()=>{},6562:()=>{},4249:()=>{},9961:()=>{},7575:()=>{},959:()=>{},8501:()=>{},8306:()=>{},9163:()=>{},3930:()=>{},2831:()=>{},4147:()=>{},7215:()=>{},8796:()=>{},1121:()=>{},2862:()=>{},8599:()=>{},7883:()=>{},6715:()=>{},4793:()=>{},9003:()=>{},4255:()=>{},6229:()=>{},2739:()=>{},5991:()=>{},6336:()=>{},1393:()=>{},7693:()=>{},6223:()=>{},5763:()=>{},6811:()=>{},4259:()=>{},3650:()=>{},4459:()=>{},4268:()=>{},6342:()=>{},4490:()=>{},1609:e=>{"use strict";e.exports=window.React},790:e=>{"use strict";e.exports=window.ReactJSXRuntime},195:e=>{"use strict";e.exports=window.wp.a11y},9491:e=>{"use strict";e.exports=window.wp.compose},4040:e=>{"use strict";e.exports=window.wp.deprecated},8107:e=>{"use strict";e.exports=window.wp.dom},6087:e=>{"use strict";e.exports=window.wp.element},7723:e=>{"use strict";e.exports=window.wp.i18n},923:e=>{"use strict";e.exports=window.wp.isShallowEqual},8558:e=>{"use strict";e.exports=window.wp.keycodes},5573:e=>{"use strict";e.exports=window.wp.primitives}},r={};function c(e){var t=r[e];if(void 0!==t)return t.exports;var o=r[e]={exports:{}};return s[e].call(o.exports,o,o.exports,c),o.exports}c.m=s,e=[],c.O=(t,o,s,r)=>{if(!o){var n=1/0;for(d=0;d<e.length;d++){for(var[o,s,r]=e[d],i=!0,a=0;a<o.length;a++)(!1&r||n>=r)&&Object.keys(c.O).every((e=>c.O[e](o[a])))?o.splice(a--,1):(i=!1,r<n&&(n=r));if(i){e.splice(d--,1);var l=s();void 0!==l&&(t=l)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[o,s,r]},c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},o=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,c.t=function(e,s){if(1&s&&(e=this(e)),8&s)return e;if("object"==typeof e&&e){if(4&s&&e.__esModule)return e;if(16&s&&"function"==typeof e.then)return e}var r=Object.create(null);c.r(r);var n={};t=t||[null,o({}),o([]),o(o)];for(var i=2&s&&e;"object"==typeof i&&!~t.indexOf(i);i=o(i))Object.getOwnPropertyNames(i).forEach((t=>n[t]=()=>e[t]));return n.default=()=>e,c.d(r,n),r},c.d=(e,t)=>{for(var o in t)c.o(t,o)&&!c.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.j=251,(()=>{var e={251:0};c.O.j=t=>0===e[t];var t=(t,o)=>{var s,r,[n,i,a]=o,l=0;if(n.some((t=>0!==e[t]))){for(s in i)c.o(i,s)&&(c.m[s]=i[s]);if(a)var d=a(c)}for(t&&t(o);l<n.length;l++)r=n[l],c.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return c.O(d)},o=globalThis.webpackChunkwebpackWcBlocksMainJsonp=globalThis.webpackChunkwebpackWcBlocksMainJsonp||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var n=c.O(void 0,[94],(()=>c(3404)));n=c.O(n),((this.wc=this.wc||{}).blocks=this.wc.blocks||{}).checkout=n})();
=======
(()=>{var e,t,o,r={4592:(e,t,o)=>{"use strict";o.r(t);var r=o(1609),n=o(851),c=o(5573);const s=(0,r.createElement)(c.SVG,{xmlns:"http://www.w3.org/2000/SVG",viewBox:"0 0 24 24",fill:"none"},(0,r.createElement)("path",{stroke:"currentColor",strokeWidth:"1.5",fill:"none",d:"M5 3.75h14c.69 0 1.25.56 1.25 1.25v14c0 .69-.56 1.25-1.25 1.25H5c-.69 0-1.25-.56-1.25-1.25V5c0-.69.56-1.25 1.25-1.25z"}),(0,r.createElement)("path",{fill:"currentColor",fillRule:"evenodd",d:"M6.4 10.75c0-.47.38-.85.85-.85h9.5c.47 0 .85.38.85.85v1.5c0 .47-.38.85-.85.85h-9.5a.85.85 0 01-.85-.85v-1.5zm1.2.35v.8h8.8v-.8H7.6zM12.4 15.25c0-.47.38-.85.85-.85h3.5c.47 0 .85.38.85.85v1.5c0 .47-.38.85-.85.85h-3.5a.85.85 0 01-.85-.85v-1.5zm1.2.35v.8h2.8v-.8h-2.8zM6.5 15.9a.6.6 0 01.6-.6h2.8a.6.6 0 010 1.2H7.1a.6.6 0 01-.6-.6zM6.5 7.9a.6.6 0 01.6-.6h9.8a.6.6 0 110 1.2H7.1a.6.6 0 01-.6-.6z",clipRule:"evenodd"}));var a=o(7104);const i=window.wp.blocks,l=window.wp.blockEditor;var m=o(6087),d=o(9491);const u=(0,m.createContext)({hasContainerWidth:!1,containerClassName:"",isMobile:!1,isSmall:!1,isMedium:!1,isLarge:!1}),p=()=>(0,m.useContext)(u),h=({children:e,className:t=""})=>{const[o,c]=(()=>{const[e,{width:t}]=(0,d.useResizeObserver)();let o="";return t>700?o="is-large":t>520?o="is-medium":t>400?o="is-small":t&&(o="is-mobile"),[e,o]})(),s={hasContainerWidth:""!==c,containerClassName:c,isMobile:"is-mobile"===c,isSmall:"is-small"===c,isMedium:"is-medium"===c,isLarge:"is-large"===c};return(0,r.createElement)(u.Provider,{value:s},(0,r.createElement)("div",{className:(0,n.A)(t,c)},o,e))};o(1221);const g=({children:e,className:t})=>(0,r.createElement)(h,{className:(0,n.A)("wc-block-components-sidebar-layout",t)},e),_=window.wp.data,k=(0,m.createContext)({isEditor:!1,currentPostId:0,currentView:"",previewData:{},getPreviewData:()=>({})}),b=()=>(0,m.useContext)(k),w=({children:e,currentPostId:t=0,previewData:o={},currentView:n="",isPreview:c=!1})=>{const s=(0,_.useSelect)((e=>t||e("core/editor").getCurrentPostId()),[t]),a=(0,m.useCallback)(((e,t={})=>o&&e in o?o[e]:t),[o]),i={isEditor:!0,currentPostId:s,currentView:n,previewData:o,getPreviewData:a,isPreview:c};return(0,r.createElement)(k.Provider,{value:i},e)},E=window.wp.plugins,y=window.wc.wcSettings;var v,f,S,C,P,N,A,x,I,R,T=o(2294),M=o(7723);const B=(0,y.getSetting)("wcBlocksConfig",{pluginUrl:"",productCount:0,defaultAvatar:"",restApiRoutes:{},wordCountType:"words"}),D=B.pluginUrl+"assets/images/",O=(B.pluginUrl,null===(v=y.STORE_PAGES.shop)||void 0===v||v.permalink,null===(f=y.STORE_PAGES.checkout)||void 0===f?void 0:f.id),F=(null===(S=y.STORE_PAGES.checkout)||void 0===S||S.permalink,null===(C=y.STORE_PAGES.privacy)||void 0===C?void 0:C.permalink),L=(null===(P=y.STORE_PAGES.privacy)||void 0===P||P.title,null===(N=y.STORE_PAGES.terms)||void 0===N?void 0:N.permalink),j=(null===(A=y.STORE_PAGES.terms)||void 0===A||A.title,null===(x=y.STORE_PAGES.cart)||void 0===x?void 0:x.id),V=null===(I=y.STORE_PAGES.cart)||void 0===I?void 0:I.permalink,U=(null!==(R=y.STORE_PAGES.myaccount)&&void 0!==R&&R.permalink?y.STORE_PAGES.myaccount.permalink:(0,y.getSetting)("wpLoginUrl","/wp-login.php"),(0,y.getSetting)("localPickupEnabled",!1)),$=((0,y.getSetting)("shippingMethodsExist",!1),(0,y.getSetting)("shippingEnabled",!0)),H=(0,y.getSetting)("countries",{}),q=(0,y.getSetting)("countryData",{}),z=Object.fromEntries(Object.keys(q).filter((e=>!0===q[e].allowBilling)).map((e=>[e,H[e]||""]))),W=Object.fromEntries(Object.keys(q).filter((e=>!0===q[e].allowBilling)).map((e=>[e,q[e].states||{}]))),Y=Object.fromEntries(Object.keys(q).filter((e=>!0===q[e].allowShipping)).map((e=>[e,H[e]||""]))),G=Object.fromEntries(Object.keys(q).filter((e=>!0===q[e].allowShipping)).map((e=>[e,q[e].states||{}]))),K=Object.fromEntries(Object.keys(q).map((e=>[e,q[e].locale||{}]))),Z={address:["first_name","last_name","company","address_1","address_2","city","postcode","country","state","phone"],contact:["email"],order:[]},J=(0,y.getSetting)("addressFieldsLocations",Z).address,X=(0,y.getSetting)("addressFieldsLocations",Z).contact,Q=(0,y.getSetting)("addressFieldsLocations",Z).order,ee=((0,y.getSetting)("additionalOrderFields",{}),(0,y.getSetting)("additionalContactFields",{}),(0,y.getSetting)("additionalAddressFields",{}),({imageUrl:e=`${D}/block-error.svg`,header:t=(0,M.__)("Oops!","woocommerce"),text:o=(0,M.__)("There was an error loading the content.","woocommerce"),errorMessage:n,errorMessagePrefix:c=(0,M.__)("Error:","woocommerce"),button:s,showErrorBlock:a=!0})=>a?(0,r.createElement)("div",{className:"wc-block-error wc-block-components-error"},e&&(0,r.createElement)("img",{className:"wc-block-error__image wc-block-components-error__image",src:e,alt:""}),(0,r.createElement)("div",{className:"wc-block-error__content wc-block-components-error__content"},t&&(0,r.createElement)("p",{className:"wc-block-error__header wc-block-components-error__header"},t),o&&(0,r.createElement)("p",{className:"wc-block-error__text wc-block-components-error__text"},o),n&&(0,r.createElement)("p",{className:"wc-block-error__message wc-block-components-error__message"},c?c+" ":"",n),s&&(0,r.createElement)("p",{className:"wc-block-error__button wc-block-components-error__button"},s))):null);o(9407);class te extends m.Component{constructor(...e){super(...e),(0,T.A)(this,"state",{errorMessage:"",hasError:!1})}static getDerivedStateFromError(e){return void 0!==e.statusText&&void 0!==e.status?{errorMessage:(0,r.createElement)(r.Fragment,null,(0,r.createElement)("strong",null,e.status),":Â ",e.statusText),hasError:!0}:{errorMessage:e.message,hasError:!0}}render(){const{header:e,imageUrl:t,showErrorMessage:o=!0,showErrorBlock:n=!0,text:c,errorMessagePrefix:s,renderError:a,button:i}=this.props,{errorMessage:l,hasError:m}=this.state;return m?"function"==typeof a?a({errorMessage:l}):(0,r.createElement)(ee,{showErrorBlock:n,errorMessage:o?l:null,header:e,imageUrl:t,text:c,errorMessagePrefix:s,button:i}):this.props.children}}const oe=te,re=window.wc.wcBlocksData;var ne=o(4040),ce=o.n(ne);let se=function(e){return e.ADD_EVENT_CALLBACK="add_event_callback",e.REMOVE_EVENT_CALLBACK="remove_event_callback",e}({});const ae={},ie=(e=ae,{type:t,eventType:o,id:r,callback:n,priority:c})=>{const s=e.hasOwnProperty(o)?new Map(e[o]):new Map;switch(t){case se.ADD_EVENT_CALLBACK:return s.set(r,{priority:c,callback:n}),{...e,[o]:s};case se.REMOVE_EVENT_CALLBACK:return s.delete(r),{...e,[o]:s}}},le=(e,t)=>(o,r=10)=>{const n=((e,t,o=10)=>({id:Math.floor(Math.random()*Date.now()).toString(),type:se.ADD_EVENT_CALLBACK,eventType:e,callback:t,priority:o}))(e,o,r);return t(n),()=>{var o;t((o=e,{id:n.id,type:se.REMOVE_EVENT_CALLBACK,eventType:o}))}},me=(0,m.createContext)({onPaymentProcessing:()=>()=>()=>{},onPaymentSetup:()=>()=>()=>{}}),de=({children:e})=>{const{isProcessing:t,isIdle:o,isCalculating:n,hasError:c}=(0,_.useSelect)((e=>{const t=e(re.checkoutStore);return{isProcessing:t.isProcessing(),isIdle:t.isIdle(),hasError:t.hasError(),isCalculating:t.isCalculating()}})),{isPaymentReady:s}=(0,_.useSelect)((e=>{const t=e(re.paymentStore);return{isPaymentProcessing:t.isPaymentProcessing(),isPaymentReady:t.isPaymentReady()}})),{setValidationErrors:a}=(0,_.useDispatch)(re.validationStore),[i,l]=(0,m.useReducer)(ie,{}),{onPaymentSetup:d}=(e=>(0,m.useMemo)((()=>({onPaymentSetup:le("payment_setup",e)})),[e]))(l),u=(0,m.useRef)(i);(0,m.useEffect)((()=>{u.current=i}),[i]);const{__internalSetPaymentProcessing:p,__internalSetPaymentIdle:h,__internalEmitPaymentProcessingEvent:g}=(0,_.useDispatch)(re.paymentStore);(0,m.useEffect)((()=>{!t||c||n||(p(),g(u.current,a))}),[t,c,n,p,g,a]),(0,m.useEffect)((()=>{o&&!s&&h()}),[o,s,h]),(0,m.useEffect)((()=>{c&&s&&h()}),[c,s,h]);const k={onPaymentProcessing:(0,m.useMemo)((()=>function(...e){return ce()("onPaymentProcessing",{alternative:"onPaymentSetup",plugin:"WooCommerce Blocks"}),d(...e)}),[d]),onPaymentSetup:d};return(0,r.createElement)(me.Provider,{value:k},e)},ue={NONE:"none",INVALID_ADDRESS:"invalid_address",UNKNOWN:"unknown_error"},pe={INVALID_COUNTRY:"woocommerce_rest_cart_shipping_rates_invalid_country",MISSING_COUNTRY:"woocommerce_rest_cart_shipping_rates_missing_country",INVALID_STATE:"woocommerce_rest_cart_shipping_rates_invalid_state"},he={shippingErrorStatus:{isPristine:!0,isValid:!1,hasInvalidAddress:!1,hasError:!1},dispatchErrorStatus:e=>e,shippingErrorTypes:ue,onShippingRateSuccess:()=>()=>{},onShippingRateFail:()=>()=>{},onShippingRateSelectSuccess:()=>()=>{},onShippingRateSelectFail:()=>()=>{}},ge=(e,{type:t})=>Object.values(ue).includes(t)?t:e,_e="shipping_rates_success",ke="shipping_rates_fail",be="shipping_rate_select_success",we="shipping_rate_select_fail",Ee=e=>({onSuccess:le(_e,e),onFail:le(ke,e),onSelectSuccess:le(be,e),onSelectFail:le(we,e)}),ye=window.wc.wcTypes;let ve=function(e){return e.CART="wc/cart",e.CHECKOUT="wc/checkout",e.PAYMENTS="wc/checkout/payments",e.EXPRESS_PAYMENTS="wc/checkout/express-payments",e.CONTACT_INFORMATION="wc/checkout/contact-information",e.SHIPPING_ADDRESS="wc/checkout/shipping-address",e.BILLING_ADDRESS="wc/checkout/billing-address",e.SHIPPING_METHODS="wc/checkout/shipping-methods",e.CHECKOUT_ACTIONS="wc/checkout/checkout-actions",e.ORDER_INFORMATION="wc/checkout/order-information",e}({});const fe=async(e,t,o)=>{const r=((e,t)=>e[t]?Array.from(e[t].values()).sort(((e,t)=>e.priority-t.priority)):[])(e,t),n=[];for(const e of r)try{const t=await Promise.resolve(e.callback(o));"object"==typeof t&&n.push(t)}catch(e){console.error(e)}return!n.length||n};var Se=o(458),Ce=o.n(Se);const Pe=window.wp.htmlEntities,Ne=Object.entries(K).reduce(((e,[t,o])=>(e[t]=Object.entries(o).reduce(((e,[t,o])=>(e[t]=(e=>{const t={};return void 0!==e.label&&(t.label=e.label),void 0!==e.required&&(t.required=e.required),void 0!==e.hidden&&(t.hidden=e.hidden),void 0===e.label||e.optionalLabel||(t.optionalLabel=(0,M.sprintf)(/* translators: %s Field label. */ /* translators: %s Field label. */
(0,M.__)("%s (optional)","woocommerce"),e.label)),e.index&&((0,ye.isNumber)(e.index)&&(t.index=e.index),(0,ye.isString)(e.index)&&(t.index=parseInt(e.index,10))),e.hidden&&(t.required=!1),t})(o),e)),{}),e)),{}),Ae=(e,t,o="")=>{const r=o&&void 0!==Ne[o]?Ne[o]:{};return e.map((e=>({key:e,...t[e]||{},...r[e]||{}}))).sort(((e,t)=>e.index-t.index))},xe=window.wp.url,Ie=(e,t)=>e in t,Re=e=>{const t=Ae(J,y.defaultFields,e.country),o=Object.assign({},e);return t.forEach((({key:t,hidden:r})=>{r&&Ie(t,e)&&(o[t]="")})),o},Te=(e,t=[])=>{if(!e.country)return!1;const o=Ae(J,y.defaultFields,e.country);return(t.length>0?o.filter((({key:e})=>t.includes(e))):o).every((({key:t,hidden:o,required:r})=>!(!o&&r)||Ie(t,e)&&""!==e[t]))},Me=window.CustomEvent||null,Be=(e,t,o=!1,r=!1)=>{if("function"!=typeof jQuery)return()=>{};const n=()=>{((e,{bubbles:t=!1,cancelable:o=!1,element:r,detail:n={}})=>{if(!Me)return;r||(r=document.body);const c=new Me(e,{bubbles:t,cancelable:o,detail:n});r.dispatchEvent(c)})(t,{bubbles:o,cancelable:r})};return jQuery(document).on(e,n),()=>jQuery(document).off(e,n)},De=e=>{const t=null==e?void 0:e.detail;t&&t.preserveCartData||(0,_.dispatch)(re.cartStore).invalidateResolutionForStore()},Oe=e=>{(null!=e&&e.persisted||"back_forward"===(window.performance&&window.performance.getEntriesByType("navigation").length?window.performance.getEntriesByType("navigation")[0].type:""))&&(0,_.dispatch)(re.cartStore).invalidateResolutionForStore()},Fe=()=>{1===window.wcBlocksStoreCartListeners.count&&window.wcBlocksStoreCartListeners.remove(),window.wcBlocksStoreCartListeners.count--},Le={first_name:"",last_name:"",company:"",address_1:"",address_2:"",city:"",state:"",postcode:"",country:"",phone:""},je={...Le,email:""},Ve={total_items:"",total_items_tax:"",total_fees:"",total_fees_tax:"",total_discount:"",total_discount_tax:"",total_shipping:"",total_shipping_tax:"",total_price:"",total_tax:"",tax_lines:re.EMPTY_TAX_LINES,currency_code:"",currency_symbol:"",currency_minor_unit:2,currency_decimal_separator:"",currency_thousand_separator:"",currency_prefix:"",currency_suffix:""},Ue=e=>Object.fromEntries(Object.entries(e).map((([e,t])=>[e,(0,Pe.decodeEntities)(t)]))),$e={cartCoupons:re.EMPTY_CART_COUPONS,cartItems:re.EMPTY_CART_ITEMS,cartFees:re.EMPTY_CART_FEES,cartItemsCount:0,cartItemsWeight:0,crossSellsProducts:re.EMPTY_CART_CROSS_SELLS,cartNeedsPayment:!0,cartNeedsShipping:!0,cartItemErrors:re.EMPTY_CART_ITEM_ERRORS,cartTotals:Ve,cartIsLoading:!0,cartErrors:re.EMPTY_CART_ERRORS,billingData:je,billingAddress:je,shippingAddress:Le,shippingRates:re.EMPTY_SHIPPING_RATES,isLoadingRates:!1,cartHasCalculatedShipping:!1,paymentMethods:re.EMPTY_PAYMENT_METHODS,paymentRequirements:re.EMPTY_PAYMENT_REQUIREMENTS,receiveCart:()=>{},receiveCartContents:()=>{},extensions:re.EMPTY_EXTENSIONS},He=(e={shouldSelect:!0})=>{const{shouldSelect:t}=e,{isEditor:o,previewData:r}=b(),n=null==r?void 0:r.previewCart,c=(0,m.useRef)(),s=(0,m.useRef)(je),a=(0,m.useRef)(Le);(0,m.useEffect)((()=>((()=>{if(window.wcBlocksStoreCartListeners||(window.wcBlocksStoreCartListeners={count:0,remove:()=>{}}),(null===(e=window.wcBlocksStoreCartListeners)||void 0===e?void 0:e.count)>0)return void window.wcBlocksStoreCartListeners.count++;var e;document.body.addEventListener("wc-blocks_added_to_cart",De),document.body.addEventListener("wc-blocks_removed_from_cart",De),window.addEventListener("pageshow",Oe);const t=Be("added_to_cart","wc-blocks_added_to_cart"),o=Be("removed_from_cart","wc-blocks_removed_from_cart");window.wcBlocksStoreCartListeners.count=1,window.wcBlocksStoreCartListeners.remove=()=>{document.body.removeEventListener("wc-blocks_added_to_cart",De),document.body.removeEventListener("wc-blocks_removed_from_cart",De),window.removeEventListener("pageshow",Oe),t(),o()}})(),Fe)),[]);const i=(0,_.useSelect)(((e,{dispatch:r})=>{if(!t)return $e;if(o)return{...$e,cartCoupons:n.coupons,cartItems:n.items,crossSellsProducts:n.cross_sells,cartFees:n.fees,cartItemsCount:n.items_count,cartItemsWeight:n.items_weight,cartNeedsPayment:n.needs_payment,cartNeedsShipping:n.needs_shipping,cartTotals:n.totals,shippingRates:n.shipping_rates,cartHasCalculatedShipping:n.has_calculated_shipping,paymentMethods:n.payment_methods,paymentRequirements:n.payment_requirements,cartIsLoading:!1,receiveCart:"function"==typeof(null==n?void 0:n.receiveCart)?n.receiveCart:()=>{},receiveCartContents:"function"==typeof(null==n?void 0:n.receiveCartContents)?n.receiveCartContents:()=>{}};const c=e(re.cartStore),i=c.getCartData(),l=c.getCartErrors(),m=c.getCartTotals(),d=!c.hasFinishedResolution("getCartData"),u=c.isCustomerDataUpdating(),{receiveCart:p,receiveCartContents:h}=r(re.cartStore),g=i.fees.length>0?i.fees.map((e=>Ue(e))):re.EMPTY_CART_FEES,_=i.coupons.length>0?i.coupons.map((e=>({...e,label:e.code}))):re.EMPTY_CART_COUPONS,k=Re(Ue(i.billingAddress)),b=i.needsShipping?Re(Ue(i.shippingAddress)):k;return Ce()(k,s.current)||(s.current=k),Ce()(b,a.current)||(a.current=b),{cartCoupons:_,cartItems:i.items,crossSellsProducts:i.crossSells,cartFees:g,cartItemsCount:i.itemsCount,cartItemsWeight:i.itemsWeight,cartNeedsPayment:i.needsPayment,cartNeedsShipping:i.needsShipping,cartItemErrors:i.errors,cartTotals:m,cartIsLoading:d,cartErrors:l,billingData:s.current,billingAddress:s.current,shippingAddress:a.current,extensions:i.extensions,shippingRates:i.shippingRates,isLoadingRates:u,cartHasCalculatedShipping:i.hasCalculatedShipping,paymentRequirements:i.paymentRequirements,receiveCart:p,receiveCartContents:h}}),[t,o]);return c.current&&Ce()(c.current,i)||(c.current=i),c.current},qe=e=>e.length,ze=(0,y.getSetting)("collectableMethodIds",[]),We=e=>ze.includes(e.method_id),Ye=e=>!!U&&(Array.isArray(e)?!!e.find((e=>ze.includes(e))):ze.includes(e)),Ge=e=>e.some((e=>!!e.shipping_rates.length)),Ke=e=>Object.fromEntries(e.map((({package_id:e,shipping_rates:t})=>{var o;return[e,(null===(o=t.find((e=>e.selected)))||void 0===o?void 0:o.rate_id)||""]})));var Ze=o(923),Je=o.n(Ze);const Xe={currency_code:y.SITE_CURRENCY.code,currency_symbol:y.SITE_CURRENCY.symbol,currency_minor_unit:y.SITE_CURRENCY.minorUnit,currency_decimal_separator:y.SITE_CURRENCY.decimalSeparator,currency_thousand_separator:y.SITE_CURRENCY.thousandSeparator,currency_prefix:y.SITE_CURRENCY.prefix,currency_suffix:y.SITE_CURRENCY.suffix},Qe=(e,t=2)=>{const o=y.SITE_CURRENCY.minorUnit;if(o===t||!e)return e;const r=Math.pow(10,o);return(Math.round(parseInt(e,10)/Math.pow(10,t))*r).toString()},et=(0,y.getSetting)("localPickupEnabled",!1),tt=(0,y.getSetting)("localPickupText",(0,M.__)("Local pickup","woocommerce")),ot=(0,y.getSetting)("localPickupCost",""),rt=et?(0,y.getSetting)("localPickupLocations",[]):[],nt=rt?Object.values(rt).map(((e,t)=>({...Xe,name:`${tt} (${e.name})`,description:"",delivery_time:"",price:Qe(ot,0)||"0",taxes:"0",rate_id:`pickup_location:${t+1}`,instance_id:t+1,meta_data:[{key:"pickup_location",value:e.name},{key:"pickup_address",value:e.formatted_address},{key:"pickup_details",value:e.details}],method_id:"pickup_location",selected:!1}))):[],ct=[{destination:{address_1:"",address_2:"",city:"",state:"",postcode:"",country:""},package_id:0,name:(0,M.__)("Shipping","woocommerce"),items:[{key:"33e75ff09dd601bbe69f351039152189",name:(0,M._x)("Beanie with Logo","example product in Cart Block","woocommerce"),quantity:2},{key:"6512bd43d9caa6e02c990b0a82652dca",name:(0,M._x)("Beanie","example product in Cart Block","woocommerce"),quantity:1}],shipping_rates:[{...Xe,name:(0,M.__)("Flat rate shipping","woocommerce"),description:"",delivery_time:"",price:Qe("500"),taxes:"0",rate_id:"flat_rate:0",instance_id:0,meta_data:[],method_id:"flat_rate",selected:!1},{...Xe,name:(0,M.__)("Free shipping","woocommerce"),description:"",delivery_time:"",price:"0",taxes:"0",rate_id:"free_shipping:1",instance_id:0,meta_data:[],method_id:"flat_rate",selected:!0},...nt]}],st=(0,y.getSetting)("displayCartPricesIncludingTax",!1),at={coupons:[],shipping_rates:(0,y.getSetting)("shippingMethodsExist",!1)||(0,y.getSetting)("localPickupEnabled",!1)?ct:[],items:[{key:"1",id:1,type:"simple",quantity:2,catalog_visibility:"visible",name:(0,M.__)("Beanie","woocommerce"),summary:(0,M.__)("Beanie","woocommerce"),short_description:(0,M.__)("Warm hat for winter","woocommerce"),description:"Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo.",sku:"woo-beanie",permalink:"https://example.org",low_stock_remaining:2,backorders_allowed:!1,show_backorder_badge:!1,sold_individually:!1,quantity_limits:{minimum:1,maximum:99,multiple_of:1,editable:!0},images:[{id:10,src:D+"previews/beanie.jpg",thumbnail:D+"previews/beanie.jpg",srcset:"",sizes:"",name:"",alt:""}],variation:[{attribute:(0,M.__)("Color","woocommerce"),value:(0,M.__)("Yellow","woocommerce")},{attribute:(0,M.__)("Size","woocommerce"),value:(0,M.__)("Small","woocommerce")}],prices:{...Xe,price:Qe(st?"12000":"10000"),regular_price:Qe(st?"120":"100"),sale_price:Qe(st?"12000":"10000"),price_range:null,raw_prices:{precision:6,price:st?"12000000":"10000000",regular_price:st?"12000000":"10000000",sale_price:st?"12000000":"10000000"}},totals:{...Xe,line_subtotal:Qe("2000"),line_subtotal_tax:Qe("400"),line_total:Qe("2000"),line_total_tax:Qe("400")},extensions:{},item_data:[]},{key:"2",id:2,type:"simple",quantity:1,catalog_visibility:"visible",name:(0,M.__)("Cap","woocommerce"),summary:(0,M.__)("Cap","woocommerce"),short_description:(0,M.__)("Lightweight baseball cap","woocommerce"),description:"Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo.",sku:"woo-cap",low_stock_remaining:null,permalink:"https://example.org",backorders_allowed:!1,show_backorder_badge:!1,sold_individually:!1,quantity_limits:{minimum:1,maximum:99,multiple_of:1,editable:!0},images:[{id:11,src:D+"previews/cap.jpg",thumbnail:D+"previews/cap.jpg",srcset:"",sizes:"",name:"",alt:""}],variation:[{attribute:(0,M.__)("Color","woocommerce"),value:(0,M.__)("Orange","woocommerce")}],prices:{...Xe,price:Qe(st?"2400":"2000"),regular_price:Qe(st?"2400":"2000"),sale_price:Qe(st?"2400":"2000"),price_range:null,raw_prices:{precision:6,price:st?"24000000":"20000000",regular_price:st?"24000000":"20000000",sale_price:st?"24000000":"20000000"}},totals:{...Xe,line_subtotal:Qe("2000"),line_subtotal_tax:Qe("400"),line_total:Qe("2000"),line_total_tax:Qe("400")},extensions:{},item_data:[]}],cross_sells:[{id:1,name:(0,M.__)("Polo","woocommerce"),slug:"polo",parent:0,type:"simple",variation:"",permalink:"https://example.org",sku:"woo-polo",short_description:(0,M.__)("Polo","woocommerce"),description:(0,M.__)("Polo","woocommerce"),on_sale:!1,prices:{...Xe,price:Qe(st?"24000":"20000"),regular_price:Qe(st?"24000":"20000"),sale_price:Qe(st?"12000":"10000"),price_range:null},price_html:"",average_rating:"4.5",review_count:2,images:[{id:17,src:D+"previews/polo.jpg",thumbnail:D+"previews/polo.jpg",srcset:"",sizes:"",name:"",alt:""}],categories:[],tags:[],attributes:[],variations:[],has_options:!1,is_purchasable:!0,is_in_stock:!0,is_on_backorder:!1,low_stock_remaining:null,sold_individually:!1,add_to_cart:{text:"",description:"",url:"",minimum:1,maximum:99,multiple_of:1}},{id:2,name:(0,M.__)("Long Sleeve Tee","woocommerce"),slug:"long-sleeve-tee",parent:0,type:"simple",variation:"",permalink:"https://example.org",sku:"woo-long-sleeve-tee",short_description:(0,M.__)("Long Sleeve Tee","woocommerce"),description:(0,M.__)("Long Sleeve Tee","woocommerce"),on_sale:!1,prices:{...Xe,price:Qe(st?"30000":"25000"),regular_price:Qe(st?"30000":"25000"),sale_price:Qe(st?"30000":"25000"),price_range:null},price_html:"",average_rating:"4",review_count:2,images:[{id:17,src:D+"previews/long-sleeve-tee.jpg",thumbnail:D+"previews/long-sleeve-tee.jpg",srcset:"",sizes:"",name:"",alt:""}],categories:[],tags:[],attributes:[],variations:[],has_options:!1,is_purchasable:!0,is_in_stock:!0,is_on_backorder:!1,low_stock_remaining:null,sold_individually:!1,add_to_cart:{text:"",description:"",url:"",minimum:1,maximum:99,multiple_of:1}},{id:3,name:(0,M.__)("Hoodie with Zipper","woocommerce"),slug:"hoodie-with-zipper",parent:0,type:"simple",variation:"",permalink:"https://example.org",sku:"woo-hoodie-with-zipper",short_description:(0,M.__)("Hoodie with Zipper","woocommerce"),description:(0,M.__)("Hoodie with Zipper","woocommerce"),on_sale:!0,prices:{...Xe,price:Qe(st?"15000":"12500"),regular_price:Qe(st?"30000":"25000"),sale_price:Qe(st?"15000":"12500"),price_range:null},price_html:"",average_rating:"1",review_count:2,images:[{id:17,src:D+"previews/hoodie-with-zipper.jpg",thumbnail:D+"previews/hoodie-with-zipper.jpg",srcset:"",sizes:"",name:"",alt:""}],categories:[],tags:[],attributes:[],variations:[],has_options:!1,is_purchasable:!0,is_in_stock:!0,is_on_backorder:!1,low_stock_remaining:null,sold_individually:!1,add_to_cart:{text:"",description:"",url:"",minimum:1,maximum:99,multiple_of:1}},{id:4,name:(0,M.__)("Hoodie with Logo","woocommerce"),slug:"hoodie-with-logo",parent:0,type:"simple",variation:"",permalink:"https://example.org",sku:"woo-hoodie-with-logo",short_description:(0,M.__)("Polo","woocommerce"),description:(0,M.__)("Polo","woocommerce"),on_sale:!1,prices:{...Xe,price:Qe(st?"4500":"4250"),regular_price:Qe(st?"4500":"4250"),sale_price:Qe(st?"4500":"4250"),price_range:null},price_html:"",average_rating:"5",review_count:2,images:[{id:17,src:D+"previews/hoodie-with-logo.jpg",thumbnail:D+"previews/hoodie-with-logo.jpg",srcset:"",sizes:"",name:"",alt:""}],categories:[],tags:[],attributes:[],variations:[],has_options:!1,is_purchasable:!0,is_in_stock:!0,is_on_backorder:!1,low_stock_remaining:null,sold_individually:!1,add_to_cart:{text:"",description:"",url:"",minimum:1,maximum:99,multiple_of:1}},{id:5,name:(0,M.__)("Hoodie with Pocket","woocommerce"),slug:"hoodie-with-pocket",parent:0,type:"simple",variation:"",permalink:"https://example.org",sku:"woo-hoodie-with-pocket",short_description:(0,M.__)("Hoodie with Pocket","woocommerce"),description:(0,M.__)("Hoodie with Pocket","woocommerce"),on_sale:!0,prices:{...Xe,price:Qe(st?"3500":"3250"),regular_price:Qe(st?"4500":"4250"),sale_price:Qe(st?"3500":"3250"),price_range:null},price_html:"",average_rating:"3.75",review_count:4,images:[{id:17,src:D+"previews/hoodie-with-pocket.jpg",thumbnail:D+"previews/hoodie-with-pocket.jpg",srcset:"",sizes:"",name:"",alt:""}],categories:[],tags:[],attributes:[],variations:[],has_options:!1,is_purchasable:!0,is_in_stock:!0,is_on_backorder:!1,low_stock_remaining:null,sold_individually:!1,add_to_cart:{text:"",description:"",url:"",minimum:1,maximum:99,multiple_of:1}},{id:6,name:(0,M.__)("T-Shirt","woocommerce"),slug:"t-shirt",parent:0,type:"simple",variation:"",permalink:"https://example.org",sku:"woo-t-shirt",short_description:(0,M.__)("T-Shirt","woocommerce"),description:(0,M.__)("T-Shirt","woocommerce"),on_sale:!1,prices:{...Xe,price:Qe(st?"1800":"1500"),regular_price:Qe(st?"1800":"1500"),sale_price:Qe(st?"1800":"1500"),price_range:null},price_html:"",average_rating:"3",review_count:2,images:[{id:17,src:D+"previews/tshirt.jpg",thumbnail:D+"previews/tshirt.jpg",srcset:"",sizes:"",name:"",alt:""}],categories:[],tags:[],attributes:[],variations:[],has_options:!1,is_purchasable:!0,is_in_stock:!0,is_on_backorder:!1,low_stock_remaining:null,sold_individually:!1,add_to_cart:{text:"",description:"",url:"",minimum:1,maximum:99,multiple_of:1}}],fees:[{id:"fee",name:(0,M.__)("Fee","woocommerce"),totals:{...Xe,total:Qe("100"),total_tax:Qe("20")}}],items_count:3,items_weight:0,needs_payment:!0,needs_shipping:$,has_calculated_shipping:!0,shipping_address:{first_name:"",last_name:"",company:"",address_1:"",address_2:"",city:"",state:"",postcode:"",country:"",phone:""},billing_address:{first_name:"",last_name:"",company:"",address_1:"",address_2:"",city:"",state:"",postcode:"",country:"",email:"",phone:""},totals:{...Xe,total_items:Qe("4000"),total_items_tax:Qe("800"),total_fees:Qe("100"),total_fees_tax:Qe("20"),total_discount:"0",total_discount_tax:"0",total_shipping:"0",total_shipping_tax:"0",total_tax:Qe("820"),total_price:Qe("4920"),tax_lines:[{name:(0,M.__)("Sales tax","woocommerce"),rate:"20%",price:Qe("820")}]},errors:[],payment_methods:["cod","bacs","cheque"],payment_requirements:["products"],extensions:{}},it=window.wp.hooks,lt=()=>({dispatchStoreEvent:(0,m.useCallback)(((e,t={})=>{try{(0,it.doAction)(`experimental__woocommerce_blocks-${e}`,t)}catch(e){console.error(e)}}),[]),dispatchCheckoutEvent:(0,m.useCallback)(((e,t={})=>{try{(0,it.doAction)(`experimental__woocommerce_blocks-checkout-${e}`,{...t,storeCart:(0,_.select)("wc/store/cart").getCartData()})}catch(e){console.error(e)}}),[])}),mt=()=>{const{isEditor:e}=b(),{shippingRates:t,needsShipping:o,hasCalculatedShipping:r,isLoadingRates:n,isCollectable:c,isSelectingRate:s}=(0,_.useSelect)((t=>{const o=t(re.cartStore),r=e?at.shipping_rates:o.getShippingRates();return{shippingRates:r,needsShipping:e?at.needs_shipping:o.getNeedsShipping(),hasCalculatedShipping:e?at.has_calculated_shipping:o.getHasCalculatedShipping(),isLoadingRates:!e&&o.isCustomerDataUpdating(),isCollectable:r.every((({shipping_rates:e})=>e.find((({method_id:e})=>Ye(e))))),isSelectingRate:!e&&o.isShippingRateBeingSelected()}}),[e]),a=(0,m.useRef)({});(0,m.useEffect)((()=>{const e=Ke(t);(0,ye.isObject)(e)&&!Je()(a.current,e)&&(a.current=e)}),[t]);const{selectShippingRate:i}=(0,_.useDispatch)(re.cartStore),l=Ye(Object.values(a.current).map((e=>e.split(":")[0]))),{dispatchCheckoutEvent:d}=lt(),u=(0,m.useCallback)(((e,t)=>{let o;void 0!==e&&(o=Ye(e.split(":")[0])?i(e,null):i(e,t),o.then((()=>{d("set-selected-shipping-rate",{shippingRateId:e})})).catch((e=>{(0,re.processErrorResponse)(e)})))}),[i,d]);return{isSelectingRate:s,selectedRates:a.current,selectShippingRate:u,shippingRates:t,needsShipping:o,hasCalculatedShipping:r,isLoadingRates:n,isCollectable:c,hasSelectedLocalPickup:l}},{NONE:dt,INVALID_ADDRESS:ut,UNKNOWN:pt}=ue,ht=(0,m.createContext)(he),gt=()=>(0,m.useContext)(ht),_t=({children:e})=>{const{__internalIncrementCalculating:t,__internalDecrementCalculating:o}=(0,_.useDispatch)(re.checkoutStore),{shippingRates:n,isLoadingRates:c,cartErrors:s}=He(),{selectedRates:a,isSelectingRate:i}=mt(),[l,d]=(0,m.useReducer)(ge,dt),[u,p]=(0,m.useReducer)(ie,{}),h=(0,m.useRef)(u),g=(0,m.useMemo)((()=>({onShippingRateSuccess:Ee(p).onSuccess,onShippingRateFail:Ee(p).onFail,onShippingRateSelectSuccess:Ee(p).onSelectSuccess,onShippingRateSelectFail:Ee(p).onSelectFail})),[p]);(0,m.useEffect)((()=>{h.current=u}),[u]),(0,m.useEffect)((()=>{c?t():o()}),[c,t,o]),(0,m.useEffect)((()=>{i?t():o()}),[t,o,i]),(0,m.useEffect)((()=>{s.length>0&&s.some((e=>!(!e.code||!Object.values(pe).includes(e.code))))?d({type:ut}):d({type:dt})}),[s]);const k=(0,m.useMemo)((()=>({isPristine:l===dt,isValid:l===dt,hasInvalidAddress:l===ut,hasError:l===pt||l===ut})),[l]);(0,m.useEffect)((()=>{c||0!==n.length&&!k.hasError||fe(h.current,ke,{hasInvalidAddress:k.hasInvalidAddress,hasError:k.hasError})}),[n,c,k.hasError,k.hasInvalidAddress]),(0,m.useEffect)((()=>{!c&&n.length>0&&!k.hasError&&fe(h.current,_e,n)}),[n,c,k.hasError]),(0,m.useEffect)((()=>{i||(k.hasError?fe(h.current,we,{hasError:k.hasError,hasInvalidAddress:k.hasInvalidAddress}):fe(h.current,be,a.current))}),[a,i,k.hasError,k.hasInvalidAddress]);const b={shippingErrorStatus:k,dispatchErrorStatus:d,shippingErrorTypes:ue,...g};return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(ht.Provider,{value:b},e))};function kt(e,t){const o=(0,m.useRef)();return(0,m.useEffect)((()=>{o.current===e||t&&!t(e,o.current)||(o.current=e)}),[e,t]),o.current}const bt=window.wp.notices,wt=window.wc.blocksCheckoutEvents,Et={},yt={},vt=()=>Et,ft=()=>yt,St=(0,m.createContext)({onSubmit:()=>{},onCheckoutAfterProcessingWithSuccess:()=>()=>{},onCheckoutAfterProcessingWithError:()=>()=>{},onCheckoutBeforeProcessing:()=>()=>{},onCheckoutValidationBeforeProcessing:()=>()=>{},onCheckoutSuccess:()=>()=>{},onCheckoutFail:()=>()=>{},onCheckoutValidation:()=>()=>{}}),Ct=({children:e,redirectUrl:t})=>{const o=vt(),n=ft(),{isEditor:c}=b(),{__internalUpdateAvailablePaymentMethods:s}=(0,_.useDispatch)(re.paymentStore);(0,m.useEffect)((()=>{(c||0!==Object.keys(o).length||0!==Object.keys(n).length)&&s()}),[c,o,n,s]);const{__internalSetRedirectUrl:a,__internalEmitValidateEvent:i,__internalEmitAfterProcessingEvents:l,__internalSetBeforeProcessing:d}=(0,_.useDispatch)(re.checkoutStore),{checkoutRedirectUrl:u,checkoutStatus:p,isCheckoutBeforeProcessing:h,isCheckoutAfterProcessing:g,checkoutHasError:k,checkoutOrderId:w,checkoutOrderNotes:E,checkoutCustomerId:y}=(0,_.useSelect)((e=>{const t=e(re.checkoutStore);return{checkoutRedirectUrl:t.getRedirectUrl(),checkoutStatus:t.getCheckoutStatus(),isCheckoutBeforeProcessing:t.isBeforeProcessing(),isCheckoutAfterProcessing:t.isAfterProcessing(),checkoutHasError:t.hasError(),checkoutOrderId:t.getOrderId(),checkoutOrderNotes:t.getOrderNotes(),checkoutCustomerId:t.getCustomerId()}}));t&&t!==u&&a(t);const{setValidationErrors:v}=(0,_.useDispatch)(re.validationStore),{dispatchCheckoutEvent:f}=lt(),S=Object.values(ve).filter((e=>e!==ve.PAYMENTS&&e!==ve.EXPRESS_PAYMENTS)),C=(0,_.useSelect)((e=>{const{getNotices:t}=e(bt.store);return S.reduce(((e,o)=>[...e,...t(o)]),[])}),[S]),{paymentNotices:P,expressPaymentNotices:N}=(0,_.useSelect)((e=>{const{getNotices:t}=e(bt.store);return{paymentNotices:t(ve.PAYMENTS),expressPaymentNotices:t(ve.EXPRESS_PAYMENTS)}}),[]),[A]=(0,m.useReducer)(ie,{}),x=(0,m.useRef)(A),{onCheckoutValidation:I,onCheckoutSuccess:R,onCheckoutFail:T}=wt.checkoutEvents;(0,m.useEffect)((()=>{x.current=A}),[A]);const M=(0,m.useMemo)((()=>function(...e){return ce()("onCheckoutBeforeProcessing",{alternative:"onCheckoutValidation",plugin:"WooCommerce Blocks"}),I(...e)}),[I]),B=(0,m.useMemo)((()=>function(...e){return ce()("onCheckoutValidationBeforeProcessing",{since:"9.7.0",alternative:"onCheckoutValidation",plugin:"WooCommerce Blocks",link:"https://github.com/woocommerce/woocommerce-blocks/pull/8381"}),I(...e)}),[I]),D=(0,m.useMemo)((()=>function(...e){return ce()("onCheckoutAfterProcessingWithSuccess",{since:"9.7.0",alternative:"onCheckoutSuccess",plugin:"WooCommerce Blocks",link:"https://github.com/woocommerce/woocommerce-blocks/pull/8381"}),R(...e)}),[R]),O=(0,m.useMemo)((()=>function(...e){return ce()("onCheckoutAfterProcessingWithError",{since:"9.7.0",alternative:"onCheckoutFail",plugin:"WooCommerce Blocks",link:"https://github.com/woocommerce/woocommerce-blocks/pull/8381"}),T(...e)}),[T]);(0,m.useEffect)((()=>{h&&i({setValidationErrors:v})}),[h,v,i]);const F=kt(p),L=kt(k);(0,m.useEffect)((()=>{p===F&&k===L||g&&l({notices:{checkoutNotices:C,paymentNotices:P,expressPaymentNotices:N}})}),[p,k,u,w,y,E,g,h,F,L,C,N,P,i,l]);const j={onSubmit:(0,m.useCallback)((()=>{f("submit"),d()}),[f,d]),onCheckoutBeforeProcessing:M,onCheckoutValidationBeforeProcessing:B,onCheckoutAfterProcessingWithSuccess:D,onCheckoutAfterProcessingWithError:O,onCheckoutSuccess:R,onCheckoutFail:T,onCheckoutValidation:I};return(0,r.createElement)(St.Provider,{value:j},e)},Pt=window.wp.apiFetch;var Nt=o.n(Pt);(0,M.__)("Something went wrong. Please contact us to get assistance.","woocommerce");const At=window.wc.wcBlocksRegistry,xt=(e,t,o)=>{const r=Object.keys(e).map((t=>({key:t,value:e[t]})),[]),n=`wc-${o}-new-payment-method`;return r.push({key:n,value:t}),r},It=e=>{if(!e)return;const{__internalSetCustomerId:t}=(0,_.dispatch)(re.checkoutStore);Nt().setNonce&&"function"==typeof Nt().setNonce&&Nt().setNonce(e),Nt().setCartHash&&"function"==typeof Nt().setCartHash&&Nt().setCartHash(e),null!=e&&e.get("User-ID")&&t(parseInt(e.get("User-ID")||"0",10))},Rt=()=>{const{onCheckoutValidation:e}=wt.checkoutEvents,{additionalFields:t,customerId:o,customerPassword:r,extensionData:n,hasError:c,isBeforeProcessing:s,isComplete:a,isProcessing:i,orderNotes:l,redirectUrl:d,shouldCreateAccount:u}=(0,_.useSelect)((e=>{const t=e(re.checkoutStore);return{additionalFields:t.getAdditionalFields(),customerId:t.getCustomerId(),customerPassword:t.getCustomerPassword(),extensionData:t.getExtensionData(),hasError:t.hasError(),isBeforeProcessing:t.isBeforeProcessing(),isComplete:t.isComplete(),isProcessing:t.isProcessing(),orderNotes:t.getOrderNotes(),redirectUrl:t.getRedirectUrl(),shouldCreateAccount:t.getShouldCreateAccount()}})),{__internalSetHasError:p,__internalProcessCheckoutResponse:h}=(0,_.useDispatch)(re.checkoutStore),g=(0,_.useSelect)((e=>e(re.validationStore).hasValidationErrors)),{shippingErrorStatus:k}=gt(),{billingAddress:b,shippingAddress:w}=(0,_.useSelect)((e=>e(re.cartStore).getCustomerData())),{cartNeedsPayment:E,cartNeedsShipping:y,receiveCartContents:v}=He(),{activePaymentMethod:f,paymentMethodData:S,isExpressPaymentMethodActive:C,hasPaymentError:P,isPaymentReady:N,shouldSavePayment:A}=(0,_.useSelect)((e=>{const t=e(re.paymentStore);return{activePaymentMethod:t.getActivePaymentMethod(),paymentMethodData:t.getPaymentMethodData(),isExpressPaymentMethodActive:t.isExpressPaymentMethodActive(),hasPaymentError:t.hasPaymentError(),isPaymentReady:t.isPaymentReady(),shouldSavePayment:t.getShouldSavePaymentMethod()}}),[]),x=(0,At.getPaymentMethods)(),I=(0,At.getExpressPaymentMethods)(),R=(0,m.useRef)(b),T=(0,m.useRef)(w),B=(0,m.useRef)(d),[D,O]=(0,m.useState)(!1),F=(0,m.useMemo)((()=>{var e;const t={...I,...x};return null==t||null===(e=t[f])||void 0===e?void 0:e.paymentMethodId}),[f,I,x]),L=g()&&!C||P||k.hasError,j=!c&&!L&&(N||!E)&&i;(0,m.useEffect)((()=>{L===c||!i&&!s||C||p(L)}),[L,c,i,s,C,p]),(0,m.useEffect)((()=>{R.current=b,T.current=w,B.current=d}),[b,w,d]);const V=(0,m.useCallback)((()=>g()?void 0!==(0,_.select)(re.validationStore).getValidationError("shipping-rates-error")&&{errorMessage:(0,M.__)("Sorry, this order requires a shipping option.","woocommerce")}:P?{errorMessage:(0,M.__)("There was a problem with your payment option.","woocommerce"),context:"wc/checkout/payments"}:!k.hasError||{errorMessage:(0,M.__)("There was a problem with your shipping option.","woocommerce"),context:"wc/checkout/shipping-methods"}),[g,P,k.hasError]);(0,m.useEffect)((()=>{let t;return C||(t=e(V,0)),()=>{C||"function"!=typeof t||t()}}),[e,V,C]),(0,m.useEffect)((()=>{window.localStorage.removeItem("WOOCOMMERCE_CHECKOUT_IS_CUSTOMER_DATA_DIRTY"),B.current&&(window.location.href=B.current)}),[a]);const U=(0,m.useCallback)((async()=>{if(D)return;O(!0),(()=>{const e=(0,_.select)("wc/store/store-notices").getRegisteredContainers(),{removeNotice:t}=(0,_.dispatch)(bt.store),{getNotices:o}=(0,_.select)(bt.store);e.forEach((e=>{o(e).forEach((o=>{t(o.id,e)}))}))})();const e=E?{payment_method:F,payment_data:xt(S,A,f)}:{},c={additional_fields:t,billing_address:Re(R.current),create_account:u,customer_note:l,customer_password:r,extensions:{...n},shipping_address:y?Re(T.current):void 0,...e};(0,re.clearCheckoutPutRequests)(),Nt()({path:"/wc/store/v1/checkout",method:"POST",data:c,cache:"no-store",parse:!1}).then((e=>{if((0,ye.assertResponseIsValid)(e),It(e.headers),!e.ok)throw e;return e.json()})).then((e=>{h(e),O(!1)})).catch((e=>{It(null==e?void 0:e.headers);try{e.json().then((e=>e)).then((e=>{var t;null!==(t=e.data)&&void 0!==t&&t.cart&&v(e.data.cart),(0,re.processErrorResponse)(e),h(e)}))}catch{let e=(0,M.__)("Something went wrong when placing the order. Check your email for order updates before retrying.","woocommerce");0!==o&&(e=(0,M.__)("Something went wrong when placing the order. Check your account's order history or your email for order updates before retrying.","woocommerce")),(0,re.processErrorResponse)({code:"unknown_error",message:e,data:null})}p(!0),O(!1)}))}),[D,E,F,S,A,f,l,u,o,r,n,t,y,v,p,h]);return(0,m.useEffect)((()=>{j&&!D&&U()}),[U,j,D]),null},Tt=({children:e,redirectUrl:t})=>(0,r.createElement)(Ct,{redirectUrl:t},(0,r.createElement)(_t,null,(0,r.createElement)(de,null,e,(0,r.createElement)(oe,{renderError:y.CURRENT_USER_IS_ADMIN?null:()=>null},(0,r.createElement)(E.PluginArea,{scope:"woocommerce-checkout"})),(0,r.createElement)(Rt,null)))),Mt={cc:[{method:{gateway:"credit-card",last4:"5678",brand:"Visa"},expires:"12/20",is_default:!1,tokenId:"1"}]},Bt=window.wc.blocksCheckout,Dt=window.wp.coreData;var Ot=o(2172);const Ft=(0,m.forwardRef)((({children:e,className:t=""},o)=>(0,r.createElement)("div",{ref:o,className:(0,n.A)("wc-block-components-main",t)},e))),Lt={showOrderNotes:!0,showPolicyLinks:!0,showReturnToCart:!0,cartPageId:0,showRateAfterTaxName:!1,showFormStepNumbers:!1,defaultFields:y.defaultFields},jt=(0,m.createContext)(Lt),Vt=()=>{const e=(0,m.useContext)(jt);return{...Lt,...e}},Ut=["core/paragraph","core/image","core/separator"],$t=e=>{const t=(0,Bt.applyCheckoutFilter)({filterName:"additionalCartCheckoutInnerBlockTypes",defaultValue:[],extensions:(0,_.select)(re.cartStore).getCartData().extensions,arg:{block:e},validation:e=>{if(Array.isArray(e)&&e.every((e=>"string"==typeof e)))return!0;throw new Error("allowedBlockTypes filters must return an array of strings.")}});return Array.from(new Set([...(0,i.getBlockTypes)().filter((t=>((null==t?void 0:t.parent)||[]).includes(e))).map((({name:e})=>e)),...Ut,...t]))},Ht=({clientId:e,registeredBlocks:t,defaultTemplate:o=[]})=>{const r=(0,m.useRef)(t),n=(0,m.useRef)(o),c=(0,_.useRegistry)(),{isPreview:s}=b();(0,m.useEffect)((()=>{let t=!1;if(s)return;const{replaceInnerBlocks:o}=(0,_.dispatch)("core/block-editor");return c.subscribe((()=>{if(!c.select("core/block-editor").getBlock(e))return;const s=c.select("core/block-editor").getBlocks(e);if(0===s.length&&n.current.length>0&&!t){const r=(0,i.createBlocksFromInnerBlocksTemplate)(n.current);if(0!==r.length)return t=!0,void o(e,r)}const a=r.current.map((e=>(0,i.getBlockType)(e))),l=((e,t)=>{const o=t.filter((e=>e&&(({attributes:e})=>{var t,o;return Boolean((null===(t=e.lock)||void 0===t?void 0:t.remove)||(null===(o=e.lock)||void 0===o||null===(o=o.default)||void 0===o?void 0:o.remove))})(e))),r=[];return o.forEach((t=>{if(void 0===t)return;const o=e.find((e=>e.name===t.name));o||r.push(t)})),r})(s,a);if(0===l.length)return;let m=-1;const d=l.map((e=>{const t=n.current.findIndex((([t])=>t===e.name)),o=(0,i.createBlock)(e.name);return-1===m&&(m=(({defaultTemplatePosition:e,innerBlocks:t,currentDefaultTemplate:o})=>{switch(e){case-1:return t.length;case 0:return 0;default:const r=o.current[e-1],n=t.findIndex((({name:e})=>e===r[0]));return-1===n?e:n+1}})({defaultTemplatePosition:t,innerBlocks:s,currentDefaultTemplate:n})),o}));c.batch((()=>{c.dispatch("core/block-editor").insertBlocks(d,m,e)}))}),"core/block-editor")}),[e,s,c])};o(6619);const qt=window.wp.components,zt=()=>{const{defaultFields:e}=Vt(),t=(e,t)=>{["phone","company","address_2"].includes(e)&&["optional","required","hidden"].includes(t)&&(0,_.dispatch)(Dt.store).editEntityRecord("root","site",void 0,{[`woocommerce_checkout_${e}_field`]:t})},o=[{label:(0,M.__)("Optional","woocommerce"),value:"false"},{label:(0,M.__)("Required","woocommerce"),value:"true"}];return(0,r.createElement)(l.InspectorControls,null,(0,r.createElement)(qt.PanelBody,{title:(0,M.__)("Address Fields","woocommerce")},(0,r.createElement)("p",{className:"wc-block-checkout__controls-text"},(0,M.__)("Show or hide fields in the checkout address forms.","woocommerce")),(0,r.createElement)(qt.ToggleControl,{label:(0,M.__)("Company","woocommerce"),checked:!e.company.hidden,onChange:()=>{e.company.hidden?t("company","optional"):t("company","hidden")}}),!e.company.hidden&&(0,r.createElement)(qt.RadioControl,{selected:e.company.required?"true":"false",options:o,onChange:e=>{t("company","true"===e?"required":"optional")},className:"components-base-control--nested wc-block-components-require-company-field"}),(0,r.createElement)(qt.ToggleControl,{label:(0,M.__)("Address line 2","woocommerce"),checked:!e.address_2.hidden,onChange:()=>{e.address_2.hidden?t("address_2","optional"):t("address_2","hidden")}}),!e.address_2.hidden&&(0,r.createElement)(qt.RadioControl,{selected:e.address_2.required?"true":"false",options:o,onChange:e=>{t("address_2","true"===e?"required":"optional")},className:"components-base-control--nested wc-block-components-require-address_2-field"}),(0,r.createElement)(qt.ToggleControl,{label:(0,M.__)("Phone","woocommerce"),checked:!e.phone.hidden,onChange:()=>{e.phone.hidden?t("phone","optional"):t("phone","hidden")}}),!e.phone.hidden&&(0,r.createElement)(qt.RadioControl,{selected:e.phone.required?"true":"false",options:o,onChange:e=>{t("phone","true"===e?"required":"optional")},className:"components-base-control--nested wc-block-components-require-phone-field"})))};(0,i.registerBlockType)("woocommerce/checkout-fields-block",{icon:{src:(0,r.createElement)(a.A,{icon:Ot.A,className:"wc-block-editor-components-block-icon"})},edit:({clientId:e,attributes:t})=>{const o=(0,l.useBlockProps)({className:(0,n.A)("wc-block-checkout__main",null==t?void 0:t.className)}),c=$t(Bt.innerBlockAreas.CHECKOUT_FIELDS),{showFormStepNumbers:s}=Vt(),a=[["woocommerce/checkout-express-payment-block",{},[]],["woocommerce/checkout-contact-information-block",{},[]],["woocommerce/checkout-shipping-method-block",{},[]],["woocommerce/checkout-pickup-options-block",{},[]],["woocommerce/checkout-shipping-address-block",{},[]],["woocommerce/checkout-billing-address-block",{},[]],["woocommerce/checkout-shipping-methods-block",{},[]],["woocommerce/checkout-payment-block",{},[]],["woocommerce/checkout-additional-information-block",{},[]],["woocommerce/checkout-order-note-block",{},[]],["woocommerce/checkout-terms-block",{},[]],["woocommerce/checkout-actions-block",{},[]]].filter(Boolean);return Ht({clientId:e,registeredBlocks:c,defaultTemplate:a}),(0,r.createElement)(Ft,{...o},(0,r.createElement)(zt,null),(0,r.createElement)("form",{className:(0,n.A)("wc-block-components-form wc-block-checkout__form",{"wc-block-checkout__form--with-step-numbers":s})},(0,r.createElement)(l.InnerBlocks,{allowedBlocks:c,templateLock:!1,template:a,renderAppender:l.InnerBlocks.ButtonBlockAppender})))},save:()=>(0,r.createElement)("div",{...l.useBlockProps.save()},(0,r.createElement)(l.InnerBlocks.Content,null))});const Wt=(0,m.forwardRef)((({children:e,className:t=""},o)=>(0,r.createElement)("div",{ref:o,className:(0,n.A)("wc-block-components-sidebar",t)},e)));o(7765),(0,i.registerBlockType)("woocommerce/checkout-totals-block",{icon:{src:(0,r.createElement)(a.A,{icon:Ot.A,className:"wc-block-editor-components-block-icon"})},edit:({clientId:e,attributes:t})=>{const o=(0,l.useBlockProps)({className:(0,n.A)("wc-block-checkout__sidebar",null==t?void 0:t.className)}),c=$t(Bt.innerBlockAreas.CHECKOUT_TOTALS),s=[["woocommerce/checkout-order-summary-block",{},[]]];return Ht({clientId:e,registeredBlocks:c,defaultTemplate:s}),(0,r.createElement)(Wt,{...o},(0,r.createElement)(l.InnerBlocks,{allowedBlocks:c,templateLock:!1,template:s,renderAppender:l.InnerBlocks.ButtonBlockAppender}))},save:()=>(0,r.createElement)("div",{...l.useBlockProps.save()},(0,r.createElement)(l.InnerBlocks.Content,null))});var Yt=o(601);const Gt=()=>{const{customerData:e,isInitialized:t}=(0,_.useSelect)((e=>{const t=e(re.cartStore);return{customerData:t.getCustomerData(),isInitialized:t.hasFinishedResolution("getCartData")}})),{setShippingAddress:o,setBillingAddress:r}=(0,_.useDispatch)(re.cartStore);return{isInitialized:t,billingAddress:e.billingAddress,shippingAddress:e.shippingAddress,setBillingAddress:r,setShippingAddress:o}},Kt=()=>{const{isEditor:e,getPreviewData:t}=b(),{needsShipping:o}=mt(),{useShippingAsBilling:r,prefersCollection:n,editingBillingAddress:c,editingShippingAddress:s}=(0,_.useSelect)((e=>({useShippingAsBilling:e(re.checkoutStore).getUseShippingAsBilling(),prefersCollection:e(re.checkoutStore).prefersCollection(),editingBillingAddress:e(re.checkoutStore).getEditingBillingAddress(),editingShippingAddress:e(re.checkoutStore).getEditingShippingAddress()}))),{__internalSetUseShippingAsBilling:a,setEditingBillingAddress:i,setEditingShippingAddress:l}=(0,_.useDispatch)(re.checkoutStore),{billingAddress:d,setBillingAddress:u,shippingAddress:p,setShippingAddress:h}=Gt(),g=(0,m.useCallback)((e=>{u({email:e})}),[u]),k=(0,y.getSetting)("forcedBillingAddress",!1);return{shippingAddress:p,billingAddress:d,setShippingAddress:h,setBillingAddress:u,setEmail:g,defaultFields:e?t("defaultFields",y.defaultFields):y.defaultFields,useShippingAsBilling:r,setUseShippingAsBilling:a,editingBillingAddress:c,editingShippingAddress:s,setEditingBillingAddress:i,setEditingShippingAddress:l,needsShipping:o,showShippingFields:!k&&o&&!n,showShippingMethods:o&&!n,showBillingFields:!o||!r||!!n,forcedBillingAddress:k,useBillingAsShipping:k||!!n}},Zt=window.wc.blocksComponents,Jt=({children:e,stepHeadingContent:t})=>(0,r.createElement)("div",{className:"wc-block-components-checkout-step__heading"},(0,r.createElement)(Zt.Title,{"aria-hidden":"true",className:"wc-block-components-checkout-step__title",headingLevel:"2"},e),!!t&&(0,r.createElement)("span",{className:"wc-block-components-checkout-step__heading-content"},t)),Xt=({attributes:e,setAttributes:t,className:o="",children:c})=>{const{showFormStepNumbers:s}=Vt(),{title:a="",description:i=""}=e,m=(0,l.useBlockProps)({className:(0,n.A)("wc-block-components-checkout-step",o,{"wc-block-components-checkout-step--with-step-number":s})});return(0,r.createElement)("div",{...m},(0,r.createElement)(Jt,null,(0,r.createElement)(l.PlainText,{className:"",value:a,onChange:e=>t({title:e}),style:{backgroundColor:"transparent"}})),(0,r.createElement)("div",{className:"wc-block-components-checkout-step__container"},(0,r.createElement)("p",{className:"wc-block-components-checkout-step__description"},(0,r.createElement)(l.PlainText,{className:i?"":"wc-block-components-checkout-step__description-placeholder",value:i,placeholder:(0,M.__)("Optional text for this form step.","woocommerce"),onChange:e=>t({description:e}),style:{backgroundColor:"transparent"}})),(0,r.createElement)("div",{className:"wc-block-components-checkout-step__content"},c)))};o(6664);const Qt=({block:e})=>{const{"data-block":t}=(0,l.useBlockProps)(),o=$t(e);return Ht({clientId:t,registeredBlocks:o}),(0,r.createElement)("div",{className:"wc-block-checkout__additional_fields"},(0,r.createElement)(l.InnerBlocks,{allowedBlocks:o}))},eo=()=>(0,r.createElement)(l.InnerBlocks.Content,null);var to=o(4375),oo=o(8107),ro=o(4717);const no=["BUTTON","FIELDSET","INPUT","OPTGROUP","OPTION","SELECT","TEXTAREA","A"],co=({children:e,style:t={},...o})=>{const n=(0,m.useRef)(null),c=()=>{n.current&&oo.focus.focusable.find(n.current).forEach((e=>{no.includes(e.nodeName)&&e.setAttribute("tabindex","-1"),e.hasAttribute("contenteditable")&&e.setAttribute("contenteditable","false")}))},s=(0,ro.YQ)(c,0,{leading:!0});return(0,m.useLayoutEffect)((()=>{let e;return c(),n.current&&(e=new window.MutationObserver(s),e.observe(n.current,{childList:!0,attributes:!0,subtree:!0})),()=>{e&&e.disconnect(),s.cancel()}}),[s]),(0,r.createElement)("div",{ref:n,"aria-disabled":"true",style:{userSelect:"none",pointerEvents:"none",cursor:"normal",...t},...o},e)};o(2931);var so=o(224);o(5452);const ao=e=>{const{onChange:t,options:o,label:c,value:s="",className:i,size:l,errorId:d,required:u,errorMessage:p=(0,M.__)("Please select a valid option","woocommerce"),placeholder:h,...g}=e,k=(0,m.useCallback)((e=>{t(e.target.value)}),[t]),b=(0,Bt.getFieldLabel)(c),w=(0,m.useMemo)((()=>({value:"",label:null!=h?h:(0,M.sprintf)(
// translators: %s will be label of the field. For example "country/region".
// translators: %s will be label of the field. For example "country/region".
(0,M.__)("Select a %s","woocommerce"),b),disabled:!!u})),[h,u,b]),E=(0,m.useId)(),y=g.id||`wc-blocks-components-select-${E}`,v=d||y,f=(0,m.useMemo)((()=>u&&s?o:[w].concat(o)),[u,s,w,o]),{setValidationErrors:S,clearValidationError:C}=(0,_.useDispatch)(re.validationStore),{error:P,validationErrorId:N}=(0,_.useSelect)((e=>{const t=e(re.validationStore);return{error:t.getValidationError(v),validationErrorId:t.getValidationErrorId(v)}}),[v]);(0,m.useEffect)((()=>(!u||s?C(v):S({[v]:{message:p,hidden:!0}}),()=>{C(v)})),[C,s,v,p,u,S]);const A=(0,_.useSelect)((e=>e(re.validationStore).getValidationError(v||"")||{hidden:!0}),[v]);return(0,r.createElement)("div",{className:(0,n.A)(i,{"has-error":!A.hidden})},(0,r.createElement)("div",{className:"wc-blocks-components-select"},(0,r.createElement)("div",{className:"wc-blocks-components-select__container"},(0,r.createElement)("label",{htmlFor:y,className:"wc-blocks-components-select__label"},c),(0,r.createElement)("select",{className:"wc-blocks-components-select__select",id:y,size:void 0!==l?l:1,onChange:k,value:s,"aria-invalid":!(null==P||!P.message||null!=P&&P.hidden),"aria-errormessage":N,...g},f.map((e=>(0,r.createElement)("option",{key:e.value,value:e.value,"data-alternate-values":`[${e.label}]`,disabled:void 0!==e.disabled&&e.disabled},e.label)))),(0,r.createElement)(a.A,{className:"wc-blocks-components-select__expand",icon:so.A}))),(0,r.createElement)(Zt.ValidationInputError,{propertyName:v}))},io=({className:e,countries:t,id:o,label:c,onChange:s,value:a="",autoComplete:i="off",required:l=!1})=>{const d=(0,m.useMemo)((()=>Object.entries(t).map((([e,t])=>({value:e,label:(0,Pe.decodeEntities)(t)})))),[t]);return(0,r.createElement)(ao,{className:(0,n.A)(e,"wc-block-components-country-input"),id:o,label:c||"",onChange:s,options:d,value:a,required:l,autoComplete:i})},lo=e=>{const{...t}=e;return(0,r.createElement)(io,{countries:z,...t})},mo=e=>(0,r.createElement)(io,{countries:Y,...e});o(8824);const uo=(e,t)=>{const o=t.find((t=>t.label.toLocaleUpperCase()===e.toLocaleUpperCase()||t.value.toLocaleUpperCase()===e.toLocaleUpperCase()));return o?o.value:""},po=({className:e,id:t,states:o,country:c,label:s,onChange:a,autoComplete:i="off",value:l="",required:d=!1})=>{const u=o[c],p=(0,m.useMemo)((()=>u&&Object.keys(u).length>0?Object.keys(u).map((e=>({value:e,label:(0,Pe.decodeEntities)(u[e])}))):[]),[u]),h=(0,m.useCallback)((e=>{const t=p.length>0?uo(e,p):e;t!==l&&a(t)}),[a,p,l]),g=(0,m.useRef)(l);return(0,m.useEffect)((()=>{g.current!==l&&(g.current=l)}),[l]),(0,m.useEffect)((()=>{if(p.length>0&&g.current){const e=uo(g.current,p);e!==g.current&&h(e)}}),[p,h]),p.length>0?(0,r.createElement)(ao,{className:(0,n.$)(e,"wc-block-components-state-input"),options:p,label:s||"",id:t,onChange:h,value:l,autoComplete:i,required:d}):(0,r.createElement)(Zt.ValidatedTextInput,{className:e,id:t,label:s,onChange:h,autoComplete:i,value:l,required:d})},ho=e=>{const{...t}=e;return(0,r.createElement)(po,{states:W,...t})},go=e=>(0,r.createElement)(po,{states:G,...e});function _o(e){const t=(0,m.useRef)(e);return Je()(e,t.current)||(t.current=e),t.current}var ko=o(1777);o(5684);const bo=({field:e,props:t,onChange:o,value:n})=>{var c;const s=null!==(c=null==e?void 0:e.required)&&void 0!==c&&c,a=kt(s),[i,l]=(0,m.useState)((()=>Boolean(n)||s)),d=(0,Bt.getFieldLabel)(e.label);(0,m.useEffect)((()=>{a!==s&&l(Boolean(n)||s)}),[n,a,s]);const u=(0,m.useCallback)((e=>{o(e),l(!0)}),[o]);return(0,r.createElement)(m.Fragment,null,i?(0,r.createElement)(Zt.ValidatedTextInput,{...t,type:e.type,label:s?e.label:e.optionalLabel,className:"wc-block-components-address-form__address_2",value:n,onChange:e=>o(e)}):(0,r.createElement)(m.Fragment,null,(0,r.createElement)(ko.$,{render:(0,r.createElement)("span",null),className:"wc-block-components-address-form__address_2-toggle",onClick:()=>l(!0)},(0,M.sprintf)(
// translators: %s: address 2 field label.
// translators: %s: address 2 field label.
(0,M.__)("+ Add %s","woocommerce"),d)),(0,r.createElement)("input",{type:"text",tabIndex:-1,className:"wc-block-components-address-form__address_2-hidden-input","aria-hidden":"true","aria-label":e.label,autoComplete:e.autocomplete,id:null==t?void 0:t.id,value:n,onChange:e=>u(e.target.value)})))},wo=(e,t,o)=>({id:`${t}-${null==e?void 0:e.key}`.replaceAll("/","-"),errorId:`${o}_${null==e?void 0:e.key}`,label:(null!=e&&e.required?null==e?void 0:e.label:null==e?void 0:e.optionalLabel)||"",autoCapitalize:null==e?void 0:e.autocapitalize,autoComplete:null==e?void 0:e.autocomplete,errorMessage:null==e?void 0:e.errorMessage,required:null==e?void 0:e.required,placeholder:null==e?void 0:e.placeholder,className:`wc-block-components-address-form__${null==e?void 0:e.key}`.replaceAll("/","-"),...null==e?void 0:e.attributes}),Eo=(e,t,o)=>{const r=t.find((t=>t.key===e)),n=(0,ye.objectHasProp)(o,e)?o[e]:"";return r?{field:{...r,key:e},value:n}:null},yo=(e,t)=>(0,ye.isObject)(e.rules)&&(0,ye.isObject)(e.rules[t])&&Object.keys(e.rules[t]).length>0,vo=({formId:e,address1:t,address2:o,addressType:n,onChange:c})=>{const s=wo(t.field,e,n),a=wo(o.field,e,n);return(0,r.createElement)(r.Fragment,null,t&&(0,r.createElement)(Zt.ValidatedTextInput,{...s,type:t.field.type,label:t.field.label,className:"wc-block-components-address-form__address_1",value:t.value,onChange:e=>c("address_1",e)}),o.field&&!o.field.hidden&&(0,r.createElement)(bo,{field:o.field,props:a,onChange:e=>c("address_2",e),value:o.value}))};var fo=o(4370);const So=e=>((e,t)=>Object.entries(e).reduce(((e,[o,r])=>({...e,[t(0,o)]:r})),{}))(e,((e,t)=>(0,fo.L)(t))),Co=e=>{const t=(e=>{const t=(0,m.useRef)({cart:{},checkout:{},customer:{}}),o=(0,_.useSelect)((t=>{const o=t(re.cartStore),r=t(re.checkoutStore),n=t(re.paymentStore),c=o.getCartData(),{coupons:s,shippingRates:a,shippingAddress:i,billingAddress:l,items:m,itemsCount:d,itemsWeight:u,needsShipping:p,totals:h}=c,g={cart:{coupons:s.map((e=>e.code)),shippingRates:[...new Set(a.map((e=>{var t;return null===(t=e.shipping_rates.find((e=>e.selected)))||void 0===t?void 0:t.rate_id})).filter(Boolean))],items:m.map((e=>Array(e.quantity).fill(e.id))).flat(),itemsType:[...new Set(m.map((e=>e.type)))],itemsCount:d,itemsWeight:u,needsShipping:p,prefersCollection:"boolean"==typeof r.prefersCollection()&&r.prefersCollection(),totals:{totalPrice:Number(h.total_price),totalTax:Number(h.total_tax)},extensions:c.extensions},checkout:{createAccount:r.getShouldCreateAccount(),customerNote:r.getOrderNotes(),additionalFields:r.getAdditionalFields(),paymentMethod:n.getActivePaymentMethod()},customer:{id:r.getCustomerId(),billingAddress:l,shippingAddress:i,..."billing"===e||"shipping"===e?{address:"billing"===e?l:i}:{}}};return{cart:So(g.cart),checkout:So(g.checkout),customer:So(g.customer)}}),[e]);return t.current&&Ce()(t.current,o)||(t.current=o),t.current})(e);return window.schemaParser?{parser:window.schemaParser,data:t}:{parser:null,data:t}},Po={};function No(e){let t=e;return function(e){const o=t;return t=e,o}}const Ao=No(),xo=No(),Io=({id:e="",fields:t,onChange:o,addressType:c="shipping",values:s,children:a,isEditing:i,ariaDescribedBy:l=""})=>{const u=(0,d.useInstanceId)(Io),p=(0,m.useRef)(!0),{defaultFields:h}=Kt(),g=_o(t),k=_o("country"in s?s.country:""),b=((e,t,o,r="")=>{const n=(0,m.useRef)([]),{parser:c,data:s}=Co(o),a=Ae(e,t,r).map((e=>{const o=t[e.key]||{};if(o.rules&&c){if(yo(o,"required")){let t={};t=Object.keys(o.rules.required).some((e=>"cart"===e||"checkout"===e||"customer"===e))?{type:"object",properties:o.rules.required}:o.rules.required;try{const o=c.validate(t,s);e.required=o}catch(e){y.CURRENT_USER_IS_ADMIN&&console.error(e)}}if(yo(o,"hidden")){const t={type:"object",properties:o.rules.hidden};try{const o=c.validate(t,s);e.hidden=o}catch(e){y.CURRENT_USER_IS_ADMIN&&console.error(e)}}}return e}));return n.current&&Ce()(n.current,a)||(n.current=a),n.current})(g,h,c,k),w=kt(b),E=kt(i),v=kt(s),f=(0,m.useRef)({}),{errors:S,previousErrors:C}=((e,t,o)=>{const{parser:r,data:n}=Co(t),c=(0,m.useRef)(Po),s=kt(c.current);if(!n)return{errors:c.current,previousErrors:s};let a;if(o)a=o;else switch(t){case"billing":case"shipping":a=n.customer.address||{};break;case"contact":case"order":a=n.checkout.additional_fields||{};break;default:a={}}const i=e.reduce(((e,t)=>(yo(t,"validation")&&!t.hidden&&(t.required||a[t.key])&&(e[t.key]=t.rules.validation),e)),{});let l=Po;if(Object.keys(i).length>0&&r){const o={type:"object",properties:{}};switch(t){case"shipping":o.properties={customer:{type:"object",properties:{shipping_address:{type:"object",properties:i}}}};break;case"billing":o.properties={customer:{type:"object",properties:{billing_address:{type:"object",properties:i}}}};break;default:o.properties={checkout:{type:"object",properties:{additional_fields:{type:"object",properties:i}}}}}const c=r.compile(o),s=c(n);l=!s&&c.errors?((e,t)=>e.reduce(((e,o)=>{var r;const n=null===(c=o.instancePath.split("/").pop())||void 0===c?void 0:c.replace("~1","/");var c;const s=t.find((e=>e.key===n));if(!s||!n)return e;const a=(0,Bt.getFieldLabel)(s.label),i=(0,M.sprintf)(
// translators: %s is the label of the field.
// translators: %s is the label of the field.
(0,M.__)("%s is invalid","woocommerce"),a);if(n)switch(o.keyword){case"errorMessage":e[n]=null!==(r=o.message)&&void 0!==r?r:i;break;case"pattern":e[n]=(0,M.sprintf)(
// translators: %1$s is the label of the field, %2$s is the pattern.
// translators: %1$s is the label of the field, %2$s is the pattern.
(0,M.__)("%1$s must match the pattern %2$s","woocommerce"),a,o.params.pattern);break;default:e[n]=i}return e}),{}))(c.errors,e):Po}const d=e.map((e=>l[e.key]?[e.key,l[e.key]]:e.hidden||!e.required&&!a[e.key]?null:"postcode"===e.key&&"country"in a&&!(0,Bt.isPostcode)({postcode:a.postcode,country:a.country})?[e.key,(0,M.__)("Please enter a valid postcode","woocommerce")]:"email"===e.key&&"email"in a&&!(0,xe.isEmail)(a.email)?[e.key,(0,M.__)("Please enter a valid email address","woocommerce")]:null)).filter(ye.nonNullable);return Ce()(c.current,Object.fromEntries(d))||(c.current=Object.fromEntries(d)),{errors:c.current,previousErrors:s}})(b,c,"shipping"===c?s:void 0);return(0,m.useEffect)((()=>{Object.entries(S).forEach((([e,t])=>{const o=f.current[e];t&&(null==o||o.setErrorMessage(t),(0,_.dispatch)(re.validationStore).setValidationErrors({[`${c}_${e}`]:{message:t,hidden:!(null==o||!o.isFocused())}}),null!=o&&o.isFocused()||null==o||o.revalidate())})),C&&Object.entries(C).forEach((([e])=>{const t=f.current[e];e in S||((0,_.dispatch)(re.validationStore).clearValidationError(`${c}_${e}`),null==t||t.setErrorMessage(""))}))}),[S,C,c,s]),(0,m.useEffect)((()=>{var e;null===(e=f.current)||void 0===e||null===(e=e.postcode)||void 0===e||e.revalidate()}),[k]),(0,m.useEffect)((()=>{let t;if(!p.current&&i&&f.current&&E!==i){const o=b.find((e=>!1===e.hidden));if(!o)return;const{id:r}=wo(o,e||`${u}`,c),n=document.getElementById(r);n&&(t=setTimeout((()=>{n.focus()}),300))}return p.current=!1,()=>{clearTimeout(t)}}),[i,b,e,u,c,E]),(0,m.useEffect)((()=>{if(Ce()(w,b))return;const e={...s,...Object.fromEntries(b.filter((e=>e.hidden)).map((e=>[e.key,""])))};Je()(s,e)||o(e)}),[o,b,w,s]),(0,m.useEffect)((()=>{if((!Ce()(w,b)||!Ce()(v,s))&&("country"in s&&((e,t)=>{const o=`${e}_country`,r=(0,_.select)(re.validationStore).getValidationError(o);!t.country&&(t.city||t.state||t.postcode)&&(r?(0,_.dispatch)(re.validationStore).showValidationError(o):(0,_.dispatch)(re.validationStore).setValidationErrors({[o]:{message:(0,M.__)("Please select your country","woocommerce"),hidden:!1}})),r&&t.country&&(0,_.dispatch)(re.validationStore).clearValidationError(o)})(c,s),"state"in s)){const e=b.find((e=>"state"===e.key));e&&((e,t,o)=>{const r=`${e}_state`,n=(0,_.select)(re.validationStore).getValidationError(r),c=o.required,s="shipping"===e?Ao(t):xo(t),a=!!s&&!Je()(s,t);n?!c||t.state?(0,_.dispatch)(re.validationStore).clearValidationError(r):a||(0,_.dispatch)(re.validationStore).showValidationError(r):!n&&c&&!t.state&&t.country&&(0,_.dispatch)(re.validationStore).setValidationErrors({[r]:{message:(0,M.sprintf)(/* translators: %s will be the state field label in lowercase e.g. "state" */ /* translators: %s will be the state field label in lowercase e.g. "state" */
(0,M.__)("Please select a %s","woocommerce"),o.label.toLowerCase()),hidden:!0}})})(c,s,e)}}),[s,v,c,b,w]),e=e||`${u}`,(0,r.createElement)("div",{id:e,className:"wc-block-components-address-form"},b.map((t=>{var a;if(t.hidden)return null;const i=wo(t,e,c),m=(e=>{const{autoCapitalize:t,autoComplete:o,placeholder:r,...n}=e;return n})(i);if("email"===t.key&&(i.id="email",i.errorId="billing_email"),"checkbox"===t.type){const e=t.key in s&&s[t.key],n={checked:Boolean(e),onChange:e=>{o({...s,[t.key]:e})},...m};return t.required?(0,r.createElement)(Zt.ValidatedCheckboxControl,{key:t.key,...t.errorMessage?{errorMessage:t.errorMessage}:{},...n}):(0,r.createElement)(Zt.CheckboxControl,{key:t.key,...n})}if("address_1"===t.key&&"address_1"in s){const n=Eo("address_1",b,s),a=Eo("address_2",b,s);return(0,ye.isNull)(n)||(0,ye.isNull)(a)?null:(0,r.createElement)(vo,{address1:n,address2:a,addressType:c,formId:e,key:t.key,onChange:(e,t)=>{o({...s,[e]:t})}})}if("address_2"===t.key)return null;if("country"===t.key&&"country"in s){const e="shipping"===c?mo:lo;return(0,r.createElement)(e,{key:t.key,...i,value:s.country,onChange:e=>{o({...s,country:e,state:"",postcode:""})}})}if("state"===t.key&&"state"in s&&"country"in s){const e="shipping"===c?go:ho;return(0,r.createElement)(e,{key:t.key,...i,country:s.country,value:s.state,onChange:e=>o({...s,state:e})})}return"select"===t.type&&"options"in t?void 0===t.options?null:(0,r.createElement)(ao,{key:t.key,...i,label:i.label||"",className:(0,n.A)("wc-block-components-select-input",`wc-block-components-select-input-${t.key}`.replaceAll("/","-")),value:t.key in s?s[t.key]:"",onChange:e=>{o({...s,[t.key]:e})},options:t.options,required:t.required,errorMessage:i.errorMessage||void 0}):(0,r.createElement)(Zt.ValidatedTextInput,{key:t.key,ref:e=>f.current[t.key]=e,...i,type:t.type,ariaDescribedBy:l,value:null!==(a=(0,Pe.decodeEntities)(s[t.key]))&&void 0!==a?a:"",onChange:e=>o({...s,[t.key]:e}),customFormatter:e=>"postcode"===t.key?e.trimStart().toUpperCase():e})})),a)},Ro=Io;o(7259);const To=({isEditing:e=!1,addressCard:t,addressForm:o})=>{const c=(0,n.A)("wc-block-components-address-address-wrapper",{"is-editing":e});return(0,r.createElement)("div",{className:c},(0,r.createElement)("div",{className:"wc-block-components-address-card-wrapper"},t()),(0,r.createElement)("div",{className:"wc-block-components-address-form-wrapper"},o()))},Mo=e=>(0,ye.isObject)(W[e.country])&&(0,ye.isString)(W[e.country][e.state])?(0,Pe.decodeEntities)(W[e.country][e.state]):e.state,Bo=e=>(0,ye.isString)(z[e.country])?(0,Pe.decodeEntities)(z[e.country]):e.country;o(1094);const Do=({address:e,onEdit:t,target:o,isExpanded:n})=>{const c=(0,y.getSetting)("countryData",{});let s=(0,y.getSetting)("defaultAddressFormat","{name}\n{company}\n{address_1}\n{address_2}\n{city}\n{state}\n{postcode}\n{country}");(0,ye.objectHasProp)(c,null==e?void 0:e.country)&&(0,ye.objectHasProp)(c[e.country],"format")&&(0,ye.isString)(c[e.country].format)&&(s=c[e.country].format);const{name:a,address:i}=((e,t)=>{const o=(e=>["{name}","{name_upper}","{first_name} {last_name}","{last_name} {first_name}","{first_name_upper} {last_name_upper}","{last_name_upper} {first_name_upper}","{first_name} {last_name_upper}","{first_name_upper} {last_name}","{last_name} {first_name_upper}","{last_name_upper} {first_name}"].find((t=>e.indexOf(t)>=0))||"")(t),r=t.replace(`${o}\n`,""),n=[["{company}",(null==e?void 0:e.company)||""],["{address_1}",(null==e?void 0:e.address_1)||""],["{address_2}",(null==e?void 0:e.address_2)||""],["{city}",(null==e?void 0:e.city)||""],["{state}",Mo(e)],["{postcode}",(null==e?void 0:e.postcode)||""],["{country}",Bo(e)],["{company_upper}",((null==e?void 0:e.company)||"").toUpperCase()],["{address_1_upper}",((null==e?void 0:e.address_1)||"").toUpperCase()],["{address_2_upper}",((null==e?void 0:e.address_2)||"").toUpperCase()],["{city_upper}",((null==e?void 0:e.city)||"").toUpperCase()],["{state_upper}",Mo(e).toUpperCase()],["{state_code}",(null==e?void 0:e.state)||""],["{postcode_upper}",((null==e?void 0:e.postcode)||"").toUpperCase()],["{country_upper}",Bo(e).toUpperCase()]],c=[["{name}",(null==e?void 0:e.first_name)+(null!=e&&e.first_name&&null!=e&&e.last_name?" ":"")+(null==e?void 0:e.last_name)],["{name_upper}",((null==e?void 0:e.first_name)+(null!=e&&e.first_name&&null!=e&&e.last_name?" ":"")+(null==e?void 0:e.last_name)).toUpperCase()],["{first_name}",(null==e?void 0:e.first_name)||""],["{last_name}",(null==e?void 0:e.last_name)||""],["{first_name_upper}",((null==e?void 0:e.first_name)||"").toUpperCase()],["{last_name_upper}",((null==e?void 0:e.last_name)||"").toUpperCase()]];let s=o;c.forEach((([e,t])=>{s=s.replace(e,t)}));let a=r;n.forEach((([e,t])=>{a=a.replace(e,t)}));const i=a.replace(/^,\s|,\s$/g,"").replace(/\n{2,}/,"\n").split("\n").filter(Boolean);return{name:s,address:i}})(e,s),l="shipping"===o?(0,M.__)("Edit shipping address","woocommerce"):(0,M.__)("Edit billing address","woocommerce");return(0,r.createElement)("div",{className:"wc-block-components-address-card"},(0,r.createElement)("address",null,(0,r.createElement)("span",{className:"wc-block-components-address-card__address-section"},(0,Pe.decodeEntities)(a)),(0,r.createElement)("div",{className:"wc-block-components-address-card__address-section"},i.filter((e=>!!e)).map(((e,t)=>(0,r.createElement)("span",{key:"address-"+t},(0,Pe.decodeEntities)(e))))),e.phone?(0,r.createElement)("div",{key:"address-phone",className:"wc-block-components-address-card__address-section"},e.phone):""),t&&(0,r.createElement)(ko.$,{render:(0,r.createElement)("span",null),className:"wc-block-components-address-card__edit","aria-controls":o,"aria-expanded":n,"aria-label":l,onClick:e=>{e.preventDefault(),t()},type:"button"},(0,M.__)("Edit","woocommerce")))},Oo=()=>{const{shippingAddress:e,setShippingAddress:t,setBillingAddress:o,useShippingAsBilling:n,editingShippingAddress:c,setEditingShippingAddress:s}=Kt(),{dispatchCheckoutEvent:a}=lt(),{hasValidationErrors:i,invalidProps:l}=(0,_.useSelect)((t=>{const o=t(re.validationStore);return{hasValidationErrors:o.hasValidationErrors(),invalidProps:Object.keys(e).filter((e=>void 0!==o.getValidationError("shipping_"+e))).filter(Boolean)}}),[e]);(0,m.useEffect)((()=>{l.length>0&&!1===c&&s(!0)}),[c,i,l.length,s]);const d=(0,m.useCallback)((e=>{t(e),n&&(o(e),a("set-billing-address")),a("set-shipping-address")}),[a,o,t,n]),u=(0,m.useCallback)((()=>(0,r.createElement)(Do,{address:e,target:"shipping",onEdit:()=>{s(!0)},isExpanded:c})),[e,c,s]),p=(0,m.useCallback)((()=>(0,r.createElement)(Ro,{id:"shipping",addressType:"shipping",onChange:d,values:e,fields:J,isEditing:c})),[d,e,c]);return(0,r.createElement)(To,{isEditing:c,addressCard:u,addressForm:p})},Fo=()=>{const{defaultFields:e,setBillingAddress:t,shippingAddress:o,billingAddress:n,useShippingAsBilling:c,setUseShippingAsBilling:s,setEditingBillingAddress:a}=Kt(),{isEditor:i}=b(),l=0===(0,y.getSetting)("currentUserId"),d=()=>{var r,n;const c={...o};null!=e&&null!==(r=e.phone)&&void 0!==r&&r.hidden&&delete c.phone,null!=e&&null!==(n=e.company)&&void 0!==n&&n.hidden&&delete c.company,t(c)};(0,to.Su)((()=>{c&&d()}));const u=i?co:m.Fragment,p=c?[ve.SHIPPING_ADDRESS,ve.BILLING_ADDRESS]:[ve.SHIPPING_ADDRESS],{cartDataLoaded:h}=(0,_.useSelect)((e=>({cartDataLoaded:e(re.cartStore).hasFinishedResolution("getCartData")})));return(0,r.createElement)(m.Fragment,null,(0,r.createElement)(Zt.StoreNoticesContainer,{context:p}),(0,r.createElement)(u,null,h?(0,r.createElement)(Oo,null):null),(0,r.createElement)(Zt.CheckboxControl,{className:"wc-block-checkout__use-address-for-billing",label:(0,M.__)("Use same address for billing","woocommerce"),checked:c,onChange:e=>{s(e),e?d():(a(!0),(e=>{if(!e||!l)return;const o=(e=>{const t=Ae(J,y.defaultFields,e.country),o=Object.assign({},e);return t.forEach((({key:t})=>{"country"!==t&&"state"!==t&&Ie(t,e)&&(o[t]="")})),o})(e);t(o)})(n))}}))},Lo=({defaultTitle:e=(0,M.__)("Step","woocommerce"),defaultDescription:t=(0,M.__)("Step description text.","woocommerce"),defaultShowStepNumber:o=!0})=>({title:{type:"string",default:e},description:{type:"string",default:t},showStepNumber:{type:"boolean",default:o}}),jo={...Lo({defaultTitle:(0,M.__)("Shipping address","woocommerce"),defaultDescription:(0,M.__)("Enter the address where you want your order delivered.","woocommerce")}),className:{type:"string",default:""},lock:{type:"object",default:{move:!0,remove:!0}}};(0,i.registerBlockType)("woocommerce/checkout-shipping-address-block",{icon:{src:(0,r.createElement)(a.A,{icon:Yt.A,className:"wc-block-editor-components-block-icon"})},attributes:jo,edit:({attributes:e,setAttributes:t})=>{const{showShippingFields:o}=Kt();return o?(0,r.createElement)(r.Fragment,null,(0,r.createElement)(zt,null),(0,r.createElement)(Xt,{setAttributes:t,attributes:e,className:(0,n.A)("wc-block-checkout__shipping-fields",null==e?void 0:e.className)},(0,r.createElement)(Fo,null),(0,r.createElement)(Qt,{block:Bt.innerBlockAreas.SHIPPING_ADDRESS}))):null},save:()=>(0,r.createElement)("div",{...l.useBlockProps.save()},(0,r.createElement)(eo,null))});var Vo=o(3813);o(8845);const Uo=L?`<a href="${L}" target="_blank">${(0,M.__)("Terms and Conditions","woocommerce")}</a>`:(0,M.__)("Terms and Conditions","woocommerce"),$o=F?`<a href="${F}" target="_blank">${(0,M.__)("Privacy Policy","woocommerce")}</a>`:(0,M.__)("Privacy Policy","woocommerce"),Ho=(0,M.sprintf)(/* translators: %1$s terms page link, %2$s privacy page link. */ /* translators: %1$s terms page link, %2$s privacy page link. */
(0,M.__)("By proceeding with your purchase you agree to our %1$s and %2$s","woocommerce"),Uo,$o),qo=(0,M.sprintf)(/* translators: %1$s terms page link, %2$s privacy page link. */ /* translators: %1$s terms page link, %2$s privacy page link. */
(0,M.__)("You must accept our %1$s and %2$s to continue with your purchase.","woocommerce"),Uo,$o);o(5609),(0,i.registerBlockType)("woocommerce/checkout-terms-block",{icon:{src:(0,r.createElement)(a.A,{icon:Vo.A,className:"wc-block-editor-components-block-icon"})},edit:({attributes:{checkbox:e,text:t,showSeparator:o},setAttributes:c})=>{const s=(0,l.useBlockProps)(),a=t||(e?qo:Ho);return(0,r.createElement)("div",{...s},(0,r.createElement)(l.InspectorControls,null,(!L||!F)&&(0,r.createElement)(qt.Notice,{className:"wc-block-checkout__terms_notice",status:"warning",isDismissible:!1},(0,M.__)("Link to your store's Terms and Conditions and Privacy Policy pages by creating pages for them.","woocommerce"),(0,r.createElement)("br",null),!L&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)("br",null),(0,r.createElement)(qt.ExternalLink,{href:`${y.ADMIN_URL}admin.php?page=wc-settings&tab=advanced`},(0,M.__)("Setup a Terms and Conditions page","woocommerce"))),!F&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)("br",null),(0,r.createElement)(qt.ExternalLink,{href:`${y.ADMIN_URL}options-privacy.php`},(0,M.__)("Setup a Privacy Policy page","woocommerce")))),L&&F&&!(a.includes(L)&&a.includes(F))&&(0,r.createElement)(qt.Notice,{className:"wc-block-checkout__terms_notice",status:"warning",isDismissible:!1,actions:Ho!==t?[{label:(0,M.__)("Restore default text","woocommerce"),onClick:()=>c({text:""})}]:[]},(0,r.createElement)("p",null,(0,M.__)("Ensure you add links to your policy pages in this section.","woocommerce"))),(0,r.createElement)(qt.PanelBody,{title:(0,M.__)("Display options","woocommerce")},(0,r.createElement)(qt.ToggleControl,{label:(0,M.__)("Require checkbox","woocommerce"),checked:e,onChange:()=>c({checkbox:!e})}),(0,r.createElement)(qt.ToggleControl,{label:(0,M.__)("Show separator","woocommerce"),checked:o,onChange:()=>c({showSeparator:!o})}))),(0,r.createElement)("div",{className:(0,n.A)("wc-block-checkout__terms",{"wc-block-checkout__terms--with-separator":o})},e?(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Zt.CheckboxControl,{id:"terms-condition",checked:!1}),(0,r.createElement)(l.RichText,{value:a,onChange:e=>c({text:e})})):(0,r.createElement)(l.RichText,{tagName:"span",value:a,onChange:e=>c({text:e})})))},save:()=>(0,r.createElement)("div",{...l.useBlockProps.save()})});var zo=o(2596),Wo=o(3876);o(3091);const Yo=[(0,M.__)("Too weak","woocommerce"),(0,M.__)("Weak","woocommerce"),(0,M.__)("Medium","woocommerce"),(0,M.__)("Strong","woocommerce"),(0,M.__)("Very strong","woocommerce")],Go=({password:e="",onChange:t})=>{var o;const c=(0,d.useInstanceId)(Go,"woocommerce-password-strength-meter");let s=-1;e.length>0&&(s=(e=>void 0===window.zxcvbn?(0,Wo.Bi)(e,[{id:0,value:Yo[0],minDiversity:0,minLength:0},{id:1,value:Yo[1],minDiversity:1,minLength:4},{id:2,value:Yo[2],minDiversity:2,minLength:8},{id:3,value:Yo[3],minDiversity:4,minLength:12},{id:4,value:Yo[4],minDiversity:4,minLength:20}]).id:window.zxcvbn(e).score)(e));const a=kt(s);return(0,m.useEffect)((()=>{s!==a&&t&&t(s)}),[s,a,t]),(0,r.createElement)("div",{id:c,className:(0,n.A)("wc-block-components-password-strength",{hidden:-1===s})},(0,r.createElement)("label",{htmlFor:c+"-meter",className:"screen-reader-text"},(0,M.__)("Password strength","woocommerce")),(0,r.createElement)("meter",{id:c+"-meter",className:"wc-block-components-password-strength__meter",min:0,max:4,value:s>-1?s:0},null!==(o=Yo[s])&&void 0!==o?o:""),!!Yo[s]&&(0,r.createElement)("div",{id:c+"-result",className:"wc-block-components-password-strength__result"},(0,r.createElement)("span",{className:"screen-reader-text","aria-live":"polite"},(0,M.sprintf)(/* translators: %s: Password strength */ /* translators: %s: Password strength */
(0,M.__)("Password strength: %1$s (%2$d characters long)","woocommerce"),Yo[s],e.length))," ",(0,r.createElement)("span",{"aria-hidden":!0},Yo[s])))},Ko=Go,Zo=()=>{const[e,t]=(0,m.useState)(0),{customerPassword:o}=(0,_.useSelect)((e=>({customerPassword:e(re.checkoutStore).getCustomerPassword()})),[]),{__internalSetCustomerPassword:n}=(0,_.useDispatch)(re.checkoutStore),{setValidationErrors:c,clearValidationError:s}=(0,_.useDispatch)(re.validationStore);return(0,r.createElement)(Zt.ValidatedTextInput,{type:"password",label:(0,M.__)("Create a password","woocommerce"),className:"wc-block-components-address-form__password",value:o,required:!0,errorId:"account-password",onChange:t=>{n(t),t?e<2?c({"account-password":{message:(0,M.__)("Please create a stronger password","woocommerce"),hidden:!0}}):s("account-password"):c({"account-password":{message:(0,M.__)("Please enter a valid password","woocommerce"),hidden:!0}})},feedback:(0,r.createElement)(Ko,{password:o,onChange:e=>t(e)})})},Jo="wc-guest-checkout-notice",Xo=()=>{const{shouldCreateAccount:e}=(0,_.useSelect)((e=>({shouldCreateAccount:e(re.checkoutStore).getShouldCreateAccount()}))),{__internalSetShouldCreateAccount:t,__internalSetCustomerPassword:o}=(0,_.useDispatch)(re.checkoutStore),n=(0,y.getSetting)("checkoutAllowsGuest",!1),c=(0,y.getSetting)("checkoutAllowsSignup",!1),s=n&&c,a=!(0,y.getSetting)("generatePassword",!1)&&(s&&e||!n);return n||s||a?(0,r.createElement)(r.Fragment,null,n&&(0,r.createElement)("p",{id:Jo,className:"wc-block-checkout__guest-checkout-notice"},(0,M.__)("You are currently checking out as a guest.","woocommerce")),s&&(0,r.createElement)(Zt.CheckboxControl,{className:"wc-block-checkout__create-account",label:(0,M.sprintf)(/* translators: Store name */ /* translators: Store name */
(0,M.__)("Create an account with %s","woocommerce"),(0,y.getSetting)("siteTitle","")),checked:e,onChange:e=>{t(e),o("")}}),a&&(0,r.createElement)(Zo,null)):null},Qo=()=>{const{additionalFields:e,customerId:t}=(0,_.useSelect)((e=>{const t=e(re.checkoutStore);return{additionalFields:t.getAdditionalFields(),customerId:t.getCustomerId()}})),{setAdditionalFields:o}=(0,_.useDispatch)(re.checkoutStore),{billingAddress:n,setEmail:c}=Kt(),{dispatchCheckoutEvent:s}=lt(),a={email:n.email,...e};return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Zt.StoreNoticesContainer,{context:ve.CONTACT_INFORMATION}),(0,r.createElement)(Ro,{id:"contact",addressType:"contact",ariaDescribedBy:Jo,onChange:e=>{const{email:t,...r}=e;c(t),s("set-email-address"),o(r)},values:a,fields:X},!t&&(0,r.createElement)(Xo,null)))},er={...Lo({defaultTitle:(0,M.__)("Contact information","woocommerce"),defaultDescription:(0,M.__)("We'll use this email to send you details and updates about your order.","woocommerce")}),className:{type:"string",default:""},lock:{type:"object",default:{remove:!0,move:!0}}};(0,i.registerBlockType)("woocommerce/checkout-contact-information-block",{icon:{src:(0,r.createElement)(a.A,{icon:zo.A,className:"wc-block-editor-components-block-icon"})},attributes:er,edit:({attributes:e,setAttributes:t})=>(0,r.createElement)(Xt,{attributes:e,setAttributes:t,className:(0,n.A)("wc-block-checkout__contact-fields",null==e?void 0:e.className)},(0,r.createElement)(l.InspectorControls,null,(0,r.createElement)(qt.PanelBody,{title:(0,M.__)("Account creation and guest checkout","woocommerce")},(0,r.createElement)("p",{className:"wc-block-checkout__controls-text"},(0,M.__)("Account creation and guest checkout settings can be managed in your store settings.","woocommerce")),(0,r.createElement)(qt.ExternalLink,{href:`${y.ADMIN_URL}admin.php?page=wc-settings&tab=account`},(0,M.__)("Manage account settings","woocommerce")))),(0,r.createElement)(co,null,(0,r.createElement)(Qo,null)),(0,r.createElement)(Qt,{block:Bt.innerBlockAreas.CONTACT_INFORMATION})),save:()=>(0,r.createElement)("div",{...l.useBlockProps.save()},(0,r.createElement)(eo,null))});const tr=()=>{const{billingAddress:e,setShippingAddress:t,setBillingAddress:o,useBillingAsShipping:n,editingBillingAddress:c,setEditingBillingAddress:s}=Kt(),{dispatchCheckoutEvent:a}=lt(),{hasValidationErrors:i,invalidProps:l}=(0,_.useSelect)((t=>{const o=t(re.validationStore);return{hasValidationErrors:o.hasValidationErrors(),invalidProps:Object.keys(e).filter((e=>"email"!==e&&void 0!==o.getValidationError("billing_"+e))).filter(Boolean)}}));(0,m.useEffect)((()=>{l.length>0&&!1===c&&s(!0)}),[c,i,l.length,s]);const d=(0,m.useCallback)((e=>{o(e),n&&(t(e),a("set-shipping-address")),a("set-billing-address")}),[a,o,t,n]),u=(0,m.useCallback)((()=>(0,r.createElement)(Do,{address:e,target:"billing",onEdit:()=>{s(!0)},isExpanded:c})),[e,c,s]),p=(0,m.useCallback)((()=>(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Ro,{id:"billing",addressType:"billing",onChange:d,values:e,fields:J,isEditing:c}))),[e,d,c]);return(0,r.createElement)(To,{isEditing:c,addressCard:u,addressForm:p})},or=()=>{const{defaultFields:e,billingAddress:t,setShippingAddress:o,useBillingAsShipping:n}=Kt(),{isEditor:c}=b();(0,to.Su)((()=>{if(n){var r,c;const{email:n,...s}=t,a={...s};null!=e&&null!==(r=e.phone)&&void 0!==r&&r.hidden&&delete a.phone,null!=e&&null!==(c=e.company)&&void 0!==c&&c.hidden&&delete a.company,o(a)}}));const s=c?co:m.Fragment,a=n?[ve.BILLING_ADDRESS,ve.SHIPPING_ADDRESS]:[ve.BILLING_ADDRESS],{cartDataLoaded:i}=(0,_.useSelect)((e=>({cartDataLoaded:e(re.cartStore).hasFinishedResolution("getCartData")})));return(0,r.createElement)(m.Fragment,null,(0,r.createElement)(Zt.StoreNoticesContainer,{context:a}),(0,r.createElement)(s,null,i?(0,r.createElement)(tr,null):null))},rr=(0,M.__)("Billing address","woocommerce"),nr=(0,M.__)("Enter the billing address that matches your payment method.","woocommerce"),cr=(0,M.__)("Billing and shipping address","woocommerce"),sr=(0,M.__)("Enter the billing and shipping address that matches your payment method.","woocommerce"),ar={...Lo({defaultTitle:rr,defaultDescription:nr}),className:{type:"string",default:""},lock:{type:"object",default:{move:!0,remove:!0}}};(0,i.registerBlockType)("woocommerce/checkout-billing-address-block",{icon:{src:(0,r.createElement)(a.A,{icon:Yt.A,className:"wc-block-editor-components-block-icon"})},attributes:ar,edit:({attributes:e,setAttributes:t})=>{const{showBillingFields:o,forcedBillingAddress:c,useBillingAsShipping:s}=Kt();return o||s?(e.title=((e,t)=>t?e===rr?cr:e:e===cr?rr:e)(e.title,c),e.description=((e,t)=>t?e===nr?sr:e:e===sr?nr:e)(e.description,c),(0,r.createElement)(Xt,{setAttributes:t,attributes:e,className:(0,n.A)("wc-block-checkout__billing-fields",null==e?void 0:e.className)},(0,r.createElement)(zt,null),(0,r.createElement)(or,null),(0,r.createElement)(Qt,{block:Bt.innerBlockAreas.BILLING_ADDRESS}))):null},save:()=>(0,r.createElement)("div",{...l.useBlockProps.save()},(0,r.createElement)(eo,null))});var ir=o(498);const lr=(0,M.__)("Place Order","woocommerce"),mr=(0,M.__)("Return to Cart","woocommerce"),dr={placeOrderButtonLabel:{type:"string",default:lr},returnToCartButtonLabel:{type:"string",default:mr}},ur=(e,t)=>{if(!e.title.raw)return e.slug;const o=1===t.filter((t=>t.title.raw===e.title.raw)).length;return e.title.raw+(o?"":` - ${e.slug}`)},pr=({setPageId:e,pageId:t,labels:o})=>{const n=(0,_.useSelect)((e=>e("core").getEntityRecords("postType","page",{status:"publish",orderby:"title",order:"asc",per_page:100})),[])||null;return n?(0,r.createElement)(qt.PanelBody,{title:o.title},(0,r.createElement)(qt.SelectControl,{label:(0,M.__)("Link to","woocommerce"),value:t,options:[{label:o.default,value:0},...n.map((e=>({label:ur(e,n),value:parseInt(e.id,10)})))],onChange:t=>e(parseInt(t,10))})):null};var hr=o(1387);o(718);const gr=({href:e,children:t})=>{const o=e||V;return o?(0,r.createElement)("a",{href:o,className:"wc-block-components-checkout-return-to-cart-button"},(0,r.createElement)(a.A,{icon:hr.A}),t):null};o(2080),o(7791);const _r=()=>(0,r.createElement)("span",{className:"wc-block-components-spinner","aria-hidden":"true"}),kr=(0,m.forwardRef)(((e,t)=>{"showSpinner"in e&&ce()("showSpinner prop",{version:"8.9.0",alternative:"Render a spinner in the button children instead.",plugin:"WooCommerce"});const{className:o,showSpinner:c=!1,children:s,variant:a="contained",removeTextWrap:i=!1,...l}=e,m=(0,n.A)("wc-block-components-button","wp-element-button",o,a,{"wc-block-components-button--loading":c});if("href"in e)return(0,r.createElement)(ko.$,{render:(0,r.createElement)("a",{ref:t,href:e.href},c&&(0,r.createElement)(_r,null),(0,r.createElement)("span",{className:"wc-block-components-button__text"},s)),className:m,...l});const d=i?e.children:(0,r.createElement)("span",{className:"wc-block-components-button__text"},e.children);return(0,r.createElement)(ko.$,{ref:t,className:m,...l},c&&(0,r.createElement)(_r,null),d)})),br=({onChange:e,placeholder:t,value:o,children:n,...c})=>(0,r.createElement)(kr,{...c},(0,r.createElement)(l.RichText,{multiline:!1,allowedFormats:[],value:o,placeholder:t,onChange:e}),n),wr=window.wc.priceFormat;o(149);const Er=JSON.parse('{"uK":{"lock":{"type":"object","default":{"remove":true,"move":true}},"cartPageId":{"type":"number","default":0},"showReturnToCart":{"type":"boolean","default":true},"className":{"type":"string","default":""},"priceSeparator":{"type":"string","default":"Â·"}}}');o(5089);const yr={example:{attributes:{showPrice:!0,placeOrderButtonLabel:(0,M.__)("Place Order","woocommerce"),showReturnToCart:!1}},icon:{src:(0,r.createElement)(a.A,{icon:ir.A,className:"wc-block-editor-components-block-icon"})},attributes:{...dr,...Er.uK},save:()=>(0,r.createElement)("div",{...l.useBlockProps.save()}),edit:({attributes:e,setAttributes:t})=>{const o=(0,l.useBlockProps)(),{cartPageId:c=0,showReturnToCart:s=!1,placeOrderButtonLabel:a,returnToCartButtonLabel:i}=e,{cartTotals:d}=He(),u=(0,wr.getCurrencyFromPriceResponse)(d),{current:p}=(0,m.useRef)(c),h=(0,_.useSelect)((e=>p||e("core/editor").getCurrentPostId()),[p]),g=o.className.includes("is-style-with-price");return(0,r.createElement)("div",{...o},(0,r.createElement)(l.InspectorControls,null,(0,r.createElement)(qt.PanelBody,{title:(0,M.__)("Options","woocommerce")},(0,r.createElement)(qt.ToggleControl,{label:(0,M.__)('Show a "Return to Cart" link',"woocommerce"),help:(0,M.__)("Recommended to enable only if there is no Cart link in the header.","woocommerce"),checked:s,onChange:()=>t({showReturnToCart:!s})}),g&&(0,r.createElement)(qt.TextControl,{label:(0,M.__)("Price separator","woocommerce"),id:"price-separator",value:e.priceSeparator,onChange:e=>{t({priceSeparator:e})}})),s&&!(h===O&&0===p)&&(0,r.createElement)(pr,{pageId:c,setPageId:e=>t({cartPageId:e}),labels:{title:(0,M.__)("Return to Cart button","woocommerce"),default:(0,M.__)("WooCommerce Cart Page","woocommerce")}})),(0,r.createElement)("div",{className:"wc-block-checkout__actions"},(0,r.createElement)("div",{className:"wc-block-checkout__actions_row"},s&&(0,r.createElement)(gr,{href:"#cart-page-placeholder"},(0,r.createElement)(l.RichText,{multiline:!1,allowedFormats:[],value:i,placeholder:mr,onChange:e=>{t({returnToCartButtonLabel:e})}})),(0,r.createElement)(br,{className:(0,n.A)("wc-block-cart__submit-button","wc-block-components-checkout-place-order-button",{"wc-block-components-checkout-place-order-button--full-width":!s}),value:a,placeholder:lr,onChange:e=>{t({placeOrderButtonLabel:e})}},g&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)("style",null,`.wp-block-woocommerce-checkout-actions-block {\n\t\t\t\t\t\t\t\t\t\t.wc-block-components-checkout-place-order-button__separator {\n\t\t\t\t\t\t\t\t\t\t\t&::after {\n\t\t\t\t\t\t\t\t\t\t\t\tcontent: "${e.priceSeparator}";\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}`),(0,r.createElement)("div",{className:"wc-block-components-checkout-place-order-button__separator"}),(0,r.createElement)("div",{className:"wc-block-components-checkout-place-order-button__price"},(0,r.createElement)(Zt.FormattedMonetaryAmount,{value:d.total_price,currency:u})))))))}};(0,i.registerBlockType)("woocommerce/checkout-actions-block",yr);const vr=()=>{const{additionalFields:e}=(0,_.useSelect)((e=>({additionalFields:e(re.checkoutStore).getAdditionalFields()}))),{setAdditionalFields:t}=(0,_.useDispatch)(re.checkoutStore),o={...e};return 0===Q.length?null:(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Zt.StoreNoticesContainer,{context:ve.ORDER_INFORMATION}),(0,r.createElement)(Ro,{id:"order",addressType:"order",onChange:e=>{t(e)},values:o,fields:Q}))},fr={...Lo({defaultTitle:(0,M.__)("Additional order information","woocommerce"),defaultDescription:""}),className:{type:"string",default:""},lock:{type:"object",default:{move:!1,remove:!0}}};(0,i.registerBlockType)("woocommerce/checkout-additional-information-block",{attributes:fr,icon:{src:(0,r.createElement)(a.A,{icon:Vo.A,className:"wc-block-editor-components-block-icon"})},edit:({attributes:e,setAttributes:t})=>0===Q.length?null:(0,r.createElement)(Xt,{setAttributes:t,attributes:e,className:(0,n.A)("wc-block-checkout__additional-information-fields",null==e?void 0:e.className)},(0,r.createElement)(vr,null)),save:()=>(0,r.createElement)("div",{...l.useBlockProps.save()})});var Sr=o(6465);const Cr=({disabled:e,onChange:t,placeholder:o,value:n})=>{const[c,s]=(0,m.useState)(""!==n),[a,i]=(0,m.useState)("");return(0,r.createElement)("div",{className:"wc-block-checkout__add-note"},(0,r.createElement)(Zt.CheckboxControl,{disabled:e,label:(0,M.__)("Add a note to your order","woocommerce"),checked:c,onChange:e=>{s(e),e?n!==a&&t(a):(t(""),i(n))}}),c&&(0,r.createElement)(Zt.Textarea,{disabled:e,onTextChange:t,placeholder:o,value:n}))},Pr=({className:e})=>{const{needsShipping:t}=mt(),{isProcessing:o,orderNotes:c}=(0,_.useSelect)((e=>{const t=e(re.checkoutStore);return{isProcessing:t.isProcessing(),orderNotes:t.getOrderNotes()}})),{__internalSetOrderNotes:s}=(0,_.useDispatch)(re.checkoutStore);return(0,r.createElement)(Zt.FormStep,{id:"order-notes",showStepNumber:!1,className:(0,n.A)("wc-block-checkout__order-notes",e),disabled:o},(0,r.createElement)(Cr,{disabled:o,onChange:s,placeholder:t?(0,M.__)("Notes about your order, e.g. special notes for delivery.","woocommerce"):(0,M.__)("Notes about your order.","woocommerce"),value:c}))};o(377),o(7797),(0,i.registerBlockType)("woocommerce/checkout-order-note-block",{icon:{src:(0,r.createElement)(a.A,{icon:Sr.A,className:"wc-block-editor-components-block-icon"})},edit:()=>{const e=(0,l.useBlockProps)();return(0,r.createElement)("div",{...e},(0,r.createElement)(co,null,(0,r.createElement)(Pr,null)))},save:()=>(0,r.createElement)("div",{...l.useBlockProps.save()})});const Nr=(0,r.createElement)(c.SVG,{xmlns:"http://www.w3.org/2000/SVG",viewBox:"0 0 24 24",fill:"none"},(0,r.createElement)("path",{stroke:"currentColor",strokeWidth:"1.5",fill:"none",d:"M6 3.75h12c.69 0 1.25.56 1.25 1.25v14c0 .69-.56 1.25-1.25 1.25H6c-.69 0-1.25-.56-1.25-1.25V5c0-.69.56-1.25 1.25-1.25z"}),(0,r.createElement)("path",{fill:"currentColor",fillRule:"evenodd",d:"M6.9 7.5A1.1 1.1 0 018 6.4h8a1.1 1.1 0 011.1 1.1v2a1.1 1.1 0 01-1.1 1.1H8a1.1 1.1 0 01-1.1-1.1v-2zm1.2.1v1.8h7.8V7.6H8.1z",clipRule:"evenodd"}),(0,r.createElement)("path",{fill:"currentColor",d:"M8.5 12h1v1h-1v-1zM8.5 14h1v1h-1v-1zM8.5 16h1v1h-1v-1zM11.5 12h1v1h-1v-1zM11.5 14h1v1h-1v-1zM11.5 16h1v1h-1v-1zM14.5 12h1v1h-1v-1zM14.5 14h1v1h-1v-1zM14.5 16h1v1h-1v-1z"}));o(8375);const Ar=({children:e,className:t,screenReaderLabel:o,showSpinner:c=!1,isLoading:s=!0})=>(0,r.createElement)("div",{className:(0,n.A)(t,{"wc-block-components-loading-mask":s})},s&&c&&(0,r.createElement)(Zt.Spinner,null),(0,r.createElement)("div",{className:(0,n.A)({"wc-block-components-loading-mask__children":s}),"aria-hidden":s},e),s&&(0,r.createElement)("span",{className:"screen-reader-text"},o||(0,M.__)("Loadingâ¦","woocommerce")));o(3048);const xr=({instanceId:e,isLoading:t=!1,onSubmit:o,displayCouponForm:n=!1})=>{const[c,s]=(0,m.useState)(""),[a,i]=(0,m.useState)(n),l=`wc-block-components-totals-coupon__input-${e}`,{validationErrorId:d}=(0,_.useSelect)((t=>({validationErrorId:t(re.validationStore).getValidationErrorId(e)}))),u=(0,m.useRef)(null);return(0,r.createElement)(Zt.Panel,{className:"wc-block-components-totals-coupon",initialOpen:a,hasBorder:!1,headingLevel:2,title:(0,M.__)("Add a coupon","woocommerce"),state:[a,i]},(0,r.createElement)(Ar,{screenReaderLabel:(0,M.__)("Applying couponâ¦","woocommerce"),isLoading:t,showSpinner:!1},(0,r.createElement)("div",{className:"wc-block-components-totals-coupon__content"},(0,r.createElement)("form",{className:"wc-block-components-totals-coupon__form",id:"wc-block-components-totals-coupon__form"},(0,r.createElement)(Zt.ValidatedTextInput,{id:l,errorId:"coupon",className:"wc-block-components-totals-coupon__input",label:(0,M.__)("Enter code","woocommerce"),value:c,ariaDescribedBy:d,onChange:e=>{s(e)},focusOnMount:!0,validateOnMount:!1,showError:!1,ref:u}),(0,r.createElement)(kr,{className:"wc-block-components-totals-coupon__button",disabled:t||!c,showSpinner:t,onClick:e=>{var t;e.preventDefault(),void 0!==o?null===(t=o(c))||void 0===t||t.then((e=>{var t;e?(s(""),i(!1)):null!==(t=u.current)&&void 0!==t&&t.focus&&u.current.focus()})):(s(""),i(!0))},type:"submit"},(0,M.__)("Apply","woocommerce"))),(0,r.createElement)(Zt.ValidationInputError,{propertyName:"coupon",elementId:e}))))};o(265);const Ir={context:"summary"},Rr=({cartCoupons:e=[],currency:t,isRemovingCoupon:o,removeCoupon:n,values:c})=>{const{total_discount:s,total_discount_tax:a}=c,i=parseInt(s,10),l=(0,Bt.applyCheckoutFilter)({arg:Ir,filterName:"coupons",defaultValue:e});if(!i&&0===l.length)return null;const m=parseInt(a,10),d=(0,y.getSetting)("displayCartPricesIncludingTax",!1)?i+m:i;return(0,r.createElement)(Zt.TotalsItem,{className:"wc-block-components-totals-discount",currency:t,description:0!==l.length&&(0,r.createElement)(Ar,{screenReaderLabel:(0,M.__)("Removing couponâ¦","woocommerce"),isLoading:o,showSpinner:!1},(0,r.createElement)("ul",{className:"wc-block-components-totals-discount__coupon-list"},l.map((e=>(0,r.createElement)(Zt.RemovableChip,{key:"coupon-"+e.code,className:"wc-block-components-totals-discount__coupon-list-item",text:e.label,screenReaderText:(0,M.sprintf)(/* translators: %s Coupon code. */ /* translators: %s Coupon code. */
(0,M.__)("Coupon: %s","woocommerce"),e.label),disabled:o,onRemove:()=>{n(e.code)},radius:"large",ariaLabel:(0,M.sprintf)(/* translators: %s is a coupon code. */ /* translators: %s is a coupon code. */
(0,M.__)('Remove coupon "%s"',"woocommerce"),e.label)}))))),label:d?(0,M.__)("Discount","woocommerce"):(0,M.__)("Coupons","woocommerce"),value:d?-1*d:"-"})};o(7919);const Tr=({currency:e,values:t,className:o})=>{const c=(0,y.getSetting)("taxesEnabled",!0)&&(0,y.getSetting)("displayCartPricesIncludingTax",!1),{total_price:s,total_tax:a,tax_lines:i}=t,{receiveCart:l,...d}=He(),u=(0,Bt.applyCheckoutFilter)({filterName:"totalLabel",defaultValue:(0,M.__)("Total","woocommerce"),extensions:d.extensions,arg:{cart:d}}),p=(0,Bt.applyCheckoutFilter)({filterName:"totalValue",defaultValue:"<price/>",extensions:d.extensions,arg:{cart:d},validation:Bt.productPriceValidation}),h=(0,r.createElement)(Zt.FormattedMonetaryAmount,{className:"wc-block-components-totals-footer-item-tax-value",currency:e,value:parseInt(s,10)}),g=(0,m.createInterpolateElement)(p,{price:h}),_=parseInt(a,10),k=i&&i.length>0?(0,M.sprintf)(/* translators: %s is a list of tax rates */ /* translators: %s is a list of tax rates */
(0,M.__)("Including %s","woocommerce"),i.map((({name:t,price:o})=>`${(0,wr.formatPrice)(o,e)} ${t}`)).join(", ")):(0,M.__)("Including <TaxAmount/> in taxes","woocommerce");return(0,r.createElement)(Zt.TotalsItem,{className:(0,n.A)("wc-block-components-totals-footer-item",o),currency:e,label:u,value:g,description:c&&0!==_&&(0,r.createElement)("p",{className:"wc-block-components-totals-footer-item-tax"},(0,m.createInterpolateElement)(k,{TaxAmount:(0,r.createElement)(Zt.FormattedMonetaryAmount,{className:"wc-block-components-totals-footer-item-tax-value",currency:e,value:_})}))})},Mr=()=>{const{shippingRates:e}=He(),t=(e=>e.flatMap((e=>e.shipping_rates.filter((e=>e.selected)).flatMap((e=>e.name)))))(e);return t?(0,r.createElement)("div",{className:"wc-block-components-totals-shipping__via"},(0,Pe.decodeEntities)(t.filter(((e,o)=>t.indexOf(e)===o)).join(", "))):null};let Br=null;o(7051);const Dr=({address:e,onUpdate:t,onCancel:o,addressFields:n})=>{const[c,s]=(0,m.useState)(e),{showAllValidationErrors:a}=(0,_.useDispatch)(re.validationStore),i=function(e){const t=(0,m.useRef)(null),o=(0,m.useRef)(null),r=(0,m.useRef)(e);return(0,m.useEffect)((()=>{r.current=e}),[e]),(0,m.useCallback)((e=>{if(e)t.current=e,o.current=e.ownerDocument.activeElement;else if(o.current){var n,c,s;const e=null===(n=t.current)||void 0===n?void 0:n.contains(null===(c=t.current)||void 0===c?void 0:c.ownerDocument.activeElement);var a;if(null!==(s=t.current)&&void 0!==s&&s.isConnected&&!e&&(null!==(a=Br)&&void 0!==a||(Br=o.current)),r.current)r.current();else{var i;const e=o.current;null===(i=null!=e&&e.isConnected?e:Br)||void 0===i||i.focus()}Br=null}}),[])}(),{hasValidationErrors:l,isCustomerDataUpdating:d}=(0,_.useSelect)((e=>({hasValidationErrors:e(re.validationStore).hasValidationErrors,isCustomerDataUpdating:e(re.cartStore).isCustomerDataUpdating()})));return(0,r.createElement)("form",{className:"wc-block-components-shipping-calculator-address",ref:i},(0,r.createElement)(Ro,{fields:n,onChange:s,values:c}),(0,r.createElement)(kr,{className:"wc-block-components-shipping-calculator-address__button",disabled:d,variant:"outlined",onClick:r=>{if(r.preventDefault(),Je()(c,e))return o();if(a(),!l()){const e={};return n.forEach((t=>{void 0!==c[t]&&(e[t]=c[t])})),t(e)}},type:"submit"},(0,M.__)("Check delivery options","woocommerce")))},Or=(0,m.createContext)({shippingCalculatorID:"",showCalculator:!1,isShippingCalculatorOpen:!1,setIsShippingCalculatorOpen:()=>{}}),Fr=({onUpdate:e=()=>{},onCancel:t=()=>{},addressFields:o=["country","state","city","postcode"]})=>{const{shippingCalculatorID:n,showCalculator:c,setIsShippingCalculatorOpen:s}=(0,m.useContext)(Or),{shippingAddress:a}=Gt(),i="wc/cart/shipping-calculator",l=(0,m.useCallback)((()=>{s(!1),t()}),[s,t]),d=(0,m.useCallback)((t=>{(0,_.dispatch)(re.cartStore).updateCustomerData({shipping_address:t},!1).then((()=>{(e=>{const{removeNotice:t}=(0,_.dispatch)(bt.store),{getNotices:o}=(0,_.select)(bt.store);o(e).forEach((o=>{t(o.id,e)}))})(i),s(!1),e(t)})).catch((e=>{(0,re.processErrorResponse)(e,i)}))}),[e,s]);return c?(0,r.createElement)("div",{className:"wc-block-components-shipping-calculator",id:n},(0,r.createElement)(Zt.StoreNoticesContainer,{context:i}),(0,r.createElement)(Dr,{address:a,addressFields:o,onCancel:l,onUpdate:d})):null},Lr=({title:e})=>{const{isShippingCalculatorOpen:t,setIsShippingCalculatorOpen:o}=(0,m.useContext)(Or);return(0,r.createElement)(Zt.Panel,{className:"wc-block-components-totals-shipping-panel",initialOpen:!1,hasBorder:!1,title:e,state:[t,o]},(0,r.createElement)(Fr,null))},jr=e=>{const t=(e=>(0,y.getSetting)("displayCartPricesIncludingTax",!1)?parseInt(e.total_shipping,10)+parseInt(e.total_shipping_tax,10):parseInt(e.total_shipping,10))(e);return 0===t?(0,r.createElement)("strong",null,(0,M.__)("Free","woocommerce")):t},Vr=()=>{const{shippingRates:e,shippingAddress:t}=He(),o=(0,_.useSelect)((e=>e(re.checkoutStore).prefersCollection())),n=Ge(e),{showCalculator:c}=(0,m.useContext)(Or),s=o?(e=>{const t=(e||[]).flatMap((e=>e.shipping_rates)).find((e=>e.selected&&We(e)));if((0,ye.isObject)(t)&&(0,ye.objectHasProp)(t,"meta_data")){const e=t.meta_data.find((e=>"pickup_address"===e.key));if((0,ye.isObject)(e)&&(0,ye.objectHasProp)(e,"value")&&e.value)return e.value}return""})(e):(e=>{if(0===Object.values(e).length)return null;const t=(0,ye.isString)(Y[e.country])?(0,Pe.decodeEntities)(Y[e.country]):"",o=(0,ye.isObject)(G[e.country])&&(0,ye.isString)(G[e.country][e.state])?(0,Pe.decodeEntities)(G[e.country][e.state]):e.state,r=[];return r.push(e.postcode.toUpperCase()),r.push(e.city),r.push(o),r.push(t),r.filter(Boolean).join(", ")||null})(t),a=n?
// Translators: <address/> is the formatted shipping address.
// Translators: <address/> is the formatted shipping address.
(0,M.__)("Delivers to <address/>","woocommerce"):
// Translators: <address/> is the formatted shipping address.
// Translators: <address/> is the formatted shipping address.
(0,M.__)("No delivery options available for <address/>","woocommerce"),i=Te(t,["state","city","country","postcode"]),l=(0,y.getSetting)("shippingCostRequiresAddress",!1)&&!i,d=o?
// Translators: <address/> is the pickup location.
// Translators: <address/> is the pickup location.
(0,M.__)("Collection from <address/>","woocommerce"):a,u=(0,r.createElement)("p",{className:"wc-block-components-totals-shipping-address-summary"},s&&!l?(0,m.createInterpolateElement)(d,{address:(0,r.createElement)("strong",null,s)}):(0,r.createElement)(r.Fragment,null,(0,M.__)("Enter address to check delivery options","woocommerce")));return(0,r.createElement)("div",{className:"wc-block-components-shipping-address"},c&&(0,r.createElement)(Lr,{title:u}))};o(780);const Ur=({label:e=(0,M.__)("Shipping","woocommerce"),placeholder:t=null,collaterals:o=null})=>{const{cartTotals:n,shippingRates:c}=He(),s=Ge(c);return(0,r.createElement)("div",{className:"wc-block-components-totals-shipping"},(0,r.createElement)(Zt.TotalsItem,{label:e,value:s?jr(n):t,description:(0,r.createElement)(r.Fragment,null,!!s&&(0,r.createElement)(Mr,null),(0,r.createElement)(Vr,null),o&&(0,r.createElement)("div",{className:"wc-block-components-totals-shipping__collaterals"},o)),currency:(0,wr.getCurrencyFromPriceResponse)(n)}))};var $r=o(9813);const Hr=()=>{const{extensions:e,receiveCart:t,...o}=He(),n={extensions:e,cart:o,context:"woocommerce/checkout"};return(0,r.createElement)(Bt.ExperimentalOrderMeta.Slot,{...n})},{Fill:qr,Slot:zr}=(0,Bt.createSlotFill)("checkoutOrderSummaryActionArea"),Wr=JSON.parse('{"xY":{"align":false,"html":false,"multiple":false,"reusable":false,"inserter":false,"lock":false},"uK":{"lock":{"type":"object","default":{"remove":true}}}}'),Yr=[{attributes:Wr.uK,save:()=>(0,r.createElement)("div",{...l.useBlockProps.save()},(0,r.createElement)(l.InnerBlocks.Content,null)),supports:Wr.xY,migrate:({attributes:e})=>[e,[(0,i.createBlock)("woocommerce/checkout-order-summary-cart-items-block",{},[]),(0,i.createBlock)("woocommerce/checkout-order-summary-coupon-form-block",{},[]),(0,i.createBlock)("woocommerce/checkout-order-summary-totals-block",{},[(0,i.createBlock)("woocommerce/checkout-order-summary-subtotal-block",{},[]),(0,i.createBlock)("woocommerce/checkout-order-summary-fee-block",{},[]),(0,i.createBlock)("woocommerce/checkout-order-summary-discount-block",{},[]),(0,i.createBlock)("woocommerce/checkout-order-summary-shipping-block",{},[]),(0,i.createBlock)("woocommerce/checkout-order-summary-taxes-block",{},[])])]],isEligible:(e,t)=>!t.some((e=>"woocommerce/checkout-order-summary-totals-block"===e.name))}],Gr=Yr;o(1407),(0,i.registerBlockType)("woocommerce/checkout-order-summary-block",{icon:{src:(0,r.createElement)(a.A,{icon:Nr,className:"wc-block-editor-components-block-icon"})},attributes:{className:{type:"string",default:""},lock:{type:"object",default:{move:!0,remove:!0}}},edit:({clientId:e})=>{const t=(0,l.useBlockProps)(),{cartTotals:o}=He(),c=(0,wr.getCurrencyFromPriceResponse)(o),s=parseInt(o.total_price,10),a=$t(Bt.innerBlockAreas.CHECKOUT_ORDER_SUMMARY),{isLarge:i}=p(),[d,u]=(0,m.useState)(!1),h=(0,m.useId)(),g=i?{}:{role:"button",onClick:()=>u(!d),"aria-expanded":d,"aria-controls":h,tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||u(!d)}},_=[["woocommerce/checkout-order-summary-cart-items-block",{},[]],["woocommerce/checkout-order-summary-coupon-form-block",{},[]],["woocommerce/checkout-order-summary-totals-block",{},[]]];return Ht({clientId:e,registeredBlocks:a,defaultTemplate:_}),(0,r.createElement)("div",{...t},(0,r.createElement)("div",{className:"wc-block-components-checkout-order-summary__title",...g},(0,r.createElement)("p",{className:"wc-block-components-checkout-order-summary__title-text",role:"heading"},(0,M.__)("Order summary","woocommerce")),!i&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Zt.FormattedMonetaryAmount,{currency:c,value:s}),(0,r.createElement)(qt.Icon,{icon:d?$r.A:so.A}))),(0,r.createElement)("div",{className:(0,n.A)("wc-block-components-checkout-order-summary__content",{"is-open":d}),id:h},(0,r.createElement)(l.InnerBlocks,{allowedBlocks:a,template:_}),(0,r.createElement)("div",{className:"wc-block-components-totals-wrapper"},(0,r.createElement)(Tr,{currency:c,values:o})),(0,r.createElement)(Hr,null)))},save:()=>(0,r.createElement)("div",{...l.useBlockProps.save()},(0,r.createElement)(l.InnerBlocks.Content,null)),deprecated:Gr});var Kr=o(8994),Zr=o(4133),Jr=o(7674),Xr=o.n(Jr);const Qr=["a","b","em","i","strong","p","br"],en=["target","href","rel","name","download"],tn=(e,t)=>{const o=(null==t?void 0:t.tags)||Qr,r=(null==t?void 0:t.attr)||en;return Xr().sanitize(e,{ALLOWED_TAGS:o,ALLOWED_ATTR:r})},on={warning:"#F0B849",error:"#CC1818",success:"#46B450",info:"#0073AA"},rn=({status:e="warning",...t})=>(0,r.createElement)(c.SVG,{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",...t},(0,r.createElement)("path",{d:"M12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20Z",stroke:on[e],strokeWidth:"1.5"}),(0,r.createElement)("path",{d:"M13 7H11V13H13V7Z",fill:on[e]}),(0,r.createElement)("path",{d:"M13 15H11V17H13V15Z",fill:on[e]}));o(9705);const nn=({href:e,title:t,description:o,warning:n})=>(0,r.createElement)("a",{href:e,className:"wc-block-editor-components-external-link-card",target:"_blank",rel:"noreferrer"},(0,r.createElement)("span",{className:"wc-block-editor-components-external-link-card__content"},(0,r.createElement)("strong",{className:"wc-block-editor-components-external-link-card__title"},t),o&&(0,r.createElement)("span",{className:"wc-block-editor-components-external-link-card__description",dangerouslySetInnerHTML:{__html:tn(o)}}),n?(0,r.createElement)("span",{className:"wc-block-editor-components-external-link-card__warning"},(0,r.createElement)(a.A,{icon:(0,r.createElement)(rn,{status:"error"})}),(0,r.createElement)("span",null,n)):null),(0,r.createElement)(qt.VisuallyHidden,{as:"span"},/* translators: accessibility text */ /* translators: accessibility text */
(0,M.__)("(opens in a new tab)","woocommerce")),(0,r.createElement)(a.A,{icon:Zr.A,className:"wc-block-editor-components-external-link-card__icon"})),cn=window.wp.autop,sn=e=>e.replace(/<\/?[a-z][^>]*?>/gi,""),an=(e,t)=>e.replace(/[\s|\.\,]+$/i,"")+t,ln=(e,t,o="&hellip;",r=!0)=>{const n=sn(e),c=n.split(" ").splice(0,t).join(" ");return c===n?r?(0,cn.autop)(n):n:r?(0,cn.autop)(an(c,o)):an(c,o)},mn=(e,t,o=!0,r="&hellip;",n=!0)=>{const c=sn(e),s=c.slice(0,t);if(s===c)return n?(0,cn.autop)(c):c;if(o)return(0,cn.autop)(an(s,r));const a=s.match(/([\s]+)/g),i=a?a.length:0,l=c.slice(0,t+i);return n?(0,cn.autop)(an(l,r)):an(l,r)};var dn=o(1208),un=(o(9345),o(2900)),pn=o(2478),hn=o(8306);const gn=e=>{switch(e){case"success":case"warning":case"info":case"default":return"polite";default:return"assertive"}},kn=e=>{switch(e){case"success":return un.A;case"warning":case"info":case"error":return pn.A;default:return hn.A}};var bn=o(195);const wn=({className:e,status:t="default",children:o,spokenMessage:c=o,onRemove:s=()=>{},isDismissible:i=!0,politeness:l=gn(t),summary:d})=>(((e,t)=>{const o="string"==typeof e?e:(0,m.renderToString)(e);(0,m.useEffect)((()=>{o&&(0,bn.speak)(o,t)}),[o,t])})(c,l),(0,r.createElement)("div",{className:(0,n.A)(e,"wc-block-components-notice-banner","is-"+t,{"is-dismissible":i})},(0,r.createElement)(a.A,{icon:kn(t)}),(0,r.createElement)("div",{className:"wc-block-components-notice-banner__content"},d&&(0,r.createElement)("p",{className:"wc-block-components-notice-banner__summary"},d),o),!!i&&(0,r.createElement)(kr,{className:"wc-block-components-notice-banner__dismiss","aria-label":(0,M.__)("Dismiss this notice","woocommerce"),onClick:e=>{"function"==typeof(null==e?void 0:e.preventDefault)&&e.preventDefault&&e.preventDefault(),s()},removeTextWrap:!0},(0,r.createElement)(a.A,{icon:dn.A}))));o(1637);const En=()=>(0,r.createElement)(wn,{isDismissible:!1,className:"wc-block-checkout__no-payment-methods-notice",status:"error"},(0,M.__)("There are no payment methods available. This may be an error on our side. Please contact us if you need any help placing your order.","woocommerce")),yn=(0,r.createElement)(c.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,r.createElement)("g",{fill:"none",fillRule:"evenodd"},(0,r.createElement)("path",{d:"M0 0h24v24H0z"}),(0,r.createElement)("path",{fill:"#000",fillRule:"nonzero",d:"M17.3 8v1c1 .2 1.4.9 1.4 1.7h-1c0-.6-.3-1-1-1-.8 0-1.3.4-1.3.9 0 .4.3.6 1.4 1 1 .2 2 .6 2 1.9 0 .9-.6 1.4-1.5 1.5v1H16v-1c-.9-.1-1.6-.7-1.7-1.7h1c0 .6.4 1 1.3 1 1 0 1.2-.5 1.2-.8 0-.4-.2-.8-1.3-1.1-1.3-.3-2.1-.8-2.1-1.8 0-.9.7-1.5 1.6-1.6V8h1.3zM12 10v1H6v-1h6zm2-2v1H6V8h8zM2 4v16h20V4H2zm2 14V6h16v12H4z"}),(0,r.createElement)("path",{stroke:"#000",strokeLinecap:"round",d:"M6 16c2.6 0 3.9-3 1.7-3-2 0-1 3 1.5 3 1 0 1-.8 2.8-.8"})));var vn=o(4166),fn=o(3576);o(777);const Sn={bank:vn.A,bill:fn.A,card:Kr.A,checkPayment:yn},Cn=({icon:e="",text:t=""})=>{const o=!!e,c=(0,m.useCallback)((e=>o&&(0,ye.isString)(e)&&(0,ye.objectHasProp)(Sn,e)),[o]),s=(0,n.A)("wc-block-components-payment-method-label",{"wc-block-components-payment-method-label--with-icon":o});return(0,r.createElement)("span",{className:s},c(e)?(0,r.createElement)(a.A,{icon:Sn[e]}):e,t)},Pn=e=>`wc-block-components-payment-method-icon wc-block-components-payment-method-icon--${e}`,Nn=({id:e,src:t=null,alt:o=""})=>t?(0,r.createElement)("img",{className:Pn(e),src:t,alt:o}):null,An=[{id:"alipay",alt:"Alipay",src:D+"payment-methods/alipay.svg"},{id:"amex",alt:"American Express",src:D+"payment-methods/amex.svg"},{id:"bancontact",alt:"Bancontact",src:D+"payment-methods/bancontact.svg"},{id:"diners",alt:"Diners Club",src:D+"payment-methods/diners.svg"},{id:"discover",alt:"Discover",src:D+"payment-methods/discover.svg"},{id:"eps",alt:"EPS",src:D+"payment-methods/eps.svg"},{id:"giropay",alt:"Giropay",src:D+"payment-methods/giropay.svg"},{id:"ideal",alt:"iDeal",src:D+"payment-methods/ideal.svg"},{id:"jcb",alt:"JCB",src:D+"payment-methods/jcb.svg"},{id:"laser",alt:"Laser",src:D+"payment-methods/laser.svg"},{id:"maestro",alt:"Maestro",src:D+"payment-methods/maestro.svg"},{id:"mastercard",alt:"Mastercard",src:D+"payment-methods/mastercard.svg"},{id:"multibanco",alt:"Multibanco",src:D+"payment-methods/multibanco.svg"},{id:"p24",alt:"Przelewy24",src:D+"payment-methods/p24.svg"},{id:"sepa",alt:"Sepa",src:D+"payment-methods/sepa.svg"},{id:"sofort",alt:"Sofort",src:D+"payment-methods/sofort.svg"},{id:"unionpay",alt:"Union Pay",src:D+"payment-methods/unionpay.svg"},{id:"visa",alt:"Visa",src:D+"payment-methods/visa.svg"},{id:"wechat",alt:"WeChat",src:D+"payment-methods/wechat.svg"}];o(4957);const xn=({icons:e=[],align:t="center",className:o})=>{const c=(e=>{const t={};return e.forEach((e=>{let o={};"string"==typeof e&&(o={id:e,alt:e,src:null}),"object"==typeof e&&(o={id:e.id||"",alt:e.alt||"",src:e.src||null}),o.id&&(0,ye.isString)(o.id)&&!t[o.id]&&(t[o.id]=o)})),Object.values(t)})(e);if(0===c.length)return null;const s=(0,n.A)("wc-block-components-payment-method-icons",{"wc-block-components-payment-method-icons--align-left":"left"===t,"wc-block-components-payment-method-icons--align-right":"right"===t},o);return(0,r.createElement)("div",{className:s},c.map((e=>{const t={...e,...(o=e.id,An.find((e=>e.id===o))||{})};var o;return(0,r.createElement)(Nn,{key:"payment-method-icon-"+e.id,...t})})))},In=(e="")=>{const{cartCoupons:t,cartIsLoading:o}=He(),{createErrorNotice:r}=(0,_.useDispatch)("core/notices"),{createNotice:n}=(0,_.useDispatch)("core/notices"),{setValidationErrors:c}=(0,_.useDispatch)(re.validationStore),{isApplyingCoupon:s,isRemovingCoupon:a}=(0,_.useSelect)((e=>{const t=e(re.cartStore);return{isApplyingCoupon:t.isApplyingCoupon(),isRemovingCoupon:t.isRemovingCoupon()}})),{applyCoupon:i,removeCoupon:l}=(0,_.useDispatch)(re.cartStore),m=(0,_.useSelect)((e=>e(re.checkoutStore).getOrderId()));return{appliedCoupons:t,isLoading:o,applyCoupon:t=>i(t).then((()=>((0,Bt.applyCheckoutFilter)({filterName:"showApplyCouponNotice",defaultValue:!0,arg:{couponCode:t,context:e}})&&n("info",(0,M.sprintf)(/* translators: %s coupon code. */ /* translators: %s coupon code. */
(0,M.__)('Coupon code "%s" has been applied to your cart.',"woocommerce"),t),{id:"coupon-form",type:"snackbar",context:e}),Promise.resolve(!0)))).catch((e=>{const t=(e=>{var t,o;return m&&m>0&&null!=e&&null!==(t=e.data)&&void 0!==t&&null!==(t=t.details)&&void 0!==t&&t.checkout?e.data.details.checkout:null!=e&&null!==(o=e.data)&&void 0!==o&&null!==(o=o.details)&&void 0!==o&&o.cart?e.data.details.cart:e.message})(e);return c({coupon:{message:(0,Pe.decodeEntities)(t),hidden:!1}}),Promise.resolve(!1)})),removeCoupon:t=>l(t).then((()=>((0,Bt.applyCheckoutFilter)({filterName:"showRemoveCouponNotice",defaultValue:!0,arg:{couponCode:t,context:e}})&&n("info",(0,M.sprintf)(/* translators: %s coupon code. */ /* translators: %s coupon code. */
(0,M.__)('Coupon code "%s" has been removed from your cart.',"woocommerce"),t),{id:"coupon-form",type:"snackbar",context:e}),Promise.resolve(!0)))).catch((t=>(r(t.message,{id:"coupon-form",context:e}),Promise.resolve(!1)))),isApplyingCoupon:s,isRemovingCoupon:a}},Rn=(e,t)=>{const o=[],r=(t,o)=>{const r=o+"_tax",n=(0,ye.objectHasProp)(e,o)&&(0,ye.isString)(e[o])?parseInt(e[o],10):0;return{key:o,label:t,value:n,valueWithTax:n+((0,ye.objectHasProp)(e,r)&&(0,ye.isString)(e[r])?parseInt(e[r],10):0)}};return o.push(r((0,M.__)("Subtotal:","woocommerce"),"total_items")),o.push(r((0,M.__)("Fees:","woocommerce"),"total_fees")),o.push(r((0,M.__)("Discount:","woocommerce"),"total_discount")),o.push({key:"total_tax",label:(0,M.__)("Taxes:","woocommerce"),value:parseInt(e.total_tax,10),valueWithTax:parseInt(e.total_tax,10)}),t&&o.push(r((0,M.__)("Shipping:","woocommerce"),"total_shipping")),o},Tn=()=>{const{onCheckoutBeforeProcessing:e,onCheckoutValidationBeforeProcessing:t,onCheckoutAfterProcessingWithSuccess:o,onCheckoutAfterProcessingWithError:r,onSubmit:n}=(0,m.useContext)(St),{onCheckoutValidation:c,onCheckoutSuccess:s,onCheckoutFail:a}=wt.checkoutEvents,{isCalculating:i,isComplete:l,isIdle:d,isProcessing:u,customerId:p}=(0,_.useSelect)((e=>{const t=e(re.checkoutStore);return{isComplete:t.isComplete(),isIdle:t.isIdle(),isProcessing:t.isProcessing(),customerId:t.getCustomerId(),isCalculating:t.isCalculating()}})),{paymentStatus:h,activePaymentMethod:g,shouldSavePayment:k}=(0,_.useSelect)((e=>{const t=e(re.paymentStore);return{paymentStatus:{get isPristine(){return ce()("isPristine",{since:"9.6.0",alternative:"isIdle",plugin:"WooCommerce Blocks",link:"https://github.com/woocommerce/woocommerce-blocks/pull/8110"}),t.isPaymentIdle()},isIdle:t.isPaymentIdle(),isStarted:t.isExpressPaymentStarted(),isProcessing:t.isPaymentProcessing(),get isFinished(){return ce()("isFinished",{since:"9.6.0",plugin:"WooCommerce Blocks",link:"https://github.com/woocommerce/woocommerce-blocks/pull/8110"}),t.hasPaymentError()||t.isPaymentReady()},hasError:t.hasPaymentError(),get hasFailed(){return ce()("hasFailed",{since:"9.6.0",plugin:"WooCommerce Blocks",link:"https://github.com/woocommerce/woocommerce-blocks/pull/8110"}),t.hasPaymentError()},get isSuccessful(){return ce()("isSuccessful",{since:"9.6.0",plugin:"WooCommerce Blocks",link:"https://github.com/woocommerce/woocommerce-blocks/pull/8110"}),t.isPaymentReady()},isReady:t.isPaymentReady(),isDoingExpressPayment:t.isExpressPaymentMethodActive()},activePaymentMethod:t.getActivePaymentMethod(),shouldSavePayment:t.getShouldSavePaymentMethod()}})),{__internalSetExpressPaymentError:b}=(0,_.useDispatch)(re.paymentStore),{onPaymentProcessing:w,onPaymentSetup:E}=(0,m.useContext)(me),{shippingErrorStatus:v,shippingErrorTypes:f,onShippingRateSuccess:S,onShippingRateFail:C,onShippingRateSelectSuccess:P,onShippingRateSelectFail:N}=gt(),{shippingRates:A,isLoadingRates:x,selectedRates:I,isSelectingRate:R,selectShippingRate:T,needsShipping:B}=mt(),{billingAddress:D,shippingAddress:O}=(0,_.useSelect)((e=>e(re.cartStore).getCustomerData())),{setShippingAddress:F}=(0,_.useDispatch)(re.cartStore),{cartItems:L,cartFees:j,cartTotals:V,extensions:U}=He(),{appliedCoupons:$}=In(),H=(0,m.useRef)(Rn(V,B)),q=(0,m.useRef)({label:(0,M.__)("Total","woocommerce"),value:parseInt(V.total_price,10)});(0,m.useEffect)((()=>{H.current=Rn(V,B),q.current={label:(0,M.__)("Total","woocommerce"),value:parseInt(V.total_price,10)}}),[V,B]);const z=(0,m.useCallback)(((e="")=>{ce()("setExpressPaymentError should only be used by Express Payment Methods (using the provided onError handler).",{alternative:"",plugin:"woocommerce-gutenberg-products-block",link:"https://github.com/woocommerce/woocommerce-gutenberg-products-block/pull/4228"}),b(e)}),[b]);return{activePaymentMethod:g,billing:{appliedCoupons:$,billingAddress:D,billingData:D,cartTotal:q.current,cartTotalItems:H.current,currency:(0,wr.getCurrencyFromPriceResponse)(V),customerId:p,displayPricesIncludingTax:(0,y.getSetting)("displayCartPricesIncludingTax",!1)},cartData:{cartItems:L,cartFees:j,extensions:U},checkoutStatus:{isCalculating:i,isComplete:l,isIdle:d,isProcessing:u},components:{LoadingMask:Ar,PaymentMethodIcons:xn,PaymentMethodLabel:Cn,ValidationInputError:Zt.ValidationInputError},emitResponse:{noticeContexts:ve,responseTypes:ye.responseTypes},eventRegistration:{onCheckoutAfterProcessingWithError:r,onCheckoutAfterProcessingWithSuccess:o,onCheckoutBeforeProcessing:e,onCheckoutValidationBeforeProcessing:t,onCheckoutSuccess:s,onCheckoutFail:a,onCheckoutValidation:c,onPaymentProcessing:w,onPaymentSetup:E,onShippingRateFail:C,onShippingRateSelectFail:N,onShippingRateSelectSuccess:P,onShippingRateSuccess:S},onSubmit:n,paymentStatus:h,setExpressPaymentError:z,shippingData:{isSelectingRate:R,needsShipping:B,selectedRates:I,setSelectedRates:T,setShippingAddress:F,shippingAddress:O,shippingRates:A,shippingRatesLoading:x},shippingStatus:{shippingErrorStatus:v,shippingErrorTypes:f},shouldSavePayment:k}};class Mn extends m.Component{constructor(...e){super(...e),(0,T.A)(this,"state",{errorMessage:"",hasError:!1})}static getDerivedStateFromError(e){return{errorMessage:e.message,hasError:!0}}render(){const{hasError:e,errorMessage:t}=this.state,{isEditor:o}=this.props;if(e){let e=(0,M.__)("We are experiencing difficulties with this payment method. Please contact us for assistance.","woocommerce");(o||y.CURRENT_USER_IS_ADMIN)&&(e=t||(0,M.__)("There was an error with this payment method. Please verify it's configured correctly.","woocommerce"));const n=[{id:"0",content:e,isDismissible:!1,status:"error"}];return(0,r.createElement)(Zt.StoreNoticesContainer,{additionalNotices:n,context:ve.PAYMENTS})}return this.props.children}}const Bn=Mn,Dn=({children:e,showSaveOption:t})=>{const{isEditor:o}=b(),{shouldSavePaymentMethod:n,customerId:c}=(0,_.useSelect)((e=>{const t=e(re.paymentStore),o=e(re.checkoutStore);return{shouldSavePaymentMethod:t.getShouldSavePaymentMethod(),customerId:o.getCustomerId()}})),{__internalSetShouldSavePaymentMethod:s}=(0,_.useDispatch)(re.paymentStore);return(0,r.createElement)(Bn,{isEditor:o},e,c>0&&t&&(0,r.createElement)(Zt.CheckboxControl,{className:"wc-block-components-payment-methods__save-card-info",label:(0,M.__)("Save payment information to my account for future purchases.","woocommerce"),checked:n,onChange:()=>s(!n)}))},On=()=>{const{activeSavedToken:e,activePaymentMethod:t,isExpressPaymentMethodActive:o,savedPaymentMethods:c,availablePaymentMethods:s}=(0,_.useSelect)((e=>{const t=e(re.paymentStore);return{activeSavedToken:t.getActiveSavedToken(),activePaymentMethod:t.getActivePaymentMethod(),isExpressPaymentMethodActive:t.isExpressPaymentMethodActive(),savedPaymentMethods:t.getSavedPaymentMethods(),availablePaymentMethods:t.getAvailablePaymentMethods()}})),{__internalSetActivePaymentMethod:a}=(0,_.useDispatch)(re.paymentStore),i=(0,At.getPaymentMethods)(),{...l}=Tn(),{removeNotice:d}=(0,_.useDispatch)("core/notices"),{dispatchCheckoutEvent:u}=lt(),{isEditor:p}=b(),h=Object.keys(s).map((e=>{const{edit:t,content:o,label:n,supports:c}=i[e],s=p?t:o;return{value:e,label:"string"==typeof n?n:(0,m.cloneElement)(n,{components:l.components}),name:`wc-saved-payment-method-token-${e}`,content:(0,r.createElement)(Dn,{showSaveOption:c.showSaveOption},(0,m.cloneElement)(s,{__internalSetActivePaymentMethod:a,...l}))}})),g=(0,m.useCallback)((e=>{a(e),d("wc-payment-error",ve.PAYMENTS),u("set-active-payment-method",{paymentMethodSlug:e})}),[u,d,a]),k=0===Object.keys(c).length&&1===Object.keys(i).length,w=(0,n.A)({"disable-radio-control":k});return o?null:(0,r.createElement)(Zt.RadioControlAccordion,{highlightChecked:!0,id:"wc-payment-method-options",className:w,selected:e?null:t,onChange:g,options:h})},Fn="wc/store/cart",Ln=((0,M.__)("Unable to get cart data from the API.","woocommerce"),[]),jn=[],Vn={},Un={};J.forEach((e=>{Un[e]=""}));const $n={};J.forEach((e=>{$n[e]=""})),$n.email="";const Hn={cartItemsPendingQuantity:[],cartItemsPendingDelete:[],productsPendingAdd:[],cartData:{coupons:[],shippingRates:[],shippingAddress:Un,billingAddress:$n,items:[],itemsCount:0,itemsWeight:0,crossSells:[],needsShipping:!0,needsPayment:!1,hasCalculatedShipping:!0,fees:[],totals:{currency_code:"",currency_symbol:"",currency_minor_unit:2,currency_decimal_separator:".",currency_thousand_separator:",",currency_prefix:"",currency_suffix:"",total_items:"0",total_items_tax:"0",total_fees:"0",total_fees_tax:"0",total_discount:"0",total_discount_tax:"0",total_shipping:"0",total_shipping_tax:"0",total_price:"0",total_tax:"0",tax_lines:[]},errors:Ln,paymentMethods:[],paymentRequirements:[],extensions:Vn},metaData:{updatingCustomerData:!1,updatingSelectedRate:!1,applyingCoupon:"",removingCoupon:"",isCartDataStale:!1},errors:jn},qn=({method:e,expires:t})=>{var o,r,n;return(0,M.sprintf)(/* translators: %1$s is referring to the payment method brand, %2$s is referring to the last 4 digits of the payment card, %3$s is referring to the expiry date.  */ /* translators: %1$s is referring to the payment method brand, %2$s is referring to the last 4 digits of the payment card, %3$s is referring to the expiry date.  */
(0,M.__)("%1$s ending in %2$s (expires %3$s)","woocommerce"),null!==(o=null!==(r=null==e?void 0:e.display_brand)&&void 0!==r?r:null==e||null===(n=e.networks)||void 0===n?void 0:n.preferred)&&void 0!==o?o:e.brand,e.last4,t)},zn=({method:e})=>e.brand&&e.last4?(0,M.sprintf)(/* translators: %1$s is referring to the payment method brand, %2$s is referring to the last 4 digits of the payment card. */ /* translators: %1$s is referring to the payment method brand, %2$s is referring to the last 4 digits of the payment card. */
(0,M.__)("%1$s ending in %2$s","woocommerce"),e.brand,e.last4):(0,M.sprintf)(/* translators: %s is the name of the payment method gateway. */ /* translators: %s is the name of the payment method gateway. */
(0,M.__)("Saved token for %s","woocommerce"),e.gateway),Wn=()=>{var e;const{activeSavedToken:t,activePaymentMethod:o,savedPaymentMethods:n}=(0,_.useSelect)((e=>{const t=e(re.paymentStore);return{activeSavedToken:t.getActiveSavedToken(),activePaymentMethod:t.getActivePaymentMethod(),savedPaymentMethods:t.getSavedPaymentMethods()}})),{__internalSetActivePaymentMethod:c}=(0,_.useDispatch)(re.paymentStore),s=(()=>{let e;if((0,_.select)("core/editor")){const t={cartCoupons:at.coupons,cartItems:at.items,crossSellsProducts:at.cross_sells,cartFees:at.fees,cartItemsCount:at.items_count,cartItemsWeight:at.items_weight,cartNeedsPayment:at.needs_payment,cartNeedsShipping:at.needs_shipping,cartItemErrors:Ln,cartTotals:at.totals,cartIsLoading:!1,cartErrors:jn,billingData:Hn.cartData.billingAddress,billingAddress:Hn.cartData.billingAddress,shippingAddress:Hn.cartData.shippingAddress,extensions:Vn,shippingRates:at.shipping_rates,isLoadingRates:!1,cartHasCalculatedShipping:at.has_calculated_shipping,paymentRequirements:at.payment_requirements,receiveCart:()=>{}};e={cart:t,cartTotals:t.cartTotals,cartNeedsShipping:t.cartNeedsShipping,billingData:t.billingAddress,billingAddress:t.billingAddress,shippingAddress:t.shippingAddress,selectedShippingMethods:Ke(t.shippingRates),paymentMethods:at.payment_methods,paymentRequirements:t.paymentRequirements}}else{const t=(0,_.select)(Fn),o=t.getCartData(),r=t.getCartErrors(),n=t.getCartTotals(),c=!t.hasFinishedResolution("getCartData"),s=t.isCustomerDataUpdating(),a=Ke(o.shippingRates);e={cart:{cartCoupons:o.coupons,cartItems:o.items,crossSellsProducts:o.crossSells,cartFees:o.fees,cartItemsCount:o.itemsCount,cartItemsWeight:o.itemsWeight,cartNeedsPayment:o.needsPayment,cartNeedsShipping:o.needsShipping,cartItemErrors:o.errors,cartTotals:n,cartIsLoading:c,cartErrors:r,billingData:Re(o.billingAddress),billingAddress:Re(o.billingAddress),shippingAddress:Re(o.shippingAddress),extensions:o.extensions,shippingRates:o.shippingRates,isLoadingRates:s,cartHasCalculatedShipping:o.hasCalculatedShipping,paymentRequirements:o.paymentRequirements,receiveCart:(0,_.dispatch)(Fn).receiveCart},cartTotals:o.totals,cartNeedsShipping:o.needsShipping,billingData:o.billingAddress,billingAddress:o.billingAddress,shippingAddress:o.shippingAddress,selectedShippingMethods:a,paymentMethods:o.paymentMethods,paymentRequirements:o.paymentRequirements}}return e})(),a=(0,At.getPaymentMethods)(),i=Tn(),{removeNotice:l}=(0,_.useDispatch)("core/notices"),{dispatchCheckoutEvent:d}=lt(),u=(0,m.useMemo)((()=>{const e=Object.keys(n),t=new Set(e.flatMap((e=>n[e].map((e=>e.method.gateway))))),o=Array.from(t).filter((e=>{var t;return null===(t=a[e])||void 0===t?void 0:t.canMakePayment(s)}));return e.flatMap((e=>n[e].map((t=>{if(!o.includes(t.method.gateway))return;const r="cc"===e||"echeck"===e,n=t.method.gateway;return{name:`wc-saved-payment-method-token-${n}`,label:r?qn(t):zn(t),value:t.tokenId.toString(),onChange:e=>{const t=`wc-${n}-payment-token`;c(n,{token:e,payment_method:n,[t]:e.toString(),isSavedToken:!0}),l("wc-payment-error",ve.PAYMENTS),d("set-active-payment-method",{paymentMethodSlug:n})}}})))).filter((e=>void 0!==e))}),[n,a,c,l,d,s]),p=t&&a[o]&&void 0!==(null===(e=a[o])||void 0===e?void 0:e.savedTokenComponent)&&!(0,ye.isNull)(a[o].savedTokenComponent)?(0,m.cloneElement)(a[o].savedTokenComponent,{token:t,...i}):null;return u.length>0?(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Zt.RadioControl,{highlightChecked:!0,id:"wc-payment-method-saved-tokens",selected:t,options:u,onChange:()=>{}}),p):null};o(181);const Yn=({noPaymentMethods:e=(0,r.createElement)(En,null)})=>{const{paymentMethodsInitialized:t,availablePaymentMethods:o,savedPaymentMethods:n}=(0,_.useSelect)((e=>{const t=e(re.paymentStore);return{paymentMethodsInitialized:t.paymentMethodsInitialized(),availablePaymentMethods:t.getAvailablePaymentMethods(),savedPaymentMethods:t.getSavedPaymentMethods()}}));return t&&0===Object.keys(o).length?e:(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Wn,null),Object.keys(n).length>0&&(0,r.createElement)(Zt.Label,{label:(0,M.__)("Use another payment method.","woocommerce"),screenReaderLabel:(0,M.__)("Other available payment methods","woocommerce"),wrapperElement:"p",wrapperProps:{className:["wc-block-components-checkout-step__description wc-block-components-checkout-step__description-payments-aligned"]}}),(0,r.createElement)(On,null))},Gn=({noPaymentMethods:e})=>(0,r.createElement)(Yn,{noPaymentMethods:e});var Kn=o(433),Zn=o(4400);const Jn=({label:e,description:t,buttonLabel:o,buttonHref:n,icon:c=Kn.A})=>(0,r.createElement)(qt.Placeholder,{icon:(0,r.createElement)(a.A,{icon:c}),label:e,className:"wc-block-checkout__configure-placeholder"},(0,r.createElement)("span",{className:"wc-block-checkout__configure-placeholder-description"},t),(0,r.createElement)(qt.Button,{variant:"primary",href:n,target:"_blank",rel:"noopener noreferrer",style:{backgroundColor:Zn.T.fN2,color:Zn.T.cai,pointerEvents:"all"}},o)),Xn={...Lo({defaultTitle:(0,M.__)("Payment options","woocommerce"),defaultDescription:""}),className:{type:"string",default:""},lock:{type:"object",default:{move:!0,remove:!0}}};(0,i.registerBlockType)("woocommerce/checkout-payment-block",{icon:{src:(0,r.createElement)(a.A,{icon:Kr.A,className:"wc-block-editor-components-block-icon"})},attributes:Xn,edit:({attributes:e,setAttributes:t})=>{const o=(0,y.getSetting)("globalPaymentMethods"),c=(0,_.select)(re.paymentStore).getIncompatiblePaymentMethods(),s=(0,M.__)("Incompatible with block-based checkout","woocommerce"),a=B.wordCountType;return(0,r.createElement)(Xt,{attributes:e,setAttributes:t,className:(0,n.A)("wc-block-checkout__payment-method",null==e?void 0:e.className)},(0,r.createElement)(l.InspectorControls,null,o.length>0&&(0,r.createElement)(qt.PanelBody,{title:(0,M.__)("Methods","woocommerce")},(0,r.createElement)("p",{className:"wc-block-checkout__controls-text"},(0,M.__)("You currently have the following payment integrations active.","woocommerce")),o.map((e=>{const t=!!c[e.id];let o;return o="words"===a?ln(e.description,30,void 0,!1):mn(e.description,30,"characters_including_spaces"===a,void 0,!1),(0,r.createElement)(nn,{key:e.id,href:`${y.ADMIN_URL}admin.php?page=wc-settings&tab=checkout&section=${e.id}`,title:e.title,description:o,...t?{warning:s}:{}})})),(0,r.createElement)(qt.ExternalLink,{href:`${y.ADMIN_URL}admin.php?page=wc-settings&tab=checkout`},(0,M.__)("Manage payment methods","woocommerce")))),(0,r.createElement)(co,null,(0,r.createElement)(Gn,{noPaymentMethods:(0,r.createElement)(Jn,{icon:Kr.A,label:(0,M.__)("Payment options","woocommerce"),description:(0,M.__)("Your store does not have any payment methods that support the Checkout block. Once you have configured a compatible payment method it will be displayed here.","woocommerce"),buttonLabel:(0,M.__)("Configure Payment Options","woocommerce"),buttonHref:`${y.ADMIN_URL}admin.php?page=wc-settings&tab=checkout`})})),(0,r.createElement)(Qt,{block:Bt.innerBlockAreas.PAYMENT_METHODS}))},save:()=>(0,r.createElement)("div",{...l.useBlockProps.save()},(0,r.createElement)(eo,null))});const Qn=(0,r.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 0 24 24"},(0,r.createElement)("path",{stroke:"#1E1E1E",strokeLinejoin:"round",strokeWidth:"1.5",d:"M18.25 12a6.25 6.25 0 1 1-12.5 0 6.25 6.25 0 0 1 12.5 0Z"}),(0,r.createElement)("path",{fill:"#1E1E1E",d:"M10 3h4v3h-4z"}),(0,r.createElement)("rect",{width:"1.5",height:"5",x:"11.25",y:"8",fill:"#1E1E1E",rx:".75"}),(0,r.createElement)("path",{fill:"#1E1E1E",d:"m15.7 4.816 1.66 1.078-1.114 1.718-1.661-1.078z"})),ec=()=>((e=!1)=>{const{paymentMethodsInitialized:t,expressPaymentMethodsInitialized:o,availablePaymentMethods:r,availableExpressPaymentMethods:n}=(0,_.useSelect)((e=>{const t=e(re.paymentStore);return{paymentMethodsInitialized:t.paymentMethodsInitialized(),expressPaymentMethodsInitialized:t.expressPaymentMethodsInitialized(),availableExpressPaymentMethods:t.getAvailableExpressPaymentMethods(),availablePaymentMethods:t.getAvailablePaymentMethods()}})),c=Object.values(r).map((({name:e})=>e)),s=Object.values(n).map((({name:e})=>e)),a=(0,At.getPaymentMethods)(),i=(0,At.getExpressPaymentMethods)(),l=Object.keys(a).reduce(((e,t)=>(c.includes(t)&&(e[t]=a[t]),e)),{}),m=Object.keys(i).reduce(((e,t)=>(s.includes(t)&&(e[t]=i[t]),e)),{}),d=_o(l),u=_o(m);return{paymentMethods:e?u:d,isInitialized:e?o:t}})(!0),tc=["height","borderRadius"],oc=e=>{const t=(0,_.select)(re.paymentStore).getAvailableExpressPaymentMethods();return Object.values(t).reduce(((t,o)=>t||(null==o?void 0:o.supportsStyle.some((t=>e.includes(t))))),!1)},rc=({attributes:e,setAttributes:t})=>{const{buttonHeight:o,buttonBorderRadius:n}=e;return(0,r.createElement)(r.Fragment,null,oc(["height"])&&(0,r.createElement)(qt.RadioControl,{label:(0,M.__)("Button height","woocommerce"),selected:o,options:[{label:(0,M.__)("Small (40px)","woocommerce"),value:"40"},{label:(0,M.__)("Medium (48px)","woocommerce"),value:"48"},{label:(0,M.__)("Large (55px)","woocommerce"),value:"55"}],onChange:e=>t({buttonHeight:e})}),oc(["borderRadius"])&&(0,r.createElement)("div",{className:"border-radius-control-container"},(0,r.createElement)(l.HeightControl,{label:(0,M.__)("Button border radius","woocommerce"),value:n,onChange:e=>{const o=e.replace("px","");t({buttonBorderRadius:o})}})))},nc=({attributes:e,setAttributes:t})=>e.showButtonStyles?(0,r.createElement)(rc,{attributes:e,setAttributes:t}):null,cc=()=>{const e=(0,_.select)(re.paymentStore).getAvailableExpressPaymentMethods();return Object.entries(e).length<1?(0,r.createElement)("p",{className:"wc-block-checkout__controls-text"},(0,M.__)("You currently have no express payment integrations active.","woocommerce")):(0,r.createElement)(r.Fragment,null,(0,r.createElement)("p",{className:"wc-block-checkout__controls-text"},(0,M.__)("You currently have the following express payment integrations active.","woocommerce")),Object.values(e).map((e=>(0,r.createElement)(nn,{key:e.name,href:`${y.ADMIN_URL}admin.php?page=wc-settings&tab=checkout&section=${encodeURIComponent(e.gatewayId)}`,title:e.title,description:e.description}))))},sc=(0,r.createElement)(r.Fragment,null,(0,M.__)("Apply uniform styles","woocommerce")," ",(0,r.createElement)("span",{className:"express-payment-styles-beta-badge"},"Beta")),ac=({attributes:e,setAttributes:t})=>(0,r.createElement)(l.InspectorControls,null,oc(tc)&&(0,r.createElement)(qt.PanelBody,{title:(0,M.__)("Button Settings","woocommerce"),className:"express-payment-button-settings"},(0,r.createElement)(qt.ToggleControl,{label:sc,checked:e.showButtonStyles,onChange:()=>t({showButtonStyles:!e.showButtonStyles}),help:(0,M.__)("Sets a consistent style for express payment buttons.","woocommerce")}),(0,r.createElement)(qt.Notice,{status:"warning",isDismissible:!1,className:"wc-block-checkout__notice express-payment-styles-notice"},(0,r.createElement)("strong",null,(0,M.__)("Note","woocommerce"),":")," ",(0,M.__)("Some payment methods might not yet support all style controls","woocommerce")),(0,r.createElement)(nc,{attributes:e,setAttributes:t})),(0,r.createElement)(qt.PanelBody,{title:(0,M.__)("Express Payment Methods","woocommerce")},(0,r.createElement)(cc,null))),ic="wc/store/payment",lc=(0,m.createContext)({showButtonStyles:!1,buttonHeight:"48",buttonBorderRadius:"4"}),mc=()=>{const{isEditor:e}=b(),{showButtonStyles:t,buttonHeight:o,buttonBorderRadius:n}=(0,m.useContext)(lc),c=t?{height:o,borderRadius:n}:void 0,{activePaymentMethod:s,paymentMethodData:a}=(0,_.useSelect)((e=>{const t=e(ic);return{activePaymentMethod:t.getActivePaymentMethod(),paymentMethodData:t.getPaymentMethodData()}})),{__internalSetActivePaymentMethod:i,__internalSetExpressPaymentStarted:l,__internalSetPaymentIdle:d,__internalSetPaymentError:u,__internalSetPaymentMethodData:p,__internalSetExpressPaymentError:h}=(0,_.useDispatch)(ic),{paymentMethods:g}=ec(),k=Tn(),w=(0,m.useRef)(s),E=(0,m.useRef)(a),y=(0,m.useCallback)((e=>()=>{w.current=s,E.current=a,l(),i(e)}),[s,a,i,l]),v=(0,m.useCallback)((()=>{d(),i(w.current,E.current)}),[i,d]),f=(0,m.useCallback)((e=>{u(),p(e),h(e),i(w.current,E.current)}),[i,u,p,h]),S=(0,m.useCallback)(((e="")=>{ce()("Express Payment Methods should use the provided onError handler instead.",{alternative:"onError",plugin:"woocommerce-gutenberg-products-block",link:"https://github.com/woocommerce/woocommerce-gutenberg-products-block/pull/4228"}),e?f(e):h("")}),[h,f]),C=Object.entries(g),P=C.length>0?C.map((([t,o])=>{const n=e?o.edit:o.content;return(0,m.isValidElement)(n)?(0,r.createElement)("li",{key:t,id:`express-payment-method-${t}`},(0,m.cloneElement)(n,{...k,onClick:y(t),onClose:v,onError:f,setExpressPaymentError:S,buttonAttributes:c})):null})):(0,r.createElement)("li",{key:"noneRegistered"},(0,M.__)("No registered Payment Methods","woocommerce"));return(0,r.createElement)(Bn,{isEditor:e},(0,r.createElement)("ul",{className:"wc-block-components-express-payment__event-buttons"},P))};o(9569);const dc=()=>{const{isCalculating:e,isProcessing:t,isAfterProcessing:o,isBeforeProcessing:n,isComplete:c,hasError:s}=(0,_.useSelect)((e=>{const t=e(re.checkoutStore);return{isCalculating:t.isCalculating(),isProcessing:t.isProcessing(),isAfterProcessing:t.isAfterProcessing(),isBeforeProcessing:t.isBeforeProcessing(),isComplete:t.isComplete(),hasError:t.hasError()}})),{availableExpressPaymentMethods:a,expressPaymentMethodsInitialized:i,isExpressPaymentMethodActive:l}=(0,_.useSelect)((e=>{const t=e(re.paymentStore);return{availableExpressPaymentMethods:t.getAvailableExpressPaymentMethods(),expressPaymentMethodsInitialized:t.expressPaymentMethodsInitialized(),isExpressPaymentMethodActive:t.isExpressPaymentMethodActive()}})),{isEditor:m}=b();if(!i||i&&0===Object.keys(a).length)return m||y.CURRENT_USER_IS_ADMIN?(0,r.createElement)(Zt.StoreNoticesContainer,{context:ve.EXPRESS_PAYMENTS}):null;const d=t||o||n||c&&!s;return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Ar,{isLoading:e||d||l},(0,r.createElement)("div",{className:"wc-block-components-express-payment wc-block-components-express-payment--checkout"},(0,r.createElement)("div",{className:"wc-block-components-express-payment__title-container"},(0,r.createElement)(Zt.Title,{className:"wc-block-components-express-payment__title",headingLevel:"2"},(0,M.__)("Express Checkout","woocommerce"))),(0,r.createElement)("div",{className:"wc-block-components-express-payment__content"},(0,r.createElement)(Zt.StoreNoticesContainer,{context:ve.EXPRESS_PAYMENTS}),(0,r.createElement)(mc,null)))),(0,r.createElement)("div",{className:"wc-block-components-express-payment-continue-rule wc-block-components-express-payment-continue-rule--checkout"},(0,M.__)("Or continue below","woocommerce")))},uc=({className:e})=>{const{cartNeedsPayment:t}=He();return t?(0,r.createElement)("div",{className:e},(0,r.createElement)(dc,null)):null};o(9865),(0,i.registerBlockType)("woocommerce/checkout-express-payment-block",{icon:{src:(0,r.createElement)(a.A,{style:{fill:"none"},icon:Qn,className:"wc-block-editor-components-block-icon"})},edit:({attributes:e,setAttributes:t})=>{const{paymentMethods:o,isInitialized:c}=ec(),s=Object.keys(o).length>0,a=(0,l.useBlockProps)({className:(0,n.A)({"wp-block-woocommerce-checkout-express-payment-block--has-express-payment-methods":s},null==e?void 0:e.className),attributes:e});if(!c||!s)return null;const{buttonHeight:i,buttonBorderRadius:m,showButtonStyles:d}=e;return(0,r.createElement)("div",{...a},(0,r.createElement)(ac,{attributes:e,setAttributes:t}),(0,r.createElement)(lc.Provider,{value:{showButtonStyles:d,buttonHeight:i,buttonBorderRadius:m}},(0,r.createElement)(uc,null)))},save:()=>(0,r.createElement)("div",{...l.useBlockProps.save()})});var pc=o(1176),hc=o(3705);const gc=({minRate:e,maxRate:t,multiple:o=!1})=>{if(void 0===e||void 0===t)return null;const n=(0,y.getSetting)("displayCartPricesIncludingTax",!1)?parseInt(e.price,10)+parseInt(e.taxes,10):parseInt(e.price,10),c=(0,y.getSetting)("displayCartPricesIncludingTax",!1)?parseInt(t.price,10)+parseInt(t.taxes,10):parseInt(t.price,10),s=0===n?(0,r.createElement)("em",null,(0,M.__)("free","woocommerce")):(0,r.createElement)(Zt.FormattedMonetaryAmount,{currency:(0,wr.getCurrencyFromPriceResponse)(e),value:n});return(0,r.createElement)("span",{className:"wc-block-checkout__shipping-method-option-price"},n!==c||o?(0,m.createInterpolateElement)(0===n&&0===c?"<price />":(0,M.__)("from <price />","woocommerce"),{price:s}):s)};function _c(e){return e?{min:e.reduce(((e,t)=>Ye(t.method_id)?e:void 0===e||parseInt(t.price,10)<parseInt(e.price,10)?t:e),void 0),max:e.reduce(((e,t)=>Ye(t.method_id)?e:void 0===e||parseInt(t.price,10)>parseInt(e.price,10)?t:e),void 0)}:{min:void 0,max:void 0}}function kc(e){return e?{min:e.reduce(((e,t)=>Ye(t.method_id)&&(void 0===e||t.price<e.price)?t:e),void 0),max:e.reduce(((e,t)=>Ye(t.method_id)&&(void 0===e||t.price>e.price)?t:e),void 0)}:{min:void 0,max:void 0}}o(7694);const bc=(0,M.__)("Pickup","woocommerce"),wc=(0,M.__)("Ship","woocommerce"),Ec=({checked:e,rate:t,showPrice:o,showIcon:c,toggleText:s,setAttributes:i,onClick:m})=>(0,r.createElement)(ko.$,{render:(0,r.createElement)("div",null),className:(0,n.A)("wc-block-checkout__shipping-method-option",{"wc-block-checkout__shipping-method-option--selected":"pickup"===e}),onClick:m},!0===c&&(0,r.createElement)(a.A,{icon:hc.A,size:28,className:"wc-block-checkout__shipping-method-option-icon"}),(0,r.createElement)(l.RichText,{value:s,placeholder:bc,tagName:"span",className:"wc-block-checkout__shipping-method-option-title",onChange:e=>i({localPickupText:e}),__unstableDisableFormats:!0,preserveWhiteSpace:!0}),!0===o&&(0,r.createElement)(gc,{minRate:t.min,maxRate:t.max})),yc=({checked:e,rate:t,showPrice:o,showIcon:c,toggleText:s,setAttributes:i,onClick:m})=>{const d=void 0===t.min?(0,r.createElement)("span",{className:"wc-block-checkout__shipping-method-option-price"},(0,M.__)("calculated with an address","woocommerce")):(0,r.createElement)(gc,{minRate:t.min,maxRate:t.max});return(0,r.createElement)(ko.$,{render:(0,r.createElement)("div",null),className:(0,n.A)("wc-block-checkout__shipping-method-option",{"wc-block-checkout__shipping-method-option--selected":"shipping"===e}),onClick:m},!0===c&&(0,r.createElement)(a.A,{icon:pc.A,size:28,className:"wc-block-checkout__shipping-method-option-icon"}),(0,r.createElement)(l.RichText,{value:s,placeholder:wc,tagName:"span",className:"wc-block-checkout__shipping-method-option-title",onChange:e=>i({shippingText:e}),__unstableDisableFormats:!0,preserveWhiteSpace:!0}),!0===o&&d)},vc={...Lo({defaultTitle:(0,M.__)("Delivery","woocommerce"),defaultDescription:(0,M.__)("Select how you would like to receive your order.","woocommerce")}),className:{type:"string",default:""},showIcon:{type:"boolean",default:!0},showPrice:{type:"boolean",default:!1},localPickupText:{type:"string",default:bc},shippingText:{type:"string",default:wc},lock:{type:"object",default:{move:!0,remove:!0}}};(0,i.registerBlockType)("woocommerce/checkout-shipping-method-block",{icon:{src:(0,r.createElement)(a.A,{icon:pc.A,className:"wc-block-editor-components-block-icon"})},attributes:vc,edit:({attributes:e,setAttributes:t})=>{var o,c;(0,m.useEffect)((()=>{const o=(0,y.getSetting)("localPickupText",e.localPickupText);t({localPickupText:o})}),[t]);const{setPrefersCollection:s}=(0,_.useDispatch)(re.checkoutStore),{prefersCollection:a}=(0,_.useSelect)((e=>({prefersCollection:e(re.checkoutStore).prefersCollection()}))),{showPrice:i,showIcon:d,className:u,localPickupText:p,shippingText:h}=e,{shippingRates:g,needsShipping:k,hasCalculatedShipping:b,isCollectable:w}=mt();if(!(k&&b&&g&&w&&U))return null;const E=e=>{s("pickup"===e)};return(0,r.createElement)(Xt,{attributes:e,setAttributes:t,className:(0,n.A)("wc-block-checkout__shipping-method",u)},(0,r.createElement)(l.InspectorControls,null,(0,r.createElement)(qt.PanelBody,{title:(0,M.__)("Appearance","woocommerce")},(0,r.createElement)("p",{className:"wc-block-checkout__controls-text"},(0,M.__)("Choose how this block is displayed to your customers.","woocommerce")),(0,r.createElement)(qt.ToggleControl,{label:(0,M.__)("Show icon","woocommerce"),checked:d,onChange:()=>t({showIcon:!d})}),(0,r.createElement)(qt.ToggleControl,{label:(0,M.__)("Show costs","woocommerce"),checked:i,onChange:()=>t({showPrice:!i})})),(0,r.createElement)(qt.PanelBody,{title:(0,M.__)("Shipping Methods","woocommerce")},(0,r.createElement)("p",{className:"wc-block-checkout__controls-text"},(0,M.__)("Methods can be made managed in your store settings.","woocommerce")),(0,r.createElement)(nn,{key:"shipping_methods",href:`${y.ADMIN_URL}admin.php?page=wc-settings&tab=shipping`,title:(0,M.__)("Shipping","woocommerce"),description:(0,M.__)("Manage your shipping zones, methods, and rates.","woocommerce")}),(0,r.createElement)(nn,{key:"pickup_location",href:`${y.ADMIN_URL}admin.php?page=wc-settings&tab=shipping&section=pickup_location`,title:(0,M.__)("Pickup","woocommerce"),description:(0,M.__)("Allow customers to choose a local pickup location during checkout.","woocommerce")}))),(0,r.createElement)("div",{id:"shipping-method",className:"wc-block-checkout__shipping-method-container",role:"radiogroup"},(0,r.createElement)(yc,{checked:a?"pickup":"shipping",rate:_c(null===(o=g[0])||void 0===o?void 0:o.shipping_rates),onClick:()=>{E("shipping")},showPrice:i,showIcon:d,setAttributes:t,toggleText:h}),(0,r.createElement)(Ec,{checked:a?"pickup":"shipping",rate:kc(null===(c=g[0])||void 0===c?void 0:c.shipping_rates),showPrice:i,onClick:()=>{E("pickup")},showIcon:d,setAttributes:t,toggleText:p})),(0,r.createElement)(Qt,{block:Bt.innerBlockAreas.SHIPPING_METHOD}))},save:()=>(0,r.createElement)("div",{...l.useBlockProps.save()},(0,r.createElement)(eo,null))});const fc=e=>{const t=(0,y.getSetting)("displayCartPricesIncludingTax",!1)?parseInt(e.price,10)+parseInt(e.taxes,10):parseInt(e.price,10);let o=(0,r.createElement)(r.Fragment,null,Number.isFinite(t)&&(0,r.createElement)(Zt.FormattedMonetaryAmount,{currency:(0,wr.getCurrencyFromPriceResponse)(e),value:t}),(0,r.createElement)("span",{className:"wc-block-components-shipping-rates-control__package__delivery_time"},Number.isFinite(t)&&e.delivery_time?" â ":null,(0,Pe.decodeEntities)(e.delivery_time)));return 0===t&&(o=(0,r.createElement)("span",{className:"wc-block-components-shipping-rates-control__package__description--free"},(0,M.__)("Free","woocommerce"),(0,r.createElement)("span",{className:"wc-block-components-shipping-rates-control__package__delivery_time"},e.delivery_time&&" â "+(0,Pe.decodeEntities)(e.delivery_time)))),{label:(0,Pe.decodeEntities)(e.name),value:e.rate_id,description:o}},Sc=({className:e="",noResultsMessage:t,onSelectRate:o,rates:n,renderOption:c=fc,selectedRate:s,disabled:a=!1,highlightChecked:i=!1})=>{const l=(null==s?void 0:s.rate_id)||"",d=kt(l),[u,p]=(0,m.useState)(null!=l?l:"");return(0,m.useEffect)((()=>{l&&l!==d&&l!==u&&p(l)}),[l,u,d]),(0,m.useEffect)((()=>{!u&&n.length>0&&(p(n[0].rate_id),o(n[0].rate_id))}),[o,n,u]),0===n.length?t:(0,r.createElement)(Zt.RadioControl,{className:e,onChange:e=>{p(e),o(e)},highlightChecked:i,disabled:a,selected:u,options:n.map(c)})},Cc=({packageData:e})=>(0,r.createElement)("ul",{className:"wc-block-components-shipping-rates-control__package-items"},Object.values(e.items).map((e=>{const t=(0,Pe.decodeEntities)(e.name),o=e.quantity;return(0,r.createElement)("li",{key:e.key,className:"wc-block-components-shipping-rates-control__package-item"},(0,r.createElement)(Zt.Label,{label:o>1?`${t} Ã ${o}`:`${t}`,allowHTML:!0,screenReaderLabel:(0,M.sprintf)(/* translators: %1$s name of the product (ie: Sunglasses), %2$d number of units in the current cart package */ /* translators: %1$s name of the product (ie: Sunglasses), %2$d number of units in the current cart package */
(0,M._n)("%1$s (%2$d unit)","%1$s (%2$d units)",o,"woocommerce"),t,o)}))})));o(2867);const Pc=({packageId:e,className:t="",noResultsMessage:o,renderOption:c,packageData:s,collapsible:a,showItems:i,highlightChecked:l=!1})=>{var d;const{selectShippingRate:u,isSelectingRate:p}=mt(),h=(0,_.useSelect)((e=>{var t;return null===(t=e(re.cartStore))||void 0===t||null===(t=t.getCartData())||void 0===t||null===(t=t.shippingRates)||void 0===t?void 0:t.length})),[g,k]=(0,m.useState)(0),b=h>1||g>1;(0,m.useEffect)((()=>{const e=()=>{k(document.querySelectorAll(".wc-block-components-shipping-rates-control__package").length)};e();const t=new MutationObserver(e);return t.observe(document.body,{childList:!0,subtree:!0}),()=>{t.disconnect()}}),[]);const w=null!=i?i:b,E=null!=a?a:b,{selectedOptionNumber:y,selectedOption:v}=(0,m.useMemo)((()=>{var e,t;return{selectedOptionNumber:null==s||null===(e=s.shipping_rates)||void 0===e?void 0:e.findIndex((e=>null==e?void 0:e.selected)),selectedOption:null==s||null===(t=s.shipping_rates)||void 0===t?void 0:t.find((e=>null==e?void 0:e.selected))}}),[null==s?void 0:s.shipping_rates]),f=E||w?(0,r.createElement)("div",{className:"wc-block-components-shipping-rates-control__package-header"},(0,r.createElement)("div",{className:"wc-block-components-shipping-rates-control__package-title",dangerouslySetInnerHTML:{__html:tn(s.name)}}),E&&(0,r.createElement)("div",{className:"wc-block-components-totals-shipping__via"},(0,Pe.decodeEntities)(null==v?void 0:v.name)),w&&(0,r.createElement)(Cc,{packageData:s})):null,S=(0,m.useCallback)((t=>{u(t,e)}),[e,u]),C={className:t,noResultsMessage:o,rates:s.shipping_rates,onSelectRate:S,selectedRate:s.shipping_rates.find((e=>e.selected)),renderOption:c,disabled:p,highlightChecked:l};return E?(0,r.createElement)(Zt.Panel,{className:(0,n.A)("wc-block-components-shipping-rates-control__package",t,{"wc-block-components-shipping-rates-control__package--disabled":p}),initialOpen:!1,title:f},(0,r.createElement)(Sc,{...C})):(0,r.createElement)("div",{className:(0,n.A)("wc-block-components-shipping-rates-control__package",t,{"wc-block-components-shipping-rates-control__package--disabled":p,"wc-block-components-shipping-rates-control__package--first-selected":!p&&0===y,"wc-block-components-shipping-rates-control__package--last-selected":!p&&y===(null==s||null===(d=s.shipping_rates)||void 0===d?void 0:d.length)-1})},f,(0,r.createElement)(Sc,{...C}))},Nc=({packages:e,showItems:t,collapsible:o,noResultsMessage:n,renderOption:c,context:s=""})=>e.length?(0,r.createElement)(r.Fragment,null,e.map((({package_id:e,...a})=>(0,r.createElement)(Pc,{highlightChecked:"woocommerce/cart"!==s,key:e,packageId:e,packageData:a,collapsible:o,showItems:t,noResultsMessage:n,renderOption:c})))):null,Ac=({shippingRates:e,isLoadingRates:t,className:o,collapsible:n,showItems:c,noResultsMessage:s=(0,r.createElement)(r.Fragment,null),renderOption:a,context:i})=>{const l=(e=>e.reduce((function(e,t){return e+t.shipping_rates.length}),0))(e),d=qe(e),u=kt(l),p=kt(d);(0,m.useEffect)((()=>{var e,o;t||u===l&&p===d||(o=l,1===(e=d)?(0,bn.speak)((0,M.sprintf)(/* translators: %d number of shipping options found. */ /* translators: %d number of shipping options found. */
(0,M._n)("%d shipping option was found.","%d shipping options were found.",o,"woocommerce"),o)):(0,bn.speak)((0,M.sprintf)(/* translators: %d number of shipping packages packages. */ /* translators: %d number of shipping packages packages. */
(0,M._n)("Shipping option searched for %d package.","Shipping options searched for %d packages.",e,"woocommerce"),e)+" "+(0,M.sprintf)(/* translators: %d number of shipping options available. */ /* translators: %d number of shipping options available. */
(0,M._n)("%d shipping option was found","%d shipping options were found",o,"woocommerce"),o)))}),[t,l,d,u,p]);const{extensions:h,receiveCart:g,..._}=He(),k={className:o,collapsible:n,showItems:c,noResultsMessage:s,renderOption:a,extensions:h,cart:_,components:{ShippingRatesControlPackage:Pc},context:i},{isEditor:w}=b(),{hasSelectedLocalPickup:E,selectedRates:y}=mt(),v=(0,ye.isObject)(y)?Object.values(y):[],f=v.every((e=>e===v[0]));return(0,r.createElement)(Ar,{isLoading:t,screenReaderLabel:(0,M.__)("Loading shipping ratesâ¦","woocommerce"),showSpinner:!0},E&&"woocommerce/cart"===i&&e.length>1&&!f&&!w&&(0,r.createElement)(wn,{className:"wc-block-components-notice",isDismissible:!1,status:"warning"},(0,M.__)("Multiple shipments must have the same pickup location","woocommerce")),(0,r.createElement)(Bt.ExperimentalOrderShippingPackages.Slot,{...k}),(0,r.createElement)(Bt.ExperimentalOrderShippingPackages,null,(0,r.createElement)(Nc,{packages:e,noResultsMessage:s,renderOption:a})))},xc=e=>{const t=(0,y.getSetting)("displayCartPricesIncludingTax",!1)?parseInt(e.price,10)+parseInt(e.taxes,10):parseInt(e.price,10),o=0===t?(0,r.createElement)("span",{className:"wc-block-checkout__shipping-option--free"},(0,M.__)("Free","woocommerce")):(0,r.createElement)(Zt.FormattedMonetaryAmount,{currency:(0,wr.getCurrencyFromPriceResponse)(e),value:t});return{label:(0,Pe.decodeEntities)(e.name),value:e.rate_id,description:(0,Pe.decodeEntities)(e.description),secondaryLabel:o,secondaryDescription:(0,Pe.decodeEntities)(e.delivery_time)}},Ic=()=>(0,r.createElement)("p",{role:"status","aria-live":"polite",className:"wc-block-components-shipping-rates-control__no-shipping-address-message"},(0,M.__)("Enter a shipping address to view shipping options.","woocommerce")),Rc=({noShippingPlaceholder:e=null})=>{const{isEditor:t}=b(),{shippingRates:o,needsShipping:n,isLoadingRates:c,hasCalculatedShipping:s,isCollectable:a}=mt(),{shippingAddress:i}=Gt(),l=(0,m.useMemo)((()=>a?o.map((e=>({...e,shipping_rates:e.shipping_rates.filter((e=>!Ye(e.method_id)))}))):o),[o,a]);if(!n)return null;const d=qe(o);if(!s&&!d)return(0,r.createElement)(Ic,null);const u=Te(i);return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Zt.StoreNoticesContainer,{context:ve.SHIPPING_METHODS}),t&&!d?e:(0,r.createElement)(Ac,{noResultsMessage:(0,r.createElement)(r.Fragment,null,u?(0,r.createElement)(wn,{isDismissible:!1,className:"wc-block-components-shipping-rates-control__no-results-notice",status:"warning"},(0,M.__)("No shipping options are available for this address. Please verify the address is correct or try a different address.","woocommerce")):(0,r.createElement)(Ic,null)),renderOption:xc,collapsible:!1,shippingRates:l,isLoadingRates:c,context:"woocommerce/checkout"}))};o(2255);const Tc={...Lo({defaultTitle:(0,M.__)("Shipping options","woocommerce"),defaultDescription:""}),className:{type:"string",default:""},lock:{type:"object",default:{move:!0,remove:!0}}};o(1299),(0,i.registerBlockType)("woocommerce/checkout-shipping-methods-block",{icon:{src:(0,r.createElement)(a.A,{icon:pc.A,className:"wc-block-editor-components-block-icon"})},attributes:Tc,edit:({attributes:e,setAttributes:t})=>{const o=(0,y.getSetting)("globalShippingMethods"),c=(0,y.getSetting)("activeShippingZones"),{showShippingMethods:s}=Kt();return s?(0,r.createElement)(Xt,{attributes:e,setAttributes:t,className:(0,n.A)("wc-block-checkout__shipping-option",null==e?void 0:e.className)},(0,r.createElement)(l.InspectorControls,null,(0,r.createElement)(qt.PanelBody,{title:(0,M.__)("Shipping Calculations","woocommerce")},(0,r.createElement)("p",{className:"wc-block-checkout__controls-text"},(0,M.__)("Options that control shipping can be managed in your store settings.","woocommerce")),(0,r.createElement)(qt.ExternalLink,{href:`${y.ADMIN_URL}admin.php?page=wc-settings&tab=shipping&section=options`},(0,M.__)("Manage shipping options","woocommerce"))," "),o.length>0&&(0,r.createElement)(qt.PanelBody,{title:(0,M.__)("Methods","woocommerce")},(0,r.createElement)("p",{className:"wc-block-checkout__controls-text"},(0,M.__)("The following shipping integrations are active on your store.","woocommerce")),o.map((e=>(0,r.createElement)(nn,{key:e.id,href:`${y.ADMIN_URL}admin.php?page=wc-settings&tab=shipping&section=${e.id}`,title:e.title,description:e.description}))),(0,r.createElement)(qt.ExternalLink,{href:`${y.ADMIN_URL}admin.php?page=wc-settings&tab=shipping`},(0,M.__)("Manage shipping methods","woocommerce"))),c.length&&(0,r.createElement)(qt.PanelBody,{title:(0,M.__)("Shipping Zones","woocommerce")},(0,r.createElement)("p",{className:"wc-block-checkout__controls-text"},(0,M.__)("Shipping Zones can be made managed in your store settings.","woocommerce")),c.map((e=>(0,r.createElement)(nn,{key:e.id,href:`${y.ADMIN_URL}admin.php?page=wc-settings&tab=shipping&zone_id=${e.id}`,title:e.title,description:e.description}))))),(0,r.createElement)(co,null,(0,r.createElement)(Rc,{noShippingPlaceholder:(0,r.createElement)(Jn,{icon:pc.A,label:(0,M.__)("Shipping options","woocommerce"),description:(0,M.__)("Your store does not have any Shipping Options configured. Once you have added your Shipping Options they will appear here.","woocommerce"),buttonLabel:(0,M.__)("Configure Shipping Options","woocommerce"),buttonHref:`${y.ADMIN_URL}admin.php?page=wc-settings&tab=shipping`})})),(0,r.createElement)(Qt,{block:Bt.innerBlockAreas.SHIPPING_METHODS})):null},save:()=>(0,r.createElement)("div",{...l.useBlockProps.save()},(0,r.createElement)(eo,null))});const Mc=({title:e,setSelectedOption:t,selectedOption:o,pickupLocations:n,onSelectRate:c,renderPickupLocation:s,packageCount:a})=>{const i=(0,_.useSelect)((e=>{var t;return null===(t=e(re.cartStore))||void 0===t||null===(t=t.getCartData())||void 0===t||null===(t=t.shippingRates)||void 0===t?void 0:t.length}))>1||document.querySelectorAll(".wc-block-components-local-pickup-select .wc-block-components-radio-control").length>1;return(0,r.createElement)("div",{className:"wc-block-components-local-pickup-select"},!(!i||!e)&&(0,r.createElement)("div",null,e),(0,r.createElement)(Zt.RadioControl,{onChange:e=>{t(e),c(e)},highlightChecked:!0,selected:o,options:n.map((e=>s(e,a)))}))};function Bc(e){let t,o,r,n=[];for(let c=0;c<e.length;c++)t=e.substring(c),o=t.match(/^&[a-z0-9#]+;/),o?(r=o[0],n.push(r),c+=r.length-1):n.push(e[c]);return n}const Dc=(e,t,o="...")=>{const r=function(e,t){const o=(t=t||{}).limit||100,r=void 0===t.preserveTags||t.preserveTags,n=void 0!==t.wordBreak&&t.wordBreak,c=t.suffix||"...",s=t.moreLink||"",a=t.moreText||"Â»",i=t.preserveWhiteSpace||!1,l=e.replace(/</g,"\n<").replace(/>/g,">\n").replace(/\n\n/g,"\n").replace(/^\n/g,"").replace(/\n$/g,"").split("\n");let m,d,u,p,h,g,_=0,k=[],b=!1;for(let e=0;e<l.length;e++){if(m=l[e],p=i?m:m.replace(/[ ]+/g," "),!m.length)continue;const t=Bc(p);if("<"!==m[0])if(_>=o)m="";else if(_+t.length>=o){if(d=o-_," "===t[d-1])for(;d&&(d-=1," "===t[d-1]););else u=t.slice(d).indexOf(" "),n||(-1!==u?d+=u:d=m.length);if(m=t.slice(0,d).join("")+c,s){const e=document.createElement("a");e.href=s,e.style.display="inline",e.textContent=a,m+=e.outerHTML}_=o,b=!0}else _+=t.length;else if(r){if(_>=o)if(h=m.match(/[a-zA-Z]+/),g=h?h[0]:"",g)if("</"!==m.substring(0,2))k.push(g),m="";else{for(;k[k.length-1]!==g&&k.length;)k.pop();k.length&&(m=""),k.pop()}else m=""}else m="";l[e]=m}return{html:l.join("\n").replace(/\n/g,""),more:b}}(e,{suffix:o,limit:t});return r.html},Oc=(e,t,o)=>(t<=o?e.start=e.middle+1:e.end=e.middle-1,e),Fc=(e,t,o,r)=>{const n=((e,t,o)=>{let r={start:0,middle:0,end:e.length};for(;r.start<=r.end;)r.middle=Math.floor((r.start+r.end)/2),t.innerHTML=Dc(e,r.middle),r=Oc(r,t.clientHeight,o);return r.middle})(e,t,o);return Dc(e,n-r.length,r)},Lc={className:"read-more-content",ellipsis:"&hellip;",lessText:(0,M.__)("Read less","woocommerce"),maxLines:3,moreText:(0,M.__)("Read more","woocommerce")};class jc extends m.Component{constructor(e){super(e),(0,T.A)(this,"reviewSummary",void 0),(0,T.A)(this,"reviewContent",void 0),this.state={isExpanded:!1,clampEnabled:null,content:e.children,summary:"."},this.reviewContent=(0,m.createRef)(),this.reviewSummary=(0,m.createRef)(),this.getButton=this.getButton.bind(this),this.onClick=this.onClick.bind(this)}componentDidMount(){this.setSummary()}componentDidUpdate(e){e.maxLines===this.props.maxLines&&e.children===this.props.children||this.setState({clampEnabled:null,summary:"."},this.setSummary)}setSummary(){if(this.props.children){const{maxLines:e,ellipsis:t}=this.props;if(!this.reviewSummary.current||!this.reviewContent.current)return;const o=(this.reviewSummary.current.clientHeight+1)*e+1,r=this.reviewContent.current.clientHeight+1>o;this.setState({clampEnabled:r}),r&&this.setState({summary:Fc(this.reviewContent.current.innerHTML,this.reviewSummary.current,o,t)})}}getButton(){const{isExpanded:e}=this.state,{className:t,lessText:o,moreText:n}=this.props,c=e?o:n;if(c)return(0,r.createElement)("a",{href:"#more",className:t+"__read_more",onClick:this.onClick,"aria-expanded":!e,role:"button"},c)}onClick(e){e.preventDefault();const{isExpanded:t}=this.state;this.setState({isExpanded:!t})}render(){const{className:e}=this.props,{content:t,summary:o,clampEnabled:n,isExpanded:c}=this.state;return t?!1===n?(0,r.createElement)("div",{className:e},(0,r.createElement)("div",{ref:this.reviewContent},t)):(0,r.createElement)("div",{className:e},(!c||null===n)&&(0,r.createElement)("div",{ref:this.reviewSummary,"aria-hidden":c,dangerouslySetInnerHTML:{__html:o}}),(c||null===n)&&(0,r.createElement)("div",{ref:this.reviewContent,"aria-hidden":!c},t),this.getButton()):null}}(0,T.A)(jc,"defaultProps",Lc);const Vc=jc,Uc=(e,t)=>{const o=(0,y.getSetting)("displayCartPricesIncludingTax",!1)?parseInt(e.price,10)+parseInt(e.taxes,10):e.price,n=(e=>{if(null!=e&&e.meta_data){const t=e.meta_data.find((e=>"pickup_location"===e.key));return t?t.value:""}return""})(e),c=(e=>{if(null!=e&&e.meta_data){const t=e.meta_data.find((e=>"pickup_address"===e.key));return t?t.value:""}return""})(e),s=(e=>{if(null!=e&&e.meta_data){const t=e.meta_data.find((e=>"pickup_details"===e.key));return t?t.value:""}return""})(e);let i=(0,r.createElement)("em",null,(0,M.__)("free","woocommerce"));return parseInt(o,10)>0&&(i=1===t?(0,r.createElement)(Zt.FormattedMonetaryAmount,{currency:(0,wr.getCurrencyFromPriceResponse)(e),value:o}):(0,m.createInterpolateElement)(/* translators: <price/> is the price of the package, <packageCount/> is the number of packages. These must appear in the translated string. */ /* translators: <price/> is the price of the package, <packageCount/> is the number of packages. These must appear in the translated string. */
(0,M._n)("<price/> x <packageCount/> package","<price/> x <packageCount/> packages",t,"woocommerce"),{price:(0,r.createElement)(Zt.FormattedMonetaryAmount,{currency:(0,wr.getCurrencyFromPriceResponse)(e),value:o}),packageCount:(0,r.createElement)(r.Fragment,null,t)})),{value:e.rate_id,label:n?(0,Pe.decodeEntities)(n):(0,Pe.decodeEntities)(e.name),secondaryLabel:i,description:c?(0,r.createElement)(r.Fragment,null,(0,r.createElement)(a.A,{icon:Yt.A,className:"wc-block-editor-components-block-icon"}),(0,Pe.decodeEntities)(c)):void 0,secondaryDescription:s?(0,r.createElement)(Vc,{maxLines:2},(0,Pe.decodeEntities)(s)):void 0}},$c=()=>{const{shippingRates:e,selectShippingRate:t}=mt(),o=(0,m.useMemo)((()=>{var t;return((null===(t=e[0])||void 0===t?void 0:t.shipping_rates)||[]).filter(We)}),[e]),[n,c]=(0,m.useState)((()=>{var e;return(null===(e=o.find((e=>e.selected)))||void 0===e?void 0:e.rate_id)||""})),s=(0,m.useCallback)((e=>{t(e)}),[t]),{extensions:a,receiveCart:i,...l}=He(),d={extensions:a,cart:l,components:{ShippingRatesControlPackage:Pc,LocalPickupSelect:Mc},renderPickupLocation:Uc};(0,m.useEffect)((()=>{!n&&o[0]&&n!==o[0].rate_id&&(c(o[0].rate_id),s(o[0].rate_id))}),[o,n]);const u=qe(e);return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Bt.ExperimentalOrderLocalPickupPackages.Slot,{...d}),(0,r.createElement)(Bt.ExperimentalOrderLocalPickupPackages,null,(0,r.createElement)(Mc,{title:e[0].name,setSelectedOption:c,onSelectRate:s,selectedOption:n,renderPickupLocation:Uc,pickupLocations:o,packageCount:u})))},Hc={...Lo({defaultTitle:(0,M.__)("Pickup locations","woocommerce"),defaultDescription:""}),className:{type:"string",default:""},lock:{type:"object",default:{move:!0,remove:!0}}};o(3425),(0,i.registerBlockType)("woocommerce/checkout-pickup-options-block",{icon:{src:(0,r.createElement)(a.A,{icon:hc.A,className:"wc-block-editor-components-block-icon"})},attributes:Hc,edit:({attributes:e,setAttributes:t})=>{const{prefersCollection:o}=(0,_.useSelect)((e=>({prefersCollection:e(re.checkoutStore).prefersCollection()}))),{className:c}=e;return o&&U?(0,r.createElement)(Xt,{attributes:e,setAttributes:t,className:(0,n.A)("wc-block-checkout__shipping-method",c)},(0,r.createElement)(qt.Disabled,null,(0,r.createElement)($c,null)),(0,r.createElement)(Qt,{block:Bt.innerBlockAreas.PICKUP_LOCATION})):null},save:()=>(0,r.createElement)("div",{...l.useBlockProps.save()},(0,r.createElement)(eo,null))});const qc=({className:e=""})=>{const{cartTotals:t}=He(),o=(0,wr.getCurrencyFromPriceResponse)(t);return(0,r.createElement)(Zt.TotalsWrapper,{className:e},(0,r.createElement)(Zt.Subtotal,{currency:o,values:t}))};(0,i.registerBlockType)("woocommerce/checkout-order-summary-subtotal-block",{icon:{src:(0,r.createElement)(a.A,{icon:Nr,className:"wc-block-editor-components-block-icon"})},edit:({attributes:e})=>{const{className:t}=e,o=(0,l.useBlockProps)();return(0,r.createElement)("div",{...o},(0,r.createElement)(qc,{className:t}))},save:()=>(0,r.createElement)("div",{...l.useBlockProps.save()})});const zc=({className:e=""})=>{const{cartFees:t,cartTotals:o}=He(),n=(0,wr.getCurrencyFromPriceResponse)(o);return(0,r.createElement)(Zt.TotalsWrapper,{className:e},(0,r.createElement)(Zt.TotalsFees,{currency:n,cartFees:t}))};(0,i.registerBlockType)("woocommerce/checkout-order-summary-fee-block",{icon:{src:(0,r.createElement)(a.A,{icon:Nr,className:"wc-block-editor-components-block-icon"})},edit:({attributes:e})=>{const{className:t}=e,o=(0,l.useBlockProps)();return(0,r.createElement)("div",{...o},(0,r.createElement)(zc,{className:t}))},save:()=>(0,r.createElement)("div",{...l.useBlockProps.save()})});const Wc=()=>{const{extensions:e,receiveCart:t,...o}=He(),n={extensions:e,cart:o,context:"woocommerce/checkout"};return(0,r.createElement)(Bt.ExperimentalDiscountsMeta.Slot,{...n})},Yc=({className:e=""})=>{const{cartTotals:t,cartCoupons:o}=He(),{removeCoupon:n,isRemovingCoupon:c}=In("wc/checkout"),s=(0,wr.getCurrencyFromPriceResponse)(t);return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Zt.TotalsWrapper,{className:e},(0,r.createElement)(Rr,{cartCoupons:o,currency:s,isRemovingCoupon:c,removeCoupon:n,values:t})),(0,r.createElement)(Wc,null))};(0,i.registerBlockType)("woocommerce/checkout-order-summary-discount-block",{icon:{src:(0,r.createElement)(a.A,{icon:Nr,className:"wc-block-editor-components-block-icon"})},edit:({attributes:e})=>{const{className:t}=e,o=(0,l.useBlockProps)();return(0,r.createElement)("div",{...o},(0,r.createElement)(Yc,{className:t}))},save:()=>(0,r.createElement)("div",{...l.useBlockProps.save()})});const Gc=({className:e=""})=>{const{cartNeedsShipping:t,shippingRates:o,shippingAddress:n}=He(),c=(0,_.useSelect)((e=>e(re.checkoutStore).prefersCollection()));if(!t)return null;const s=(e=>!!Ge(e)&&e.every((e=>e.shipping_rates.every((e=>!e.selected||We(e))))))(((e,t)=>e.map((e=>({...e,shipping_rates:e.shipping_rates.filter((e=>{const o=Ye(e.method_id);return t?o:!o}))}))))(o,null!=c&&c)),a=Te(n,["state","country","postcode","city"]);return(0,r.createElement)(Bt.TotalsWrapper,{className:e},(0,r.createElement)(Ur,{label:s?(0,M.__)("Pickup","woocommerce"):(0,M.__)("Delivery","woocommerce"),placeholder:(0,r.createElement)("span",{className:"wc-block-components-shipping-placeholder__value"},a?(0,M.__)("No available delivery option","woocommerce"):(0,M.__)("Enter address to calculate","woocommerce"))}))};(0,i.registerBlockType)("woocommerce/checkout-order-summary-shipping-block",{icon:{src:(0,r.createElement)(a.A,{icon:Nr,className:"wc-block-editor-components-block-icon"})},edit:({attributes:e})=>{const{className:t}=e,o=(0,l.useBlockProps)();return(0,r.createElement)("div",{...o},(0,r.createElement)(co,null,(0,r.createElement)(Gc,{className:t})))},save:()=>(0,r.createElement)("div",{...l.useBlockProps.save()})});var Kc=o(8848);const Zc=({className:e=""})=>{const t=(0,y.getSetting)("couponsEnabled",!0),{applyCoupon:o,isApplyingCoupon:n}=In("wc/checkout");return t?(0,r.createElement)(Zt.TotalsWrapper,{className:e},(0,r.createElement)(xr,{onSubmit:o,isLoading:n,instanceId:"coupon"})):null};(0,i.registerBlockType)("woocommerce/checkout-order-summary-coupon-form-block",{icon:{src:(0,r.createElement)(a.A,{icon:Kc.A,className:"wc-block-editor-components-block-icon"})},edit:({attributes:e})=>{const{className:t}=e,o=(0,l.useBlockProps)();return(0,r.createElement)("div",{...o},(0,r.createElement)(co,null,(0,r.createElement)(Zc,{className:t})))},save:()=>(0,r.createElement)("div",{...l.useBlockProps.save()})});const Jc=({className:e,showRateAfterTaxName:t})=>{const{cartTotals:o}=He();if((0,y.getSetting)("displayCartPricesIncludingTax",!1)||parseInt(o.total_tax,10)<=0)return null;const n=(0,wr.getCurrencyFromPriceResponse)(o);return(0,r.createElement)(Zt.TotalsWrapper,{className:e},(0,r.createElement)(Zt.TotalsTaxes,{showRateAfterTaxName:t,currency:n,values:o}))},Xc={showRateAfterTaxName:{type:"boolean",default:(0,y.getSetting)("displayCartPricesIncludingTax",!1)},lock:{type:"object",default:{remove:!0,move:!0}}};(0,i.registerBlockType)("woocommerce/checkout-order-summary-taxes-block",{icon:{src:(0,r.createElement)(a.A,{icon:Nr,className:"wc-block-editor-components-block-icon"})},attributes:Xc,edit:({attributes:e,setAttributes:t})=>{const{className:o,showRateAfterTaxName:n}=e,c=(0,l.useBlockProps)(),s=(0,y.getSetting)("taxesEnabled"),a=(0,y.getSetting)("displayItemizedTaxes",!1),i=(0,y.getSetting)("displayCartPricesIncludingTax",!1);return(0,r.createElement)("div",{...c},(0,r.createElement)(l.InspectorControls,null,s&&a&&!i&&(0,r.createElement)(qt.PanelBody,{title:(0,M.__)("Taxes","woocommerce")},(0,r.createElement)(qt.ToggleControl,{label:(0,M.__)("Show rate after tax name","woocommerce"),help:(0,M.__)("Show the percentage rate alongside each tax line in the summary.","woocommerce"),checked:n,onChange:()=>t({showRateAfterTaxName:!n})}))),(0,r.createElement)(Jc,{className:o,showRateAfterTaxName:n}))},save:()=>(0,r.createElement)("div",{...l.useBlockProps.save()})});const Qc=(0,r.createElement)(c.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,r.createElement)("path",{fill:"none",d:"M0 0h24v24H0V0z"}),(0,r.createElement)("path",{d:"M15.55 13c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.37-.66-.11-1.48-.87-1.48H5.21l-.94-2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2h7.45zM6.16 6h12.15l-2.76 5H8.53L6.16 6zM7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"}));o(4567);const es=({currency:e,maxPrice:t,minPrice:o,priceClassName:c,priceStyle:s={}})=>(0,r.createElement)(r.Fragment,null,(0,r.createElement)("span",{className:"screen-reader-text"},(0,M.sprintf)(/* translators: %1$s min price, %2$s max price */ /* translators: %1$s min price, %2$s max price */
(0,M.__)("Price between %1$s and %2$s","woocommerce"),(0,wr.formatPrice)(o),(0,wr.formatPrice)(t))),(0,r.createElement)("span",{"aria-hidden":!0},(0,r.createElement)(Zt.FormattedMonetaryAmount,{className:(0,n.A)("wc-block-components-product-price__value",c),currency:e,value:o,style:s}),"Â âÂ ",(0,r.createElement)(Zt.FormattedMonetaryAmount,{className:(0,n.A)("wc-block-components-product-price__value",c),currency:e,value:t,style:s}))),ts=({currency:e,regularPriceClassName:t,regularPriceStyle:o,regularPrice:c,priceClassName:s,priceStyle:a,price:i})=>(0,r.createElement)(r.Fragment,null,(0,r.createElement)("span",{className:"screen-reader-text"},(0,M.__)("Previous price:","woocommerce")),(0,r.createElement)(Zt.FormattedMonetaryAmount,{currency:e,renderText:e=>(0,r.createElement)("del",{className:(0,n.A)("wc-block-components-product-price__regular",t),style:o},e),value:c}),(0,r.createElement)("span",{className:"screen-reader-text"},(0,M.__)("Discounted price:","woocommerce")),(0,r.createElement)(Zt.FormattedMonetaryAmount,{currency:e,renderText:e=>(0,r.createElement)("ins",{className:(0,n.A)("wc-block-components-product-price__value","is-discounted",s),style:a},e),value:i})),os=({align:e,className:t,currency:o,format:c="<price/>",maxPrice:s,minPrice:a,price:i,priceClassName:l,priceStyle:d,regularPrice:u,regularPriceClassName:p,regularPriceStyle:h,style:g})=>{const _=(0,n.A)(t,"price","wc-block-components-product-price",{[`wc-block-components-product-price--align-${e}`]:e});c.includes("<price/>")||(c="<price/>",console.error("Price formats need to include the `<price/>` tag."));const k=u&&i&&i<u;let b=(0,r.createElement)("span",{className:(0,n.A)("wc-block-components-product-price__value",l)});return k?b=(0,r.createElement)(ts,{currency:o,price:i,priceClassName:l,priceStyle:d,regularPrice:u,regularPriceClassName:p,regularPriceStyle:h}):void 0!==a&&void 0!==s?b=(0,r.createElement)(es,{currency:o,maxPrice:s,minPrice:a,priceClassName:l,priceStyle:d}):i&&(b=(0,r.createElement)(Zt.FormattedMonetaryAmount,{className:(0,n.A)("wc-block-components-product-price__value",l),currency:o,value:i,style:d})),(0,r.createElement)("span",{className:_,style:g},(0,m.createInterpolateElement)(c,{price:b}))};o(6625);const rs=({className:e="",disabled:t=!1,name:o,permalink:c="",target:s,rel:a,style:i,onClick:l,disabledTagName:m="span",...d})=>{const u=(0,n.A)("wc-block-components-product-name",e),p=m;if(t){const e=d;return(0,r.createElement)(p,{className:u,...e,dangerouslySetInnerHTML:{__html:o}})}return(0,r.createElement)("a",{className:u,href:c,target:s,...d,dangerouslySetInnerHTML:{__html:o},style:i})};var ns=o(131);o(9507);const cs=({children:e,className:t})=>(0,r.createElement)("div",{className:(0,n.A)("wc-block-components-product-badge",t)},e),ss=()=>(0,r.createElement)(cs,{className:"wc-block-components-product-backorder-badge"},(0,M.__)("Available on backorder","woocommerce")),as=({image:e={},fallbackAlt:t=""})=>{const o=e.thumbnail?{src:e.thumbnail,alt:(0,Pe.decodeEntities)(e.alt)||t||"Product Image"}:{src:y.PLACEHOLDER_IMG_SRC,alt:""};return(0,r.createElement)("img",{...o,alt:o.alt})},is=({lowStockRemaining:e})=>e?(0,r.createElement)(cs,{className:"wc-block-components-product-low-stock-badge"},(0,M.sprintf)(/* translators: %d stock amount (number of items in stock for product) */ /* translators: %d stock amount (number of items in stock for product) */
(0,M.__)("%d left in stock","woocommerce"),e)):null;var ls=o(1194);o(4982);const ms=({details:e=[]})=>{if(!Array.isArray(e))return null;if(0===(e=e.filter((e=>!e.hidden))).length)return null;let t="ul",o="li";return 1===e.length&&(t="div",o="div"),(0,r.createElement)(t,{className:"wc-block-components-product-details"},e.map((e=>{const t=(null==e?void 0:e.key)||e.name||"",n=(null==e?void 0:e.className)||(t?`wc-block-components-product-details__${(0,ls.c)(t)}`:"");return(0,r.createElement)(o,{key:t+(e.display||e.value),className:n},t&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)("span",{className:"wc-block-components-product-details__name"},(0,Pe.decodeEntities)(t),":")," "),(0,r.createElement)("span",{className:"wc-block-components-product-details__value"},(0,Pe.decodeEntities)(e.display||e.value)))})))},ds=window.wp.wordcount,us=["a","b","em","i","strong","p","br","ul","ol","li","h1","h2","h3","h4","h5","h6","pre","blockquote","img"],ps=["target","href","rel","name","download","src","class","alt","style"],hs=({source:e,maxLength:t=15,countType:o="words",className:n="",style:c={}})=>{const s=(0,m.useMemo)((()=>((e,t=15,o="words")=>{const r=(0,cn.autop)(e);if((0,ds.count)(r,o)<=t)return r;const n=(e=>{const t=e.indexOf("</p>");return-1===t?e:e.substr(0,t+4)})(r);return(0,ds.count)(n,o)<=t?n:"words"===o?ln(n,t):mn(n,t,"characters_including_spaces"===o)})(e,t,o)),[e,t,o]);return(0,r.createElement)(m.RawHTML,{style:c,className:n},tn(s,{tags:us,attr:ps}))},gs=({className:e,shortDescription:t="",fullDescription:o=""})=>{const n=t||o;return n?(0,r.createElement)(hs,{className:e,source:n,maxLength:15,countType:B.wordCountType||"words"}):null};o(401);const _s=({shortDescription:e="",fullDescription:t="",itemData:o=[],variation:n=[]})=>(0,r.createElement)("div",{className:"wc-block-components-product-metadata"},(0,r.createElement)(gs,{className:"wc-block-components-product-metadata__description",shortDescription:e,fullDescription:t}),(0,r.createElement)(ms,{details:o}),(0,r.createElement)(ms,{details:n.map((({attribute:e="",value:t})=>({key:e,value:t})))})),ks=({cartItem:e,disableProductDescriptions:t})=>{const{images:o,low_stock_remaining:c,show_backorder_badge:s,name:a,permalink:i,prices:l,quantity:d,short_description:u,description:p,item_data:h,variation:g,totals:_,extensions:k}=e,{receiveCart:b,...w}=He(),E=(0,m.useMemo)((()=>({context:"summary",cartItem:e,cart:w})),[e,w]),v=(0,wr.getCurrencyFromPriceResponse)(l),f=(0,Bt.applyCheckoutFilter)({filterName:"itemName",defaultValue:a,extensions:k,arg:E}),S=(0,ns.A)({amount:parseInt(l.raw_prices.regular_price,10),precision:(0,ye.isString)(l.raw_prices.precision)?parseInt(l.raw_prices.precision,10):l.raw_prices.precision}).convertPrecision(v.minorUnit).getAmount(),C=(0,ns.A)({amount:parseInt(l.raw_prices.price,10),precision:(0,ye.isString)(l.raw_prices.precision)?parseInt(l.raw_prices.precision,10):l.raw_prices.precision}).convertPrecision(v.minorUnit).getAmount(),P=(0,wr.getCurrencyFromPriceResponse)(_);let N=parseInt(_.line_subtotal,10);(0,y.getSetting)("displayCartPricesIncludingTax",!1)&&(N+=parseInt(_.line_subtotal_tax,10));const A=(0,ns.A)({amount:N,precision:P.minorUnit}).getAmount(),x=(0,Bt.applyCheckoutFilter)({filterName:"subtotalPriceFormat",defaultValue:"<price/>",extensions:k,arg:E,validation:Bt.productPriceValidation}),I=(0,Bt.applyCheckoutFilter)({filterName:"cartItemPrice",defaultValue:"<price/>",extensions:k,arg:E,validation:Bt.productPriceValidation}),R=(0,Bt.applyCheckoutFilter)({filterName:"cartItemClass",defaultValue:"",extensions:k,arg:E}),T=t?{itemData:h,variation:g}:{itemData:h,variation:g,shortDescription:u,fullDescription:p};return(0,r.createElement)("div",{className:(0,n.A)("wc-block-components-order-summary-item",R)},(0,r.createElement)("div",{className:"wc-block-components-order-summary-item__image"},(0,r.createElement)("div",{className:"wc-block-components-order-summary-item__quantity"},(0,r.createElement)(Zt.Label,{label:d.toString(),screenReaderLabel:(0,M.sprintf)(/* translators: %d number of products of the same type in the cart */ /* translators: %d number of products of the same type in the cart */
(0,M._n)("%d item","%d items",d,"woocommerce"),d)})),(0,r.createElement)(as,{image:o.length?o[0]:{},fallbackAlt:f})),(0,r.createElement)("div",{className:"wc-block-components-order-summary-item__description"},(0,r.createElement)(rs,{disabled:!0,name:f,permalink:i,disabledTagName:"h3"}),(0,r.createElement)(os,{currency:v,price:C,regularPrice:S,className:"wc-block-components-order-summary-item__individual-prices",priceClassName:"wc-block-components-order-summary-item__individual-price",regularPriceClassName:"wc-block-components-order-summary-item__regular-individual-price",format:x}),s?(0,r.createElement)(ss,null):!!c&&(0,r.createElement)(is,{lowStockRemaining:c}),(0,r.createElement)(_s,{...T})),(0,r.createElement)("span",{className:"screen-reader-text"},(0,M.sprintf)(/* translators: %1$d is the number of items, %2$s is the item name and %3$s is the total price including the currency symbol. */ /* translators: %1$d is the number of items, %2$s is the item name and %3$s is the total price including the currency symbol. */
(0,M._n)("Total price for %1$d %2$s item: %3$s","Total price for %1$d %2$s items: %3$s",d,"woocommerce"),d,f,(0,wr.formatPrice)(A,P))),(0,r.createElement)("div",{className:"wc-block-components-order-summary-item__total-price","aria-hidden":"true"},(0,r.createElement)(os,{currency:P,format:I,price:A})))};o(5415);const bs=({cartItems:e=[],disableProductDescriptions:t=!1})=>{const{isLarge:o,hasContainerWidth:c}=p();return c?(0,r.createElement)("div",{className:(0,n.A)("wc-block-components-order-summary",{"is-large":o})},(0,r.createElement)("div",{className:"wc-block-components-order-summary__content"},e.map((e=>(0,r.createElement)(ks,{disableProductDescriptions:t,key:e.key,cartItem:e}))))):null},ws=({className:e="",disableProductDescriptions:t=!1})=>{const{cartItems:o}=He();return(0,r.createElement)(Zt.TotalsWrapper,{className:e},(0,r.createElement)(bs,{cartItems:o,disableProductDescriptions:t}))};(0,i.registerBlockType)("woocommerce/checkout-order-summary-cart-items-block",{icon:{src:(0,r.createElement)(a.A,{icon:Qc,className:"wc-block-editor-components-block-icon"})},edit:({attributes:e,setAttributes:t})=>{const{className:o,disableProductDescriptions:n}=e,c=(0,l.useBlockProps)();return(0,r.createElement)("div",{...c},(()=>{const{experimentalBlocksEnabled:e}=(0,y.getSetting)("wcBlocksConfig",{experimentalBlocksEnabled:!1});return e})()&&(0,r.createElement)(l.InspectorControls,null,(0,r.createElement)(qt.PanelBody,{title:(0,M.__)("Settings","woocommerce")},(0,r.createElement)(qt.ToggleControl,{label:(0,M.__)("Disable product descriptions","woocommerce"),help:(0,M.__)("Disable display of product descriptions.","woocommerce"),checked:n,onChange:()=>t({disableProductDescriptions:!n})}))),(0,r.createElement)(ws,{disableProductDescriptions:n,className:o}))},save:()=>(0,r.createElement)("div",{...l.useBlockProps.save()})}),o(5681),(0,i.registerBlockType)("woocommerce/checkout-order-summary-totals-block",{icon:{src:(0,r.createElement)(a.A,{icon:Nr,className:"wc-block-editor-components-block-icon"})},edit:({clientId:e})=>{const t=(0,l.useBlockProps)(),o=$t(Bt.innerBlockAreas.CHECKOUT_ORDER_SUMMARY_TOTALS),n=[["woocommerce/checkout-order-summary-subtotal-block",{},[]],["woocommerce/checkout-order-summary-fee-block",{},[]],["woocommerce/checkout-order-summary-discount-block",{},[]],["woocommerce/checkout-order-summary-shipping-block",{},[]],["woocommerce/checkout-order-summary-taxes-block",{},[]]];return Ht({clientId:e,registeredBlocks:o,defaultTemplate:n}),(0,r.createElement)("div",{...t},(0,r.createElement)(l.InnerBlocks,{allowedBlocks:o,template:n}))},save:()=>(0,r.createElement)("div",{...l.useBlockProps.save()},(0,r.createElement)(l.InnerBlocks.Content,null))}),o(6201);var Es=o(8558);const ys=(e,t=!0)=>{t?window.document.body.classList.add(e):window.document.body.classList.remove(e)},vs=({attributes:e,setAttributes:t})=>{const{hasDarkControls:o,showFormStepNumbers:n}=e;return(0,r.createElement)(l.InspectorControls,null,(0,r.createElement)(qt.PanelBody,{title:(0,M.__)("Style","woocommerce")},(0,r.createElement)(qt.ToggleControl,{label:(0,M.__)("Show form step numbers","woocommerce"),checked:n,onChange:()=>t({showFormStepNumbers:!n})}),(0,r.createElement)(qt.ToggleControl,{label:(0,M.__)("Dark mode inputs","woocommerce"),help:(0,M.__)("Inputs styled specifically for use on dark background colors.","woocommerce"),checked:o,onChange:()=>t({hasDarkControls:!o})})))},fs=window.wp.editor;function Ss({block:e}){const t="checkout"===e?O:j,o="checkout"===e?"woocommerce_checkout_page_id":"woocommerce_cart_page_id",{saveEntityRecord:n}=(0,_.useDispatch)(Dt.store),{editPost:c,savePost:s}=(0,_.useDispatch)(fs.store),{slug:a,postPublished:i,currentPostId:l}=(0,_.useSelect)((o=>{var r;const{getEntityRecord:n}=o(Dt.store),{isCurrentPostPublished:c,getCurrentPostId:s}=o(fs.store);return{slug:(null===(r=n("postType","page",t))||void 0===r?void 0:r.slug)||e,postPublished:c(),currentPostId:s()}}),[]),[d,u]=(0,m.useState)("pristine"),p=(0,m.useCallback)((()=>{u("updating"),Promise.resolve().then((()=>Nt()({path:`/wc/v3/settings/advanced/${o}`,method:"GET"}))).catch((e=>{"rest_setting_setting_invalid"===e.code&&u("error")})).then((()=>{if(!i)return c({status:"publish"}),s()})).then((()=>Nt()({path:`/wc/v3/settings/advanced/${o}`,method:"POST",data:{value:l.toString()}}))).then((()=>{if(0!==t)return n("postType","page",{id:t,slug:`${a}-2`})})).then((()=>c({slug:a}))).then((()=>s())).then((()=>u("updated")))}),[i,c,s,o,l,t,n,a]);let h;return h="checkout"===e?(0,m.createInterpolateElement)((0,M.__)("If you would like to use this block as your default checkout, <a>update your page settings</a>.","woocommerce"),{a:(0,r.createElement)("a",{href:"#",onClick:p},(0,M.__)("update your page settings","woocommerce"))}):(0,m.createInterpolateElement)((0,M.__)("If you would like to use this block as your default cart, <a>update your page settings</a>.","woocommerce"),{a:(0,r.createElement)("a",{href:"#",onClick:p},(0,M.__)("update your page settings","woocommerce"))}),"string"==typeof pagenow&&"site-editor"===pagenow||l===t||"dismissed"===d?null:(0,r.createElement)(qt.Notice,{className:"wc-default-page-notice",status:"updated"===d?"success":"info",onRemove:()=>u("dismissed"),spokenMessage:"updated"===d?(0,M.__)("Page settings updated","woocommerce"):h},"updated"===d?(0,M.__)("Page settings updated","woocommerce"):(0,r.createElement)(r.Fragment,null,(0,r.createElement)("p",null,h)))}o(4688);const Cs=[],Ps=e=>{const[t,o,r]=(()=>{const e={};(0,y.getSetting)("incompatibleExtensions")&&(0,y.getSetting)("incompatibleExtensions").forEach((t=>{e[t.id]=t.title}));const t=Object.keys(e),o=t.length;return[e,t,o]})(),[n,c,s]=(()=>{const{incompatiblePaymentMethods:e}=(0,_.useSelect)((e=>{const{getIncompatiblePaymentMethods:t}=e(re.paymentStore);return{incompatiblePaymentMethods:t()}}),[]),t=Object.keys(e);return[e,t,t.length]})(),a={...t,...n},i=[...o,...c],l=r+s,[d,u]=((e,t)=>{const[o,r]=(0,m.useState)((()=>{const o=window.localStorage.getItem(e);if(o)try{return JSON.parse(o)}catch{console.error(`Value for key '${e}' could not be retrieved from localStorage because it can't be parsed.`)}return t}));return(0,m.useEffect)((()=>{try{window.localStorage.setItem(e,JSON.stringify(o))}catch{console.error(`Value for key '${e}' could not be saved in localStorage because it can't be converted into a string.`)}}),[e,o]),[o,r]})("wc-blocks_dismissed_incompatible_extensions_notices",Cs),[p,h]=(0,m.useState)(!1),g=d.some((t=>{return Object.keys(t).includes(e)&&(o=t[e],r=i,o.length===r.length&&new Set([...o,...r]).size===o.length);var o,r})),k=0===l||g;return(0,m.useEffect)((()=>{h(!k),k||g||u((t=>t.reduce(((t,o)=>(Object.keys(o).includes(e)||t.push(o),t)),[])))}),[k,g,u,e]),[p,()=>{const t=new Set(d);t.add({[e]:i}),u([...t])},(b=a,Object.fromEntries(Object.entries(b).sort((([,e],[,t])=>e.localeCompare(t))))),l];var b};var Ns=o(4922),As=o.n(Ns);As()("wc-admin:tracks:stats");const xs=As()("wc-admin:tracks");function Is(e,t){if(xs("recordevent %s %o","wcadmin_"+e,t,{_tqk:window._tkq,shouldRecord:!!window._tkq&&!!window.wcTracks&&!!window.wcTracks.isEnabled}),!window.wcTracks||"function"!=typeof window.wcTracks.recordEvent)return!1;window.wcTracks.recordEvent(e,t)}const Rs=({blocks:e,findCondition:t})=>{for(const o of e){if(t(o))return o;if(o.innerBlocks){const e=Rs({blocks:o.innerBlocks,findCondition:t});if(e)return e}}},Ts=({blockType:e="woocommerce/cart"})=>"woocommerce/cart"===e?(0,r.createElement)("p",null,(0,M.__)("If you continue, the cart block will be replaced with the classic experience powered by shortcodes. This means that you may lose customizations that you made to the cart block.","woocommerce")):(0,r.createElement)(r.Fragment,null,(0,r.createElement)("p",null,(0,M.__)("If you continue, the checkout block will be replaced with the classic experience powered by shortcodes. This means that you may lose:","woocommerce")),(0,r.createElement)("ul",{className:"cross-list"},(0,r.createElement)("li",null,(0,M.__)("Customizations and updates to the block","woocommerce")),(0,r.createElement)("li",null,(0,M.__)("Additional local pickup options created for the new checkout","woocommerce"))));function Ms({block:e,clientId:t,type:o}){const{createInfoNotice:n}=(0,_.useDispatch)(bt.store),{replaceBlock:c,selectBlock:s}=(0,_.useDispatch)(l.store),[a,d]=(0,m.useState)(!1),u=()=>d(!1),{undo:p}=(0,_.useDispatch)(Dt.store),[,,h,g]=Ps(e),k="woocommerce/cart"===e,b=k?(0,M.__)("Switch to classic cart","woocommerce"):(0,M.__)("Switch to classic checkout","woocommerce"),w=k?(0,M.__)("Switched to classic cart.","woocommerce"):(0,M.__)("Switched to classic checkout.","woocommerce"),E=k?"cart":"checkout",y={shortcode:E,notice:"incompatible"===o?"incompatible_notice":"generic_notice",incompatible_extensions_count:g,incompatible_extensions_names:JSON.stringify(h)},{getBlocks:v}=(0,_.useSelect)((e=>({getBlocks:e(l.store).getBlocks})),[]),f=()=>{p(),Is("switch_to_classic_shortcode_undo",y)};return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(qt.Button,{variant:"secondary",onClick:()=>{Is("switch_to_classic_shortcode_click",y),d(!0)}},b),a&&(0,r.createElement)(qt.Modal,{size:"medium",title:b,onRequestClose:u,className:"wc-blocks-switch-to-classic-shortcode-modal-content"},(0,r.createElement)(Ts,{blockType:e}),(0,r.createElement)(qt.TabbableContainer,{className:"wc-blocks-switch-to-classic-shortcode-modal-actions"},(0,r.createElement)(qt.Button,{variant:"primary",isDestructive:!0,onClick:()=>{c(t,(0,i.createBlock)("woocommerce/classic-shortcode",{shortcode:E})),Is("switch_to_classic_shortcode_confirm",y),(()=>{const e=Rs({blocks:v(),findCondition:e=>"woocommerce/classic-shortcode"===e.name});e&&s(e.clientId)})(),n(w,{actions:[{label:(0,M.__)("Undo","woocommerce"),onClick:f}],type:"snackbar"}),u()}},(0,M.__)("Switch","woocommerce"))," ",(0,r.createElement)(qt.Button,{variant:"secondary",onClick:()=>{Is("switch_to_classic_shortcode_cancel",y),u()}},(0,M.__)("Cancel","woocommerce")))))}function Bs({block:e,clientId:t}){const[o,n,c,s]=Ps(e);if(!o)return null;const i=(0,r.createElement)(r.Fragment,null,s>1?(0,m.createInterpolateElement)((0,M.__)("Some active extensions do not yet support this block. This may impact the shopper experience. <a>Learn more</a>","woocommerce"),{a:(0,r.createElement)(qt.ExternalLink,{href:"https://woocommerce.com/document/woocommerce-store-editing/customizing-cart-and-checkout/#incompatible-extensions/"})}):(0,m.createInterpolateElement)((0,M.sprintf)(
// translators: %s is the name of the extension.
// translators: %s is the name of the extension.
(0,M.__)("<strong>%s</strong> does not yet support this block. This may impact the shopper experience. <a>Learn more</a>","woocommerce"),Object.values(c)[0]),{strong:(0,r.createElement)("strong",null),a:(0,r.createElement)(qt.ExternalLink,{href:"https://woocommerce.com/document/woocommerce-store-editing/customizing-cart-and-checkout/#incompatible-extensions/"})})),l=Object.entries(c),d=l.length-2;return(0,r.createElement)(qt.Notice,{className:"wc-blocks-incompatible-extensions-notice",status:"warning",onRemove:n,spokenMessage:i},(0,r.createElement)("div",{className:"wc-blocks-incompatible-extensions-notice__content"},(0,r.createElement)(a.A,{className:"wc-blocks-incompatible-extensions-notice__warning-icon",icon:(0,r.createElement)(rn,null)}),(0,r.createElement)("div",null,(0,r.createElement)("p",null,i),s>1&&(0,r.createElement)("ul",null,l.slice(0,2).map((([e,t])=>(0,r.createElement)("li",{key:e,className:"wc-blocks-incompatible-extensions-notice__element"},t)))),l.length>2&&(0,r.createElement)("details",null,(0,r.createElement)("summary",null,(0,r.createElement)("span",null,(0,M.sprintf)(
// translators: %s is the number of incompatible extensions.
// translators: %s is the number of incompatible extensions.
(0,M._n)("%s more incompatibility","%s more incompatibilities",d,"woocommerce"),d)),(0,r.createElement)(a.A,{icon:so.A})),(0,r.createElement)("ul",null,l.slice(2).map((([e,t])=>(0,r.createElement)("li",{key:e,className:"wc-blocks-incompatible-extensions-notice__element"},t))))),(0,r.createElement)(Ms,{block:e,clientId:t,type:"incompatible"}))))}o(7840),o(1212);var Ds=o(361);o(1598);const Os=({text:e,title:t=(0,M.__)("Feedback?","woocommerce"),url:o})=>{const[n,c]=(0,m.useState)(!1);return(0,m.useEffect)((()=>{c(!0)}),[]),(0,r.createElement)(r.Fragment,null,n&&(0,r.createElement)("div",{className:"wc-block-feedback-prompt"},(0,r.createElement)(a.A,{icon:Ds.A}),(0,r.createElement)("h2",{className:"wc-block-feedback-prompt__title"},t),(0,r.createElement)("p",{className:"wc-block-feedback-prompt__text"},e),(0,r.createElement)("a",{href:o,className:"wc-block-feedback-prompt__link",rel:"noreferrer noopener",target:"_blank"},(0,M.__)("Give us your feedback.","woocommerce"),(0,r.createElement)(a.A,{icon:Zr.A,size:16}))))},Fs=()=>(0,r.createElement)(Os,{text:(0,M.__)("We are currently working on improving our cart and checkout blocks to provide merchants with the tools and customization options they need.","woocommerce"),url:"https://github.com/woocommerce/woocommerce/discussions/new?category=checkout-flow&labels=type%3A+product%20feedback"}),Ls=(0,d.createHigherOrderComponent)((e=>t=>{const{clientId:o,name:n,isSelected:c}=t,{isCart:s,isCheckout:a,parentId:i}=(0,_.useSelect)((e=>{const{getBlockParentsByBlockName:t,getBlockName:r}=e(l.store),n=t(o,["woocommerce/cart","woocommerce/checkout"]).reduce(((e,t)=>(e[r(t)]=t,e)),{}),c=r(o),s=Object.keys(n).includes("woocommerce/cart"),a=Object.keys(n).includes("woocommerce/checkout"),i="woocommerce/cart"===c||s,m=i?"woocommerce/cart":"woocommerce/checkout";return{isCart:i,isCheckout:"woocommerce/checkout"===c||a,parentId:c===m?o:n[m]}}));return n.startsWith("woocommerce/")&&c&&(s||a)?(0,r.createElement)(r.Fragment,null,(0,r.createElement)(l.InspectorControls,null,(0,r.createElement)(Bs,{block:s?"woocommerce/cart":"woocommerce/checkout",clientId:i}),(0,r.createElement)(Ss,{block:a?"checkout":"cart"}),(0,r.createElement)(Fs,null)),(0,r.createElement)(e,{key:"edit",...t})):(0,r.createElement)(e,{key:"edit",...t})}),"withSidebarNotices");(0,it.hasFilter)("editor.BlockEdit","woocommerce/add/sidebar-compatibility-notice")||(0,it.addFilter)("editor.BlockEdit","woocommerce/add/sidebar-compatibility-notice",Ls,11),(0,it.hasFilter)("blocks.registerBlockType","core/lock/addAttribute")||(0,_.subscribe)((()=>{var e,t;const o=(0,_.select)(l.store);if(!o)return;const r=o.getSelectedBlock();r&&(ys("wc-lock-selected-block--remove",!(null==r||null===(e=r.attributes)||void 0===e||null===(e=e.lock)||void 0===e||!e.remove)),ys("wc-lock-selected-block--move",!(null==r||null===(t=r.attributes)||void 0===t||null===(t=t.lock)||void 0===t||!t.move)))}));const js=["woocommerce/checkout-fields-block","woocommerce/checkout-totals-block"],Vs={hasDarkControls:{type:"boolean",default:(0,y.getSetting)("hasDarkEditorStyleSupport",!1)},showRateAfterTaxName:{type:"boolean",default:(0,y.getSetting)("displayCartPricesIncludingTax",!1)}},Us={showOrderNotes:{type:"boolean",default:!0},showPolicyLinks:{type:"boolean",default:!0},showReturnToCart:{type:"boolean",default:!0},cartPageId:{type:"number",default:0},showCompanyField:{type:"boolean",default:!1},requireCompanyField:{type:"boolean",default:!1},showApartmentField:{type:"boolean",default:!0},requireApartmentField:{type:"boolean",default:!1},showPhoneField:{type:"boolean",default:!0},requirePhoneField:{type:"boolean",default:!1}},$s=JSON.parse('{"name":"woocommerce/checkout","version":"1.0.0","title":"Checkout","description":"Display a checkout form so your customers can submit orders.","category":"woocommerce","keywords":["WooCommerce"],"supports":{"align":["wide"],"html":false,"multiple":false},"example":{"attributes":{"isPreview":true},"viewportWidth":800},"attributes":{"isPreview":{"type":"boolean","default":false,"save":false},"align":{"type":"string","default":"wide"},"showFormStepNumbers":{"type":"boolean","default":false}},"textdomain":"woocommerce","apiVersion":3,"$schema":"https://schemas.wp.org/trunk/block.json"}'),Hs={icon:{src:(0,r.createElement)(a.A,{icon:s,className:"wc-block-editor-components-block-icon"})},attributes:{...$s.attributes,...Vs,...Us},edit:({clientId:e,attributes:t,setAttributes:o})=>{const{showOrderNotes:c,showPolicyLinks:s,showReturnToCart:a,showRateAfterTaxName:d,cartPageId:u,isPreview:p=!1,showFormStepNumbers:h=!1,hasDarkControls:k=!1}=t,b=(0,_.useSelect)((e=>{const t=e(Dt.store).getEditedEntityRecord("root","site");return{...y.defaultFields,...Object.fromEntries(Object.entries({phone:"optional",company:"hidden",address_2:"optional"}).map((([e,o])=>{const r=t[`woocommerce_checkout_${e}_field`]||o;return[e,{...y.defaultFields[e],required:"required"===r,hidden:"hidden"===r}]})))}})),E=(0,m.useRef)((0,xe.getQueryArg)(window.location.href,"focus"));(0,m.useEffect)((()=>{"checkout"!==E.current||(0,_.select)("core/block-editor").hasSelectedBlock()||((0,_.dispatch)("core/block-editor").selectBlock(e),(0,_.dispatch)("core/interface").enableComplementaryArea("core/edit-site","edit-site/block-inspector"))}),[e]);const v=((e={})=>{const t=(0,m.useRef)(),o=(0,l.useBlockProps)({ref:t,...e});return(({ref:e})=>{const t=(0,it.hasFilter)("blocks.registerBlockType","core/lock/addAttribute"),o=e.current;(0,m.useEffect)((()=>{if(o&&!t)return o.addEventListener("keydown",e,{capture:!0,passive:!1}),()=>{o.removeEventListener("keydown",e,{capture:!0})};function e(e){const{keyCode:t,target:o}=e;if(!(o instanceof HTMLElement))return;if(t!==Es.BACKSPACE&&t!==Es.DELETE)return;if((0,oo.isTextField)(o))return;const r=o;if(void 0===r.dataset.block)return;const n=(e=>{var t,o;if(!e)return!1;const{getBlock:r}=(0,_.select)(l.store),n=r(e);if("boolean"==typeof(null==n||null===(t=n.attributes)||void 0===t||null===(t=t.lock)||void 0===t?void 0:t.remove))return n.attributes.lock.remove;const c=(0,i.getBlockType)(n.name);var s;return"boolean"==typeof(null==c||null===(o=c.attributes)||void 0===o||null===(o=o.lock)||void 0===o||null===(o=o.default)||void 0===o?void 0:o.remove)&&(null==c||null===(s=c.attributes)||void 0===s||null===(s=s.lock)||void 0===s||null===(s=s.default)||void 0===s?void 0:s.remove)})(r.dataset.block);n&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())}}),[o,t])})({ref:t}),o})();return(0,r.createElement)("div",{...v},(0,r.createElement)(l.InspectorControls,null,(0,r.createElement)(vs,{attributes:t,setAttributes:o})),(0,r.createElement)(w,{isPreview:!!p,previewData:{previewCart:at,previewSavedPaymentMethods:Mt,defaultFields:b}},(0,r.createElement)(Bt.SlotFillProvider,null,(0,r.createElement)(Tt,null,(0,r.createElement)(g,{className:(0,n.A)("wc-block-checkout",{"has-dark-controls":k})},(0,r.createElement)(jt.Provider,{value:{showOrderNotes:c,showPolicyLinks:s,showReturnToCart:a,cartPageId:u,showRateAfterTaxName:d,showFormStepNumbers:h,defaultFields:b}},(0,r.createElement)(l.InnerBlocks,{allowedBlocks:js,template:[["woocommerce/checkout-totals-block",{},[]],["woocommerce/checkout-fields-block",{},[]]],templateLock:"insert"})))))))},save:()=>(0,r.createElement)("div",{...l.useBlockProps.save({className:"wc-block-checkout is-loading"})},(0,r.createElement)(l.InnerBlocks.Content,null)),transforms:{to:[{type:"block",blocks:["woocommerce/classic-shortcode"],transform:e=>(0,i.createBlock)("woocommerce/classic-shortcode",{shortcode:"checkout",align:e.align},[])}]},deprecated:[{attributes:{...$s.attributes,...Vs,...Us},save:({attributes:e})=>(0,r.createElement)("div",{className:(0,n.A)("is-loading",e.className)}),migrate:e=>{const{showOrderNotes:t,showPolicyLinks:o,showReturnToCart:r,cartPageId:n}=e;return[e,[(0,i.createBlock)("woocommerce/checkout-fields-block",{},[(0,i.createBlock)("woocommerce/checkout-express-payment-block",{},[]),(0,i.createBlock)("woocommerce/checkout-contact-information-block",{},[]),(0,i.createBlock)("woocommerce/checkout-shipping-address-block",{},[]),(0,i.createBlock)("woocommerce/checkout-billing-address-block",{},[]),(0,i.createBlock)("woocommerce/checkout-shipping-methods-block",{},[]),(0,i.createBlock)("woocommerce/checkout-payment-block",{},[]),(0,i.createBlock)("woocommerce/checkout-additional-information-block",{},[]),!!t&&(0,i.createBlock)("woocommerce/checkout-order-note-block",{},[]),!!o&&(0,i.createBlock)("woocommerce/checkout-terms-block",{},[]),(0,i.createBlock)("woocommerce/checkout-actions-block",{showReturnToCart:r,cartPageId:n},[])].filter(Boolean)),(0,i.createBlock)("woocommerce/checkout-totals-block",{})]]},isEligible:(e,t)=>!t.some((e=>"woocommerce/checkout-fields-block"===e.name))},{save:({attributes:e})=>(0,r.createElement)("div",{className:(0,n.A)("is-loading",e.className)}),isEligible:(e,t)=>{const o=t.find((e=>"woocommerce/checkout-fields-block"===e.name));return!!o&&!o.innerBlocks.some((e=>"woocommerce/checkout-additional-information-block"===e.name))},migrate:(e,t)=>{const o=t.findIndex((e=>"woocommerce/checkout-fields-block"===e.name));if(-1===o)return!1;const r=t[o],n=r.innerBlocks.findIndex((e=>"wp-block-woocommerce-checkout-payment-block"===e.name));return-1!==n&&(t[o]=r.innerBlocks.slice(0,n).concat((0,i.createBlock)("woocommerce/checkout-additional-information-block",{},[])).concat(t.slice(n+1,t.length)),[e,t])}}]};(0,i.registerBlockType)($s,Hs)},9407:()=>{},2080:()=>{},5684:()=>{},5415:()=>{},3091:()=>{},4957:()=>{},777:()=>{},9507:()=>{},4982:()=>{},401:()=>{},718:()=>{},7051:()=>{},2867:()=>{},3048:()=>{},265:()=>{},7919:()=>{},780:()=>{},2931:()=>{},8375:()=>{},9345:()=>{},6625:()=>{},4567:()=>{},5452:()=>{},1221:()=>{},8824:()=>{},9569:()=>{},1637:()=>{},181:()=>{},1094:()=>{},7259:()=>{},6664:()=>{},149:()=>{},5089:()=>{},9865:()=>{},6619:()=>{},377:()=>{},7797:()=>{},1407:()=>{},5681:()=>{},3425:()=>{},7694:()=>{},2255:()=>{},1299:()=>{},8845:()=>{},5609:()=>{},7765:()=>{},6201:()=>{},4688:()=>{},9705:()=>{},1598:()=>{},1212:()=>{},7840:()=>{},7791:()=>{},1609:e=>{"use strict";e.exports=window.React},790:e=>{"use strict";e.exports=window.ReactJSXRuntime},195:e=>{"use strict";e.exports=window.wp.a11y},9491:e=>{"use strict";e.exports=window.wp.compose},4040:e=>{"use strict";e.exports=window.wp.deprecated},8107:e=>{"use strict";e.exports=window.wp.dom},6087:e=>{"use strict";e.exports=window.wp.element},7723:e=>{"use strict";e.exports=window.wp.i18n},923:e=>{"use strict";e.exports=window.wp.isShallowEqual},8558:e=>{"use strict";e.exports=window.wp.keycodes},5573:e=>{"use strict";e.exports=window.wp.primitives}},n={};function c(e){var t=n[e];if(void 0!==t)return t.exports;var o=n[e]={exports:{}};return r[e].call(o.exports,o,o.exports,c),o.exports}c.m=r,e=[],c.O=(t,o,r,n)=>{if(!o){var s=1/0;for(m=0;m<e.length;m++){for(var[o,r,n]=e[m],a=!0,i=0;i<o.length;i++)(!1&n||s>=n)&&Object.keys(c.O).every((e=>c.O[e](o[i])))?o.splice(i--,1):(a=!1,n<s&&(s=n));if(a){e.splice(m--,1);var l=r();void 0!==l&&(t=l)}}return t}n=n||0;for(var m=e.length;m>0&&e[m-1][2]>n;m--)e[m]=e[m-1];e[m]=[o,r,n]},c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},o=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,c.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var n=Object.create(null);c.r(n);var s={};t=t||[null,o({}),o([]),o(o)];for(var a=2&r&&e;"object"==typeof a&&!~t.indexOf(a);a=o(a))Object.getOwnPropertyNames(a).forEach((t=>s[t]=()=>e[t]));return s.default=()=>e,c.d(n,s),n},c.d=(e,t)=>{for(var o in t)c.o(t,o)&&!c.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.j=251,(()=>{var e={251:0};c.O.j=t=>0===e[t];var t=(t,o)=>{var r,n,[s,a,i]=o,l=0;if(s.some((t=>0!==e[t]))){for(r in a)c.o(a,r)&&(c.m[r]=a[r]);if(i)var m=i(c)}for(t&&t(o);l<s.length;l++)n=s[l],c.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return c.O(m)},o=self.webpackChunkwebpackWcBlocksMainJsonp=self.webpackChunkwebpackWcBlocksMainJsonp||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var s=c.O(void 0,[94],(()=>c(4592)));s=c.O(s),((this.wc=this.wc||{}).blocks=this.wc.blocks||{}).checkout=s})();
>>>>>>> b1eea7a (Merged existing code from https://dev-vices.rafaeldeveloper.co)
