<<<<<<< HEAD
(()=>{var e,t,s,o={885:(e,t,s)=>{"use strict";const o=window.wp.blocks,r=window.wc.wcSettings;var c=s(4530),i=s(1686);const l=JSON.parse('{"name":"woocommerce/product-tag","title":"Products by Tag","category":"woocommerce","keywords":["WooCommerce"],"description":"Display a grid of products with selected tags.","supports":{"interactivity":{"clientNavigation":false},"align":["wide","full"],"html":false,"inserter":false},"attributes":{"columns":{"type":"number","default":3},"rows":{"type":"number","default":3},"alignButtons":{"type":"boolean","default":false},"contentVisibility":{"type":"object","default":{"image":true,"title":true,"price":true,"rating":true,"button":true},"properties":{"image":{"type":"boolean","default":true},"title":{"type":"boolean","default":true},"price":{"type":"boolean","default":true},"rating":{"type":"boolean","default":true},"button":{"type":"boolean","default":true}}},"tags":{"type":"array","default":[]},"tagOperator":{"type":"string","default":"any"},"orderby":{"type":"string","default":"date"},"isPreview":{"type":"boolean","default":false},"stockStatus":{"type":"array"}},"textdomain":"woocommerce","apiVersion":3,"$schema":"https://schemas.wp.org/trunk/block.json"}'),n=window.wp.blockEditor,a=window.wp.serverSideRender;var d=s.n(a),h=s(7723);const m=window.wp.components;var u=s(6087),g=s(790);const x=({onChange:e,settings:t})=>{const{image:s,button:o,price:r,rating:c,title:i}=t,l=!1!==s;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(m.ToggleControl,{label:(0,h.__)("Product image","woocommerce"),checked:l,onChange:()=>e({...t,image:!l})}),(0,g.jsx)(m.ToggleControl,{label:(0,h.__)("Product title","woocommerce"),checked:i,onChange:()=>e({...t,title:!i})}),(0,g.jsx)(m.ToggleControl,{label:(0,h.__)("Product price","woocommerce"),checked:r,onChange:()=>e({...t,price:!r})}),(0,g.jsx)(m.ToggleControl,{label:(0,h.__)("Product rating","woocommerce"),checked:c,onChange:()=>e({...t,rating:!c})}),(0,g.jsx)(m.ToggleControl,{label:(0,h.__)("Add to Cart button","woocommerce"),checked:o,onChange:()=>e({...t,button:!o})})]})},p=(e,t,s)=>s?Math.min(e,t)===e?t:Math.max(e,s)===e?s:e:Math.max(e,t)===t?e:t,w=({columns:e,rows:t,setAttributes:s,alignButtons:o,minColumns:r=1,maxColumns:c=6,minRows:i=1,maxRows:l=6})=>(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(m.RangeControl,{label:(0,h.__)("Columns","woocommerce"),value:e,onChange:e=>{const t=p(e,r,c);s({columns:Number.isNaN(t)?"":t})},min:r,max:c}),(0,g.jsx)(m.RangeControl,{label:(0,h.__)("Rows","woocommerce"),value:t,onChange:e=>{const t=p(e,i,l);s({rows:Number.isNaN(t)?"":t})},min:i,max:l}),(0,g.jsx)(m.ToggleControl,{label:(0,h.__)("Align the last block to the bottom","woocommerce"),help:o?(0,h.__)("Align the last block to the bottom.","woocommerce"):(0,h.__)("The last inner block will follow other content.","woocommerce"),checked:o,onChange:()=>s({alignButtons:!o})})]});var b=s(2624),_=s(4921),f=s(9491);const j={clear:(0,h.__)("Clear all selected items","woocommerce"),noItems:(0,h.__)("No items found.","woocommerce"),
/* Translators: %s search term */
noResults:(0,h.__)("No results for %s","woocommerce"),search:(0,h.__)("Search for items","woocommerce"),selected:e=>(0,h.sprintf)(/* translators: Number of items selected from list. */ /* translators: Number of items selected from list. */
(0,h._n)("%d item selected","%d items selected",e,"woocommerce"),e),updated:(0,h.__)("Search results updated.","woocommerce")},E=(e,t=e)=>{const s=e.reduce(((e,t)=>{const s=t.parent||0;return e[s]||(e[s]=[]),e[s].push(t),e}),{}),o=t.reduce(((e,t)=>(e[String(t.id)]=t,e)),{});const r=["0"],c=(e={})=>e.parent?[...c(o[e.parent]),e.name]:e.name?[e.name]:[],i=e=>e.map((e=>{const t=s[e.id];return r.push(""+e.id),{...e,breadcrumbs:c(o[e.parent]),children:t&&t.length?i(t):[]}})),l=i(s[0]||[]);return Object.entries(s).forEach((([e,t])=>{r.includes(e)||l.push(...i(t||[]))})),l},y=(e,t)=>{if(!t)return e;const s=new RegExp(`(${t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")})`,"ig");return e.split(s).map(((e,t)=>s.test(e)?(0,g.jsx)("strong",{children:e},t):(0,g.jsx)(u.Fragment,{children:e},t)))};function v(e,t,s){const o=new Set(t.map((e=>e[s])));return e.filter((e=>!o.has(e[s])))}const k=window.wp.htmlEntities,C=({label:e})=>(0,g.jsx)("span",{className:"woocommerce-search-list__item-count",children:e}),S=e=>{const{item:t,search:s}=e,o=t.breadcrumbs&&t.breadcrumbs.length;return(0,g.jsxs)("span",{className:"woocommerce-search-list__item-label",children:[o?(0,g.jsx)("span",{className:"woocommerce-search-list__item-prefix",children:(r=t.breadcrumbs,1===r.length?r.slice(0,1).toString():2===r.length?r.slice(0,1).toString()+" › "+r.slice(-1).toString():r.slice(0,1).toString()+" … "+r.slice(-1).toString())}):null,(0,g.jsx)("span",{className:"woocommerce-search-list__item-name",children:y((0,k.decodeEntities)(t.name),s)})]});var r},N=({countLabel:e,className:t,depth:s=0,controlId:o="",item:r,isSelected:c,isSingle:i,onSelect:l,search:n="",selected:a,useExpandedPanelId:d,...h})=>{const[x,p]=d,w=null!=e&&void 0!==r.count&&null!==r.count,b=!!r.breadcrumbs?.length,f=!!r.children?.length,j=x===r.id,E=(0,_.A)(["woocommerce-search-list__item",`depth-${s}`,t],{"has-breadcrumbs":b,"has-children":f,"has-count":w,"is-expanded":j,"is-radio-button":i});(0,u.useEffect)((()=>{f&&c&&p(r.id)}),[r,f,c,p]);const N=h.name||`search-list-item-${o}`,O=`${N}-${r.id}`,P=(0,u.useCallback)((()=>{p(j?-1:Number(r.id))}),[j,r.id,p]);return f?(0,g.jsx)("div",{className:E,onClick:P,onKeyDown:e=>"Enter"===e.key||" "===e.key?P():null,role:"treeitem",tabIndex:0,children:i?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("input",{type:"radio",id:O,name:N,value:r.value,onChange:l(r),onClick:e=>e.stopPropagation(),checked:c,className:"woocommerce-search-list__item-input",...h}),(0,g.jsx)(S,{item:r,search:n}),w?(0,g.jsx)(C,{label:e||r.count}):null]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(m.CheckboxControl,{className:"woocommerce-search-list__item-input",checked:c,...!c&&r.children.some((e=>a.find((t=>t.id===e.id))))?{indeterminate:!0}:{},label:y((0,k.decodeEntities)(r.name),n),onChange:()=>{c?l(v(a,r.children,"id"))():l(function(e,t){const s=v(t,e,"id");return[...e,...s]}(a,r.children))()},onClick:e=>e.stopPropagation()}),w?(0,g.jsx)(C,{label:e||r.count}):null]})}):(0,g.jsxs)("label",{htmlFor:O,className:E,children:[i?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("input",{...h,type:"radio",id:O,name:N,value:r.value,onChange:l(r),checked:c,className:"woocommerce-search-list__item-input"}),(0,g.jsx)(S,{item:r,search:n})]}):(0,g.jsx)(m.CheckboxControl,{...h,id:O,name:N,className:"woocommerce-search-list__item-input",value:(0,k.decodeEntities)(r.value),label:y((0,k.decodeEntities)(r.name),n),onChange:l(r),checked:c}),w?(0,g.jsx)(C,{label:e||r.count}):null]})},O=N;var P=s(3028);s(5022);const T=({id:e,label:t,popoverContents:s,remove:o,screenReaderLabel:r,className:i=""})=>{const[l,n]=(0,u.useState)(!1),a=(0,f.useInstanceId)(T);if(r=r||t,!t)return null;t=(0,k.decodeEntities)(t);const d=(0,_.A)("woocommerce-tag",i,{"has-remove":!!o}),x=`woocommerce-tag__label-${a}`,p=(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("span",{className:"screen-reader-text",children:r}),(0,g.jsx)("span",{"aria-hidden":"true",children:t})]});return(0,g.jsxs)("span",{className:d,children:[s?(0,g.jsx)(m.Button,{className:"woocommerce-tag__text",id:x,onClick:()=>n(!0),children:p}):(0,g.jsx)("span",{className:"woocommerce-tag__text",id:x,children:p}),s&&l&&(0,g.jsx)(m.Popover,{onClose:()=>n(!1),children:s}),o&&(0,g.jsx)(m.Button,{className:"woocommerce-tag__remove",onClick:o(e),label:(0,h.sprintf)(
// Translators: %s label.
// Translators: %s label.
(0,h.__)("Remove %s","woocommerce"),t),"aria-describedby":x,children:(0,g.jsx)(c.A,{icon:P.A,size:20,className:"clear-icon",role:"img"})})]})},A=T;s(1939);const I=e=>(0,g.jsx)(O,{...e}),B=e=>{const{list:t,selected:s,renderItem:o,depth:r=0,onSelect:c,instanceId:i,isSingle:l,search:n,useExpandedPanelId:a}=e,[d]=a;return t?(0,g.jsx)(g.Fragment,{children:t.map((t=>{const h=t.children?.length&&!l?t.children.every((({id:e})=>s.find((t=>t.id===e)))):!!s.find((({id:e})=>e===t.id)),m=t.children?.length&&d===t.id;return(0,g.jsxs)(u.Fragment,{children:[(0,g.jsx)("li",{children:o({item:t,isSelected:h,onSelect:c,isSingle:l,selected:s,search:n,depth:r,useExpandedPanelId:a,controlId:i})}),m?(0,g.jsx)(B,{...e,list:t.children,depth:r+1}):null]},t.id)}))}):null},R=({isLoading:e,isSingle:t,selected:s,messages:o,onChange:r,onRemove:c})=>{if(e||t||!s)return null;const i=s.length;return(0,g.jsxs)("div",{className:"woocommerce-search-list__selected",children:[(0,g.jsxs)("div",{className:"woocommerce-search-list__selected-header",children:[(0,g.jsx)("strong",{children:o.selected(i)}),i>0?(0,g.jsx)(m.Button,{variant:"link",isDestructive:!0,onClick:()=>r([]),"aria-label":o.clear,children:(0,h.__)("Clear all","woocommerce")}):null]}),i>0?(0,g.jsx)("ul",{children:s.map(((e,t)=>(0,g.jsx)("li",{children:(0,g.jsx)(A,{label:e.name,id:e.id,remove:c})},t)))}):null]})},F=({filteredList:e,search:t,onSelect:s,instanceId:o,useExpandedPanelId:r,...i})=>{const{messages:l,renderItem:n,selected:a,isSingle:d}=i,m=n||I;return 0===e.length?(0,g.jsxs)("div",{className:"woocommerce-search-list__list is-not-found",children:[(0,g.jsx)("span",{className:"woocommerce-search-list__not-found-icon",children:(0,g.jsx)(c.A,{icon:b.A,role:"img"})}),(0,g.jsx)("span",{className:"woocommerce-search-list__not-found-text",children:t?(0,h.sprintf)(l.noResults,t):l.noItems})]}):(0,g.jsx)("ul",{className:"woocommerce-search-list__list",children:(0,g.jsx)(B,{useExpandedPanelId:r,list:e,selected:a,renderItem:m,onSelect:s,instanceId:o,isSingle:d,search:t})})},$=e=>{const{className:t="",isCompact:s,isHierarchical:o,isLoading:r,isSingle:c,list:i,messages:l=j,onChange:n,onSearch:a,selected:d,type:x="text",debouncedSpeak:p}=e,[w,b]=(0,u.useState)(""),y=(0,u.useState)(-1),v=(0,f.useInstanceId)($),k=(0,u.useMemo)((()=>({...j,...l})),[l]),C=(0,u.useMemo)((()=>((e,t,s)=>{if(!t)return s?E(e):e;const o=new RegExp(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"i"),r=e.map((e=>!!o.test(e.name)&&e)).filter(Boolean);return s?E(r,e):r})(i,w,o)),[i,w,o]);(0,u.useEffect)((()=>{p&&p(k.updated)}),[p,k]),(0,u.useEffect)((()=>{"function"==typeof a&&a(w)}),[w,a]);const S=(0,u.useCallback)((e=>()=>{c&&n([]);const t=d.findIndex((({id:t})=>t===e));n([...d.slice(0,t),...d.slice(t+1)])}),[c,d,n]),N=(0,u.useCallback)((e=>()=>{Array.isArray(e)?n(e):-1===d.findIndex((({id:t})=>t===e.id))?n(c?[e]:[...d,e]):S(e.id)()}),[c,S,n,d]),O=(0,u.useCallback)((e=>{const[t]=d.filter((t=>!e.find((e=>t.id===e.id))));S(t.id)()}),[S,d]);return(0,g.jsxs)("div",{className:(0,_.A)("woocommerce-search-list",t,{"is-compact":s,"is-loading":r,"is-token":"token"===x}),children:["text"===x&&(0,g.jsx)(R,{...e,onRemove:S,messages:k}),(0,g.jsx)("div",{className:"woocommerce-search-list__search",children:"text"===x?(0,g.jsx)(m.TextControl,{label:k.search,type:"search",value:w,onChange:e=>b(e)}):(0,g.jsx)(m.FormTokenField,{disabled:r,label:k.search,onChange:O,onInputChange:e=>b(e),suggestions:[],__experimentalValidateInput:()=>!1,value:r?[(0,h.__)("Loading…","woocommerce")]:d.map((e=>({...e,value:e.name}))),__experimentalShowHowTo:!1})}),r?(0,g.jsx)("div",{className:"woocommerce-search-list__list",children:(0,g.jsx)(m.Spinner,{})}):(0,g.jsx)(F,{...e,search:w,filteredList:C,messages:k,onSelect:N,instanceId:v,useExpandedPanelId:y})]})};(0,m.withSpokenMessages)($);var M=s(4347);const L=({item:e,search:t,depth:s=0,...o})=>{const r=e.breadcrumbs.length?`${e.breadcrumbs.join(", ")}, ${e.name}`:e.name;return(0,g.jsx)(N,{className:(0,_.A)("woocommerce-product-tags__item","has-count",{"is-searching":t.length>0,"is-skip-level":0===s&&0!==e.parent}),item:e,search:t,depth:s,...o,ariaLabel:(0,h.sprintf)(/* translators: %1$d is the count of products, %2$s is the name of the tag. */ /* translators: %1$d is the count of products, %2$s is the name of the tag. */
(0,h._n)("%1$d product tagged as %2$s","%1$d products tagged as %2$s",e.count,"woocommerce"),e.count,r)})},D=window.wp.url,W=window.wp.apiFetch;var V=s.n(W);const J=({selected:e=[],search:t})=>{const s=(({selected:e=[],search:t})=>{const s=(0,r.getSetting)("limitTags",!1),o=[(0,D.addQueryArgs)("wc/store/v1/products/tags",{per_page:s?100:0,orderby:s?"count":"name",order:s?"desc":"asc",search:t})];return s&&e.length&&o.push((0,D.addQueryArgs)("wc/store/v1/products/tags",{include:e})),o})({selected:e,search:t});return Promise.all(s.map((e=>V()({path:e})))).then((e=>((e,t)=>{const s=new Map;return e.filter((e=>{const o=t(e);return!s.has(o)&&(s.set(o,e),!0)}))})(e.flat(),(e=>e.id))))};s(9910);const H=({isCompact:e=!1,onChange:t,onOperatorChange:s,operator:o="any",selected:c})=>{const[i,l]=(0,u.useState)([]),[n,a]=(0,u.useState)(!0),[d,x]=(0,u.useState)(!1),p=(0,r.getSetting)("limitTags",!1),w=(0,u.useMemo)((()=>i.filter((e=>c.includes(e.id)))),[i,c]),b=(0,u.useCallback)((e=>{a(!0),J({selected:c,search:e}).then((e=>{l(e),a(!1)})).catch((()=>{a(!1)}))}),[c]);(0,u.useEffect)((()=>{d||(b(""),x(!0))}),[b,d]);const _=(0,M.YQ)(b,400),f={clear:(0,h.__)("Clear all product tags","woocommerce"),list:(0,h.__)("Product Tags","woocommerce"),noItems:(0,h.__)("You have not set up any product tags on your store.","woocommerce"),search:(0,h.__)("Search for product tags","woocommerce"),selected:e=>(0,h.sprintf)(/* translators: %d is the count of selected tags. */ /* translators: %d is the count of selected tags. */
(0,h._n)("%d tag selected","%d tags selected",e,"woocommerce"),e),updated:(0,h.__)("Tag search results updated.","woocommerce")};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)($,{className:"woocommerce-product-tags",list:i,isLoading:n,selected:w,onChange:t,onSearch:p?_:void 0,renderItem:L,messages:f,isCompact:e,isHierarchical:!0,isSingle:!1}),!!s&&(0,g.jsx)("div",{hidden:c.length<2,children:(0,g.jsx)(m.SelectControl,{className:"woocommerce-product-tags__operator",label:(0,h.__)("Display products matching","woocommerce"),help:(0,h.__)("Pick at least two tags to use this setting.","woocommerce"),value:o,onChange:s,options:[{label:(0,h.__)("Any selected tags","woocommerce"),value:"any"},{label:(0,h.__)("All selected tags","woocommerce"),value:"all"}]})})]})},Q=({value:e,setAttributes:t})=>(0,g.jsx)(m.SelectControl,{label:(0,h.__)("Order products by","woocommerce"),value:e,options:[{label:(0,h.__)("Newness - newest first","woocommerce"),value:"date"},{label:(0,h.__)("Price - low to high","woocommerce"),value:"price_asc"},{label:(0,h.__)("Price - high to low","woocommerce"),value:"price_desc"},{label:(0,h.__)("Rating - highest first","woocommerce"),value:"rating"},{label:(0,h.__)("Sales - most first","woocommerce"),value:"popularity"},{label:(0,h.__)("Title - alphabetical","woocommerce"),value:"title"},{label:(0,h.__)("Menu Order","woocommerce"),value:"menu_order"}],onChange:e=>t({orderby:e})}),G=(0,r.getSetting)("hideOutOfStockItems",!1),Y=(0,r.getSetting)("stockStatusOptions",{}),z=({value:e,setAttributes:t})=>{const{outofstock:s,...o}=Y,r=G?o:Y,c=Object.entries(r).map((([e,t])=>({value:e,label:t}))).filter((e=>!!e.label)),i=Object.keys(r).filter((e=>!!e)),[l,n]=(0,u.useState)(e||i);(0,u.useEffect)((()=>{t({stockStatus:["",...l]})}),[l,t]);const a=(0,u.useCallback)((e=>{const t=l.includes(e),s=l.filter((t=>t!==e));t||(s.push(e),s.sort()),n(s)}),[l]);return(0,g.jsx)(g.Fragment,{children:c.map((e=>{const t=l.includes(e.value)?/* translators: %s stock status. */ /* translators: %s stock status. */(0,h.__)('Stock status "%s" visible.',"woocommerce"):/* translators: %s stock status. */ /* translators: %s stock status. */(0,h.__)('Stock status "%s" hidden.',"woocommerce");return(0,g.jsx)(m.ToggleControl,{label:e.label,help:(0,h.sprintf)(t,e.label),checked:l.includes(e.value),onChange:()=>a(e.value)},e.value)}))})},K=(0,g.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 230 250",style:{width:"100%"},children:[(0,g.jsx)("title",{children:"Grid Block Preview"}),(0,g.jsx)("rect",{width:"65.374",height:"65.374",x:".162",y:".779",fill:"#E1E3E6",rx:"3"}),(0,g.jsx)("rect",{width:"47.266",height:"5.148",x:"9.216",y:"76.153",fill:"#E1E3E6",rx:"2.574"}),(0,g.jsx)("rect",{width:"62.8",height:"15",x:"1.565",y:"101.448",fill:"#E1E3E6",rx:"5"}),(0,g.jsx)("rect",{width:"65.374",height:"65.374",x:".162",y:"136.277",fill:"#E1E3E6",rx:"3"}),(0,g.jsx)("rect",{width:"47.266",height:"5.148",x:"9.216",y:"211.651",fill:"#E1E3E6",rx:"2.574"}),(0,g.jsx)("rect",{width:"62.8",height:"15",x:"1.565",y:"236.946",fill:"#E1E3E6",rx:"5"}),(0,g.jsx)("rect",{width:"65.374",height:"65.374",x:"82.478",y:".779",fill:"#E1E3E6",rx:"3"}),(0,g.jsx)("rect",{width:"47.266",height:"5.148",x:"91.532",y:"76.153",fill:"#E1E3E6",rx:"2.574"}),(0,g.jsx)("rect",{width:"62.8",height:"15",x:"83.882",y:"101.448",fill:"#E1E3E6",rx:"5"}),(0,g.jsx)("rect",{width:"65.374",height:"65.374",x:"82.478",y:"136.277",fill:"#E1E3E6",rx:"3"}),(0,g.jsx)("rect",{width:"47.266",height:"5.148",x:"91.532",y:"211.651",fill:"#E1E3E6",rx:"2.574"}),(0,g.jsx)("rect",{width:"62.8",height:"15",x:"83.882",y:"236.946",fill:"#E1E3E6",rx:"5"}),(0,g.jsx)("rect",{width:"65.374",height:"65.374",x:"164.788",y:".779",fill:"#E1E3E6",rx:"3"}),(0,g.jsx)("rect",{width:"47.266",height:"5.148",x:"173.843",y:"76.153",fill:"#E1E3E6",rx:"2.574"}),(0,g.jsx)("rect",{width:"62.8",height:"15",x:"166.192",y:"101.448",fill:"#E1E3E6",rx:"5"}),(0,g.jsx)("rect",{width:"65.374",height:"65.374",x:"164.788",y:"136.277",fill:"#E1E3E6",rx:"3"}),(0,g.jsx)("rect",{width:"47.266",height:"5.148",x:"173.843",y:"211.651",fill:"#E1E3E6",rx:"2.574"}),(0,g.jsx)("rect",{width:"62.8",height:"15",x:"166.192",y:"236.946",fill:"#E1E3E6",rx:"5"}),(0,g.jsx)("rect",{width:"6.177",height:"6.177",x:"13.283",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,g.jsx)("rect",{width:"6.177",height:"6.177",x:"21.498",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,g.jsx)("rect",{width:"6.177",height:"6.177",x:"29.713",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,g.jsx)("rect",{width:"6.177",height:"6.177",x:"37.927",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,g.jsx)("rect",{width:"6.177",height:"6.177",x:"46.238",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,g.jsx)("rect",{width:"6.177",height:"6.177",x:"95.599",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,g.jsx)("rect",{width:"6.177",height:"6.177",x:"103.814",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,g.jsx)("rect",{width:"6.177",height:"6.177",x:"112.029",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,g.jsx)("rect",{width:"6.177",height:"6.177",x:"120.243",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,g.jsx)("rect",{width:"6.177",height:"6.177",x:"128.554",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,g.jsx)("rect",{width:"6.177",height:"6.177",x:"177.909",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,g.jsx)("rect",{width:"6.177",height:"6.177",x:"186.124",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,g.jsx)("rect",{width:"6.177",height:"6.177",x:"194.339",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,g.jsx)("rect",{width:"6.177",height:"6.177",x:"202.553",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,g.jsx)("rect",{width:"6.177",height:"6.177",x:"210.864",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,g.jsx)("rect",{width:"6.177",height:"6.177",x:"13.283",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,g.jsx)("rect",{width:"6.177",height:"6.177",x:"21.498",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,g.jsx)("rect",{width:"6.177",height:"6.177",x:"29.713",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,g.jsx)("rect",{width:"6.177",height:"6.177",x:"37.927",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,g.jsx)("rect",{width:"6.177",height:"6.177",x:"46.238",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,g.jsx)("rect",{width:"6.177",height:"6.177",x:"95.599",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,g.jsx)("rect",{width:"6.177",height:"6.177",x:"103.814",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,g.jsx)("rect",{width:"6.177",height:"6.177",x:"112.029",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,g.jsx)("rect",{width:"6.177",height:"6.177",x:"120.243",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,g.jsx)("rect",{width:"6.177",height:"6.177",x:"128.554",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,g.jsx)("rect",{width:"6.177",height:"6.177",x:"177.909",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,g.jsx)("rect",{width:"6.177",height:"6.177",x:"186.124",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,g.jsx)("rect",{width:"6.177",height:"6.177",x:"194.339",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,g.jsx)("rect",{width:"6.177",height:"6.177",x:"202.553",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,g.jsx)("rect",{width:"6.177",height:"6.177",x:"210.864",y:"221.798",fill:"#E1E3E6",rx:"3"})]}),X=window.wc.wcTypes,q=(0,m.withSpokenMessages)((({attributes:e,name:t,setAttributes:s,debouncedSpeak:o})=>{const[l,a]=(0,u.useState)({}),[p,b]=(0,u.useState)(!1);(0,u.useEffect)((()=>{e.tags.length||b(!0)}),[e.tags.length]);const _=()=>{b(!1),a({})};return e.isPreview?K:(0,r.getSetting)("hasTags",!0)?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(n.BlockControls,{children:(0,g.jsx)(m.ToolbarGroup,{controls:[{icon:"edit",title:(0,h.__)("Edit selected tags","woocommerce"),onClick:()=>p?_():(b(!0),void a({})),isActive:p}]})}),(()=>{const{columns:t,tagOperator:o,contentVisibility:c,orderby:i,rows:l,alignButtons:a,stockStatus:d}=e;return(0,g.jsxs)(n.InspectorControls,{children:[(0,g.jsx)(m.PanelBody,{title:(0,h.__)("Product Tag","woocommerce"),initialOpen:!e.tags.length&&!p,children:(0,g.jsx)(H,{selected:e.tags,onChange:(e=[])=>{const t=e.map((({id:e})=>e));s({tags:t})},operator:o,onOperatorChange:(e="any")=>s({tagOperator:e}),isCompact:!0})}),(0,g.jsx)(m.PanelBody,{title:(0,h.__)("Layout","woocommerce"),initialOpen:!0,children:(0,g.jsx)(w,{columns:t,rows:l,alignButtons:a,setAttributes:s,minColumns:(0,r.getSettingWithCoercion)("minColumns",1,X.isNumber),maxColumns:(0,r.getSettingWithCoercion)("maxColumns",6,X.isNumber),minRows:(0,r.getSettingWithCoercion)("minRows",6,X.isNumber),maxRows:(0,r.getSettingWithCoercion)("maxRows",6,X.isNumber)})}),(0,g.jsx)(m.PanelBody,{title:(0,h.__)("Content","woocommerce"),initialOpen:!0,children:(0,g.jsx)(x,{settings:c,onChange:e=>s({contentVisibility:e})})}),(0,g.jsx)(m.PanelBody,{title:(0,h.__)("Order By","woocommerce"),initialOpen:!1,children:(0,g.jsx)(Q,{setAttributes:s,value:i})}),(0,g.jsx)(m.PanelBody,{title:(0,h.__)("Filter by stock status","woocommerce"),initialOpen:!1,children:(0,g.jsx)(z,{setAttributes:s,value:d})})]},"inspector")})(),p?(()=>{const t={...e,...l};return(0,g.jsxs)(m.Placeholder,{icon:(0,g.jsx)(c.A,{icon:i.A,className:"block-editor-block-icon"}),label:(0,h.__)("Products by Tag","woocommerce"),className:"wc-block-products-grid wc-block-product-tag",children:[(0,h.__)("Display a grid of products from your selected tags.","woocommerce"),(0,g.jsxs)("div",{className:"wc-block-product-tag__selection",children:[(0,g.jsx)(H,{selected:t.tags,onChange:(e=[])=>{const t=e.map((({id:e})=>e));a({...l,tags:t})},operator:t.tagOperator,onOperatorChange:(e="any")=>a({...l,tagOperator:e})}),(0,g.jsx)(m.Button,{variant:"primary",onClick:()=>{s(l),_(),o((0,h.__)("Showing Products by Tag block preview.","woocommerce"))},children:(0,h.__)("Done","woocommerce")}),(0,g.jsx)(m.Button,{className:"wc-block-product-tag__cancel-button",variant:"tertiary",onClick:()=>{_(),o((0,h.__)("Showing Products by Tag block preview.","woocommerce"))},children:(0,h.__)("Cancel","woocommerce")})]})]})})():(()=>{const s=e.tags.length;return(0,g.jsx)(m.Disabled,{children:s?(0,g.jsx)(d(),{block:t,attributes:e}):(0,g.jsx)(m.Placeholder,{icon:(0,g.jsx)(c.A,{icon:i.A,className:"block-editor-block-icon"}),label:(0,h.__)("Products by Tag","woocommerce"),className:"wc-block-products-grid wc-block-product-tag",children:(0,h.__)("This block displays products from selected tags. Select at least one tag to display its products.","woocommerce")})})})()]}):(0,g.jsx)(m.Placeholder,{icon:(0,g.jsx)(c.A,{icon:i.A,className:"block-editor-block-icon"}),label:(0,h.__)("Products by Tag","woocommerce"),className:"wc-block-products-grid wc-block-product-tag",children:(0,h.__)("This block displays products from selected tags. To use it you first need to create products and assign tags to them.","woocommerce")})}));s(5152),(0,o.registerBlockType)(l,{icon:{src:(0,g.jsx)(c.A,{icon:i.A,className:"wc-block-editor-components-block-icon"})},attributes:{...l.attributes,columns:{type:"number",default:(0,r.getSetting)("defaultColumns",3)},rows:{type:"number",default:(0,r.getSetting)("defaultRows",3)},tags:{type:"array",default:[]},stockStatus:{type:"array",default:Object.keys((0,r.getSetting)("stockStatusOptions",[]))}},edit:e=>{const t=(0,n.useBlockProps)();return(0,g.jsx)("div",{...t,children:(0,g.jsx)(q,{...e})})},save:()=>null})},5152:()=>{},9910:()=>{},1939:()=>{},5022:()=>{},1609:e=>{"use strict";e.exports=window.React},790:e=>{"use strict";e.exports=window.ReactJSXRuntime},9491:e=>{"use strict";e.exports=window.wp.compose},6087:e=>{"use strict";e.exports=window.wp.element},7723:e=>{"use strict";e.exports=window.wp.i18n},5573:e=>{"use strict";e.exports=window.wp.primitives}},r={};function c(e){var t=r[e];if(void 0!==t)return t.exports;var s=r[e]={exports:{}};return o[e].call(s.exports,s,s.exports,c),s.exports}c.m=o,e=[],c.O=(t,s,o,r)=>{if(!s){var i=1/0;for(d=0;d<e.length;d++){for(var[s,o,r]=e[d],l=!0,n=0;n<s.length;n++)(!1&r||i>=r)&&Object.keys(c.O).every((e=>c.O[e](s[n])))?s.splice(n--,1):(l=!1,r<i&&(i=r));if(l){e.splice(d--,1);var a=o();void 0!==a&&(t=a)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[s,o,r]},c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},s=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,c.t=function(e,o){if(1&o&&(e=this(e)),8&o)return e;if("object"==typeof e&&e){if(4&o&&e.__esModule)return e;if(16&o&&"function"==typeof e.then)return e}var r=Object.create(null);c.r(r);var i={};t=t||[null,s({}),s([]),s(s)];for(var l=2&o&&e;"object"==typeof l&&!~t.indexOf(l);l=s(l))Object.getOwnPropertyNames(l).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,c.d(r,i),r},c.d=(e,t)=>{for(var s in t)c.o(t,s)&&!c.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.j=1235,(()=>{var e={1235:0};c.O.j=t=>0===e[t];var t=(t,s)=>{var o,r,[i,l,n]=s,a=0;if(i.some((t=>0!==e[t]))){for(o in l)c.o(l,o)&&(c.m[o]=l[o]);if(n)var d=n(c)}for(t&&t(s);a<i.length;a++)r=i[a],c.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return c.O(d)},s=globalThis.webpackChunkwebpackWcBlocksMainJsonp=globalThis.webpackChunkwebpackWcBlocksMainJsonp||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var i=c.O(void 0,[94],(()=>c(885)));i=c.O(i),((this.wc=this.wc||{}).blocks=this.wc.blocks||{})["product-tag"]=i})();
=======
(()=>{var e,t,r,l={1679:(e,t,r)=>{"use strict";r.r(t);var l=r(1609);const c=window.wp.blocks,o=window.wc.wcSettings;var a=r(7104),n=r(8848);const i=JSON.parse('{"name":"woocommerce/product-tag","title":"Products by Tag","category":"woocommerce","keywords":["WooCommerce"],"description":"Display a grid of products with selected tags.","supports":{"align":["wide","full"],"html":false,"inserter":false},"attributes":{"columns":{"type":"number","default":3},"rows":{"type":"number","default":3},"alignButtons":{"type":"boolean","default":false},"contentVisibility":{"type":"object","default":{"image":true,"title":true,"price":true,"rating":true,"button":true},"properties":{"image":{"type":"boolean","default":true},"title":{"type":"boolean","default":true},"price":{"type":"boolean","default":true},"rating":{"type":"boolean","default":true},"button":{"type":"boolean","default":true}}},"tags":{"type":"array","default":[]},"tagOperator":{"type":"string","default":"any"},"orderby":{"type":"string","default":"date"},"isPreview":{"type":"boolean","default":false},"stockStatus":{"type":"array"}},"textdomain":"woocommerce","apiVersion":3,"$schema":"https://schemas.wp.org/trunk/block.json"}'),s=window.wp.blockEditor,m=window.wp.serverSideRender;var d=r.n(m),u=r(7723);const h=window.wp.components;var E=r(6087);const g=({onChange:e,settings:t})=>{const{image:r,button:c,price:o,rating:a,title:n}=t,i=!1!==r;return(0,l.createElement)(l.Fragment,null,(0,l.createElement)(h.ToggleControl,{label:(0,u.__)("Product image","woocommerce"),checked:i,onChange:()=>e({...t,image:!i})}),(0,l.createElement)(h.ToggleControl,{label:(0,u.__)("Product title","woocommerce"),checked:n,onChange:()=>e({...t,title:!n})}),(0,l.createElement)(h.ToggleControl,{label:(0,u.__)("Product price","woocommerce"),checked:o,onChange:()=>e({...t,price:!o})}),(0,l.createElement)(h.ToggleControl,{label:(0,u.__)("Product rating","woocommerce"),checked:a,onChange:()=>e({...t,rating:!a})}),(0,l.createElement)(h.ToggleControl,{label:(0,u.__)("Add to Cart button","woocommerce"),checked:c,onChange:()=>e({...t,button:!c})}))},p=(e,t,r)=>r?Math.min(e,t)===e?t:Math.max(e,r)===e?r:e:Math.max(e,t)===t?e:t,w=({columns:e,rows:t,setAttributes:r,alignButtons:c,minColumns:o=1,maxColumns:a=6,minRows:n=1,maxRows:i=6})=>(0,l.createElement)(l.Fragment,null,(0,l.createElement)(h.RangeControl,{label:(0,u.__)("Columns","woocommerce"),value:e,onChange:e=>{const t=p(e,o,a);r({columns:Number.isNaN(t)?"":t})},min:o,max:a}),(0,l.createElement)(h.RangeControl,{label:(0,u.__)("Rows","woocommerce"),value:t,onChange:e=>{const t=p(e,n,i);r({rows:Number.isNaN(t)?"":t})},min:n,max:i}),(0,l.createElement)(h.ToggleControl,{label:(0,u.__)("Align the last block to the bottom","woocommerce"),help:c?(0,u.__)("Align the last block to the bottom.","woocommerce"):(0,u.__)("The last inner block will follow other content.","woocommerce"),checked:c,onChange:()=>r({alignButtons:!c})}));var b=r(2478),_=r(851),f=r(9491);const y={clear:(0,u.__)("Clear all selected items","woocommerce"),noItems:(0,u.__)("No items found.","woocommerce"),
/* Translators: %s search term */
noResults:(0,u.__)("No results for %s","woocommerce"),search:(0,u.__)("Search for items","woocommerce"),selected:e=>(0,u.sprintf)(/* translators: Number of items selected from list. */ /* translators: Number of items selected from list. */
(0,u._n)("%d item selected","%d items selected",e,"woocommerce"),e),updated:(0,u.__)("Search results updated.","woocommerce")},x=(e,t=e)=>{const r=e.reduce(((e,t)=>{const r=t.parent||0;return e[r]||(e[r]=[]),e[r].push(t),e}),{}),l=t.reduce(((e,t)=>(e[String(t.id)]=t,e)),{});const c=["0"],o=(e={})=>e.parent?[...o(l[e.parent]),e.name]:e.name?[e.name]:[],a=e=>e.map((e=>{const t=r[e.id];return c.push(""+e.id),{...e,breadcrumbs:o(l[e.parent]),children:t&&t.length?a(t):[]}})),n=a(r[0]||[]);return Object.entries(r).forEach((([e,t])=>{c.includes(e)||n.push(...a(t||[]))})),n},v=(e,t)=>{if(!t)return e;const r=new RegExp(`(${t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")})`,"ig");return e.split(r).map(((e,t)=>r.test(e)?(0,l.createElement)("strong",{key:t},e):(0,l.createElement)(E.Fragment,{key:t},e)))};function k(e,t,r){const l=new Set(t.map((e=>e[r])));return e.filter((e=>!l.has(e[r])))}const C=window.wp.htmlEntities,S=({label:e})=>(0,l.createElement)("span",{className:"woocommerce-search-list__item-count"},e),N=e=>{const{item:t,search:r}=e,c=t.breadcrumbs&&t.breadcrumbs.length;return(0,l.createElement)("span",{className:"woocommerce-search-list__item-label"},c?(0,l.createElement)("span",{className:"woocommerce-search-list__item-prefix"},1===(o=t.breadcrumbs).length?o.slice(0,1).toString():2===o.length?o.slice(0,1).toString()+" › "+o.slice(-1).toString():o.slice(0,1).toString()+" … "+o.slice(-1).toString()):null,(0,l.createElement)("span",{className:"woocommerce-search-list__item-name"},v((0,C.decodeEntities)(t.name),r)));var o},O=({countLabel:e,className:t,depth:r=0,controlId:c="",item:o,isSelected:a,isSingle:n,onSelect:i,search:s="",selected:m,useExpandedPanelId:d,...u})=>{var g,p;const[w,b]=d,f=null!=e&&void 0!==o.count&&null!==o.count,y=!(null===(g=o.breadcrumbs)||void 0===g||!g.length),x=!(null===(p=o.children)||void 0===p||!p.length),O=w===o.id,P=(0,_.A)(["woocommerce-search-list__item",`depth-${r}`,t],{"has-breadcrumbs":y,"has-children":x,"has-count":f,"is-expanded":O,"is-radio-button":n});(0,E.useEffect)((()=>{x&&a&&b(o.id)}),[o,x,a,b]);const A=u.name||`search-list-item-${c}`,T=`${A}-${o.id}`,I=(0,E.useCallback)((()=>{b(O?-1:Number(o.id))}),[O,o.id,b]);return x?(0,l.createElement)("div",{className:P,onClick:I,onKeyDown:e=>"Enter"===e.key||" "===e.key?I():null,role:"treeitem",tabIndex:0},n?(0,l.createElement)(l.Fragment,null,(0,l.createElement)("input",{type:"radio",id:T,name:A,value:o.value,onChange:i(o),onClick:e=>e.stopPropagation(),checked:a,className:"woocommerce-search-list__item-input",...u}),(0,l.createElement)(N,{item:o,search:s}),f?(0,l.createElement)(S,{label:e||o.count}):null):(0,l.createElement)(l.Fragment,null,(0,l.createElement)(h.CheckboxControl,{className:"woocommerce-search-list__item-input",checked:a,...!a&&o.children.some((e=>m.find((t=>t.id===e.id))))?{indeterminate:!0}:{},label:v((0,C.decodeEntities)(o.name),s),onChange:()=>{a?i(k(m,o.children,"id"))():i(function(e,t){const r=k(t,e,"id");return[...e,...r]}(m,o.children))()},onClick:e=>e.stopPropagation()}),f?(0,l.createElement)(S,{label:e||o.count}):null)):(0,l.createElement)("label",{htmlFor:T,className:P},n?(0,l.createElement)(l.Fragment,null,(0,l.createElement)("input",{...u,type:"radio",id:T,name:A,value:o.value,onChange:i(o),checked:a,className:"woocommerce-search-list__item-input"}),(0,l.createElement)(N,{item:o,search:s})):(0,l.createElement)(h.CheckboxControl,{...u,id:T,name:A,className:"woocommerce-search-list__item-input",value:(0,C.decodeEntities)(o.value),label:v((0,C.decodeEntities)(o.name),s),onChange:i(o),checked:a}),f?(0,l.createElement)(S,{label:e||o.count}):null)},P=O;var A=r(2370);r(6636);const T=({id:e,label:t,popoverContents:r,remove:c,screenReaderLabel:o,className:n=""})=>{const[i,s]=(0,E.useState)(!1),m=(0,f.useInstanceId)(T);if(o=o||t,!t)return null;t=(0,C.decodeEntities)(t);const d=(0,_.A)("woocommerce-tag",n,{"has-remove":!!c}),g=`woocommerce-tag__label-${m}`,p=(0,l.createElement)(l.Fragment,null,(0,l.createElement)("span",{className:"screen-reader-text"},o),(0,l.createElement)("span",{"aria-hidden":"true"},t));return(0,l.createElement)("span",{className:d},r?(0,l.createElement)(h.Button,{className:"woocommerce-tag__text",id:g,onClick:()=>s(!0)},p):(0,l.createElement)("span",{className:"woocommerce-tag__text",id:g},p),r&&i&&(0,l.createElement)(h.Popover,{onClose:()=>s(!1)},r),c&&(0,l.createElement)(h.Button,{className:"woocommerce-tag__remove",onClick:c(e),label:(0,u.sprintf)(
// Translators: %s label.
// Translators: %s label.
(0,u.__)("Remove %s","woocommerce"),t),"aria-describedby":g},(0,l.createElement)(a.A,{icon:A.A,size:20,className:"clear-icon",role:"img"})))},I=T;r(8137);const B=e=>(0,l.createElement)(P,{...e}),R=e=>{const{list:t,selected:r,renderItem:c,depth:o=0,onSelect:a,instanceId:n,isSingle:i,search:s,useExpandedPanelId:m}=e,[d]=m;return t?(0,l.createElement)(E.Fragment,null,t.map((t=>{var u,h;const g=null!==(u=t.children)&&void 0!==u&&u.length&&!i?t.children.every((({id:e})=>r.find((t=>t.id===e)))):!!r.find((({id:e})=>e===t.id)),p=(null===(h=t.children)||void 0===h?void 0:h.length)&&d===t.id;return(0,l.createElement)(E.Fragment,{key:t.id},(0,l.createElement)("li",null,c({item:t,isSelected:g,onSelect:a,isSingle:i,selected:r,search:s,depth:o,useExpandedPanelId:m,controlId:n})),p?(0,l.createElement)(R,{...e,list:t.children,depth:o+1}):null)}))):null},j=({isLoading:e,isSingle:t,selected:r,messages:c,onChange:o,onRemove:a})=>{if(e||t||!r)return null;const n=r.length;return(0,l.createElement)("div",{className:"woocommerce-search-list__selected"},(0,l.createElement)("div",{className:"woocommerce-search-list__selected-header"},(0,l.createElement)("strong",null,c.selected(n)),n>0?(0,l.createElement)(h.Button,{variant:"link",isDestructive:!0,onClick:()=>o([]),"aria-label":c.clear},(0,u.__)("Clear all","woocommerce")):null),n>0?(0,l.createElement)("ul",null,r.map(((e,t)=>(0,l.createElement)("li",{key:t},(0,l.createElement)(I,{label:e.name,id:e.id,remove:a}))))):null)},F=({filteredList:e,search:t,onSelect:r,instanceId:c,useExpandedPanelId:o,...n})=>{const{messages:i,renderItem:s,selected:m,isSingle:d}=n,h=s||B;return 0===e.length?(0,l.createElement)("div",{className:"woocommerce-search-list__list is-not-found"},(0,l.createElement)("span",{className:"woocommerce-search-list__not-found-icon"},(0,l.createElement)(a.A,{icon:b.A,role:"img"})),(0,l.createElement)("span",{className:"woocommerce-search-list__not-found-text"},t?(0,u.sprintf)(i.noResults,t):i.noItems)):(0,l.createElement)("ul",{className:"woocommerce-search-list__list"},(0,l.createElement)(R,{useExpandedPanelId:o,list:e,selected:m,renderItem:h,onSelect:r,instanceId:c,isSingle:d,search:t}))},$=e=>{const{className:t="",isCompact:r,isHierarchical:c,isLoading:o,isSingle:a,list:n,messages:i=y,onChange:s,onSearch:m,selected:d,type:g="text",debouncedSpeak:p}=e,[w,b]=(0,E.useState)(""),v=(0,E.useState)(-1),k=(0,f.useInstanceId)($),C=(0,E.useMemo)((()=>({...y,...i})),[i]),S=(0,E.useMemo)((()=>((e,t,r)=>{if(!t)return r?x(e):e;const l=new RegExp(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"i"),c=e.map((e=>!!l.test(e.name)&&e)).filter(Boolean);return r?x(c,e):c})(n,w,c)),[n,w,c]);(0,E.useEffect)((()=>{p&&p(C.updated)}),[p,C]),(0,E.useEffect)((()=>{"function"==typeof m&&m(w)}),[w,m]);const N=(0,E.useCallback)((e=>()=>{a&&s([]);const t=d.findIndex((({id:t})=>t===e));s([...d.slice(0,t),...d.slice(t+1)])}),[a,d,s]),O=(0,E.useCallback)((e=>()=>{Array.isArray(e)?s(e):-1===d.findIndex((({id:t})=>t===e.id))?s(a?[e]:[...d,e]):N(e.id)()}),[a,N,s,d]),P=(0,E.useCallback)((e=>{const[t]=d.filter((t=>!e.find((e=>t.id===e.id))));N(t.id)()}),[N,d]);return(0,l.createElement)("div",{className:(0,_.A)("woocommerce-search-list",t,{"is-compact":r,"is-loading":o,"is-token":"token"===g})},"text"===g&&(0,l.createElement)(j,{...e,onRemove:N,messages:C}),(0,l.createElement)("div",{className:"woocommerce-search-list__search"},"text"===g?(0,l.createElement)(h.TextControl,{label:C.search,type:"search",value:w,onChange:e=>b(e)}):(0,l.createElement)(h.FormTokenField,{disabled:o,label:C.search,onChange:P,onInputChange:e=>b(e),suggestions:[],__experimentalValidateInput:()=>!1,value:o?[(0,u.__)("Loading…","woocommerce")]:d.map((e=>({...e,value:e.name}))),__experimentalShowHowTo:!1})),o?(0,l.createElement)("div",{className:"woocommerce-search-list__list"},(0,l.createElement)(h.Spinner,null)):(0,l.createElement)(F,{...e,search:w,filteredList:S,messages:C,onSelect:O,instanceId:k,useExpandedPanelId:v}))};(0,h.withSpokenMessages)($);var M=r(4717);const L=({item:e,search:t,depth:r=0,...c})=>{const o=e.breadcrumbs.length?`${e.breadcrumbs.join(", ")}, ${e.name}`:e.name;return(0,l.createElement)(O,{className:(0,_.A)("woocommerce-product-tags__item","has-count",{"is-searching":t.length>0,"is-skip-level":0===r&&0!==e.parent}),item:e,search:t,depth:r,...c,ariaLabel:(0,u.sprintf)(/* translators: %1$d is the count of products, %2$s is the name of the tag. */ /* translators: %1$d is the count of products, %2$s is the name of the tag. */
(0,u._n)("%1$d product tagged as %2$s","%1$d products tagged as %2$s",e.count,"woocommerce"),e.count,o)})},D=window.wp.url,W=window.wp.apiFetch;var V=r.n(W);const H=({selected:e=[],search:t})=>{const r=(({selected:e=[],search:t})=>{const r=(0,o.getSetting)("limitTags",!1),l=[(0,D.addQueryArgs)("wc/store/v1/products/tags",{per_page:r?100:0,orderby:r?"count":"name",order:r?"desc":"asc",search:t})];return r&&e.length&&l.push((0,D.addQueryArgs)("wc/store/v1/products/tags",{include:e})),l})({selected:e,search:t});return Promise.all(r.map((e=>V()({path:e})))).then((e=>((e,t)=>{const r=new Map;return e.filter((e=>{const l=t(e);return!r.has(l)&&(r.set(l,e),!0)}))})(e.flat(),(e=>e.id))))};r(2708);const J=({isCompact:e=!1,onChange:t,onOperatorChange:r,operator:c="any",selected:a})=>{const[n,i]=(0,E.useState)([]),[s,m]=(0,E.useState)(!0),[d,g]=(0,E.useState)(!1),p=(0,o.getSetting)("limitTags",!1),w=(0,E.useMemo)((()=>n.filter((e=>a.includes(e.id)))),[n,a]),b=(0,E.useCallback)((e=>{m(!0),H({selected:a,search:e}).then((e=>{i(e),m(!1)})).catch((()=>{m(!1)}))}),[a]);(0,E.useEffect)((()=>{d||(b(""),g(!0))}),[b,d]);const _=(0,M.YQ)(b,400),f={clear:(0,u.__)("Clear all product tags","woocommerce"),list:(0,u.__)("Product Tags","woocommerce"),noItems:(0,u.__)("You have not set up any product tags on your store.","woocommerce"),search:(0,u.__)("Search for product tags","woocommerce"),selected:e=>(0,u.sprintf)(/* translators: %d is the count of selected tags. */ /* translators: %d is the count of selected tags. */
(0,u._n)("%d tag selected","%d tags selected",e,"woocommerce"),e),updated:(0,u.__)("Tag search results updated.","woocommerce")};return(0,l.createElement)(l.Fragment,null,(0,l.createElement)($,{className:"woocommerce-product-tags",list:n,isLoading:s,selected:w,onChange:t,onSearch:p?_:void 0,renderItem:L,messages:f,isCompact:e,isHierarchical:!0,isSingle:!1}),!!r&&(0,l.createElement)("div",{hidden:a.length<2},(0,l.createElement)(h.SelectControl,{className:"woocommerce-product-tags__operator",label:(0,u.__)("Display products matching","woocommerce"),help:(0,u.__)("Pick at least two tags to use this setting.","woocommerce"),value:c,onChange:r,options:[{label:(0,u.__)("Any selected tags","woocommerce"),value:"any"},{label:(0,u.__)("All selected tags","woocommerce"),value:"all"}]})))},Q=({value:e,setAttributes:t})=>(0,l.createElement)(h.SelectControl,{label:(0,u.__)("Order products by","woocommerce"),value:e,options:[{label:(0,u.__)("Newness - newest first","woocommerce"),value:"date"},{label:(0,u.__)("Price - low to high","woocommerce"),value:"price_asc"},{label:(0,u.__)("Price - high to low","woocommerce"),value:"price_desc"},{label:(0,u.__)("Rating - highest first","woocommerce"),value:"rating"},{label:(0,u.__)("Sales - most first","woocommerce"),value:"popularity"},{label:(0,u.__)("Title - alphabetical","woocommerce"),value:"title"},{label:(0,u.__)("Menu Order","woocommerce"),value:"menu_order"}],onChange:e=>t({orderby:e})}),G=(0,o.getSetting)("hideOutOfStockItems",!1),Y=(0,o.getSetting)("stockStatusOptions",{}),z=({value:e,setAttributes:t})=>{const{outofstock:r,...c}=Y,o=G?c:Y,a=Object.entries(o).map((([e,t])=>({value:e,label:t}))).filter((e=>!!e.label)),n=Object.keys(o).filter((e=>!!e)),[i,s]=(0,E.useState)(e||n);(0,E.useEffect)((()=>{t({stockStatus:["",...i]})}),[i,t]);const m=(0,E.useCallback)((e=>{const t=i.includes(e),r=i.filter((t=>t!==e));t||(r.push(e),r.sort()),s(r)}),[i]);return(0,l.createElement)(l.Fragment,null,a.map((e=>{const t=i.includes(e.value)?/* translators: %s stock status. */ /* translators: %s stock status. */(0,u.__)('Stock status "%s" visible.',"woocommerce"):/* translators: %s stock status. */ /* translators: %s stock status. */(0,u.__)('Stock status "%s" hidden.',"woocommerce");return(0,l.createElement)(h.ToggleControl,{label:e.label,key:e.value,help:(0,u.sprintf)(t,e.label),checked:i.includes(e.value),onChange:()=>m(e.value)})})))},K=(0,l.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 230 250",style:{width:"100%"}},(0,l.createElement)("title",null,"Grid Block Preview"),(0,l.createElement)("rect",{width:"65.374",height:"65.374",x:".162",y:".779",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"47.266",height:"5.148",x:"9.216",y:"76.153",fill:"#E1E3E6",rx:"2.574"}),(0,l.createElement)("rect",{width:"62.8",height:"15",x:"1.565",y:"101.448",fill:"#E1E3E6",rx:"5"}),(0,l.createElement)("rect",{width:"65.374",height:"65.374",x:".162",y:"136.277",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"47.266",height:"5.148",x:"9.216",y:"211.651",fill:"#E1E3E6",rx:"2.574"}),(0,l.createElement)("rect",{width:"62.8",height:"15",x:"1.565",y:"236.946",fill:"#E1E3E6",rx:"5"}),(0,l.createElement)("rect",{width:"65.374",height:"65.374",x:"82.478",y:".779",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"47.266",height:"5.148",x:"91.532",y:"76.153",fill:"#E1E3E6",rx:"2.574"}),(0,l.createElement)("rect",{width:"62.8",height:"15",x:"83.882",y:"101.448",fill:"#E1E3E6",rx:"5"}),(0,l.createElement)("rect",{width:"65.374",height:"65.374",x:"82.478",y:"136.277",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"47.266",height:"5.148",x:"91.532",y:"211.651",fill:"#E1E3E6",rx:"2.574"}),(0,l.createElement)("rect",{width:"62.8",height:"15",x:"83.882",y:"236.946",fill:"#E1E3E6",rx:"5"}),(0,l.createElement)("rect",{width:"65.374",height:"65.374",x:"164.788",y:".779",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"47.266",height:"5.148",x:"173.843",y:"76.153",fill:"#E1E3E6",rx:"2.574"}),(0,l.createElement)("rect",{width:"62.8",height:"15",x:"166.192",y:"101.448",fill:"#E1E3E6",rx:"5"}),(0,l.createElement)("rect",{width:"65.374",height:"65.374",x:"164.788",y:"136.277",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"47.266",height:"5.148",x:"173.843",y:"211.651",fill:"#E1E3E6",rx:"2.574"}),(0,l.createElement)("rect",{width:"62.8",height:"15",x:"166.192",y:"236.946",fill:"#E1E3E6",rx:"5"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"13.283",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"21.498",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"29.713",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"37.927",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"46.238",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"95.599",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"103.814",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"112.029",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"120.243",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"128.554",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"177.909",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"186.124",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"194.339",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"202.553",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"210.864",y:"86.301",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"13.283",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"21.498",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"29.713",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"37.927",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"46.238",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"95.599",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"103.814",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"112.029",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"120.243",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"128.554",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"177.909",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"186.124",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"194.339",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"202.553",y:"221.798",fill:"#E1E3E6",rx:"3"}),(0,l.createElement)("rect",{width:"6.177",height:"6.177",x:"210.864",y:"221.798",fill:"#E1E3E6",rx:"3"})),q=window.wc.wcTypes,U=(0,h.withSpokenMessages)((({attributes:e,name:t,setAttributes:r,debouncedSpeak:c})=>{const[i,m]=(0,E.useState)({}),[p,b]=(0,E.useState)(!1);(0,E.useEffect)((()=>{e.tags.length||b(!0)}),[e.tags.length]);const _=()=>{b(!1),m({})};return e.isPreview?K:(0,o.getSetting)("hasTags",!0)?(0,l.createElement)(l.Fragment,null,(0,l.createElement)(s.BlockControls,null,(0,l.createElement)(h.ToolbarGroup,{controls:[{icon:"edit",title:(0,u.__)("Edit selected tags","woocommerce"),onClick:()=>p?_():(b(!0),void m({})),isActive:p}]})),(()=>{const{columns:t,tagOperator:c,contentVisibility:a,orderby:n,rows:i,alignButtons:m,stockStatus:d}=e;return(0,l.createElement)(s.InspectorControls,{key:"inspector"},(0,l.createElement)(h.PanelBody,{title:(0,u.__)("Product Tag","woocommerce"),initialOpen:!e.tags.length&&!p},(0,l.createElement)(J,{selected:e.tags,onChange:(e=[])=>{const t=e.map((({id:e})=>e));r({tags:t})},operator:c,onOperatorChange:(e="any")=>r({tagOperator:e}),isCompact:!0})),(0,l.createElement)(h.PanelBody,{title:(0,u.__)("Layout","woocommerce"),initialOpen:!0},(0,l.createElement)(w,{columns:t,rows:i,alignButtons:m,setAttributes:r,minColumns:(0,o.getSettingWithCoercion)("minColumns",1,q.isNumber),maxColumns:(0,o.getSettingWithCoercion)("maxColumns",6,q.isNumber),minRows:(0,o.getSettingWithCoercion)("minRows",6,q.isNumber),maxRows:(0,o.getSettingWithCoercion)("maxRows",6,q.isNumber)})),(0,l.createElement)(h.PanelBody,{title:(0,u.__)("Content","woocommerce"),initialOpen:!0},(0,l.createElement)(g,{settings:a,onChange:e=>r({contentVisibility:e})})),(0,l.createElement)(h.PanelBody,{title:(0,u.__)("Order By","woocommerce"),initialOpen:!1},(0,l.createElement)(Q,{setAttributes:r,value:n})),(0,l.createElement)(h.PanelBody,{title:(0,u.__)("Filter by stock status","woocommerce"),initialOpen:!1},(0,l.createElement)(z,{setAttributes:r,value:d})))})(),p?(()=>{const t={...e,...i};return(0,l.createElement)(h.Placeholder,{icon:(0,l.createElement)(a.A,{icon:n.A,className:"block-editor-block-icon"}),label:(0,u.__)("Products by Tag","woocommerce"),className:"wc-block-products-grid wc-block-product-tag"},(0,u.__)("Display a grid of products from your selected tags.","woocommerce"),(0,l.createElement)("div",{className:"wc-block-product-tag__selection"},(0,l.createElement)(J,{selected:t.tags,onChange:(e=[])=>{const t=e.map((({id:e})=>e));m({...i,tags:t})},operator:t.tagOperator,onOperatorChange:(e="any")=>m({...i,tagOperator:e})}),(0,l.createElement)(h.Button,{variant:"primary",onClick:()=>{r(i),_(),c((0,u.__)("Showing Products by Tag block preview.","woocommerce"))}},(0,u.__)("Done","woocommerce")),(0,l.createElement)(h.Button,{className:"wc-block-product-tag__cancel-button",variant:"tertiary",onClick:()=>{_(),c((0,u.__)("Showing Products by Tag block preview.","woocommerce"))}},(0,u.__)("Cancel","woocommerce"))))})():(()=>{const r=e.tags.length;return(0,l.createElement)(h.Disabled,null,r?(0,l.createElement)(d(),{block:t,attributes:e}):(0,l.createElement)(h.Placeholder,{icon:(0,l.createElement)(a.A,{icon:n.A,className:"block-editor-block-icon"}),label:(0,u.__)("Products by Tag","woocommerce"),className:"wc-block-products-grid wc-block-product-tag"},(0,u.__)("This block displays products from selected tags. Select at least one tag to display its products.","woocommerce")))})()):(0,l.createElement)(h.Placeholder,{icon:(0,l.createElement)(a.A,{icon:n.A,className:"block-editor-block-icon"}),label:(0,u.__)("Products by Tag","woocommerce"),className:"wc-block-products-grid wc-block-product-tag"},(0,u.__)("This block displays products from selected tags. To use it you first need to create products and assign tags to them.","woocommerce"))}));r(218),(0,c.registerBlockType)(i,{icon:{src:(0,l.createElement)(a.A,{icon:n.A,className:"wc-block-editor-components-block-icon"})},attributes:{...i.attributes,columns:{type:"number",default:(0,o.getSetting)("defaultColumns",3)},rows:{type:"number",default:(0,o.getSetting)("defaultRows",3)},tags:{type:"array",default:[]},stockStatus:{type:"array",default:Object.keys((0,o.getSetting)("stockStatusOptions",[]))}},edit:e=>{const t=(0,s.useBlockProps)();return(0,l.createElement)("div",{...t},(0,l.createElement)(U,{...e}))},save:()=>null})},218:()=>{},2708:()=>{},8137:()=>{},6636:()=>{},1609:e=>{"use strict";e.exports=window.React},9491:e=>{"use strict";e.exports=window.wp.compose},6087:e=>{"use strict";e.exports=window.wp.element},7723:e=>{"use strict";e.exports=window.wp.i18n},5573:e=>{"use strict";e.exports=window.wp.primitives}},c={};function o(e){var t=c[e];if(void 0!==t)return t.exports;var r=c[e]={exports:{}};return l[e].call(r.exports,r,r.exports,o),r.exports}o.m=l,e=[],o.O=(t,r,l,c)=>{if(!r){var a=1/0;for(m=0;m<e.length;m++){for(var[r,l,c]=e[m],n=!0,i=0;i<r.length;i++)(!1&c||a>=c)&&Object.keys(o.O).every((e=>o.O[e](r[i])))?r.splice(i--,1):(n=!1,c<a&&(a=c));if(n){e.splice(m--,1);var s=l();void 0!==s&&(t=s)}}return t}c=c||0;for(var m=e.length;m>0&&e[m-1][2]>c;m--)e[m]=e[m-1];e[m]=[r,l,c]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(e,l){if(1&l&&(e=this(e)),8&l)return e;if("object"==typeof e&&e){if(4&l&&e.__esModule)return e;if(16&l&&"function"==typeof e.then)return e}var c=Object.create(null);o.r(c);var a={};t=t||[null,r({}),r([]),r(r)];for(var n=2&l&&e;"object"==typeof n&&!~t.indexOf(n);n=r(n))Object.getOwnPropertyNames(n).forEach((t=>a[t]=()=>e[t]));return a.default=()=>e,o.d(c,a),c},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.j=1235,(()=>{var e={1235:0};o.O.j=t=>0===e[t];var t=(t,r)=>{var l,c,[a,n,i]=r,s=0;if(a.some((t=>0!==e[t]))){for(l in n)o.o(n,l)&&(o.m[l]=n[l]);if(i)var m=i(o)}for(t&&t(r);s<a.length;s++)c=a[s],o.o(e,c)&&e[c]&&e[c][0](),e[c]=0;return o.O(m)},r=self.webpackChunkwebpackWcBlocksMainJsonp=self.webpackChunkwebpackWcBlocksMainJsonp||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var a=o.O(void 0,[94],(()=>o(1679)));a=o.O(a),((this.wc=this.wc||{}).blocks=this.wc.blocks||{})["product-tag"]=a})();
>>>>>>> b1eea7a (Merged existing code from https://dev-vices.rafaeldeveloper.co)
