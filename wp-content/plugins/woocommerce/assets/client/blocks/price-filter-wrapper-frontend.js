<<<<<<< HEAD
(globalThis.webpackChunkwebpackWcBlocksFrontendJsonp=globalThis.webpackChunkwebpackWcBlocksFrontendJsonp||[]).push([[515],{3076:(e,t,r)=>{"use strict";r.d(t,{A:()=>i}),r(9300);var n=r(790);const i=({children:e})=>(0,n.jsx)("div",{className:"wc-block-filter-title-placeholder",children:e})},4559:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(7723),i=r(4921),o=r(4656),c=(r(7165),r(790));const s=({className:e,
/* translators: Reset button text for filters. */
label:t=(0,n.__)("Reset","woocommerce"),onClick:r,screenReaderLabel:s=(0,n.__)("Reset filter","woocommerce")})=>(0,c.jsx)("button",{className:(0,i.A)("wc-block-components-filter-reset-button",e),onClick:r,children:(0,c.jsx)(o.Label,{label:t,screenReaderLabel:s})})},18:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(7723),i=r(4921),o=r(4656),c=(r(874),r(790));const s=({className:e,isLoading:t,disabled:r,
/* translators: Submit button text for filters. */
label:s=(0,n.__)("Apply","woocommerce"),onClick:a,screenReaderLabel:l=(0,n.__)("Apply filter","woocommerce")})=>(0,c.jsx)("button",{type:"submit",className:(0,i.A)("wp-block-button__link","wc-block-filter-submit-button","wc-block-components-filter-submit-button",{"is-loading":t},e),disabled:r,onClick:a,children:(0,c.jsx)(o.Label,{label:s,screenReaderLabel:l})})},5168:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var n=r(6087),i=r(4347),o=r(3993),c=r(9456),s=r(4556),a=r(9415),l=r(5479),u=r(2233);const m=({queryAttribute:e,queryPrices:t,queryStock:r,queryRating:m,queryState:d,isEditor:p=!1})=>{let b=(0,u._)();b=`${b}-collection-data`;const[_]=(0,a.dJ)(b),[g,f]=(0,a.xd)("calculate_attribute_counts",[],b),[h,w]=(0,a.xd)("calculate_price_range",null,b),[y,x]=(0,a.xd)("calculate_stock_status_counts",null,b),[k,v]=(0,a.xd)("calculate_rating_counts",null,b),N=(0,s.c)(e||{}),S=(0,s.c)(t),F=(0,s.c)(r),C=(0,s.c)(m);(0,n.useEffect)((()=>{"object"==typeof N&&Object.keys(N).length&&(g.find((e=>(0,o.objectHasProp)(N,"taxonomy")&&e.taxonomy===N.taxonomy))||f([...g,N]))}),[N,g,f]),(0,n.useEffect)((()=>{h!==S&&void 0!==S&&w(S)}),[S,w,h]),(0,n.useEffect)((()=>{y!==F&&void 0!==F&&x(F)}),[F,x,y]),(0,n.useEffect)((()=>{k!==C&&void 0!==C&&v(C)}),[C,v,k]);const[j,E]=(0,n.useState)(p),[A]=(0,i.d7)(j,200);j||E(!0);const R=(0,n.useMemo)((()=>(e=>{const t=e;return Array.isArray(e.calculate_attribute_counts)&&(t.calculate_attribute_counts=(0,c.di)(e.calculate_attribute_counts.map((({taxonomy:e,queryType:t})=>({taxonomy:e,query_type:t})))).asc(["taxonomy","query_type"])),t})(_)),[_]),{results:P,isLoading:U}=(0,l.G)({namespace:"/wc/store/v1",resourceName:"products/collection-data",query:{...d,page:void 0,per_page:void 0,orderby:void 0,order:void 0,...R},shouldSelect:A});return{data:P,isLoading:U}}},5479:(e,t,r)=>{"use strict";r.d(t,{G:()=>l});var n=r(7594),i=r(7143),o=r(6087),c=r(4556),s=r(3578),a=r(3993);const l=e=>{const{namespace:t,resourceName:r,resourceValues:l=[],query:u={},shouldSelect:m=!0}=e;if(!t||!r)throw new Error("The options object must have valid values for the namespace and the resource properties.");const d=(0,o.useRef)({results:[],isLoading:!0}),p=(0,c.c)(u),b=(0,c.c)(l),_=(0,s.a)(),g=(0,i.useSelect)((e=>{if(!m)return null;const i=e(n.COLLECTIONS_STORE_KEY),o=[t,r,p,b],c=i.getCollectionError(...o);if(c){if(!(0,a.isError)(c))throw new Error("TypeError: `error` object is not an instance of Error constructor");_(c)}return{results:i.getCollection(...o),isLoading:!i.hasFinishedResolution("getCollection",o)}}),[t,r,b,p,m,_]);return null!==g&&(d.current=g),d.current}},9415:(e,t,r)=>{"use strict";r.d(t,{dJ:()=>s,xd:()=>a});var n=r(7594),i=r(7143),o=r(6087),c=(r(923),r(2233));const s=e=>{const t=(0,c._)();e=e||t;const r=(0,i.useSelect)((t=>t(n.QUERY_STATE_STORE_KEY).getValueForQueryContext(e,void 0)),[e]),{setValueForQueryContext:s}=(0,i.useDispatch)(n.QUERY_STATE_STORE_KEY);return[r,(0,o.useCallback)((t=>{s(e,t)}),[e,s])]},a=(e,t,r)=>{const s=(0,c._)();r=r||s;const a=(0,i.useSelect)((i=>i(n.QUERY_STATE_STORE_KEY).getValueForQueryKey(r,e,t)),[r,e]),{setQueryValue:l}=(0,i.useDispatch)(n.QUERY_STATE_STORE_KEY);return[a,(0,o.useCallback)((t=>{l(r,e,t)}),[r,e,l])]}},2233:(e,t,r)=>{"use strict";r.d(t,{_:()=>o});var n=r(6087);const i=(0,n.createContext)("page"),o=()=>(0,n.useContext)(i);i.Provider},9464:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(6087);function i(e,t){const r=(0,n.useRef)();return(0,n.useEffect)((()=>{r.current===e||t&&!t(e,r.current)||(r.current=e)}),[e,t]),r.current}},4556:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(6087),i=r(923),o=r.n(i);function c(e){const t=(0,n.useRef)(e);return o()(e,t.current)||(t.current=e),t.current}},41:(e,t,r)=>{"use strict";r.d(t,{p:()=>l});var n=r(4921),i=r(3993),o=r(7356),c=r(9786);function s(e={}){const t={};return(0,c.getCSSRules)(e,{selector:""}).forEach((e=>{t[e.key]=e.value})),t}function a(e,t){return e&&t?`has-${(0,o.c)(t)}-${e}`:""}const l=e=>{const t=(e=>{const t=(0,i.isObject)(e)?e:{style:{}};let r=t.style;return(0,i.isString)(r)&&(r=JSON.parse(r)||{}),(0,i.isObject)(r)||(r={}),{...t,style:r}})(e),r=function(e){const{backgroundColor:t,textColor:r,gradient:o,style:c}=e,l=a("background-color",t),u=a("color",r),m=function(e){if(e)return`has-${e}-gradient-background`}(o),d=m||c?.color?.gradient;return{className:(0,n.A)(u,m,{[l]:!d&&!!l,"has-text-color":r||c?.color?.text,"has-background":t||c?.color?.background||o||c?.color?.gradient,"has-link-color":(0,i.isObject)(c?.elements?.link)?c?.elements?.link?.color:void 0}),style:s({color:c?.color||{}})}}(t),o=function(e){const t=e.style?.border||{};return{className:function(e){const{borderColor:t,style:r}=e,i=t?a("border-color",t):"";return(0,n.A)({"has-border-color":!!t||!!r?.border?.color,[i]:!!i})}(e),style:s({border:t})}}(t),c=function(e){return{className:void 0,style:s({spacing:e.style?.spacing||{}})}}(t),l=(e=>{const t=(0,i.isObject)(e.style.typography)?e.style.typography:{},r=(0,i.isString)(t.fontFamily)?t.fontFamily:"";return{className:e.fontFamily?`has-${e.fontFamily}-font-family`:r,style:{fontSize:e.fontSize?`var(--wp--preset--font-size--${e.fontSize})`:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight,letterSpacing:t.letterSpacing,lineHeight:t.lineHeight,textDecoration:t.textDecoration,textTransform:t.textTransform}}})(t);return{className:(0,n.A)(l.className,r.className,o.className,c.className),style:{...l.style,...r.style,...o.style,...c.style}}}},3578:(e,t,r)=>{"use strict";r.d(t,{a:()=>i});var n=r(6087);const i=()=>{const[,e]=(0,n.useState)();return(0,n.useCallback)((t=>{e((()=>{throw t}))}),[])}},6823:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>P});var n=r(4921),i=r(41),o=r(3993),c=r(9464),s=r(9415),a=r(5168),l=r(6087),u=r(7723),m=r(4656),d=r(4347);r(6599);const p=(e,t,r,n=1,i=!1)=>{let[o,c]=e;const s=e=>Number.isFinite(e);return s(o)||(o=t||0),s(c)||(c=r||n),s(t)&&t>o&&(o=t),s(r)&&r<=o&&(o=r-n),s(t)&&t>=c&&(c=t+n),s(r)&&r<c&&(c=r),!i&&o>=c&&(o=c-n),i&&c<=o&&(c=o+n),[o,c]};var b=r(18);const _=({maxConstraint:e,minorUnit:t})=>({floatValue:r})=>void 0!==r&&r<=e/10**t&&r>0,g=({minConstraint:e,currentMaxValue:t,minorUnit:r})=>({floatValue:n})=>void 0!==n&&n>=e/10**r&&n<t/10**r;var f=r(4559),h=r(790);const w=({minPrice:e,maxPrice:t,minConstraint:r,maxConstraint:i,onChange:c,step:s,currency:a,showInputFields:w=!0,showFilterButton:y=!1,inlineInput:x=!0,isLoading:k=!1,isUpdating:v=!1,isEditor:N=!1,onSubmit:S=()=>{}})=>{const F=(0,l.useRef)(null),C=(0,l.useRef)(null),j=s||10**a.minorUnit,[E,A]=(0,l.useState)(e),[R,P]=(0,l.useState)(t),U=(0,l.useRef)(null),[L,T]=(0,l.useState)(0);(0,l.useEffect)((()=>{A(e)}),[e]),(0,l.useEffect)((()=>{P(t)}),[t]),(0,l.useLayoutEffect)((()=>{x&&U.current&&T(U.current?.offsetWidth)}),[x,T]);const I=(0,l.useMemo)((()=>isFinite(r)&&isFinite(i)),[r,i]),O=(0,l.useMemo)((()=>isFinite(e)&&isFinite(t)&&I?{"--low":(e-r)/(i-r)*100+"%","--high":(t-r)/(i-r)*100+"%"}:{"--low":"0%","--high":"100%"}),[e,t,r,i,I]),M=(0,l.useCallback)((e=>{if(k||!I||!F.current||!C.current)return;const t=e.target.getBoundingClientRect(),r=e.clientX-t.left,n=F.current.offsetWidth,o=+F.current.value,c=C.current.offsetWidth,s=+C.current.value,a=n*(o/i),l=c*(s/i);Math.abs(r-a)>Math.abs(r-l)?(F.current.style.zIndex="20",C.current.style.zIndex="21"):(F.current.style.zIndex="21",C.current.style.zIndex="20")}),[k,i,I]),Q=(0,l.useCallback)((n=>{const o=n.target.classList.contains("wc-block-price-filter__range-input--min"),s=+n.target.value,a=o?[Math.round(s/j)*j,t]:[e,Math.round(s/j)*j],l=p(a,r,i,j,o);c(l)}),[c,e,t,r,i,j]),B=(0,d.YQ)(((e,t,r)=>{if(e>=t){const e=p([0,t],null,null,j,r);return c([parseInt(e[0],10),parseInt(e[1],10)])}const n=p([e,t],null,null,j,r);c(n)}),1e3),q=(0,d.YQ)(S,600),V=(0,n.A)("wc-block-price-filter","wc-block-components-price-slider",w&&"wc-block-price-filter--has-input-fields",w&&"wc-block-components-price-slider--has-input-fields",y&&"wc-block-price-filter--has-filter-button",y&&"wc-block-components-price-slider--has-filter-button",!I&&"is-disabled",(x||L<=300)&&"wc-block-components-price-slider--is-input-inline"),Y=(0,o.isObject)(F.current)?F.current.ownerDocument.activeElement:void 0,W=Y&&Y===F.current?j:1,H=Y&&Y===C.current?j:1,$=String(E/10**a.minorUnit),z=String(R/10**a.minorUnit),D=x&&L>300,K=(0,h.jsx)("div",{className:(0,n.A)("wc-block-price-filter__range-input-wrapper","wc-block-components-price-slider__range-input-wrapper",{"is-loading":k&&v}),onMouseMove:M,onFocus:M,children:I&&(0,h.jsxs)("div",{"aria-hidden":w,children:[(0,h.jsx)("div",{className:"wc-block-price-filter__range-input-progress wc-block-components-price-slider__range-input-progress",style:O}),(0,h.jsx)("input",{type:"range",className:"wc-block-price-filter__range-input wc-block-price-filter__range-input--min wc-block-components-price-slider__range-input wc-block-components-price-slider__range-input--min","aria-label":(0,u.__)("Filter products by minimum price","woocommerce"),"aria-valuetext":$,value:Number.isFinite(e)?e:r,onChange:Q,step:W,min:r,max:i,ref:F,disabled:k&&!I,tabIndex:w?-1:0}),(0,h.jsx)("input",{type:"range",className:"wc-block-price-filter__range-input wc-block-price-filter__range-input--max wc-block-components-price-slider__range-input wc-block-components-price-slider__range-input--max","aria-label":(0,u.__)("Filter products by maximum price","woocommerce"),"aria-valuetext":z,value:Number.isFinite(t)?t:i,onChange:Q,step:H,min:r,max:i,ref:C,disabled:k,tabIndex:w?-1:0})]})}),J=e=>`wc-block-price-filter__amount wc-block-price-filter__amount--${e} wc-block-form-text-input wc-block-components-price-slider__amount wc-block-components-price-slider__amount--${e}`,Z={currency:a,decimalScale:0},G={...Z,displayType:"input",allowNegative:!1,disabled:k||!I,onClick:e=>{const t=e.currentTarget;t&&t.select()}};return(0,h.jsxs)("div",{className:V,ref:U,children:[(!D||!w)&&K,w&&(0,h.jsxs)("div",{className:"wc-block-price-filter__controls wc-block-components-price-slider__controls",children:[v?(0,h.jsx)("div",{className:"input-loading"}):(0,h.jsxs)("div",{className:"wc-block-price-filter__control wc-block-components-price-slider__control",children:[(0,h.jsx)("label",{className:"wc-block-components-price-slider__label",htmlFor:"minPriceInput",children:(0,u.__)("Min. Price","woocommerce")}),(0,h.jsx)(m.FormattedMonetaryAmount,{...G,id:"minPriceInput",className:J("min"),"aria-label":(0,u.__)("Filter products by minimum price","woocommerce"),isAllowed:g({minConstraint:r,minorUnit:a.minorUnit,currentMaxValue:R}),onValueChange:e=>{e!==E&&(A(e),B(e,R,!0))},value:E})]}),D&&K,v?(0,h.jsx)("div",{className:"input-loading"}):(0,h.jsxs)("div",{className:"wc-block-price-filter__control wc-block-components-price-slider__control",children:[(0,h.jsx)("label",{className:"wc-block-components-price-slider__label",htmlFor:"maxPriceInput",children:(0,u.__)("Max. Price","woocommerce")}),(0,h.jsx)(m.FormattedMonetaryAmount,{...G,id:"maxPriceInput",className:J("max"),"aria-label":(0,u.__)("Filter products by maximum price","woocommerce"),isAllowed:_({maxConstraint:i,minorUnit:a.minorUnit}),onValueChange:e=>{e!==R&&(P(e),B(E,e,!1))},value:R})]})]}),!w&&!v&&Number.isFinite(e)&&Number.isFinite(t)&&(0,h.jsxs)("div",{className:"wc-block-price-filter__range-text wc-block-components-price-slider__range-text",children:[(0,h.jsx)(m.FormattedMonetaryAmount,{...Z,value:e}),(0,h.jsx)(m.FormattedMonetaryAmount,{...Z,value:t})]}),(0,h.jsxs)("div",{className:"wc-block-components-price-slider__actions",children:[(N||!v&&(e!==r||t!==i))&&(0,h.jsx)(f.A,{onClick:()=>{c([r,i]),q()},screenReaderLabel:(0,u.__)("Reset price filter","woocommerce")}),y&&(0,h.jsx)(b.A,{className:"wc-block-price-filter__button wc-block-components-price-slider__button",isLoading:v,disabled:k||!I,onClick:S,screenReaderLabel:(0,u.__)("Apply price filter","woocommerce")})]})]})};var y=r(3076),x=r(910),k=r(5703),v=r(3832),N=r(5009);const S="ROUND_UP",F="ROUND_DOWN",C=(e,t,r)=>{const n=1*10**t;let i=null;const o=parseFloat(e);isNaN(o)||(r===S?i=Math.ceil(o/n)*n:r===F&&(i=Math.floor(o/n)*n));const s=(0,c.Z)(i,Number.isFinite);return Number.isFinite(i)?i:s};r(3846);var j=r(5179);function E(e,t){return Number(e)*10**t}const A=({attributes:e,isEditor:t=!1})=>{const r=(0,j.LY)(),n=(0,k.getSettingWithCoercion)("hasFilterableProducts",!1,o.isBoolean),i=(0,k.getSettingWithCoercion)("isRenderingPhpTemplate",!1,o.isBoolean),[u,m]=(0,l.useState)(!1),p=(0,N.Vf)("min_price"),b=(0,N.Vf)("max_price"),[_]=(0,s.dJ)(),g=(0,k.getSettingWithCoercion)("queryState",{},o.isObject),{data:f,isLoading:A}=(0,a.A)({queryPrices:!0,queryState:{...g,..._},isEditor:t}),R=(0,x.getCurrencyFromPriceResponse)((0,o.objectHasProp)(f,"price_range")?f.price_range:void 0),[P,U]=(0,s.xd)("min_price"),[L,T]=(0,s.xd)("max_price"),[I,O]=(0,l.useState)(E(p,R.minorUnit)||null),[M,Q]=(0,l.useState)(E(b,R.minorUnit)||null),{minConstraint:B,maxConstraint:q}=(({minPrice:e,maxPrice:t,minorUnit:r})=>({minConstraint:C(e||"",r,F),maxConstraint:C(t||"",r,S)}))({minPrice:(0,o.objectHasProp)(f,"price_range")&&(0,o.objectHasProp)(f.price_range,"min_price")&&(0,o.isString)(f.price_range.min_price)?f.price_range.min_price:void 0,maxPrice:(0,o.objectHasProp)(f,"price_range")&&(0,o.objectHasProp)(f.price_range,"max_price")&&(0,o.isString)(f.price_range.max_price)?f.price_range.max_price:void 0,minorUnit:R.minorUnit});(0,l.useEffect)((()=>{u||(U(E(p,R.minorUnit)),T(E(b,R.minorUnit)),m(!0))}),[R.minorUnit,u,b,p,T,U]);const[V,Y]=(0,l.useState)(A),W=(0,l.useCallback)(((e,t)=>{const r=t>=Number(q)?void 0:t,n=e<=Number(B)?void 0:e;if(window){const e=function(e,t){const r={};for(const[e,n]of Object.entries(t))n?r[e]=n.toString():delete r[e];const n=(0,v.removeQueryArgs)(e,...Object.keys(t));return(0,v.addQueryArgs)(n,r)}(window.location.href,{min_price:n/10**R.minorUnit,max_price:r/10**R.minorUnit});window.location.href!==e&&(0,N.CH)(e)}U(n),T(r)}),[B,q,U,T,R.minorUnit]),H=(0,d.YQ)(W,500),$=(0,l.useCallback)((t=>{Y(!0),t[0]!==I&&O(t[0]),t[1]!==M&&Q(t[1]),i&&u&&!e.showFilterButton&&H(t[0],t[1])}),[I,M,O,Q,i,u,H,e.showFilterButton]);(0,l.useEffect)((()=>{e.showFilterButton||i||H(I,M)}),[I,M,e.showFilterButton,H,i]);const z=(0,c.Z)(P),D=(0,c.Z)(L),K=(0,c.Z)(B),J=(0,c.Z)(q);if((0,l.useEffect)((()=>{(!Number.isFinite(I)||P!==z&&P!==I||B!==K&&B!==I)&&O(Number.isFinite(P)?P:B),(!Number.isFinite(M)||L!==D&&L!==M||q!==J&&q!==M)&&Q(Number.isFinite(L)?L:q)}),[I,M,P,L,B,q,K,J,z,D]),!n)return r(!1),null;if(!A&&(null===B||null===q||B===q))return r(!1),null;const Z=`h${e.headingLevel}`;r(!0),!A&&V&&Y(!1);const G=(0,h.jsx)(Z,{className:"wc-block-price-filter__title",children:e.heading}),X=A&&V?(0,h.jsx)(y.A,{children:G}):G;return(0,h.jsxs)(h.Fragment,{children:[!t&&e.heading&&X,(0,h.jsx)("div",{className:"wc-block-price-slider",children:(0,h.jsx)(w,{minConstraint:B,maxConstraint:q,minPrice:I,maxPrice:M,currency:R,showInputFields:e.showInputFields,inlineInput:e.inlineInput,showFilterButton:e.showFilterButton,onChange:$,onSubmit:()=>W(I,M),isLoading:A,isUpdating:V,isEditor:t})})]})},R=JSON.parse('{"uK":{"F8":{"A":3}}}'),P=e=>{const t=(0,i.p)(e),r=(c=e,{heading:(0,o.isString)(c?.heading)?c.heading:"",headingLevel:(0,o.isString)(c?.headingLevel)&&parseInt(c.headingLevel,10)||R.uK.F8.A,showFilterButton:"true"===c?.showFilterButton,showInputFields:"false"!==c?.showInputFields,inlineInput:"true"===c?.inlineInput});var c;return(0,h.jsx)("div",{className:(0,n.A)((0,o.isString)(e.className)?e.className:"",t.className),style:t.style,children:(0,h.jsx)(A,{isEditor:!1,attributes:r})})}},5009:(e,t,r)=>{"use strict";r.d(t,{CH:()=>u,Q:()=>m,Vf:()=>l,nD:()=>a,xB:()=>s});var n=r(3832),i=r(5703),o=r(3993);const c=(0,i.getSettingWithCoercion)("isRenderingPhpTemplate",!1,o.isBoolean),s="query_type_",a="filter_";function l(e){return window?(0,n.getQueryArg)(window.location.href,e):null}function u(e){if(c){const t=new URL(e);t.pathname=t.pathname.replace(/\/page\/[0-9]+/i,""),t.searchParams.delete("paged"),t.searchParams.forEach(((e,r)=>{r.match(/^query(?:-[0-9]+)?-page$/)&&t.searchParams.delete(r)})),window.location.href=t.href}else window.history.replaceState({},"",e)}const m=e=>{const t=(0,n.getQueryArgs)(e);return(0,n.addQueryArgs)(e,t)}},9300:()=>{},7165:()=>{},874:()=>{},6599:()=>{},3846:()=>{}}]);
=======
(self.webpackChunkwebpackWcBlocksFrontendJsonp=self.webpackChunkwebpackWcBlocksFrontendJsonp||[]).push([[515],{5659:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(1609);r(1626);const i=({children:e})=>(0,n.createElement)("div",{className:"wc-block-filter-title-placeholder"},e)},9454:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(1609),i=r(7723),o=r(851),c=r(4656);r(8335);const l=({className:e,
/* translators: Reset button text for filters. */
label:t=(0,i.__)("Reset","woocommerce"),onClick:r,screenReaderLabel:l=(0,i.__)("Reset filter","woocommerce")})=>(0,n.createElement)("button",{className:(0,o.A)("wc-block-components-filter-reset-button",e),onClick:r},(0,n.createElement)(c.Label,{label:t,screenReaderLabel:l}))},7033:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(1609),i=r(7723),o=r(851),c=r(4656);r(1504);const l=({className:e,isLoading:t,disabled:r,
/* translators: Submit button text for filters. */
label:l=(0,i.__)("Apply","woocommerce"),onClick:a,screenReaderLabel:s=(0,i.__)("Apply filter","woocommerce")})=>(0,n.createElement)("button",{type:"submit",className:(0,o.A)("wp-block-button__link","wc-block-filter-submit-button","wc-block-components-filter-submit-button",{"is-loading":t},e),disabled:r,onClick:a},(0,n.createElement)(c.Label,{label:l,screenReaderLabel:s}))},4785:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var n=r(6087),i=r(4717),o=r(3993),c=r(5574),l=r(7901),a=r(3122),s=r(5372),u=r(3244);const m=({queryAttribute:e,queryPrices:t,queryStock:r,queryRating:m,queryState:d,isEditor:p=!1})=>{let b=(0,u._)();b=`${b}-collection-data`;const[_]=(0,a.dJ)(b),[f,g]=(0,a.xd)("calculate_attribute_counts",[],b),[v,w]=(0,a.xd)("calculate_price_range",null,b),[h,y]=(0,a.xd)("calculate_stock_status_counts",null,b),[k,E]=(0,a.xd)("calculate_rating_counts",null,b),x=(0,l.c)(e||{}),N=(0,l.c)(t),S=(0,l.c)(r),F=(0,l.c)(m);(0,n.useEffect)((()=>{"object"==typeof x&&Object.keys(x).length&&(f.find((e=>(0,o.objectHasProp)(x,"taxonomy")&&e.taxonomy===x.taxonomy))||g([...f,x]))}),[x,f,g]),(0,n.useEffect)((()=>{v!==N&&void 0!==N&&w(N)}),[N,w,v]),(0,n.useEffect)((()=>{h!==S&&void 0!==S&&y(S)}),[S,y,h]),(0,n.useEffect)((()=>{k!==F&&void 0!==F&&E(F)}),[F,E,k]);const[C,A]=(0,n.useState)(p),[R]=(0,i.d7)(C,200);C||A(!0);const P=(0,n.useMemo)((()=>(e=>{const t=e;return Array.isArray(e.calculate_attribute_counts)&&(t.calculate_attribute_counts=(0,c.di)(e.calculate_attribute_counts.map((({taxonomy:e,queryType:t})=>({taxonomy:e,query_type:t})))).asc(["taxonomy","query_type"])),t})(_)),[_]),{results:U,isLoading:L}=(0,s.G)({namespace:"/wc/store/v1",resourceName:"products/collection-data",query:{...d,page:void 0,per_page:void 0,orderby:void 0,order:void 0,...P},shouldSelect:R});return{data:U,isLoading:L}}},5372:(e,t,r)=>{"use strict";r.d(t,{G:()=>s});var n=r(7594),i=r(7143),o=r(6087),c=r(7901),l=r(3271),a=r(3993);const s=e=>{const{namespace:t,resourceName:r,resourceValues:s=[],query:u={},shouldSelect:m=!0}=e;if(!t||!r)throw new Error("The options object must have valid values for the namespace and the resource properties.");const d=(0,o.useRef)({results:[],isLoading:!0}),p=(0,c.c)(u),b=(0,c.c)(s),_=(0,l.a)(),f=(0,i.useSelect)((e=>{if(!m)return null;const i=e(n.COLLECTIONS_STORE_KEY),o=[t,r,p,b],c=i.getCollectionError(...o);if(c){if(!(0,a.isError)(c))throw new Error("TypeError: `error` object is not an instance of Error constructor");_(c)}return{results:i.getCollection(...o),isLoading:!i.hasFinishedResolution("getCollection",o)}}),[t,r,b,p,m,_]);return null!==f&&(d.current=f),d.current}},3122:(e,t,r)=>{"use strict";r.d(t,{dJ:()=>l,xd:()=>a});var n=r(7594),i=r(7143),o=r(6087),c=(r(923),r(3244));const l=e=>{const t=(0,c._)();e=e||t;const r=(0,i.useSelect)((t=>t(n.QUERY_STATE_STORE_KEY).getValueForQueryContext(e,void 0)),[e]),{setValueForQueryContext:l}=(0,i.useDispatch)(n.QUERY_STATE_STORE_KEY);return[r,(0,o.useCallback)((t=>{l(e,t)}),[e,l])]},a=(e,t,r)=>{const l=(0,c._)();r=r||l;const a=(0,i.useSelect)((i=>i(n.QUERY_STATE_STORE_KEY).getValueForQueryKey(r,e,t)),[r,e]),{setQueryValue:s}=(0,i.useDispatch)(n.QUERY_STATE_STORE_KEY);return[a,(0,o.useCallback)((t=>{s(r,e,t)}),[r,e,s])]}},3244:(e,t,r)=>{"use strict";r.d(t,{_:()=>o});var n=r(6087);const i=(0,n.createContext)("page"),o=()=>(0,n.useContext)(i);i.Provider},4015:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(6087);function i(e,t){const r=(0,n.useRef)();return(0,n.useEffect)((()=>{r.current===e||t&&!t(e,r.current)||(r.current=e)}),[e,t]),r.current}},7901:(e,t,r)=>{"use strict";r.d(t,{c:()=>c});var n=r(6087),i=r(923),o=r.n(i);function c(e){const t=(0,n.useRef)(e);return o()(e,t.current)||(t.current=e),t.current}},4487:(e,t,r)=>{"use strict";r.d(t,{p:()=>s});var n=r(851),i=r(3993),o=r(1194),c=r(9786);function l(e={}){const t={};return(0,c.getCSSRules)(e,{selector:""}).forEach((e=>{t[e.key]=e.value})),t}function a(e,t){return e&&t?`has-${(0,o.c)(t)}-${e}`:""}const s=e=>{const t=(e=>{const t=(0,i.isObject)(e)?e:{style:{}};let r=t.style;return(0,i.isString)(r)&&(r=JSON.parse(r)||{}),(0,i.isObject)(r)||(r={}),{...t,style:r}})(e),r=function(e){var t,r,o,c,s,u;const{backgroundColor:m,textColor:d,gradient:p,style:b}=e,_=a("background-color",m),f=a("color",d),g=function(e){if(e)return`has-${e}-gradient-background`}(p),v=g||(null==b||null===(t=b.color)||void 0===t?void 0:t.gradient);return{className:(0,n.A)(f,g,{[_]:!v&&!!_,"has-text-color":d||(null==b||null===(r=b.color)||void 0===r?void 0:r.text),"has-background":m||(null==b||null===(o=b.color)||void 0===o?void 0:o.background)||p||(null==b||null===(c=b.color)||void 0===c?void 0:c.gradient),"has-link-color":(0,i.isObject)(null==b||null===(s=b.elements)||void 0===s?void 0:s.link)?null==b||null===(u=b.elements)||void 0===u||null===(u=u.link)||void 0===u?void 0:u.color:void 0}),style:l({color:(null==b?void 0:b.color)||{}})}}(t),o=function(e){var t;const r=(null===(t=e.style)||void 0===t?void 0:t.border)||{};return{className:function(e){var t;const{borderColor:r,style:i}=e,o=r?a("border-color",r):"";return(0,n.A)({"has-border-color":!!r||!(null==i||null===(t=i.border)||void 0===t||!t.color),[o]:!!o})}(e),style:l({border:r})}}(t),c=function(e){var t;return{className:void 0,style:l({spacing:(null===(t=e.style)||void 0===t?void 0:t.spacing)||{}})}}(t),s=(e=>{const t=(0,i.isObject)(e.style.typography)?e.style.typography:{},r=(0,i.isString)(t.fontFamily)?t.fontFamily:"";return{className:e.fontFamily?`has-${e.fontFamily}-font-family`:r,style:{fontSize:e.fontSize?`var(--wp--preset--font-size--${e.fontSize})`:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight,letterSpacing:t.letterSpacing,lineHeight:t.lineHeight,textDecoration:t.textDecoration,textTransform:t.textTransform}}})(t);return{className:(0,n.A)(s.className,r.className,o.className,c.className),style:{...s.style,...r.style,...o.style,...c.style}}}},3271:(e,t,r)=>{"use strict";r.d(t,{a:()=>i});var n=r(6087);const i=()=>{const[,e]=(0,n.useState)();return(0,n.useCallback)((t=>{e((()=>{throw t}))}),[])}},6059:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>U});var n=r(1609),i=r(851),o=r(4487),c=r(3993),l=r(4015),a=r(3122),s=r(4785),u=r(6087),m=r(7723),d=r(4656),p=r(4717);r(9505);const b=(e,t,r,n=1,i=!1)=>{let[o,c]=e;const l=e=>Number.isFinite(e);return l(o)||(o=t||0),l(c)||(c=r||n),l(t)&&t>o&&(o=t),l(r)&&r<=o&&(o=r-n),l(t)&&t>=c&&(c=t+n),l(r)&&r<c&&(c=r),!i&&o>=c&&(o=c-n),i&&c<=o&&(c=o+n),[o,c]};var _=r(7033);const f=({maxConstraint:e,minorUnit:t})=>({floatValue:r})=>void 0!==r&&r<=e/10**t&&r>0,g=({minConstraint:e,currentMaxValue:t,minorUnit:r})=>({floatValue:n})=>void 0!==n&&n>=e/10**r&&n<t/10**r;var v=r(9454);const w=({minPrice:e,maxPrice:t,minConstraint:r,maxConstraint:o,onChange:l,step:a,currency:s,showInputFields:w=!0,showFilterButton:h=!1,inlineInput:y=!0,isLoading:k=!1,isUpdating:E=!1,isEditor:x=!1,onSubmit:N=()=>{}})=>{const S=(0,u.useRef)(null),F=(0,u.useRef)(null),C=a||10**s.minorUnit,[A,R]=(0,u.useState)(e),[P,U]=(0,u.useState)(t),L=(0,u.useRef)(null),[I,T]=(0,u.useState)(0);(0,u.useEffect)((()=>{R(e)}),[e]),(0,u.useEffect)((()=>{U(t)}),[t]),(0,u.useLayoutEffect)((()=>{var e;y&&L.current&&T(null===(e=L.current)||void 0===e?void 0:e.offsetWidth)}),[y,T]);const O=(0,u.useMemo)((()=>isFinite(r)&&isFinite(o)),[r,o]),M=(0,u.useMemo)((()=>isFinite(e)&&isFinite(t)&&O?{"--low":(e-r)/(o-r)*100+"%","--high":(t-r)/(o-r)*100+"%"}:{"--low":"0%","--high":"100%"}),[e,t,r,o,O]),j=(0,u.useCallback)((e=>{if(k||!O||!S.current||!F.current)return;const t=e.target.getBoundingClientRect(),r=e.clientX-t.left,n=S.current.offsetWidth,i=+S.current.value,c=F.current.offsetWidth,l=+F.current.value,a=n*(i/o),s=c*(l/o);Math.abs(r-a)>Math.abs(r-s)?(S.current.style.zIndex="20",F.current.style.zIndex="21"):(S.current.style.zIndex="21",F.current.style.zIndex="20")}),[k,o,O]),Q=(0,u.useCallback)((n=>{const i=n.target.classList.contains("wc-block-price-filter__range-input--min"),c=+n.target.value,a=i?[Math.round(c/C)*C,t]:[e,Math.round(c/C)*C],s=b(a,r,o,C,i);l(s)}),[l,e,t,r,o,C]),B=(0,p.YQ)(((e,t,r)=>{if(e>=t){const e=b([0,t],null,null,C,r);return l([parseInt(e[0],10),parseInt(e[1],10)])}const n=b([e,t],null,null,C,r);l(n)}),1e3),q=(0,p.YQ)(N,600),V=(0,i.A)("wc-block-price-filter","wc-block-components-price-slider",w&&"wc-block-price-filter--has-input-fields",w&&"wc-block-components-price-slider--has-input-fields",h&&"wc-block-price-filter--has-filter-button",h&&"wc-block-components-price-slider--has-filter-button",!O&&"is-disabled",(y||I<=300)&&"wc-block-components-price-slider--is-input-inline"),Y=(0,c.isObject)(S.current)?S.current.ownerDocument.activeElement:void 0,W=Y&&Y===S.current?C:1,H=Y&&Y===F.current?C:1,$=String(A/10**s.minorUnit),z=String(P/10**s.minorUnit),D=y&&I>300,K=(0,n.createElement)("div",{className:(0,i.A)("wc-block-price-filter__range-input-wrapper","wc-block-components-price-slider__range-input-wrapper",{"is-loading":k&&E}),onMouseMove:j,onFocus:j},O&&(0,n.createElement)("div",{"aria-hidden":w},(0,n.createElement)("div",{className:"wc-block-price-filter__range-input-progress wc-block-components-price-slider__range-input-progress",style:M}),(0,n.createElement)("input",{type:"range",className:"wc-block-price-filter__range-input wc-block-price-filter__range-input--min wc-block-components-price-slider__range-input wc-block-components-price-slider__range-input--min","aria-label":(0,m.__)("Filter products by minimum price","woocommerce"),"aria-valuetext":$,value:Number.isFinite(e)?e:r,onChange:Q,step:W,min:r,max:o,ref:S,disabled:k&&!O,tabIndex:w?-1:0}),(0,n.createElement)("input",{type:"range",className:"wc-block-price-filter__range-input wc-block-price-filter__range-input--max wc-block-components-price-slider__range-input wc-block-components-price-slider__range-input--max","aria-label":(0,m.__)("Filter products by maximum price","woocommerce"),"aria-valuetext":z,value:Number.isFinite(t)?t:o,onChange:Q,step:H,min:r,max:o,ref:F,disabled:k,tabIndex:w?-1:0}))),J=e=>`wc-block-price-filter__amount wc-block-price-filter__amount--${e} wc-block-form-text-input wc-block-components-price-slider__amount wc-block-components-price-slider__amount--${e}`,Z={currency:s,decimalScale:0},G={...Z,displayType:"input",allowNegative:!1,disabled:k||!O,onClick:e=>{const t=e.currentTarget;t&&t.select()}};return(0,n.createElement)("div",{className:V,ref:L},(!D||!w)&&K,w&&(0,n.createElement)("div",{className:"wc-block-price-filter__controls wc-block-components-price-slider__controls"},E?(0,n.createElement)("div",{className:"input-loading"}):(0,n.createElement)("div",{className:"wc-block-price-filter__control wc-block-components-price-slider__control"},(0,n.createElement)("label",{className:"wc-block-components-price-slider__label",htmlFor:"minPriceInput"},(0,m.__)("Min. Price","woocommerce")),(0,n.createElement)(d.FormattedMonetaryAmount,{...G,id:"minPriceInput",className:J("min"),"aria-label":(0,m.__)("Filter products by minimum price","woocommerce"),isAllowed:g({minConstraint:r,minorUnit:s.minorUnit,currentMaxValue:P}),onValueChange:e=>{e!==A&&(R(e),B(e,P,!0))},value:A})),D&&K,E?(0,n.createElement)("div",{className:"input-loading"}):(0,n.createElement)("div",{className:"wc-block-price-filter__control wc-block-components-price-slider__control"},(0,n.createElement)("label",{className:"wc-block-components-price-slider__label",htmlFor:"maxPriceInput"},(0,m.__)("Max. Price","woocommerce")),(0,n.createElement)(d.FormattedMonetaryAmount,{...G,id:"maxPriceInput",className:J("max"),"aria-label":(0,m.__)("Filter products by maximum price","woocommerce"),isAllowed:f({maxConstraint:o,minorUnit:s.minorUnit}),onValueChange:e=>{e!==P&&(U(e),B(A,e,!1))},value:P}))),!w&&!E&&Number.isFinite(e)&&Number.isFinite(t)&&(0,n.createElement)("div",{className:"wc-block-price-filter__range-text wc-block-components-price-slider__range-text"},(0,n.createElement)(d.FormattedMonetaryAmount,{...Z,value:e}),(0,n.createElement)(d.FormattedMonetaryAmount,{...Z,value:t})),(0,n.createElement)("div",{className:"wc-block-components-price-slider__actions"},(x||!E&&(e!==r||t!==o))&&(0,n.createElement)(v.A,{onClick:()=>{l([r,o]),q()},screenReaderLabel:(0,m.__)("Reset price filter","woocommerce")}),h&&(0,n.createElement)(_.A,{className:"wc-block-price-filter__button wc-block-components-price-slider__button",isLoading:E,disabled:k||!O,onClick:N,screenReaderLabel:(0,m.__)("Apply price filter","woocommerce")})))};var h=r(5659),y=r(8529),k=r(5703),E=r(3832),x=r(3966);const N="ROUND_UP",S="ROUND_DOWN",F=(e,t,r)=>{const n=1*10**t;let i=null;const o=parseFloat(e);isNaN(o)||(r===N?i=Math.ceil(o/n)*n:r===S&&(i=Math.floor(o/n)*n));const c=(0,l.Z)(i,Number.isFinite);return Number.isFinite(i)?i:c};r(8836);var C=r(4548);function A(e,t){return Number(e)*10**t}const R=({attributes:e,isEditor:t=!1})=>{const r=(0,C.LY)(),i=(0,k.getSettingWithCoercion)("hasFilterableProducts",!1,c.isBoolean),o=(0,k.getSettingWithCoercion)("isRenderingPhpTemplate",!1,c.isBoolean),[m,d]=(0,u.useState)(!1),b=(0,x.Vf)("min_price"),_=(0,x.Vf)("max_price"),[f]=(0,a.dJ)(),g=(0,k.getSettingWithCoercion)("queryState",{},c.isObject),{data:v,isLoading:R}=(0,s.A)({queryPrices:!0,queryState:{...g,...f},isEditor:t}),P=(0,y.getCurrencyFromPriceResponse)((0,c.objectHasProp)(v,"price_range")?v.price_range:void 0),[U,L]=(0,a.xd)("min_price"),[I,T]=(0,a.xd)("max_price"),[O,M]=(0,u.useState)(A(b,P.minorUnit)||null),[j,Q]=(0,u.useState)(A(_,P.minorUnit)||null),{minConstraint:B,maxConstraint:q}=(({minPrice:e,maxPrice:t,minorUnit:r})=>({minConstraint:F(e||"",r,S),maxConstraint:F(t||"",r,N)}))({minPrice:(0,c.objectHasProp)(v,"price_range")&&(0,c.objectHasProp)(v.price_range,"min_price")&&(0,c.isString)(v.price_range.min_price)?v.price_range.min_price:void 0,maxPrice:(0,c.objectHasProp)(v,"price_range")&&(0,c.objectHasProp)(v.price_range,"max_price")&&(0,c.isString)(v.price_range.max_price)?v.price_range.max_price:void 0,minorUnit:P.minorUnit});(0,u.useEffect)((()=>{m||(L(A(b,P.minorUnit)),T(A(_,P.minorUnit)),d(!0))}),[P.minorUnit,m,_,b,T,L]);const[V,Y]=(0,u.useState)(R),W=(0,u.useCallback)(((e,t)=>{const r=t>=Number(q)?void 0:t,n=e<=Number(B)?void 0:e;if(window){const e=function(e,t){const r={};for(const[e,n]of Object.entries(t))n?r[e]=n.toString():delete r[e];const n=(0,E.removeQueryArgs)(e,...Object.keys(t));return(0,E.addQueryArgs)(n,r)}(window.location.href,{min_price:n/10**P.minorUnit,max_price:r/10**P.minorUnit});window.location.href!==e&&(0,x.CH)(e)}L(n),T(r)}),[B,q,L,T,P.minorUnit]),H=(0,p.YQ)(W,500),$=(0,u.useCallback)((t=>{Y(!0),t[0]!==O&&M(t[0]),t[1]!==j&&Q(t[1]),o&&m&&!e.showFilterButton&&H(t[0],t[1])}),[O,j,M,Q,o,m,H,e.showFilterButton]);(0,u.useEffect)((()=>{e.showFilterButton||o||H(O,j)}),[O,j,e.showFilterButton,H,o]);const z=(0,l.Z)(U),D=(0,l.Z)(I),K=(0,l.Z)(B),J=(0,l.Z)(q);if((0,u.useEffect)((()=>{(!Number.isFinite(O)||U!==z&&U!==O||B!==K&&B!==O)&&M(Number.isFinite(U)?U:B),(!Number.isFinite(j)||I!==D&&I!==j||q!==J&&q!==j)&&Q(Number.isFinite(I)?I:q)}),[O,j,U,I,B,q,K,J,z,D]),!i)return r(!1),null;if(!R&&(null===B||null===q||B===q))return r(!1),null;const Z=`h${e.headingLevel}`;r(!0),!R&&V&&Y(!1);const G=(0,n.createElement)(Z,{className:"wc-block-price-filter__title"},e.heading),X=R&&V?(0,n.createElement)(h.A,null,G):G;return(0,n.createElement)(n.Fragment,null,!t&&e.heading&&X,(0,n.createElement)("div",{className:"wc-block-price-slider"},(0,n.createElement)(w,{minConstraint:B,maxConstraint:q,minPrice:O,maxPrice:j,currency:P,showInputFields:e.showInputFields,inlineInput:e.inlineInput,showFilterButton:e.showFilterButton,onChange:$,onSubmit:()=>W(O,j),isLoading:R,isUpdating:V,isEditor:t})))},P=JSON.parse('{"uK":{"F8":{"A":3}}}'),U=e=>{const t=(0,o.p)(e),r=(l=e,{heading:(0,c.isString)(null==l?void 0:l.heading)?l.heading:"",headingLevel:(0,c.isString)(null==l?void 0:l.headingLevel)&&parseInt(l.headingLevel,10)||P.uK.F8.A,showFilterButton:"true"===(null==l?void 0:l.showFilterButton),showInputFields:"false"!==(null==l?void 0:l.showInputFields),inlineInput:"true"===(null==l?void 0:l.inlineInput)});var l;return(0,n.createElement)("div",{className:(0,i.A)((0,c.isString)(e.className)?e.className:"",t.className),style:t.style},(0,n.createElement)(R,{isEditor:!1,attributes:r}))}},3966:(e,t,r)=>{"use strict";r.d(t,{CH:()=>u,Q:()=>m,Vf:()=>s,nD:()=>a,xB:()=>l});var n=r(3832),i=r(5703),o=r(3993);const c=(0,i.getSettingWithCoercion)("isRenderingPhpTemplate",!1,o.isBoolean),l="query_type_",a="filter_";function s(e){return window?(0,n.getQueryArg)(window.location.href,e):null}function u(e){if(c){const t=new URL(e);t.pathname=t.pathname.replace(/\/page\/[0-9]+/i,""),t.searchParams.delete("paged"),t.searchParams.forEach(((e,r)=>{r.match(/^query(?:-[0-9]+)?-page$/)&&t.searchParams.delete(r)})),window.location.href=t.href}else window.history.replaceState({},"",e)}const m=e=>{const t=(0,n.getQueryArgs)(e);return(0,n.addQueryArgs)(e,t)}},1626:()=>{},8335:()=>{},1504:()=>{},9505:()=>{},8836:()=>{}}]);
>>>>>>> b1eea7a (Merged existing code from https://dev-vices.rafaeldeveloper.co)
